var C4=Object.defineProperty;var b4=(n,e,t)=>e in n?C4(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var si=(n,e,t)=>b4(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();function wC(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var TE={exports:{}},k0={},ME={exports:{}},Bn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zP;function R4(){if(zP)return Bn;zP=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),h=Symbol.iterator;function p(J){return J===null||typeof J!="object"?null:(J=h&&J[h]||J["@@iterator"],typeof J=="function"?J:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,w={};function S(J,se,me){this.props=J,this.context=se,this.refs=w,this.updater=me||v}S.prototype.isReactComponent={},S.prototype.setState=function(J,se){if(typeof J!="object"&&typeof J!="function"&&J!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,J,se,"setState")},S.prototype.forceUpdate=function(J){this.updater.enqueueForceUpdate(this,J,"forceUpdate")};function A(){}A.prototype=S.prototype;function b(J,se,me){this.props=J,this.context=se,this.refs=w,this.updater=me||v}var C=b.prototype=new A;C.constructor=b,_(C,S.prototype),C.isPureReactComponent=!0;var P=Array.isArray,k=Object.prototype.hasOwnProperty,L={current:null},N={key:!0,ref:!0,__self:!0,__source:!0};function O(J,se,me){var Se,ke={},Ie=null,ze=null;if(se!=null)for(Se in se.ref!==void 0&&(ze=se.ref),se.key!==void 0&&(Ie=""+se.key),se)k.call(se,Se)&&!N.hasOwnProperty(Se)&&(ke[Se]=se[Se]);var je=arguments.length-2;if(je===1)ke.children=me;else if(1<je){for(var at=Array(je),ut=0;ut<je;ut++)at[ut]=arguments[ut+2];ke.children=at}if(J&&J.defaultProps)for(Se in je=J.defaultProps,je)ke[Se]===void 0&&(ke[Se]=je[Se]);return{$$typeof:n,type:J,key:Ie,ref:ze,props:ke,_owner:L.current}}function D(J,se){return{$$typeof:n,type:J.type,key:se,ref:J.ref,props:J.props,_owner:J._owner}}function U(J){return typeof J=="object"&&J!==null&&J.$$typeof===n}function X(J){var se={"=":"=0",":":"=2"};return"$"+J.replace(/[=:]/g,function(me){return se[me]})}var Z=/\/+/g;function he(J,se){return typeof J=="object"&&J!==null&&J.key!=null?X(""+J.key):se.toString(36)}function Q(J,se,me,Se,ke){var Ie=typeof J;(Ie==="undefined"||Ie==="boolean")&&(J=null);var ze=!1;if(J===null)ze=!0;else switch(Ie){case"string":case"number":ze=!0;break;case"object":switch(J.$$typeof){case n:case e:ze=!0}}if(ze)return ze=J,ke=ke(ze),J=Se===""?"."+he(ze,0):Se,P(ke)?(me="",J!=null&&(me=J.replace(Z,"$&/")+"/"),Q(ke,se,me,"",function(ut){return ut})):ke!=null&&(U(ke)&&(ke=D(ke,me+(!ke.key||ze&&ze.key===ke.key?"":(""+ke.key).replace(Z,"$&/")+"/")+J)),se.push(ke)),1;if(ze=0,Se=Se===""?".":Se+":",P(J))for(var je=0;je<J.length;je++){Ie=J[je];var at=Se+he(Ie,je);ze+=Q(Ie,se,me,at,ke)}else if(at=p(J),typeof at=="function")for(J=at.call(J),je=0;!(Ie=J.next()).done;)Ie=Ie.value,at=Se+he(Ie,je++),ze+=Q(Ie,se,me,at,ke);else if(Ie==="object")throw se=String(J),Error("Objects are not valid as a React child (found: "+(se==="[object Object]"?"object with keys {"+Object.keys(J).join(", ")+"}":se)+"). If you meant to render a collection of children, use an array instead.");return ze}function ue(J,se,me){if(J==null)return J;var Se=[],ke=0;return Q(J,Se,"","",function(Ie){return se.call(me,Ie,ke++)}),Se}function re(J){if(J._status===-1){var se=J._result;se=se(),se.then(function(me){(J._status===0||J._status===-1)&&(J._status=1,J._result=me)},function(me){(J._status===0||J._status===-1)&&(J._status=2,J._result=me)}),J._status===-1&&(J._status=0,J._result=se)}if(J._status===1)return J._result.default;throw J._result}var ye={current:null},$={transition:null},oe={ReactCurrentDispatcher:ye,ReactCurrentBatchConfig:$,ReactCurrentOwner:L};function W(){throw Error("act(...) is not supported in production builds of React.")}return Bn.Children={map:ue,forEach:function(J,se,me){ue(J,function(){se.apply(this,arguments)},me)},count:function(J){var se=0;return ue(J,function(){se++}),se},toArray:function(J){return ue(J,function(se){return se})||[]},only:function(J){if(!U(J))throw Error("React.Children.only expected to receive a single React element child.");return J}},Bn.Component=S,Bn.Fragment=t,Bn.Profiler=r,Bn.PureComponent=b,Bn.StrictMode=i,Bn.Suspense=l,Bn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oe,Bn.act=W,Bn.cloneElement=function(J,se,me){if(J==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+J+".");var Se=_({},J.props),ke=J.key,Ie=J.ref,ze=J._owner;if(se!=null){if(se.ref!==void 0&&(Ie=se.ref,ze=L.current),se.key!==void 0&&(ke=""+se.key),J.type&&J.type.defaultProps)var je=J.type.defaultProps;for(at in se)k.call(se,at)&&!N.hasOwnProperty(at)&&(Se[at]=se[at]===void 0&&je!==void 0?je[at]:se[at])}var at=arguments.length-2;if(at===1)Se.children=me;else if(1<at){je=Array(at);for(var ut=0;ut<at;ut++)je[ut]=arguments[ut+2];Se.children=je}return{$$typeof:n,type:J.type,key:ke,ref:Ie,props:Se,_owner:ze}},Bn.createContext=function(J){return J={$$typeof:o,_currentValue:J,_currentValue2:J,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},J.Provider={$$typeof:s,_context:J},J.Consumer=J},Bn.createElement=O,Bn.createFactory=function(J){var se=O.bind(null,J);return se.type=J,se},Bn.createRef=function(){return{current:null}},Bn.forwardRef=function(J){return{$$typeof:a,render:J}},Bn.isValidElement=U,Bn.lazy=function(J){return{$$typeof:d,_payload:{_status:-1,_result:J},_init:re}},Bn.memo=function(J,se){return{$$typeof:u,type:J,compare:se===void 0?null:se}},Bn.startTransition=function(J){var se=$.transition;$.transition={};try{J()}finally{$.transition=se}},Bn.unstable_act=W,Bn.useCallback=function(J,se){return ye.current.useCallback(J,se)},Bn.useContext=function(J){return ye.current.useContext(J)},Bn.useDebugValue=function(){},Bn.useDeferredValue=function(J){return ye.current.useDeferredValue(J)},Bn.useEffect=function(J,se){return ye.current.useEffect(J,se)},Bn.useId=function(){return ye.current.useId()},Bn.useImperativeHandle=function(J,se,me){return ye.current.useImperativeHandle(J,se,me)},Bn.useInsertionEffect=function(J,se){return ye.current.useInsertionEffect(J,se)},Bn.useLayoutEffect=function(J,se){return ye.current.useLayoutEffect(J,se)},Bn.useMemo=function(J,se){return ye.current.useMemo(J,se)},Bn.useReducer=function(J,se,me){return ye.current.useReducer(J,se,me)},Bn.useRef=function(J){return ye.current.useRef(J)},Bn.useState=function(J){return ye.current.useState(J)},Bn.useSyncExternalStore=function(J,se,me){return ye.current.useSyncExternalStore(J,se,me)},Bn.useTransition=function(){return ye.current.useTransition()},Bn.version="18.3.1",Bn}var VP;function GA(){return VP||(VP=1,ME.exports=R4()),ME.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WP;function P4(){if(WP)return k0;WP=1;var n=GA(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,r=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(a,l,u){var d,h={},p=null,v=null;u!==void 0&&(p=""+u),l.key!==void 0&&(p=""+l.key),l.ref!==void 0&&(v=l.ref);for(d in l)i.call(l,d)&&!s.hasOwnProperty(d)&&(h[d]=l[d]);if(a&&a.defaultProps)for(d in l=a.defaultProps,l)h[d]===void 0&&(h[d]=l[d]);return{$$typeof:e,type:a,key:p,ref:v,props:h,_owner:r.current}}return k0.Fragment=t,k0.jsx=o,k0.jsxs=o,k0}var qP;function I4(){return qP||(qP=1,TE.exports=P4()),TE.exports}var V=I4(),ie=GA();const _d=wC(ie);var ix={},CE={exports:{}},vo={},bE={exports:{}},RE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JP;function D4(){return JP||(JP=1,(function(n){function e($,oe){var W=$.length;$.push(oe);e:for(;0<W;){var J=W-1>>>1,se=$[J];if(0<r(se,oe))$[J]=oe,$[W]=se,W=J;else break e}}function t($){return $.length===0?null:$[0]}function i($){if($.length===0)return null;var oe=$[0],W=$.pop();if(W!==oe){$[0]=W;e:for(var J=0,se=$.length,me=se>>>1;J<me;){var Se=2*(J+1)-1,ke=$[Se],Ie=Se+1,ze=$[Ie];if(0>r(ke,W))Ie<se&&0>r(ze,ke)?($[J]=ze,$[Ie]=W,J=Ie):($[J]=ke,$[Se]=W,J=Se);else if(Ie<se&&0>r(ze,W))$[J]=ze,$[Ie]=W,J=Ie;else break e}}return oe}function r($,oe){var W=$.sortIndex-oe.sortIndex;return W!==0?W:$.id-oe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],u=[],d=1,h=null,p=3,v=!1,_=!1,w=!1,S=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C($){for(var oe=t(u);oe!==null;){if(oe.callback===null)i(u);else if(oe.startTime<=$)i(u),oe.sortIndex=oe.expirationTime,e(l,oe);else break;oe=t(u)}}function P($){if(w=!1,C($),!_)if(t(l)!==null)_=!0,re(k);else{var oe=t(u);oe!==null&&ye(P,oe.startTime-$)}}function k($,oe){_=!1,w&&(w=!1,A(O),O=-1),v=!0;var W=p;try{for(C(oe),h=t(l);h!==null&&(!(h.expirationTime>oe)||$&&!X());){var J=h.callback;if(typeof J=="function"){h.callback=null,p=h.priorityLevel;var se=J(h.expirationTime<=oe);oe=n.unstable_now(),typeof se=="function"?h.callback=se:h===t(l)&&i(l),C(oe)}else i(l);h=t(l)}if(h!==null)var me=!0;else{var Se=t(u);Se!==null&&ye(P,Se.startTime-oe),me=!1}return me}finally{h=null,p=W,v=!1}}var L=!1,N=null,O=-1,D=5,U=-1;function X(){return!(n.unstable_now()-U<D)}function Z(){if(N!==null){var $=n.unstable_now();U=$;var oe=!0;try{oe=N(!0,$)}finally{oe?he():(L=!1,N=null)}}else L=!1}var he;if(typeof b=="function")he=function(){b(Z)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,ue=Q.port2;Q.port1.onmessage=Z,he=function(){ue.postMessage(null)}}else he=function(){S(Z,0)};function re($){N=$,L||(L=!0,he())}function ye($,oe){O=S(function(){$(n.unstable_now())},oe)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function($){$.callback=null},n.unstable_continueExecution=function(){_||v||(_=!0,re(k))},n.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<$?Math.floor(1e3/$):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function($){switch(p){case 1:case 2:case 3:var oe=3;break;default:oe=p}var W=p;p=oe;try{return $()}finally{p=W}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function($,oe){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var W=p;p=$;try{return oe()}finally{p=W}},n.unstable_scheduleCallback=function($,oe,W){var J=n.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?J+W:J):W=J,$){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=W+se,$={id:d++,callback:oe,priorityLevel:$,startTime:W,expirationTime:se,sortIndex:-1},W>J?($.sortIndex=W,e(u,$),t(l)===null&&$===t(u)&&(w?(A(O),O=-1):w=!0,ye(P,W-J))):($.sortIndex=se,e(l,$),_||v||(_=!0,re(k))),$},n.unstable_shouldYield=X,n.unstable_wrapCallback=function($){var oe=p;return function(){var W=p;p=oe;try{return $.apply(this,arguments)}finally{p=W}}}})(RE)),RE}var XP;function L4(){return XP||(XP=1,bE.exports=D4()),bE.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YP;function B4(){if(YP)return vo;YP=1;var n=GA(),e=L4();function t(c){for(var f="https://reactjs.org/docs/error-decoder.html?invariant="+c,y=1;y<arguments.length;y++)f+="&args[]="+encodeURIComponent(arguments[y]);return"Minified React error #"+c+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,r={};function s(c,f){o(c,f),o(c+"Capture",f)}function o(c,f){for(r[c]=f,c=0;c<f.length;c++)i.add(f[c])}var a=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),l=Object.prototype.hasOwnProperty,u=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},h={};function p(c){return l.call(h,c)?!0:l.call(d,c)?!1:u.test(c)?h[c]=!0:(d[c]=!0,!1)}function v(c,f,y,M){if(y!==null&&y.type===0)return!1;switch(typeof f){case"function":case"symbol":return!0;case"boolean":return M?!1:y!==null?!y.acceptsBooleans:(c=c.toLowerCase().slice(0,5),c!=="data-"&&c!=="aria-");default:return!1}}function _(c,f,y,M){if(f===null||typeof f>"u"||v(c,f,y,M))return!0;if(M)return!1;if(y!==null)switch(y.type){case 3:return!f;case 4:return f===!1;case 5:return isNaN(f);case 6:return isNaN(f)||1>f}return!1}function w(c,f,y,M,I,F,q){this.acceptsBooleans=f===2||f===3||f===4,this.attributeName=M,this.attributeNamespace=I,this.mustUseProperty=y,this.propertyName=c,this.type=f,this.sanitizeURL=F,this.removeEmptyString=q}var S={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(c){S[c]=new w(c,0,!1,c,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(c){var f=c[0];S[f]=new w(f,1,!1,c[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(c){S[c]=new w(c,2,!1,c.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(c){S[c]=new w(c,2,!1,c,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(c){S[c]=new w(c,3,!1,c.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(c){S[c]=new w(c,3,!0,c,null,!1,!1)}),["capture","download"].forEach(function(c){S[c]=new w(c,4,!1,c,null,!1,!1)}),["cols","rows","size","span"].forEach(function(c){S[c]=new w(c,6,!1,c,null,!1,!1)}),["rowSpan","start"].forEach(function(c){S[c]=new w(c,5,!1,c.toLowerCase(),null,!1,!1)});var A=/[\-:]([a-z])/g;function b(c){return c[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(c){var f=c.replace(A,b);S[f]=new w(f,1,!1,c,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(c){var f=c.replace(A,b);S[f]=new w(f,1,!1,c,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(c){var f=c.replace(A,b);S[f]=new w(f,1,!1,c,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(c){S[c]=new w(c,1,!1,c.toLowerCase(),null,!1,!1)}),S.xlinkHref=new w("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(c){S[c]=new w(c,1,!1,c.toLowerCase(),null,!0,!0)});function C(c,f,y,M){var I=S.hasOwnProperty(f)?S[f]:null;(I!==null?I.type!==0:M||!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(_(f,y,I,M)&&(y=null),M||I===null?p(f)&&(y===null?c.removeAttribute(f):c.setAttribute(f,""+y)):I.mustUseProperty?c[I.propertyName]=y===null?I.type===3?!1:"":y:(f=I.attributeName,M=I.attributeNamespace,y===null?c.removeAttribute(f):(I=I.type,y=I===3||I===4&&y===!0?"":""+y,M?c.setAttributeNS(M,f,y):c.setAttribute(f,y))))}var P=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,k=Symbol.for("react.element"),L=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),O=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),U=Symbol.for("react.provider"),X=Symbol.for("react.context"),Z=Symbol.for("react.forward_ref"),he=Symbol.for("react.suspense"),Q=Symbol.for("react.suspense_list"),ue=Symbol.for("react.memo"),re=Symbol.for("react.lazy"),ye=Symbol.for("react.offscreen"),$=Symbol.iterator;function oe(c){return c===null||typeof c!="object"?null:(c=$&&c[$]||c["@@iterator"],typeof c=="function"?c:null)}var W=Object.assign,J;function se(c){if(J===void 0)try{throw Error()}catch(y){var f=y.stack.trim().match(/\n( *(at )?)/);J=f&&f[1]||""}return`
`+J+c}var me=!1;function Se(c,f){if(!c||me)return"";me=!0;var y=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(f)if(f=function(){throw Error()},Object.defineProperty(f.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(f,[])}catch(Ne){var M=Ne}Reflect.construct(c,[],f)}else{try{f.call()}catch(Ne){M=Ne}c.call(f.prototype)}else{try{throw Error()}catch(Ne){M=Ne}c()}}catch(Ne){if(Ne&&M&&typeof Ne.stack=="string"){for(var I=Ne.stack.split(`
`),F=M.stack.split(`
`),q=I.length-1,ce=F.length-1;1<=q&&0<=ce&&I[q]!==F[ce];)ce--;for(;1<=q&&0<=ce;q--,ce--)if(I[q]!==F[ce]){if(q!==1||ce!==1)do if(q--,ce--,0>ce||I[q]!==F[ce]){var _e=`
`+I[q].replace(" at new "," at ");return c.displayName&&_e.includes("<anonymous>")&&(_e=_e.replace("<anonymous>",c.displayName)),_e}while(1<=q&&0<=ce);break}}}finally{me=!1,Error.prepareStackTrace=y}return(c=c?c.displayName||c.name:"")?se(c):""}function ke(c){switch(c.tag){case 5:return se(c.type);case 16:return se("Lazy");case 13:return se("Suspense");case 19:return se("SuspenseList");case 0:case 2:case 15:return c=Se(c.type,!1),c;case 11:return c=Se(c.type.render,!1),c;case 1:return c=Se(c.type,!0),c;default:return""}}function Ie(c){if(c==null)return null;if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case N:return"Fragment";case L:return"Portal";case D:return"Profiler";case O:return"StrictMode";case he:return"Suspense";case Q:return"SuspenseList"}if(typeof c=="object")switch(c.$$typeof){case X:return(c.displayName||"Context")+".Consumer";case U:return(c._context.displayName||"Context")+".Provider";case Z:var f=c.render;return c=c.displayName,c||(c=f.displayName||f.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case ue:return f=c.displayName||null,f!==null?f:Ie(c.type)||"Memo";case re:f=c._payload,c=c._init;try{return Ie(c(f))}catch{}}return null}function ze(c){var f=c.type;switch(c.tag){case 24:return"Cache";case 9:return(f.displayName||"Context")+".Consumer";case 10:return(f._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return c=f.render,c=c.displayName||c.name||"",f.displayName||(c!==""?"ForwardRef("+c+")":"ForwardRef");case 7:return"Fragment";case 5:return f;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ie(f);case 8:return f===O?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof f=="function")return f.displayName||f.name||null;if(typeof f=="string")return f}return null}function je(c){switch(typeof c){case"boolean":case"number":case"string":case"undefined":return c;case"object":return c;default:return""}}function at(c){var f=c.type;return(c=c.nodeName)&&c.toLowerCase()==="input"&&(f==="checkbox"||f==="radio")}function ut(c){var f=at(c)?"checked":"value",y=Object.getOwnPropertyDescriptor(c.constructor.prototype,f),M=""+c[f];if(!c.hasOwnProperty(f)&&typeof y<"u"&&typeof y.get=="function"&&typeof y.set=="function"){var I=y.get,F=y.set;return Object.defineProperty(c,f,{configurable:!0,get:function(){return I.call(this)},set:function(q){M=""+q,F.call(this,q)}}),Object.defineProperty(c,f,{enumerable:y.enumerable}),{getValue:function(){return M},setValue:function(q){M=""+q},stopTracking:function(){c._valueTracker=null,delete c[f]}}}}function gt(c){c._valueTracker||(c._valueTracker=ut(c))}function fe(c){if(!c)return!1;var f=c._valueTracker;if(!f)return!0;var y=f.getValue(),M="";return c&&(M=at(c)?c.checked?"true":"false":c.value),c=M,c!==y?(f.setValue(c),!0):!1}function Fe(c){if(c=c||(typeof document<"u"?document:void 0),typeof c>"u")return null;try{return c.activeElement||c.body}catch{return c.body}}function Be(c,f){var y=f.checked;return W({},f,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:y??c._wrapperState.initialChecked})}function $e(c,f){var y=f.defaultValue==null?"":f.defaultValue,M=f.checked!=null?f.checked:f.defaultChecked;y=je(f.value!=null?f.value:y),c._wrapperState={initialChecked:M,initialValue:y,controlled:f.type==="checkbox"||f.type==="radio"?f.checked!=null:f.value!=null}}function Oe(c,f){f=f.checked,f!=null&&C(c,"checked",f,!1)}function xe(c,f){Oe(c,f);var y=je(f.value),M=f.type;if(y!=null)M==="number"?(y===0&&c.value===""||c.value!=y)&&(c.value=""+y):c.value!==""+y&&(c.value=""+y);else if(M==="submit"||M==="reset"){c.removeAttribute("value");return}f.hasOwnProperty("value")?j(c,f.type,y):f.hasOwnProperty("defaultValue")&&j(c,f.type,je(f.defaultValue)),f.checked==null&&f.defaultChecked!=null&&(c.defaultChecked=!!f.defaultChecked)}function ct(c,f,y){if(f.hasOwnProperty("value")||f.hasOwnProperty("defaultValue")){var M=f.type;if(!(M!=="submit"&&M!=="reset"||f.value!==void 0&&f.value!==null))return;f=""+c._wrapperState.initialValue,y||f===c.value||(c.value=f),c.defaultValue=f}y=c.name,y!==""&&(c.name=""),c.defaultChecked=!!c._wrapperState.initialChecked,y!==""&&(c.name=y)}function j(c,f,y){(f!=="number"||Fe(c.ownerDocument)!==c)&&(y==null?c.defaultValue=""+c._wrapperState.initialValue:c.defaultValue!==""+y&&(c.defaultValue=""+y))}var Y=Array.isArray;function we(c,f,y,M){if(c=c.options,f){f={};for(var I=0;I<y.length;I++)f["$"+y[I]]=!0;for(y=0;y<c.length;y++)I=f.hasOwnProperty("$"+c[y].value),c[y].selected!==I&&(c[y].selected=I),I&&M&&(c[y].defaultSelected=!0)}else{for(y=""+je(y),f=null,I=0;I<c.length;I++){if(c[I].value===y){c[I].selected=!0,M&&(c[I].defaultSelected=!0);return}f!==null||c[I].disabled||(f=c[I])}f!==null&&(f.selected=!0)}}function Qe(c,f){if(f.dangerouslySetInnerHTML!=null)throw Error(t(91));return W({},f,{value:void 0,defaultValue:void 0,children:""+c._wrapperState.initialValue})}function Ye(c,f){var y=f.value;if(y==null){if(y=f.children,f=f.defaultValue,y!=null){if(f!=null)throw Error(t(92));if(Y(y)){if(1<y.length)throw Error(t(93));y=y[0]}f=y}f==null&&(f=""),y=f}c._wrapperState={initialValue:je(y)}}function qe(c,f){var y=je(f.value),M=je(f.defaultValue);y!=null&&(y=""+y,y!==c.value&&(c.value=y),f.defaultValue==null&&c.defaultValue!==y&&(c.defaultValue=y)),M!=null&&(c.defaultValue=""+M)}function yt(c){var f=c.textContent;f===c._wrapperState.initialValue&&f!==""&&f!==null&&(c.value=f)}function ft(c){switch(c){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function st(c,f){return c==null||c==="http://www.w3.org/1999/xhtml"?ft(f):c==="http://www.w3.org/2000/svg"&&f==="foreignObject"?"http://www.w3.org/1999/xhtml":c}var Rt,Ot=(function(c){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(f,y,M,I){MSApp.execUnsafeLocalFunction(function(){return c(f,y,M,I)})}:c})(function(c,f){if(c.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in c)c.innerHTML=f;else{for(Rt=Rt||document.createElement("div"),Rt.innerHTML="<svg>"+f.valueOf().toString()+"</svg>",f=Rt.firstChild;c.firstChild;)c.removeChild(c.firstChild);for(;f.firstChild;)c.appendChild(f.firstChild)}});function Xe(c,f){if(f){var y=c.firstChild;if(y&&y===c.lastChild&&y.nodeType===3){y.nodeValue=f;return}}c.textContent=f}var fn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ht=["Webkit","ms","Moz","O"];Object.keys(fn).forEach(function(c){Ht.forEach(function(f){f=f+c.charAt(0).toUpperCase()+c.substring(1),fn[f]=fn[c]})});function Kt(c,f,y){return f==null||typeof f=="boolean"||f===""?"":y||typeof f!="number"||f===0||fn.hasOwnProperty(c)&&fn[c]?(""+f).trim():f+"px"}function xt(c,f){c=c.style;for(var y in f)if(f.hasOwnProperty(y)){var M=y.indexOf("--")===0,I=Kt(y,f[y],M);y==="float"&&(y="cssFloat"),M?c.setProperty(y,I):c[y]=I}}var Tt=W({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(c,f){if(f){if(Tt[c]&&(f.children!=null||f.dangerouslySetInnerHTML!=null))throw Error(t(137,c));if(f.dangerouslySetInnerHTML!=null){if(f.children!=null)throw Error(t(60));if(typeof f.dangerouslySetInnerHTML!="object"||!("__html"in f.dangerouslySetInnerHTML))throw Error(t(61))}if(f.style!=null&&typeof f.style!="object")throw Error(t(62))}}function He(c,f){if(c.indexOf("-")===-1)return typeof f.is=="string";switch(c){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rt=null;function Ze(c){return c=c.target||c.srcElement||window,c.correspondingUseElement&&(c=c.correspondingUseElement),c.nodeType===3?c.parentNode:c}var Me=null,pe=null,tt=null;function dt(c){if(c=qa(c)){if(typeof Me!="function")throw Error(t(280));var f=c.stateNode;f&&(f=Bp(f),Me(c.stateNode,c.type,f))}}function zt(c){pe?tt?tt.push(c):tt=[c]:pe=c}function Pt(){if(pe){var c=pe,f=tt;if(tt=pe=null,dt(c),f)for(c=0;c<f.length;c++)dt(f[c])}}function rn(c,f){return c(f)}function gn(){}var Ct=!1;function Mt(c,f,y){if(Ct)return c(f,y);Ct=!0;try{return rn(c,f,y)}finally{Ct=!1,(pe!==null||tt!==null)&&(gn(),Pt())}}function Dt(c,f){var y=c.stateNode;if(y===null)return null;var M=Bp(y);if(M===null)return null;y=M[f];e:switch(f){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(M=!M.disabled)||(c=c.type,M=!(c==="button"||c==="input"||c==="select"||c==="textarea")),c=!M;break e;default:c=!1}if(c)return null;if(y&&typeof y!="function")throw Error(t(231,f,typeof y));return y}var ot=!1;if(a)try{var qt={};Object.defineProperty(qt,"passive",{get:function(){ot=!0}}),window.addEventListener("test",qt,qt),window.removeEventListener("test",qt,qt)}catch{ot=!1}function Vt(c,f,y,M,I,F,q,ce,_e){var Ne=Array.prototype.slice.call(arguments,3);try{f.apply(y,Ne)}catch(it){this.onError(it)}}var jt=!1,On=null,tn=!1,kt=null,Ai={onError:function(c){jt=!0,On=c}};function jn(c,f,y,M,I,F,q,ce,_e){jt=!1,On=null,Vt.apply(Ai,arguments)}function z(c,f,y,M,I,F,q,ce,_e){if(jn.apply(this,arguments),jt){if(jt){var Ne=On;jt=!1,On=null}else throw Error(t(198));tn||(tn=!0,kt=Ne)}}function K(c){var f=c,y=c;if(c.alternate)for(;f.return;)f=f.return;else{c=f;do f=c,(f.flags&4098)!==0&&(y=f.return),c=f.return;while(c)}return f.tag===3?y:null}function ve(c){if(c.tag===13){var f=c.memoizedState;if(f===null&&(c=c.alternate,c!==null&&(f=c.memoizedState)),f!==null)return f.dehydrated}return null}function G(c){if(K(c)!==c)throw Error(t(188))}function ee(c){var f=c.alternate;if(!f){if(f=K(c),f===null)throw Error(t(188));return f!==c?null:c}for(var y=c,M=f;;){var I=y.return;if(I===null)break;var F=I.alternate;if(F===null){if(M=I.return,M!==null){y=M;continue}break}if(I.child===F.child){for(F=I.child;F;){if(F===y)return G(I),c;if(F===M)return G(I),f;F=F.sibling}throw Error(t(188))}if(y.return!==M.return)y=I,M=F;else{for(var q=!1,ce=I.child;ce;){if(ce===y){q=!0,y=I,M=F;break}if(ce===M){q=!0,M=I,y=F;break}ce=ce.sibling}if(!q){for(ce=F.child;ce;){if(ce===y){q=!0,y=F,M=I;break}if(ce===M){q=!0,M=F,y=I;break}ce=ce.sibling}if(!q)throw Error(t(189))}}if(y.alternate!==M)throw Error(t(190))}if(y.tag!==3)throw Error(t(188));return y.stateNode.current===y?c:f}function ne(c){return c=ee(c),c!==null?de(c):null}function de(c){if(c.tag===5||c.tag===6)return c;for(c=c.child;c!==null;){var f=de(c);if(f!==null)return f;c=c.sibling}return null}var le=e.unstable_scheduleCallback,be=e.unstable_cancelCallback,Le=e.unstable_shouldYield,Ge=e.unstable_requestPaint,Ce=e.unstable_now,pt=e.unstable_getCurrentPriorityLevel,Ke=e.unstable_ImmediatePriority,et=e.unstable_UserBlockingPriority,It=e.unstable_NormalPriority,Jt=e.unstable_LowPriority,Ut=e.unstable_IdlePriority,en=null,_t=null;function ht(c){if(_t&&typeof _t.onCommitFiberRoot=="function")try{_t.onCommitFiberRoot(en,c,void 0,(c.current.flags&128)===128)}catch{}}var cn=Math.clz32?Math.clz32:ei,sn=Math.log,hn=Math.LN2;function ei(c){return c>>>=0,c===0?32:31-(sn(c)/hn|0)|0}var vi=64,ui=4194304;function Pn(c){switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return c&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return c}}function An(c,f){var y=c.pendingLanes;if(y===0)return 0;var M=0,I=c.suspendedLanes,F=c.pingedLanes,q=y&268435455;if(q!==0){var ce=q&~I;ce!==0?M=Pn(ce):(F&=q,F!==0&&(M=Pn(F)))}else q=y&~I,q!==0?M=Pn(q):F!==0&&(M=Pn(F));if(M===0)return 0;if(f!==0&&f!==M&&(f&I)===0&&(I=M&-M,F=f&-f,I>=F||I===16&&(F&4194240)!==0))return f;if((M&4)!==0&&(M|=y&16),f=c.entangledLanes,f!==0)for(c=c.entanglements,f&=M;0<f;)y=31-cn(f),I=1<<y,M|=c[y],f&=~I;return M}function Pi(c,f){switch(c){case 1:case 2:case 4:return f+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _n(c,f){for(var y=c.suspendedLanes,M=c.pingedLanes,I=c.expirationTimes,F=c.pendingLanes;0<F;){var q=31-cn(F),ce=1<<q,_e=I[q];_e===-1?((ce&y)===0||(ce&M)!==0)&&(I[q]=Pi(ce,f)):_e<=f&&(c.expiredLanes|=ce),F&=~ce}}function In(c){return c=c.pendingLanes&-1073741825,c!==0?c:c&1073741824?1073741824:0}function ci(){var c=vi;return vi<<=1,(vi&4194240)===0&&(vi=64),c}function ps(c){for(var f=[],y=0;31>y;y++)f.push(c);return f}function ir(c,f,y){c.pendingLanes|=f,f!==536870912&&(c.suspendedLanes=0,c.pingedLanes=0),c=c.eventTimes,f=31-cn(f),c[f]=y}function oa(c,f){var y=c.pendingLanes&~f;c.pendingLanes=f,c.suspendedLanes=0,c.pingedLanes=0,c.expiredLanes&=f,c.mutableReadLanes&=f,c.entangledLanes&=f,f=c.entanglements;var M=c.eventTimes;for(c=c.expirationTimes;0<y;){var I=31-cn(y),F=1<<I;f[I]=0,M[I]=-1,c[I]=-1,y&=~F}}function hc(c,f){var y=c.entangledLanes|=f;for(c=c.entanglements;y;){var M=31-cn(y),I=1<<M;I&f|c[M]&f&&(c[M]|=f),y&=~I}}var Vn=0;function pc(c){return c&=-c,1<c?4<c?(c&268435455)!==0?16:536870912:4:1}var Yd,zg,d_,np,ip,iu=!1,rp=[],aa=null,Mn=null,Fa=null,ru=new Map,mc=new Map,Sl=[],QS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function rr(c,f){switch(c){case"focusin":case"focusout":aa=null;break;case"dragenter":case"dragleave":Mn=null;break;case"mouseover":case"mouseout":Fa=null;break;case"pointerover":case"pointerout":ru.delete(f.pointerId);break;case"gotpointercapture":case"lostpointercapture":mc.delete(f.pointerId)}}function su(c,f,y,M,I,F){return c===null||c.nativeEvent!==F?(c={blockedOn:f,domEventName:y,eventSystemFlags:M,nativeEvent:F,targetContainers:[I]},f!==null&&(f=qa(f),f!==null&&zg(f)),c):(c.eventSystemFlags|=M,f=c.targetContainers,I!==null&&f.indexOf(I)===-1&&f.push(I),c)}function ZS(c,f,y,M,I){switch(f){case"focusin":return aa=su(aa,c,f,y,M,I),!0;case"dragenter":return Mn=su(Mn,c,f,y,M,I),!0;case"mouseover":return Fa=su(Fa,c,f,y,M,I),!0;case"pointerover":var F=I.pointerId;return ru.set(F,su(ru.get(F)||null,c,f,y,M,I)),!0;case"gotpointercapture":return F=I.pointerId,mc.set(F,su(mc.get(F)||null,c,f,y,M,I)),!0}return!1}function sp(c){var f=Pl(c.target);if(f!==null){var y=K(f);if(y!==null){if(f=y.tag,f===13){if(f=ve(y),f!==null){c.blockedOn=f,ip(c.priority,function(){d_(y)});return}}else if(f===3&&y.stateNode.current.memoizedState.isDehydrated){c.blockedOn=y.tag===3?y.stateNode.containerInfo:null;return}}}c.blockedOn=null}function op(c){if(c.blockedOn!==null)return!1;for(var f=c.targetContainers;0<f.length;){var y=oo(c.domEventName,c.eventSystemFlags,f[0],c.nativeEvent);if(y===null){y=c.nativeEvent;var M=new y.constructor(y.type,y);rt=M,y.target.dispatchEvent(M),rt=null}else return f=qa(y),f!==null&&zg(f),c.blockedOn=y,!1;f.shift()}return!0}function Kd(c,f,y){op(c)&&y.delete(f)}function la(){iu=!1,aa!==null&&op(aa)&&(aa=null),Mn!==null&&op(Mn)&&(Mn=null),Fa!==null&&op(Fa)&&(Fa=null),ru.forEach(Kd),mc.forEach(Kd)}function Qd(c,f){c.blockedOn===f&&(c.blockedOn=null,iu||(iu=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,la)))}function Zd(c){function f(I){return Qd(I,c)}if(0<rp.length){Qd(rp[0],c);for(var y=1;y<rp.length;y++){var M=rp[y];M.blockedOn===c&&(M.blockedOn=null)}}for(aa!==null&&Qd(aa,c),Mn!==null&&Qd(Mn,c),Fa!==null&&Qd(Fa,c),ru.forEach(f),mc.forEach(f),y=0;y<Sl.length;y++)M=Sl[y],M.blockedOn===c&&(M.blockedOn=null);for(;0<Sl.length&&(y=Sl[0],y.blockedOn===null);)sp(y),y.blockedOn===null&&Sl.shift()}var jr=P.ReactCurrentBatchConfig,so=!0;function ap(c,f,y,M){var I=Vn,F=jr.transition;jr.transition=null;try{Vn=1,lp(c,f,y,M)}finally{Vn=I,jr.transition=F}}function Vg(c,f,y,M){var I=Vn,F=jr.transition;jr.transition=null;try{Vn=4,lp(c,f,y,M)}finally{Vn=I,jr.transition=F}}function lp(c,f,y,M){if(so){var I=oo(c,f,y,M);if(I===null)bp(c,f,M,up,y),rr(c,M);else if(ZS(I,c,f,y,M))M.stopPropagation();else if(rr(c,M),f&4&&-1<QS.indexOf(c)){for(;I!==null;){var F=qa(I);if(F!==null&&Yd(F),F=oo(c,f,y,M),F===null&&bp(c,f,M,up,y),F===I)break;I=F}I!==null&&M.stopPropagation()}else bp(c,f,M,null,y)}}var up=null;function oo(c,f,y,M){if(up=null,c=Ze(M),c=Pl(c),c!==null)if(f=K(c),f===null)c=null;else if(y=f.tag,y===13){if(c=ve(f),c!==null)return c;c=null}else if(y===3){if(f.stateNode.current.memoizedState.isDehydrated)return f.tag===3?f.stateNode.containerInfo:null;c=null}else f!==c&&(c=null);return up=c,null}function f_(c){switch(c){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(pt()){case Ke:return 1;case et:return 4;case It:case Jt:return 16;case Ut:return 536870912;default:return 16}default:return 16}}var Po=null,Wg=null,ms=null;function $d(){if(ms)return ms;var c,f=Wg,y=f.length,M,I="value"in Po?Po.value:Po.textContent,F=I.length;for(c=0;c<y&&f[c]===I[c];c++);var q=y-c;for(M=1;M<=q&&f[y-M]===I[F-M];M++);return ms=I.slice(c,1<M?1-M:void 0)}function ou(c){var f=c.keyCode;return"charCode"in c?(c=c.charCode,c===0&&f===13&&(c=13)):c=f,c===10&&(c=13),32<=c||c===13?c:0}function Ua(){return!0}function cp(){return!1}function es(c){function f(y,M,I,F,q){this._reactName=y,this._targetInst=I,this.type=M,this.nativeEvent=F,this.target=q,this.currentTarget=null;for(var ce in c)c.hasOwnProperty(ce)&&(y=c[ce],this[ce]=y?y(F):F[ce]);return this.isDefaultPrevented=(F.defaultPrevented!=null?F.defaultPrevented:F.returnValue===!1)?Ua:cp,this.isPropagationStopped=cp,this}return W(f.prototype,{preventDefault:function(){this.defaultPrevented=!0;var y=this.nativeEvent;y&&(y.preventDefault?y.preventDefault():typeof y.returnValue!="unknown"&&(y.returnValue=!1),this.isDefaultPrevented=Ua)},stopPropagation:function(){var y=this.nativeEvent;y&&(y.stopPropagation?y.stopPropagation():typeof y.cancelBubble!="unknown"&&(y.cancelBubble=!0),this.isPropagationStopped=Ua)},persist:function(){},isPersistent:Ua}),f}var au={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(c){return c.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},jd=es(au),lu=W({},au,{view:0,detail:0}),gc=es(lu),gs,ao,lo,vc=W({},lu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tl,button:0,buttons:0,relatedTarget:function(c){return c.relatedTarget===void 0?c.fromElement===c.srcElement?c.toElement:c.fromElement:c.relatedTarget},movementX:function(c){return"movementX"in c?c.movementX:(c!==lo&&(lo&&c.type==="mousemove"?(gs=c.screenX-lo.screenX,ao=c.screenY-lo.screenY):ao=gs=0,lo=c),gs)},movementY:function(c){return"movementY"in c?c.movementY:ao}}),qg=es(vc),Oa=W({},vc,{dataTransfer:0}),El=es(Oa),dp=W({},lu,{relatedTarget:0}),fp=es(dp),hp=W({},au,{animationName:0,elapsedTime:0,pseudoElement:0}),h_=es(hp),p_=W({},au,{clipboardData:function(c){return"clipboardData"in c?c.clipboardData:window.clipboardData}}),Jg=es(p_),pp=W({},au,{data:0}),Xg=es(pp),m_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},g_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Yg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function yc(c){var f=this.nativeEvent;return f.getModifierState?f.getModifierState(c):(c=Yg[c])?!!f[c]:!1}function Tl(){return yc}var mp=W({},lu,{key:function(c){if(c.key){var f=m_[c.key]||c.key;if(f!=="Unidentified")return f}return c.type==="keypress"?(c=ou(c),c===13?"Enter":String.fromCharCode(c)):c.type==="keydown"||c.type==="keyup"?g_[c.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tl,charCode:function(c){return c.type==="keypress"?ou(c):0},keyCode:function(c){return c.type==="keydown"||c.type==="keyup"?c.keyCode:0},which:function(c){return c.type==="keypress"?ou(c):c.type==="keydown"||c.type==="keyup"?c.keyCode:0}}),gp=es(mp),uo=W({},vc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ns=es(uo),uu=W({},lu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tl}),Ha=es(uu),Ga=W({},au,{propertyName:0,elapsedTime:0,pseudoElement:0}),cu=es(Ga),v_=W({},vc,{deltaX:function(c){return"deltaX"in c?c.deltaX:"wheelDeltaX"in c?-c.wheelDeltaX:0},deltaY:function(c){return"deltaY"in c?c.deltaY:"wheelDeltaY"in c?-c.wheelDeltaY:"wheelDelta"in c?-c.wheelDelta:0},deltaZ:0,deltaMode:0}),Kg=es(v_),Qg=[9,13,27,32],ts=a&&"CompositionEvent"in window,br=null;a&&"documentMode"in document&&(br=document.documentMode);var Si=a&&"TextEvent"in window&&!br,_c=a&&(!ts||br&&8<br&&11>=br),co=" ",Zg=!1;function $g(c,f){switch(c){case"keyup":return Qg.indexOf(f.keyCode)!==-1;case"keydown":return f.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vp(c){return c=c.detail,typeof c=="object"&&"data"in c?c.data:null}var Ml=!1;function y_(c,f){switch(c){case"compositionend":return vp(f);case"keypress":return f.which!==32?null:(Zg=!0,co);case"textInput":return c=f.data,c===co&&Zg?null:c;default:return null}}function ef(c,f){if(Ml)return c==="compositionend"||!ts&&$g(c,f)?(c=$d(),ms=Wg=Po=null,Ml=!1,c):null;switch(c){case"paste":return null;case"keypress":if(!(f.ctrlKey||f.altKey||f.metaKey)||f.ctrlKey&&f.altKey){if(f.char&&1<f.char.length)return f.char;if(f.which)return String.fromCharCode(f.which)}return null;case"compositionend":return _c&&f.locale!=="ko"?null:f.data;default:return null}}var xc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yp(c){var f=c&&c.nodeName&&c.nodeName.toLowerCase();return f==="input"?!!xc[c.type]:f==="textarea"}function wc(c,f,y,M){zt(M),f=Rp(f,"onChange"),0<f.length&&(y=new jd("onChange","change",null,y,M),c.push({event:y,listeners:f}))}var Cl=null,Ac=null;function __(c){Mc(c,0)}function za(c){var f=Gi(c);if(fe(f))return c}function x_(c,f){if(c==="change")return f}var Sc=!1;if(a){var vs;if(a){var du="oninput"in document;if(!du){var fu=document.createElement("div");fu.setAttribute("oninput","return;"),du=typeof fu.oninput=="function"}vs=du}else vs=!1;Sc=vs&&(!document.documentMode||9<document.documentMode)}function Io(){Cl&&(Cl.detachEvent("onpropertychange",_p),Ac=Cl=null)}function _p(c){if(c.propertyName==="value"&&za(Ac)){var f=[];wc(f,Ac,c,Ze(c)),Mt(__,f)}}function Ec(c,f,y){c==="focusin"?(Io(),Cl=f,Ac=y,Cl.attachEvent("onpropertychange",_p)):c==="focusout"&&Io()}function w_(c){if(c==="selectionchange"||c==="keyup"||c==="keydown")return za(Ac)}function jg(c,f){if(c==="click")return za(f)}function Ii(c,f){if(c==="input"||c==="change")return za(f)}function xp(c,f){return c===f&&(c!==0||1/c===1/f)||c!==c&&f!==f}var ks=typeof Object.is=="function"?Object.is:xp;function hu(c,f){if(ks(c,f))return!0;if(typeof c!="object"||c===null||typeof f!="object"||f===null)return!1;var y=Object.keys(c),M=Object.keys(f);if(y.length!==M.length)return!1;for(M=0;M<y.length;M++){var I=y[M];if(!l.call(f,I)||!ks(c[I],f[I]))return!1}return!0}function tf(c){for(;c&&c.firstChild;)c=c.firstChild;return c}function Fs(c,f){var y=tf(c);c=0;for(var M;y;){if(y.nodeType===3){if(M=c+y.textContent.length,c<=f&&M>=f)return{node:y,offset:f-c};c=M}e:{for(;y;){if(y.nextSibling){y=y.nextSibling;break e}y=y.parentNode}y=void 0}y=tf(y)}}function pu(c,f){return c&&f?c===f?!0:c&&c.nodeType===3?!1:f&&f.nodeType===3?pu(c,f.parentNode):"contains"in c?c.contains(f):c.compareDocumentPosition?!!(c.compareDocumentPosition(f)&16):!1:!1}function Di(){for(var c=window,f=Fe();f instanceof c.HTMLIFrameElement;){try{var y=typeof f.contentWindow.location.href=="string"}catch{y=!1}if(y)c=f.contentWindow;else break;f=Fe(c.document)}return f}function fr(c){var f=c&&c.nodeName&&c.nodeName.toLowerCase();return f&&(f==="input"&&(c.type==="text"||c.type==="search"||c.type==="tel"||c.type==="url"||c.type==="password")||f==="textarea"||c.contentEditable==="true")}function hr(c){var f=Di(),y=c.focusedElem,M=c.selectionRange;if(f!==y&&y&&y.ownerDocument&&pu(y.ownerDocument.documentElement,y)){if(M!==null&&fr(y)){if(f=M.start,c=M.end,c===void 0&&(c=f),"selectionStart"in y)y.selectionStart=f,y.selectionEnd=Math.min(c,y.value.length);else if(c=(f=y.ownerDocument||document)&&f.defaultView||window,c.getSelection){c=c.getSelection();var I=y.textContent.length,F=Math.min(M.start,I);M=M.end===void 0?F:Math.min(M.end,I),!c.extend&&F>M&&(I=M,M=F,F=I),I=Fs(y,F);var q=Fs(y,M);I&&q&&(c.rangeCount!==1||c.anchorNode!==I.node||c.anchorOffset!==I.offset||c.focusNode!==q.node||c.focusOffset!==q.offset)&&(f=f.createRange(),f.setStart(I.node,I.offset),c.removeAllRanges(),F>M?(c.addRange(f),c.extend(q.node,q.offset)):(f.setEnd(q.node,q.offset),c.addRange(f)))}}for(f=[],c=y;c=c.parentNode;)c.nodeType===1&&f.push({element:c,left:c.scrollLeft,top:c.scrollTop});for(typeof y.focus=="function"&&y.focus(),y=0;y<f.length;y++)c=f[y],c.element.scrollLeft=c.left,c.element.scrollTop=c.top}}var wp=a&&"documentMode"in document&&11>=document.documentMode,ua=null,mu=null,nf=null,pr=!1;function Ap(c,f,y){var M=y.window===y?y.document:y.nodeType===9?y:y.ownerDocument;pr||ua==null||ua!==Fe(M)||(M=ua,"selectionStart"in M&&fr(M)?M={start:M.selectionStart,end:M.selectionEnd}:(M=(M.ownerDocument&&M.ownerDocument.defaultView||window).getSelection(),M={anchorNode:M.anchorNode,anchorOffset:M.anchorOffset,focusNode:M.focusNode,focusOffset:M.focusOffset}),nf&&hu(nf,M)||(nf=M,M=Rp(mu,"onSelect"),0<M.length&&(f=new jd("onSelect","select",null,f,y),c.push({event:f,listeners:M}),f.target=ua)))}function Tc(c,f){var y={};return y[c.toLowerCase()]=f.toLowerCase(),y["Webkit"+c]="webkit"+f,y["Moz"+c]="moz"+f,y}var bl={animationend:Tc("Animation","AnimationEnd"),animationiteration:Tc("Animation","AnimationIteration"),animationstart:Tc("Animation","AnimationStart"),transitionend:Tc("Transition","TransitionEnd")},Do={},Lo={};a&&(Lo=document.createElement("div").style,"AnimationEvent"in window||(delete bl.animationend.animation,delete bl.animationiteration.animation,delete bl.animationstart.animation),"TransitionEvent"in window||delete bl.transitionend.transition);function ca(c){if(Do[c])return Do[c];if(!bl[c])return c;var f=bl[c],y;for(y in f)if(f.hasOwnProperty(y)&&y in Lo)return Do[c]=f[y];return c}var rf=ca("animationend"),sf=ca("animationiteration"),e0=ca("animationstart"),t0=ca("transitionend"),n0=new Map,i0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Va(c,f){n0.set(c,f),s(f,[c])}for(var Sp=0;Sp<i0.length;Sp++){var of=i0[Sp],af=of.toLowerCase(),A_=of[0].toUpperCase()+of.slice(1);Va(af,"on"+A_)}Va(rf,"onAnimationEnd"),Va(sf,"onAnimationIteration"),Va(e0,"onAnimationStart"),Va("dblclick","onDoubleClick"),Va("focusin","onFocus"),Va("focusout","onBlur"),Va(t0,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ep=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rl));function Tp(c,f,y){var M=c.type||"unknown-event";c.currentTarget=y,z(M,f,void 0,c),c.currentTarget=null}function Mc(c,f){f=(f&4)!==0;for(var y=0;y<c.length;y++){var M=c[y],I=M.event;M=M.listeners;e:{var F=void 0;if(f)for(var q=M.length-1;0<=q;q--){var ce=M[q],_e=ce.instance,Ne=ce.currentTarget;if(ce=ce.listener,_e!==F&&I.isPropagationStopped())break e;Tp(I,ce,Ne),F=_e}else for(q=0;q<M.length;q++){if(ce=M[q],_e=ce.instance,Ne=ce.currentTarget,ce=ce.listener,_e!==F&&I.isPropagationStopped())break e;Tp(I,ce,Ne),F=_e}}}if(tn)throw c=kt,tn=!1,kt=null,c}function pi(c,f){var y=f[yu];y===void 0&&(y=f[yu]=new Set);var M=c+"__bubble";y.has(M)||(Cp(f,c,2,!1),y.add(M))}function Mp(c,f,y){var M=0;f&&(M|=4),Cp(y,c,M,f)}var lf="_reactListening"+Math.random().toString(36).slice(2);function Cc(c){if(!c[lf]){c[lf]=!0,i.forEach(function(y){y!=="selectionchange"&&(Ep.has(y)||Mp(y,!1,c),Mp(y,!0,c))});var f=c.nodeType===9?c:c.ownerDocument;f===null||f[lf]||(f[lf]=!0,Mp("selectionchange",!1,f))}}function Cp(c,f,y,M){switch(f_(f)){case 1:var I=ap;break;case 4:I=Vg;break;default:I=lp}y=I.bind(null,f,y,c),I=void 0,!ot||f!=="touchstart"&&f!=="touchmove"&&f!=="wheel"||(I=!0),M?I!==void 0?c.addEventListener(f,y,{capture:!0,passive:I}):c.addEventListener(f,y,!0):I!==void 0?c.addEventListener(f,y,{passive:I}):c.addEventListener(f,y,!1)}function bp(c,f,y,M,I){var F=M;if((f&1)===0&&(f&2)===0&&M!==null)e:for(;;){if(M===null)return;var q=M.tag;if(q===3||q===4){var ce=M.stateNode.containerInfo;if(ce===I||ce.nodeType===8&&ce.parentNode===I)break;if(q===4)for(q=M.return;q!==null;){var _e=q.tag;if((_e===3||_e===4)&&(_e=q.stateNode.containerInfo,_e===I||_e.nodeType===8&&_e.parentNode===I))return;q=q.return}for(;ce!==null;){if(q=Pl(ce),q===null)return;if(_e=q.tag,_e===5||_e===6){M=F=q;continue e}ce=ce.parentNode}}M=M.return}Mt(function(){var Ne=F,it=Ze(y),lt=[];e:{var nt=n0.get(c);if(nt!==void 0){var Nt=jd,Xt=c;switch(c){case"keypress":if(ou(y)===0)break e;case"keydown":case"keyup":Nt=gp;break;case"focusin":Xt="focus",Nt=fp;break;case"focusout":Xt="blur",Nt=fp;break;case"beforeblur":case"afterblur":Nt=fp;break;case"click":if(y.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Nt=qg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Nt=El;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Nt=Ha;break;case rf:case sf:case e0:Nt=h_;break;case t0:Nt=cu;break;case"scroll":Nt=gc;break;case"wheel":Nt=Kg;break;case"copy":case"cut":case"paste":Nt=Jg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Nt=Ns}var Yt=(f&4)!==0,or=!Yt&&c==="scroll",Re=Yt?nt!==null?nt+"Capture":null:nt;Yt=[];for(var Ae=Ne,Pe;Ae!==null;){Pe=Ae;var vt=Pe.stateNode;if(Pe.tag===5&&vt!==null&&(Pe=vt,Re!==null&&(vt=Dt(Ae,Re),vt!=null&&Yt.push(bc(Ae,vt,Pe)))),or)break;Ae=Ae.return}0<Yt.length&&(nt=new Nt(nt,Xt,null,y,it),lt.push({event:nt,listeners:Yt}))}}if((f&7)===0){e:{if(nt=c==="mouseover"||c==="pointerover",Nt=c==="mouseout"||c==="pointerout",nt&&y!==rt&&(Xt=y.relatedTarget||y.fromElement)&&(Pl(Xt)||Xt[Us]))break e;if((Nt||nt)&&(nt=it.window===it?it:(nt=it.ownerDocument)?nt.defaultView||nt.parentWindow:window,Nt?(Xt=y.relatedTarget||y.toElement,Nt=Ne,Xt=Xt?Pl(Xt):null,Xt!==null&&(or=K(Xt),Xt!==or||Xt.tag!==5&&Xt.tag!==6)&&(Xt=null)):(Nt=null,Xt=Ne),Nt!==Xt)){if(Yt=qg,vt="onMouseLeave",Re="onMouseEnter",Ae="mouse",(c==="pointerout"||c==="pointerover")&&(Yt=Ns,vt="onPointerLeave",Re="onPointerEnter",Ae="pointer"),or=Nt==null?nt:Gi(Nt),Pe=Xt==null?nt:Gi(Xt),nt=new Yt(vt,Ae+"leave",Nt,y,it),nt.target=or,nt.relatedTarget=Pe,vt=null,Pl(it)===Ne&&(Yt=new Yt(Re,Ae+"enter",Xt,y,it),Yt.target=Pe,Yt.relatedTarget=or,vt=Yt),or=vt,Nt&&Xt)t:{for(Yt=Nt,Re=Xt,Ae=0,Pe=Yt;Pe;Pe=gu(Pe))Ae++;for(Pe=0,vt=Re;vt;vt=gu(vt))Pe++;for(;0<Ae-Pe;)Yt=gu(Yt),Ae--;for(;0<Pe-Ae;)Re=gu(Re),Pe--;for(;Ae--;){if(Yt===Re||Re!==null&&Yt===Re.alternate)break t;Yt=gu(Yt),Re=gu(Re)}Yt=null}else Yt=null;Nt!==null&&S_(lt,nt,Nt,Yt,!1),Xt!==null&&or!==null&&S_(lt,or,Xt,Yt,!0)}}e:{if(nt=Ne?Gi(Ne):window,Nt=nt.nodeName&&nt.nodeName.toLowerCase(),Nt==="select"||Nt==="input"&&nt.type==="file")var $t=x_;else if(yp(nt))if(Sc)$t=Ii;else{$t=w_;var on=Ec}else(Nt=nt.nodeName)&&Nt.toLowerCase()==="input"&&(nt.type==="checkbox"||nt.type==="radio")&&($t=jg);if($t&&($t=$t(c,Ne))){wc(lt,$t,y,it);break e}on&&on(c,nt,Ne),c==="focusout"&&(on=nt._wrapperState)&&on.controlled&&nt.type==="number"&&j(nt,"number",nt.value)}switch(on=Ne?Gi(Ne):window,c){case"focusin":(yp(on)||on.contentEditable==="true")&&(ua=on,mu=Ne,nf=null);break;case"focusout":nf=mu=ua=null;break;case"mousedown":pr=!0;break;case"contextmenu":case"mouseup":case"dragend":pr=!1,Ap(lt,y,it);break;case"selectionchange":if(wp)break;case"keydown":case"keyup":Ap(lt,y,it)}var an;if(ts)e:{switch(c){case"compositionstart":var mn="onCompositionStart";break e;case"compositionend":mn="onCompositionEnd";break e;case"compositionupdate":mn="onCompositionUpdate";break e}mn=void 0}else Ml?$g(c,y)&&(mn="onCompositionEnd"):c==="keydown"&&y.keyCode===229&&(mn="onCompositionStart");mn&&(_c&&y.locale!=="ko"&&(Ml||mn!=="onCompositionStart"?mn==="onCompositionEnd"&&Ml&&(an=$d()):(Po=it,Wg="value"in Po?Po.value:Po.textContent,Ml=!0)),on=Rp(Ne,mn),0<on.length&&(mn=new Xg(mn,c,null,y,it),lt.push({event:mn,listeners:on}),an?mn.data=an:(an=vp(y),an!==null&&(mn.data=an)))),(an=Si?y_(c,y):ef(c,y))&&(Ne=Rp(Ne,"onBeforeInput"),0<Ne.length&&(it=new Xg("onBeforeInput","beforeinput",null,y,it),lt.push({event:it,listeners:Ne}),it.data=an))}Mc(lt,f)})}function bc(c,f,y){return{instance:c,listener:f,currentTarget:y}}function Rp(c,f){for(var y=f+"Capture",M=[];c!==null;){var I=c,F=I.stateNode;I.tag===5&&F!==null&&(I=F,F=Dt(c,y),F!=null&&M.unshift(bc(c,F,I)),F=Dt(c,f),F!=null&&M.push(bc(c,F,I))),c=c.return}return M}function gu(c){if(c===null)return null;do c=c.return;while(c&&c.tag!==5);return c||null}function S_(c,f,y,M,I){for(var F=f._reactName,q=[];y!==null&&y!==M;){var ce=y,_e=ce.alternate,Ne=ce.stateNode;if(_e!==null&&_e===M)break;ce.tag===5&&Ne!==null&&(ce=Ne,I?(_e=Dt(y,F),_e!=null&&q.unshift(bc(y,_e,ce))):I||(_e=Dt(y,F),_e!=null&&q.push(bc(y,_e,ce)))),y=y.return}q.length!==0&&c.push({event:f,listeners:q})}var $S=/\r\n?/g,E_=/\u0000|\uFFFD/g;function r0(c){return(typeof c=="string"?c:""+c).replace($S,`
`).replace(E_,"")}function uf(c,f,y){if(f=r0(f),r0(c)!==f&&y)throw Error(t(425))}function cf(){}var Rc=null,s0=null;function o0(c,f){return c==="textarea"||c==="noscript"||typeof f.children=="string"||typeof f.children=="number"||typeof f.dangerouslySetInnerHTML=="object"&&f.dangerouslySetInnerHTML!==null&&f.dangerouslySetInnerHTML.__html!=null}var a0=typeof setTimeout=="function"?setTimeout:void 0,l0=typeof clearTimeout=="function"?clearTimeout:void 0,Pp=typeof Promise=="function"?Promise:void 0,jS=typeof queueMicrotask=="function"?queueMicrotask:typeof Pp<"u"?function(c){return Pp.resolve(null).then(c).catch(T_)}:a0;function T_(c){setTimeout(function(){throw c})}function Ip(c,f){var y=f,M=0;do{var I=y.nextSibling;if(c.removeChild(y),I&&I.nodeType===8)if(y=I.data,y==="/$"){if(M===0){c.removeChild(I),Zd(f);return}M--}else y!=="$"&&y!=="$?"&&y!=="$!"||M++;y=I}while(y);Zd(f)}function Wa(c){for(;c!=null;c=c.nextSibling){var f=c.nodeType;if(f===1||f===3)break;if(f===8){if(f=c.data,f==="$"||f==="$!"||f==="$?")break;if(f==="/$")return null}}return c}function u0(c){c=c.previousSibling;for(var f=0;c;){if(c.nodeType===8){var y=c.data;if(y==="$"||y==="$!"||y==="$?"){if(f===0)return c;f--}else y==="/$"&&f++}c=c.previousSibling}return null}var vu=Math.random().toString(36).slice(2),sr="__reactFiber$"+vu,Pc="__reactProps$"+vu,Us="__reactContainer$"+vu,yu="__reactEvents$"+vu,Dp="__reactListeners$"+vu,Lp="__reactHandles$"+vu;function Pl(c){var f=c[sr];if(f)return f;for(var y=c.parentNode;y;){if(f=y[Us]||y[sr]){if(y=f.alternate,f.child!==null||y!==null&&y.child!==null)for(c=u0(c);c!==null;){if(y=c[sr])return y;c=u0(c)}return f}c=y,y=c.parentNode}return null}function qa(c){return c=c[sr]||c[Us],!c||c.tag!==5&&c.tag!==6&&c.tag!==13&&c.tag!==3?null:c}function Gi(c){if(c.tag===5||c.tag===6)return c.stateNode;throw Error(t(33))}function Bp(c){return c[Pc]||null}var c0=[],mr=-1;function Fi(c){return{current:c}}function mi(c){0>mr||(c.current=c0[mr],c0[mr]=null,mr--)}function di(c,f){mr++,c0[mr]=c.current,c.current=f}var Ja={},Rr=Fi(Ja),ns=Fi(!1),Xa=Ja;function _u(c,f){var y=c.type.contextTypes;if(!y)return Ja;var M=c.stateNode;if(M&&M.__reactInternalMemoizedUnmaskedChildContext===f)return M.__reactInternalMemoizedMaskedChildContext;var I={},F;for(F in y)I[F]=f[F];return M&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=f,c.__reactInternalMemoizedMaskedChildContext=I),I}function Hr(c){return c=c.childContextTypes,c!=null}function df(){mi(ns),mi(Rr)}function d0(c,f,y){if(Rr.current!==Ja)throw Error(t(168));di(Rr,f),di(ns,y)}function ff(c,f,y){var M=c.stateNode;if(f=f.childContextTypes,typeof M.getChildContext!="function")return y;M=M.getChildContext();for(var I in M)if(!(I in f))throw Error(t(108,ze(c)||"Unknown",I));return W({},y,M)}function xu(c){return c=(c=c.stateNode)&&c.__reactInternalMemoizedMergedChildContext||Ja,Xa=Rr.current,di(Rr,c),di(ns,ns.current),!0}function f0(c,f,y){var M=c.stateNode;if(!M)throw Error(t(169));y?(c=ff(c,f,Xa),M.__reactInternalMemoizedMergedChildContext=c,mi(ns),mi(Rr),di(Rr,c)):mi(ns),di(ns,y)}var Bo=null,hf=!1,Np=!1;function pf(c){Bo===null?Bo=[c]:Bo.push(c)}function M_(c){hf=!0,pf(c)}function da(){if(!Np&&Bo!==null){Np=!0;var c=0,f=Vn;try{var y=Bo;for(Vn=1;c<y.length;c++){var M=y[c];do M=M(!0);while(M!==null)}Bo=null,hf=!1}catch(I){throw Bo!==null&&(Bo=Bo.slice(c+1)),le(Ke,da),I}finally{Vn=f,Np=!1}}return null}var wu=[],ys=0,kp=null,Fp=0,is=[],gr=0,Au=null,wt=1,fo="";function Ya(c,f){wu[ys++]=Fp,wu[ys++]=kp,kp=c,Fp=f}function h0(c,f,y){is[gr++]=wt,is[gr++]=fo,is[gr++]=Au,Au=c;var M=wt;c=fo;var I=32-cn(M)-1;M&=~(1<<I),y+=1;var F=32-cn(f)+I;if(30<F){var q=I-I%5;F=(M&(1<<q)-1).toString(32),M>>=q,I-=q,wt=1<<32-cn(f)+I|y<<I|M,fo=F+c}else wt=1<<F|y<<I|M,fo=c}function p0(c){c.return!==null&&(Ya(c,1),h0(c,1,0))}function Ka(c){for(;c===kp;)kp=wu[--ys],wu[ys]=null,Fp=wu[--ys],wu[ys]=null;for(;c===Au;)Au=is[--gr],is[gr]=null,fo=is[--gr],is[gr]=null,wt=is[--gr],is[gr]=null}var Pr=null,rs=null,yi=!1,ho=null;function m0(c,f){var y=ga(5,null,null,0);y.elementType="DELETED",y.stateNode=f,y.return=c,f=c.deletions,f===null?(c.deletions=[y],c.flags|=16):f.push(y)}function g0(c,f){switch(c.tag){case 5:var y=c.type;return f=f.nodeType!==1||y.toLowerCase()!==f.nodeName.toLowerCase()?null:f,f!==null?(c.stateNode=f,Pr=c,rs=Wa(f.firstChild),!0):!1;case 6:return f=c.pendingProps===""||f.nodeType!==3?null:f,f!==null?(c.stateNode=f,Pr=c,rs=null,!0):!1;case 13:return f=f.nodeType!==8?null:f,f!==null?(y=Au!==null?{id:wt,overflow:fo}:null,c.memoizedState={dehydrated:f,treeContext:y,retryLane:1073741824},y=ga(18,null,null,0),y.stateNode=f,y.return=c,c.child=y,Pr=c,rs=null,!0):!1;default:return!1}}function Up(c){return(c.mode&1)!==0&&(c.flags&128)===0}function Op(c){if(yi){var f=rs;if(f){var y=f;if(!g0(c,f)){if(Up(c))throw Error(t(418));f=Wa(y.nextSibling);var M=Pr;f&&g0(c,f)?m0(M,y):(c.flags=c.flags&-4097|2,yi=!1,Pr=c)}}else{if(Up(c))throw Error(t(418));c.flags=c.flags&-4097|2,yi=!1,Pr=c}}}function Hp(c){for(c=c.return;c!==null&&c.tag!==5&&c.tag!==3&&c.tag!==13;)c=c.return;Pr=c}function Ic(c){if(c!==Pr)return!1;if(!yi)return Hp(c),yi=!0,!1;var f;if((f=c.tag!==3)&&!(f=c.tag!==5)&&(f=c.type,f=f!=="head"&&f!=="body"&&!o0(c.type,c.memoizedProps)),f&&(f=rs)){if(Up(c))throw v0(),Error(t(418));for(;f;)m0(c,f),f=Wa(f.nextSibling)}if(Hp(c),c.tag===13){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(t(317));e:{for(c=c.nextSibling,f=0;c;){if(c.nodeType===8){var y=c.data;if(y==="/$"){if(f===0){rs=Wa(c.nextSibling);break e}f--}else y!=="$"&&y!=="$!"&&y!=="$?"||f++}c=c.nextSibling}rs=null}}else rs=Pr?Wa(c.stateNode.nextSibling):null;return!0}function v0(){for(var c=rs;c;)c=Wa(c.nextSibling)}function Il(){rs=Pr=null,yi=!1}function Dc(c){ho===null?ho=[c]:ho.push(c)}var eE=P.ReactCurrentBatchConfig;function mf(c,f,y){if(c=y.ref,c!==null&&typeof c!="function"&&typeof c!="object"){if(y._owner){if(y=y._owner,y){if(y.tag!==1)throw Error(t(309));var M=y.stateNode}if(!M)throw Error(t(147,c));var I=M,F=""+c;return f!==null&&f.ref!==null&&typeof f.ref=="function"&&f.ref._stringRef===F?f.ref:(f=function(q){var ce=I.refs;q===null?delete ce[F]:ce[F]=q},f._stringRef=F,f)}if(typeof c!="string")throw Error(t(284));if(!y._owner)throw Error(t(290,c))}return c}function gf(c,f){throw c=Object.prototype.toString.call(f),Error(t(31,c==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":c))}function y0(c){var f=c._init;return f(c._payload)}function _0(c){function f(Re,Ae){if(c){var Pe=Re.deletions;Pe===null?(Re.deletions=[Ae],Re.flags|=16):Pe.push(Ae)}}function y(Re,Ae){if(!c)return null;for(;Ae!==null;)f(Re,Ae),Ae=Ae.sibling;return null}function M(Re,Ae){for(Re=new Map;Ae!==null;)Ae.key!==null?Re.set(Ae.key,Ae):Re.set(Ae.index,Ae),Ae=Ae.sibling;return Re}function I(Re,Ae){return Re=Vc(Re,Ae),Re.index=0,Re.sibling=null,Re}function F(Re,Ae,Pe){return Re.index=Pe,c?(Pe=Re.alternate,Pe!==null?(Pe=Pe.index,Pe<Ae?(Re.flags|=2,Ae):Pe):(Re.flags|=2,Ae)):(Re.flags|=1048576,Ae)}function q(Re){return c&&Re.alternate===null&&(Re.flags|=2),Re}function ce(Re,Ae,Pe,vt){return Ae===null||Ae.tag!==6?(Ae=_E(Pe,Re.mode,vt),Ae.return=Re,Ae):(Ae=I(Ae,Pe),Ae.return=Re,Ae)}function _e(Re,Ae,Pe,vt){var $t=Pe.type;return $t===N?it(Re,Ae,Pe.props.children,vt,Pe.key):Ae!==null&&(Ae.elementType===$t||typeof $t=="object"&&$t!==null&&$t.$$typeof===re&&y0($t)===Ae.type)?(vt=I(Ae,Pe.props),vt.ref=mf(Re,Ae,Pe),vt.return=Re,vt):(vt=K_(Pe.type,Pe.key,Pe.props,null,Re.mode,vt),vt.ref=mf(Re,Ae,Pe),vt.return=Re,vt)}function Ne(Re,Ae,Pe,vt){return Ae===null||Ae.tag!==4||Ae.stateNode.containerInfo!==Pe.containerInfo||Ae.stateNode.implementation!==Pe.implementation?(Ae=xE(Pe,Re.mode,vt),Ae.return=Re,Ae):(Ae=I(Ae,Pe.children||[]),Ae.return=Re,Ae)}function it(Re,Ae,Pe,vt,$t){return Ae===null||Ae.tag!==7?(Ae=Lf(Pe,Re.mode,vt,$t),Ae.return=Re,Ae):(Ae=I(Ae,Pe),Ae.return=Re,Ae)}function lt(Re,Ae,Pe){if(typeof Ae=="string"&&Ae!==""||typeof Ae=="number")return Ae=_E(""+Ae,Re.mode,Pe),Ae.return=Re,Ae;if(typeof Ae=="object"&&Ae!==null){switch(Ae.$$typeof){case k:return Pe=K_(Ae.type,Ae.key,Ae.props,null,Re.mode,Pe),Pe.ref=mf(Re,null,Ae),Pe.return=Re,Pe;case L:return Ae=xE(Ae,Re.mode,Pe),Ae.return=Re,Ae;case re:var vt=Ae._init;return lt(Re,vt(Ae._payload),Pe)}if(Y(Ae)||oe(Ae))return Ae=Lf(Ae,Re.mode,Pe,null),Ae.return=Re,Ae;gf(Re,Ae)}return null}function nt(Re,Ae,Pe,vt){var $t=Ae!==null?Ae.key:null;if(typeof Pe=="string"&&Pe!==""||typeof Pe=="number")return $t!==null?null:ce(Re,Ae,""+Pe,vt);if(typeof Pe=="object"&&Pe!==null){switch(Pe.$$typeof){case k:return Pe.key===$t?_e(Re,Ae,Pe,vt):null;case L:return Pe.key===$t?Ne(Re,Ae,Pe,vt):null;case re:return $t=Pe._init,nt(Re,Ae,$t(Pe._payload),vt)}if(Y(Pe)||oe(Pe))return $t!==null?null:it(Re,Ae,Pe,vt,null);gf(Re,Pe)}return null}function Nt(Re,Ae,Pe,vt,$t){if(typeof vt=="string"&&vt!==""||typeof vt=="number")return Re=Re.get(Pe)||null,ce(Ae,Re,""+vt,$t);if(typeof vt=="object"&&vt!==null){switch(vt.$$typeof){case k:return Re=Re.get(vt.key===null?Pe:vt.key)||null,_e(Ae,Re,vt,$t);case L:return Re=Re.get(vt.key===null?Pe:vt.key)||null,Ne(Ae,Re,vt,$t);case re:var on=vt._init;return Nt(Re,Ae,Pe,on(vt._payload),$t)}if(Y(vt)||oe(vt))return Re=Re.get(Pe)||null,it(Ae,Re,vt,$t,null);gf(Ae,vt)}return null}function Xt(Re,Ae,Pe,vt){for(var $t=null,on=null,an=Ae,mn=Ae=0,Wr=null;an!==null&&mn<Pe.length;mn++){an.index>mn?(Wr=an,an=null):Wr=an.sibling;var Qn=nt(Re,an,Pe[mn],vt);if(Qn===null){an===null&&(an=Wr);break}c&&an&&Qn.alternate===null&&f(Re,an),Ae=F(Qn,Ae,mn),on===null?$t=Qn:on.sibling=Qn,on=Qn,an=Wr}if(mn===Pe.length)return y(Re,an),yi&&Ya(Re,mn),$t;if(an===null){for(;mn<Pe.length;mn++)an=lt(Re,Pe[mn],vt),an!==null&&(Ae=F(an,Ae,mn),on===null?$t=an:on.sibling=an,on=an);return yi&&Ya(Re,mn),$t}for(an=M(Re,an);mn<Pe.length;mn++)Wr=Nt(an,Re,mn,Pe[mn],vt),Wr!==null&&(c&&Wr.alternate!==null&&an.delete(Wr.key===null?mn:Wr.key),Ae=F(Wr,Ae,mn),on===null?$t=Wr:on.sibling=Wr,on=Wr);return c&&an.forEach(function(Wc){return f(Re,Wc)}),yi&&Ya(Re,mn),$t}function Yt(Re,Ae,Pe,vt){var $t=oe(Pe);if(typeof $t!="function")throw Error(t(150));if(Pe=$t.call(Pe),Pe==null)throw Error(t(151));for(var on=$t=null,an=Ae,mn=Ae=0,Wr=null,Qn=Pe.next();an!==null&&!Qn.done;mn++,Qn=Pe.next()){an.index>mn?(Wr=an,an=null):Wr=an.sibling;var Wc=nt(Re,an,Qn.value,vt);if(Wc===null){an===null&&(an=Wr);break}c&&an&&Wc.alternate===null&&f(Re,an),Ae=F(Wc,Ae,mn),on===null?$t=Wc:on.sibling=Wc,on=Wc,an=Wr}if(Qn.done)return y(Re,an),yi&&Ya(Re,mn),$t;if(an===null){for(;!Qn.done;mn++,Qn=Pe.next())Qn=lt(Re,Qn.value,vt),Qn!==null&&(Ae=F(Qn,Ae,mn),on===null?$t=Qn:on.sibling=Qn,on=Qn);return yi&&Ya(Re,mn),$t}for(an=M(Re,an);!Qn.done;mn++,Qn=Pe.next())Qn=Nt(an,Re,mn,Qn.value,vt),Qn!==null&&(c&&Qn.alternate!==null&&an.delete(Qn.key===null?mn:Qn.key),Ae=F(Qn,Ae,mn),on===null?$t=Qn:on.sibling=Qn,on=Qn);return c&&an.forEach(function(M4){return f(Re,M4)}),yi&&Ya(Re,mn),$t}function or(Re,Ae,Pe,vt){if(typeof Pe=="object"&&Pe!==null&&Pe.type===N&&Pe.key===null&&(Pe=Pe.props.children),typeof Pe=="object"&&Pe!==null){switch(Pe.$$typeof){case k:e:{for(var $t=Pe.key,on=Ae;on!==null;){if(on.key===$t){if($t=Pe.type,$t===N){if(on.tag===7){y(Re,on.sibling),Ae=I(on,Pe.props.children),Ae.return=Re,Re=Ae;break e}}else if(on.elementType===$t||typeof $t=="object"&&$t!==null&&$t.$$typeof===re&&y0($t)===on.type){y(Re,on.sibling),Ae=I(on,Pe.props),Ae.ref=mf(Re,on,Pe),Ae.return=Re,Re=Ae;break e}y(Re,on);break}else f(Re,on);on=on.sibling}Pe.type===N?(Ae=Lf(Pe.props.children,Re.mode,vt,Pe.key),Ae.return=Re,Re=Ae):(vt=K_(Pe.type,Pe.key,Pe.props,null,Re.mode,vt),vt.ref=mf(Re,Ae,Pe),vt.return=Re,Re=vt)}return q(Re);case L:e:{for(on=Pe.key;Ae!==null;){if(Ae.key===on)if(Ae.tag===4&&Ae.stateNode.containerInfo===Pe.containerInfo&&Ae.stateNode.implementation===Pe.implementation){y(Re,Ae.sibling),Ae=I(Ae,Pe.children||[]),Ae.return=Re,Re=Ae;break e}else{y(Re,Ae);break}else f(Re,Ae);Ae=Ae.sibling}Ae=xE(Pe,Re.mode,vt),Ae.return=Re,Re=Ae}return q(Re);case re:return on=Pe._init,or(Re,Ae,on(Pe._payload),vt)}if(Y(Pe))return Xt(Re,Ae,Pe,vt);if(oe(Pe))return Yt(Re,Ae,Pe,vt);gf(Re,Pe)}return typeof Pe=="string"&&Pe!==""||typeof Pe=="number"?(Pe=""+Pe,Ae!==null&&Ae.tag===6?(y(Re,Ae.sibling),Ae=I(Ae,Pe),Ae.return=Re,Re=Ae):(y(Re,Ae),Ae=_E(Pe,Re.mode,vt),Ae.return=Re,Re=Ae),q(Re)):y(Re,Ae)}return or}var Su=_0(!0),vf=_0(!1),Eu=Fi(null),Tu=null,Qa=null,Lc=null;function Mu(){Lc=Qa=Tu=null}function yf(c){var f=Eu.current;mi(Eu),c._currentValue=f}function _f(c,f,y){for(;c!==null;){var M=c.alternate;if((c.childLanes&f)!==f?(c.childLanes|=f,M!==null&&(M.childLanes|=f)):M!==null&&(M.childLanes&f)!==f&&(M.childLanes|=f),c===y)break;c=c.return}}function Dl(c,f){Tu=c,Lc=Qa=null,c=c.dependencies,c!==null&&c.firstContext!==null&&((c.lanes&f)!==0&&(En=!0),c.firstContext=null)}function Os(c){var f=c._currentValue;if(Lc!==c)if(c={context:c,memoizedValue:f,next:null},Qa===null){if(Tu===null)throw Error(t(308));Qa=c,Tu.dependencies={lanes:0,firstContext:c}}else Qa=Qa.next=c;return f}var Za=null;function x0(c){Za===null?Za=[c]:Za.push(c)}function xf(c,f,y,M){var I=f.interleaved;return I===null?(y.next=y,x0(f)):(y.next=I.next,I.next=y),f.interleaved=y,No(c,M)}function No(c,f){c.lanes|=f;var y=c.alternate;for(y!==null&&(y.lanes|=f),y=c,c=c.return;c!==null;)c.childLanes|=f,y=c.alternate,y!==null&&(y.childLanes|=f),y=c,c=c.return;return y.tag===3?y.stateNode:null}var ii=!1;function Sn(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function zi(c,f){c=c.updateQueue,f.updateQueue===c&&(f.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,effects:c.effects})}function ri(c,f){return{eventTime:c,lane:f,tag:0,payload:null,callback:null,next:null}}function Ei(c,f,y){var M=c.updateQueue;if(M===null)return null;if(M=M.shared,(Yn&2)!==0){var I=M.pending;return I===null?f.next=f:(f.next=I.next,I.next=f),M.pending=f,No(c,y)}return I=M.interleaved,I===null?(f.next=f,x0(M)):(f.next=I.next,I.next=f),M.interleaved=f,No(c,y)}function Gr(c,f,y){if(f=f.updateQueue,f!==null&&(f=f.shared,(y&4194240)!==0)){var M=f.lanes;M&=c.pendingLanes,y|=M,f.lanes=y,hc(c,y)}}function Cu(c,f){var y=c.updateQueue,M=c.alternate;if(M!==null&&(M=M.updateQueue,y===M)){var I=null,F=null;if(y=y.firstBaseUpdate,y!==null){do{var q={eventTime:y.eventTime,lane:y.lane,tag:y.tag,payload:y.payload,callback:y.callback,next:null};F===null?I=F=q:F=F.next=q,y=y.next}while(y!==null);F===null?I=F=f:F=F.next=f}else I=F=f;y={baseState:M.baseState,firstBaseUpdate:I,lastBaseUpdate:F,shared:M.shared,effects:M.effects},c.updateQueue=y;return}c=y.lastBaseUpdate,c===null?y.firstBaseUpdate=f:c.next=f,y.lastBaseUpdate=f}function Ui(c,f,y,M){var I=c.updateQueue;ii=!1;var F=I.firstBaseUpdate,q=I.lastBaseUpdate,ce=I.shared.pending;if(ce!==null){I.shared.pending=null;var _e=ce,Ne=_e.next;_e.next=null,q===null?F=Ne:q.next=Ne,q=_e;var it=c.alternate;it!==null&&(it=it.updateQueue,ce=it.lastBaseUpdate,ce!==q&&(ce===null?it.firstBaseUpdate=Ne:ce.next=Ne,it.lastBaseUpdate=_e))}if(F!==null){var lt=I.baseState;q=0,it=Ne=_e=null,ce=F;do{var nt=ce.lane,Nt=ce.eventTime;if((M&nt)===nt){it!==null&&(it=it.next={eventTime:Nt,lane:0,tag:ce.tag,payload:ce.payload,callback:ce.callback,next:null});e:{var Xt=c,Yt=ce;switch(nt=f,Nt=y,Yt.tag){case 1:if(Xt=Yt.payload,typeof Xt=="function"){lt=Xt.call(Nt,lt,nt);break e}lt=Xt;break e;case 3:Xt.flags=Xt.flags&-65537|128;case 0:if(Xt=Yt.payload,nt=typeof Xt=="function"?Xt.call(Nt,lt,nt):Xt,nt==null)break e;lt=W({},lt,nt);break e;case 2:ii=!0}}ce.callback!==null&&ce.lane!==0&&(c.flags|=64,nt=I.effects,nt===null?I.effects=[ce]:nt.push(ce))}else Nt={eventTime:Nt,lane:nt,tag:ce.tag,payload:ce.payload,callback:ce.callback,next:null},it===null?(Ne=it=Nt,_e=lt):it=it.next=Nt,q|=nt;if(ce=ce.next,ce===null){if(ce=I.shared.pending,ce===null)break;nt=ce,ce=nt.next,nt.next=null,I.lastBaseUpdate=nt,I.shared.pending=null}}while(!0);if(it===null&&(_e=lt),I.baseState=_e,I.firstBaseUpdate=Ne,I.lastBaseUpdate=it,f=I.shared.interleaved,f!==null){I=f;do q|=I.lane,I=I.next;while(I!==f)}else F===null&&(I.shared.lanes=0);Rf|=q,c.lanes=q,c.memoizedState=lt}}function Bc(c,f,y){if(c=f.effects,f.effects=null,c!==null)for(f=0;f<c.length;f++){var M=c[f],I=M.callback;if(I!==null){if(M.callback=null,M=y,typeof I!="function")throw Error(t(191,I));I.call(M)}}}var fa={},Hs=Fi(fa),bu=Fi(fa),$a=Fi(fa);function Yi(c){if(c===fa)throw Error(t(174));return c}function wf(c,f){switch(di($a,f),di(bu,c),di(Hs,fa),c=f.nodeType,c){case 9:case 11:f=(f=f.documentElement)?f.namespaceURI:st(null,"");break;default:c=c===8?f.parentNode:f,f=c.namespaceURI||null,c=c.tagName,f=st(f,c)}mi(Hs),di(Hs,f)}function Ll(){mi(Hs),mi(bu),mi($a)}function Ru(c){Yi($a.current);var f=Yi(Hs.current),y=st(f,c.type);f!==y&&(di(bu,c),di(Hs,y))}function Nc(c){bu.current===c&&(mi(Hs),mi(bu))}var _i=Fi(0);function ko(c){for(var f=c;f!==null;){if(f.tag===13){var y=f.memoizedState;if(y!==null&&(y=y.dehydrated,y===null||y.data==="$?"||y.data==="$!"))return f}else if(f.tag===19&&f.memoizedProps.revealOrder!==void 0){if((f.flags&128)!==0)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}var kc=[];function ha(){for(var c=0;c<kc.length;c++)kc[c]._workInProgressVersionPrimary=null;kc.length=0}var Pu=P.ReactCurrentDispatcher,Iu=P.ReactCurrentBatchConfig,ja=0,gi=null,Oi=null,Wn=null,Fo=!1,zr=!1,Bl=0,_s=0;function Ir(){throw Error(t(321))}function Af(c,f){if(f===null)return!1;for(var y=0;y<f.length&&y<c.length;y++)if(!ks(c[y],f[y]))return!1;return!0}function Sf(c,f,y,M,I,F){if(ja=F,gi=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,Pu.current=c===null||c.memoizedState===null?L_:B_,c=y(M,I),zr){F=0;do{if(zr=!1,Bl=0,25<=F)throw Error(t(301));F+=1,Wn=Oi=null,f.updateQueue=null,Pu.current=N_,c=y(M,I)}while(zr)}if(Pu.current=Xp,f=Oi!==null&&Oi.next!==null,ja=0,Wn=Oi=gi=null,Fo=!1,f)throw Error(t(300));return c}function w0(){var c=Bl!==0;return Bl=0,c}function Dr(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Wn===null?gi.memoizedState=Wn=c:Wn=Wn.next=c,Wn}function Gs(){if(Oi===null){var c=gi.alternate;c=c!==null?c.memoizedState:null}else c=Oi.next;var f=Wn===null?gi.memoizedState:Wn.next;if(f!==null)Wn=f,Oi=c;else{if(c===null)throw Error(t(310));Oi=c,c={memoizedState:Oi.memoizedState,baseState:Oi.baseState,baseQueue:Oi.baseQueue,queue:Oi.queue,next:null},Wn===null?gi.memoizedState=Wn=c:Wn=Wn.next=c}return Wn}function Fc(c,f){return typeof f=="function"?f(c):f}function Ef(c){var f=Gs(),y=f.queue;if(y===null)throw Error(t(311));y.lastRenderedReducer=c;var M=Oi,I=M.baseQueue,F=y.pending;if(F!==null){if(I!==null){var q=I.next;I.next=F.next,F.next=q}M.baseQueue=I=F,y.pending=null}if(I!==null){F=I.next,M=M.baseState;var ce=q=null,_e=null,Ne=F;do{var it=Ne.lane;if((ja&it)===it)_e!==null&&(_e=_e.next={lane:0,action:Ne.action,hasEagerState:Ne.hasEagerState,eagerState:Ne.eagerState,next:null}),M=Ne.hasEagerState?Ne.eagerState:c(M,Ne.action);else{var lt={lane:it,action:Ne.action,hasEagerState:Ne.hasEagerState,eagerState:Ne.eagerState,next:null};_e===null?(ce=_e=lt,q=M):_e=_e.next=lt,gi.lanes|=it,Rf|=it}Ne=Ne.next}while(Ne!==null&&Ne!==F);_e===null?q=M:_e.next=ce,ks(M,f.memoizedState)||(En=!0),f.memoizedState=M,f.baseState=q,f.baseQueue=_e,y.lastRenderedState=M}if(c=y.interleaved,c!==null){I=c;do F=I.lane,gi.lanes|=F,Rf|=F,I=I.next;while(I!==c)}else I===null&&(y.lanes=0);return[f.memoizedState,y.dispatch]}function el(c){var f=Gs(),y=f.queue;if(y===null)throw Error(t(311));y.lastRenderedReducer=c;var M=y.dispatch,I=y.pending,F=f.memoizedState;if(I!==null){y.pending=null;var q=I=I.next;do F=c(F,q.action),q=q.next;while(q!==I);ks(F,f.memoizedState)||(En=!0),f.memoizedState=F,f.baseQueue===null&&(f.baseState=F),y.lastRenderedState=F}return[F,M]}function A0(){}function S0(c,f){var y=gi,M=Gs(),I=f(),F=!ks(M.memoizedState,I);if(F&&(M.memoizedState=I,En=!0),M=M.queue,M0(C_.bind(null,y,M,c),[c]),M.getSnapshot!==f||F||Wn!==null&&Wn.memoizedState.tag&1){if(y.flags|=2048,Uo(9,Tf.bind(null,y,M,I,f),void 0,null),Vr===null)throw Error(t(349));(ja&30)!==0||Gp(y,f,I)}return I}function Gp(c,f,y){c.flags|=16384,c={getSnapshot:f,value:y},f=gi.updateQueue,f===null?(f={lastEffect:null,stores:null},gi.updateQueue=f,f.stores=[c]):(y=f.stores,y===null?f.stores=[c]:y.push(c))}function Tf(c,f,y,M){f.value=y,f.getSnapshot=M,b_(f)&&E0(c)}function C_(c,f,y){return y(function(){b_(f)&&E0(c)})}function b_(c){var f=c.getSnapshot;c=c.value;try{var y=f();return!ks(c,y)}catch{return!0}}function E0(c){var f=No(c,1);f!==null&&sl(f,c,1,-1)}function T0(c){var f=Dr();return typeof c=="function"&&(c=c()),f.memoizedState=f.baseState=c,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Fc,lastRenderedState:c},f.queue=c,c=c.dispatch=Du.bind(null,gi,c),[f.memoizedState,c]}function Uo(c,f,y,M){return c={tag:c,create:f,destroy:y,deps:M,next:null},f=gi.updateQueue,f===null?(f={lastEffect:null,stores:null},gi.updateQueue=f,f.lastEffect=c.next=c):(y=f.lastEffect,y===null?f.lastEffect=c.next=c:(M=y.next,y.next=c,c.next=M,f.lastEffect=c)),c}function R_(){return Gs().memoizedState}function pa(c,f,y,M){var I=Dr();gi.flags|=c,I.memoizedState=Uo(1|f,y,void 0,M===void 0?null:M)}function Mf(c,f,y,M){var I=Gs();M=M===void 0?null:M;var F=void 0;if(Oi!==null){var q=Oi.memoizedState;if(F=q.destroy,M!==null&&Af(M,q.deps)){I.memoizedState=Uo(f,y,F,M);return}}gi.flags|=c,I.memoizedState=Uo(1|f,y,F,M)}function ss(c,f){return pa(8390656,8,c,f)}function M0(c,f){return Mf(2048,8,c,f)}function C0(c,f){return Mf(4,2,c,f)}function P_(c,f){return Mf(4,4,c,f)}function I_(c,f){if(typeof f=="function")return c=c(),f(c),function(){f(null)};if(f!=null)return c=c(),f.current=c,function(){f.current=null}}function b0(c,f,y){return y=y!=null?y.concat([c]):null,Mf(4,4,I_.bind(null,f,c),y)}function zp(){}function D_(c,f){var y=Gs();f=f===void 0?null:f;var M=y.memoizedState;return M!==null&&f!==null&&Af(f,M[1])?M[0]:(y.memoizedState=[c,f],c)}function zs(c,f){var y=Gs();f=f===void 0?null:f;var M=y.memoizedState;return M!==null&&f!==null&&Af(f,M[1])?M[0]:(c=c(),y.memoizedState=[c,f],c)}function Vp(c,f,y){return(ja&21)===0?(c.baseState&&(c.baseState=!1,En=!0),c.memoizedState=y):(ks(y,f)||(y=ci(),gi.lanes|=y,Rf|=y,c.baseState=!0),f)}function tE(c,f){var y=Vn;Vn=y!==0&&4>y?y:4,c(!0);var M=Iu.transition;Iu.transition={};try{c(!1),f()}finally{Vn=y,Iu.transition=M}}function tl(){return Gs().memoizedState}function Wp(c,f,y){var M=Gc(c);if(y={lane:M,action:y,hasEagerState:!1,eagerState:null,next:null},Cf(c))qp(f,y);else if(y=xf(c,f,y,M),y!==null){var I=Ws();sl(y,c,M,I),Jp(y,f,M)}}function Du(c,f,y){var M=Gc(c),I={lane:M,action:y,hasEagerState:!1,eagerState:null,next:null};if(Cf(c))qp(f,I);else{var F=c.alternate;if(c.lanes===0&&(F===null||F.lanes===0)&&(F=f.lastRenderedReducer,F!==null))try{var q=f.lastRenderedState,ce=F(q,y);if(I.hasEagerState=!0,I.eagerState=ce,ks(ce,q)){var _e=f.interleaved;_e===null?(I.next=I,x0(f)):(I.next=_e.next,_e.next=I),f.interleaved=I;return}}catch{}finally{}y=xf(c,f,I,M),y!==null&&(I=Ws(),sl(y,c,M,I),Jp(y,f,M))}}function Cf(c){var f=c.alternate;return c===gi||f!==null&&f===gi}function qp(c,f){zr=Fo=!0;var y=c.pending;y===null?f.next=f:(f.next=y.next,y.next=f),c.pending=f}function Jp(c,f,y){if((y&4194240)!==0){var M=f.lanes;M&=c.pendingLanes,y|=M,f.lanes=y,hc(c,y)}}var Xp={readContext:Os,useCallback:Ir,useContext:Ir,useEffect:Ir,useImperativeHandle:Ir,useInsertionEffect:Ir,useLayoutEffect:Ir,useMemo:Ir,useReducer:Ir,useRef:Ir,useState:Ir,useDebugValue:Ir,useDeferredValue:Ir,useTransition:Ir,useMutableSource:Ir,useSyncExternalStore:Ir,useId:Ir,unstable_isNewReconciler:!1},L_={readContext:Os,useCallback:function(c,f){return Dr().memoizedState=[c,f===void 0?null:f],c},useContext:Os,useEffect:ss,useImperativeHandle:function(c,f,y){return y=y!=null?y.concat([c]):null,pa(4194308,4,I_.bind(null,f,c),y)},useLayoutEffect:function(c,f){return pa(4194308,4,c,f)},useInsertionEffect:function(c,f){return pa(4,2,c,f)},useMemo:function(c,f){var y=Dr();return f=f===void 0?null:f,c=c(),y.memoizedState=[c,f],c},useReducer:function(c,f,y){var M=Dr();return f=y!==void 0?y(f):f,M.memoizedState=M.baseState=f,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:f},M.queue=c,c=c.dispatch=Wp.bind(null,gi,c),[M.memoizedState,c]},useRef:function(c){var f=Dr();return c={current:c},f.memoizedState=c},useState:T0,useDebugValue:zp,useDeferredValue:function(c){return Dr().memoizedState=c},useTransition:function(){var c=T0(!1),f=c[0];return c=tE.bind(null,c[1]),Dr().memoizedState=c,[f,c]},useMutableSource:function(){},useSyncExternalStore:function(c,f,y){var M=gi,I=Dr();if(yi){if(y===void 0)throw Error(t(407));y=y()}else{if(y=f(),Vr===null)throw Error(t(349));(ja&30)!==0||Gp(M,f,y)}I.memoizedState=y;var F={value:y,getSnapshot:f};return I.queue=F,ss(C_.bind(null,M,F,c),[c]),M.flags|=2048,Uo(9,Tf.bind(null,M,F,y,f),void 0,null),y},useId:function(){var c=Dr(),f=Vr.identifierPrefix;if(yi){var y=fo,M=wt;y=(M&~(1<<32-cn(M)-1)).toString(32)+y,f=":"+f+"R"+y,y=Bl++,0<y&&(f+="H"+y.toString(32)),f+=":"}else y=_s++,f=":"+f+"r"+y.toString(32)+":";return c.memoizedState=f},unstable_isNewReconciler:!1},B_={readContext:Os,useCallback:D_,useContext:Os,useEffect:M0,useImperativeHandle:b0,useInsertionEffect:C0,useLayoutEffect:P_,useMemo:zs,useReducer:Ef,useRef:R_,useState:function(){return Ef(Fc)},useDebugValue:zp,useDeferredValue:function(c){var f=Gs();return Vp(f,Oi.memoizedState,c)},useTransition:function(){var c=Ef(Fc)[0],f=Gs().memoizedState;return[c,f]},useMutableSource:A0,useSyncExternalStore:S0,useId:tl,unstable_isNewReconciler:!1},N_={readContext:Os,useCallback:D_,useContext:Os,useEffect:M0,useImperativeHandle:b0,useInsertionEffect:C0,useLayoutEffect:P_,useMemo:zs,useReducer:el,useRef:R_,useState:function(){return el(Fc)},useDebugValue:zp,useDeferredValue:function(c){var f=Gs();return Oi===null?f.memoizedState=c:Vp(f,Oi.memoizedState,c)},useTransition:function(){var c=el(Fc)[0],f=Gs().memoizedState;return[c,f]},useMutableSource:A0,useSyncExternalStore:S0,useId:tl,unstable_isNewReconciler:!1};function po(c,f){if(c&&c.defaultProps){f=W({},f),c=c.defaultProps;for(var y in c)f[y]===void 0&&(f[y]=c[y]);return f}return f}function bf(c,f,y,M){f=c.memoizedState,y=y(M,f),y=y==null?f:W({},f,y),c.memoizedState=y,c.lanes===0&&(c.updateQueue.baseState=y)}var Yp={isMounted:function(c){return(c=c._reactInternals)?K(c)===c:!1},enqueueSetState:function(c,f,y){c=c._reactInternals;var M=Ws(),I=Gc(c),F=ri(M,I);F.payload=f,y!=null&&(F.callback=y),f=Ei(c,F,I),f!==null&&(sl(f,c,I,M),Gr(f,c,I))},enqueueReplaceState:function(c,f,y){c=c._reactInternals;var M=Ws(),I=Gc(c),F=ri(M,I);F.tag=1,F.payload=f,y!=null&&(F.callback=y),f=Ei(c,F,I),f!==null&&(sl(f,c,I,M),Gr(f,c,I))},enqueueForceUpdate:function(c,f){c=c._reactInternals;var y=Ws(),M=Gc(c),I=ri(y,M);I.tag=2,f!=null&&(I.callback=f),f=Ei(c,I,M),f!==null&&(sl(f,c,M,y),Gr(f,c,M))}};function k_(c,f,y,M,I,F,q){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(M,F,q):f.prototype&&f.prototype.isPureReactComponent?!hu(y,M)||!hu(I,F):!0}function m(c,f,y){var M=!1,I=Ja,F=f.contextType;return typeof F=="object"&&F!==null?F=Os(F):(I=Hr(f)?Xa:Rr.current,M=f.contextTypes,F=(M=M!=null)?_u(c,I):Ja),f=new f(y,F),c.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=Yp,c.stateNode=f,f._reactInternals=c,M&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=I,c.__reactInternalMemoizedMaskedChildContext=F),f}function g(c,f,y,M){c=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(y,M),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(y,M),f.state!==c&&Yp.enqueueReplaceState(f,f.state,null)}function T(c,f,y,M){var I=c.stateNode;I.props=y,I.state=c.memoizedState,I.refs={},Sn(c);var F=f.contextType;typeof F=="object"&&F!==null?I.context=Os(F):(F=Hr(f)?Xa:Rr.current,I.context=_u(c,F)),I.state=c.memoizedState,F=f.getDerivedStateFromProps,typeof F=="function"&&(bf(c,f,F,y),I.state=c.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof I.getSnapshotBeforeUpdate=="function"||typeof I.UNSAFE_componentWillMount!="function"&&typeof I.componentWillMount!="function"||(f=I.state,typeof I.componentWillMount=="function"&&I.componentWillMount(),typeof I.UNSAFE_componentWillMount=="function"&&I.UNSAFE_componentWillMount(),f!==I.state&&Yp.enqueueReplaceState(I,I.state,null),Ui(c,y,I,M),I.state=c.memoizedState),typeof I.componentDidMount=="function"&&(c.flags|=4194308)}function R(c,f){try{var y="",M=f;do y+=ke(M),M=M.return;while(M);var I=y}catch(F){I=`
Error generating stack: `+F.message+`
`+F.stack}return{value:c,source:f,stack:I,digest:null}}function B(c,f,y){return{value:c,source:null,stack:y??null,digest:f??null}}function H(c,f){try{console.error(f.value)}catch(y){setTimeout(function(){throw y})}}var ae=typeof WeakMap=="function"?WeakMap:Map;function Ee(c,f,y){y=ri(-1,y),y.tag=3,y.payload={element:null};var M=f.value;return y.callback=function(){V_||(V_=!0,dE=M),H(c,f)},y}function Ve(c,f,y){y=ri(-1,y),y.tag=3;var M=c.type.getDerivedStateFromError;if(typeof M=="function"){var I=f.value;y.payload=function(){return M(I)},y.callback=function(){H(c,f)}}var F=c.stateNode;return F!==null&&typeof F.componentDidCatch=="function"&&(y.callback=function(){H(c,f),typeof M!="function"&&(Oc===null?Oc=new Set([this]):Oc.add(this));var q=f.stack;this.componentDidCatch(f.value,{componentStack:q!==null?q:""})}),y}function mt(c,f,y){var M=c.pingCache;if(M===null){M=c.pingCache=new ae;var I=new Set;M.set(f,I)}else I=M.get(f),I===void 0&&(I=new Set,M.set(f,I));I.has(y)||(I.add(y),c=m4.bind(null,c,f,y),f.then(c,c))}function Ft(c){do{var f;if((f=c.tag===13)&&(f=c.memoizedState,f=f!==null?f.dehydrated!==null:!0),f)return c;c=c.return}while(c!==null);return null}function vn(c,f,y,M,I){return(c.mode&1)===0?(c===f?c.flags|=65536:(c.flags|=128,y.flags|=131072,y.flags&=-52805,y.tag===1&&(y.alternate===null?y.tag=17:(f=ri(-1,1),f.tag=2,Ei(y,f,1))),y.lanes|=1),c):(c.flags|=65536,c.lanes=I,c)}var nn=P.ReactCurrentOwner,En=!1;function Lt(c,f,y,M){f.child=c===null?vf(f,null,y,M):Su(f,c.child,y,M)}function Lr(c,f,y,M,I){y=y.render;var F=f.ref;return Dl(f,I),M=Sf(c,f,y,M,F,I),y=w0(),c!==null&&!En?(f.updateQueue=c.updateQueue,f.flags&=-2053,c.lanes&=~I,Lu(c,f,I)):(yi&&y&&p0(f),f.flags|=1,Lt(c,f,M,I),f.child)}function Vs(c,f,y,M,I){if(c===null){var F=y.type;return typeof F=="function"&&!yE(F)&&F.defaultProps===void 0&&y.compare===null&&y.defaultProps===void 0?(f.tag=15,f.type=F,De(c,f,F,M,I)):(c=K_(y.type,null,M,f,f.mode,I),c.ref=f.ref,c.return=f,f.child=c)}if(F=c.child,(c.lanes&I)===0){var q=F.memoizedProps;if(y=y.compare,y=y!==null?y:hu,y(q,M)&&c.ref===f.ref)return Lu(c,f,I)}return f.flags|=1,c=Vc(F,M),c.ref=f.ref,c.return=f,f.child=c}function De(c,f,y,M,I){if(c!==null){var F=c.memoizedProps;if(hu(F,M)&&c.ref===f.ref)if(En=!1,f.pendingProps=M=F,(c.lanes&I)!==0)(c.flags&131072)!==0&&(En=!0);else return f.lanes=c.lanes,Lu(c,f,I)}return bt(c,f,y,M,I)}function Te(c,f,y){var M=f.pendingProps,I=M.children,F=c!==null?c.memoizedState:null;if(M.mode==="hidden")if((f.mode&1)===0)f.memoizedState={baseLanes:0,cachePool:null,transitions:null},di(Qp,Oo),Oo|=y;else{if((y&1073741824)===0)return c=F!==null?F.baseLanes|y:y,f.lanes=f.childLanes=1073741824,f.memoizedState={baseLanes:c,cachePool:null,transitions:null},f.updateQueue=null,di(Qp,Oo),Oo|=c,null;f.memoizedState={baseLanes:0,cachePool:null,transitions:null},M=F!==null?F.baseLanes:y,di(Qp,Oo),Oo|=M}else F!==null?(M=F.baseLanes|y,f.memoizedState=null):M=y,di(Qp,Oo),Oo|=M;return Lt(c,f,I,y),f.child}function Ue(c,f){var y=f.ref;(c===null&&y!==null||c!==null&&c.ref!==y)&&(f.flags|=512,f.flags|=2097152)}function bt(c,f,y,M,I){var F=Hr(y)?Xa:Rr.current;return F=_u(f,F),Dl(f,I),y=Sf(c,f,y,M,F,I),M=w0(),c!==null&&!En?(f.updateQueue=c.updateQueue,f.flags&=-2053,c.lanes&=~I,Lu(c,f,I)):(yi&&M&&p0(f),f.flags|=1,Lt(c,f,y,I),f.child)}function Qt(c,f,y,M,I){if(Hr(y)){var F=!0;xu(f)}else F=!1;if(Dl(f,I),f.stateNode===null)U_(c,f),m(f,y,M),T(f,y,M,I),M=!0;else if(c===null){var q=f.stateNode,ce=f.memoizedProps;q.props=ce;var _e=q.context,Ne=y.contextType;typeof Ne=="object"&&Ne!==null?Ne=Os(Ne):(Ne=Hr(y)?Xa:Rr.current,Ne=_u(f,Ne));var it=y.getDerivedStateFromProps,lt=typeof it=="function"||typeof q.getSnapshotBeforeUpdate=="function";lt||typeof q.UNSAFE_componentWillReceiveProps!="function"&&typeof q.componentWillReceiveProps!="function"||(ce!==M||_e!==Ne)&&g(f,q,M,Ne),ii=!1;var nt=f.memoizedState;q.state=nt,Ui(f,M,q,I),_e=f.memoizedState,ce!==M||nt!==_e||ns.current||ii?(typeof it=="function"&&(bf(f,y,it,M),_e=f.memoizedState),(ce=ii||k_(f,y,ce,M,nt,_e,Ne))?(lt||typeof q.UNSAFE_componentWillMount!="function"&&typeof q.componentWillMount!="function"||(typeof q.componentWillMount=="function"&&q.componentWillMount(),typeof q.UNSAFE_componentWillMount=="function"&&q.UNSAFE_componentWillMount()),typeof q.componentDidMount=="function"&&(f.flags|=4194308)):(typeof q.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=M,f.memoizedState=_e),q.props=M,q.state=_e,q.context=Ne,M=ce):(typeof q.componentDidMount=="function"&&(f.flags|=4194308),M=!1)}else{q=f.stateNode,zi(c,f),ce=f.memoizedProps,Ne=f.type===f.elementType?ce:po(f.type,ce),q.props=Ne,lt=f.pendingProps,nt=q.context,_e=y.contextType,typeof _e=="object"&&_e!==null?_e=Os(_e):(_e=Hr(y)?Xa:Rr.current,_e=_u(f,_e));var Nt=y.getDerivedStateFromProps;(it=typeof Nt=="function"||typeof q.getSnapshotBeforeUpdate=="function")||typeof q.UNSAFE_componentWillReceiveProps!="function"&&typeof q.componentWillReceiveProps!="function"||(ce!==lt||nt!==_e)&&g(f,q,M,_e),ii=!1,nt=f.memoizedState,q.state=nt,Ui(f,M,q,I);var Xt=f.memoizedState;ce!==lt||nt!==Xt||ns.current||ii?(typeof Nt=="function"&&(bf(f,y,Nt,M),Xt=f.memoizedState),(Ne=ii||k_(f,y,Ne,M,nt,Xt,_e)||!1)?(it||typeof q.UNSAFE_componentWillUpdate!="function"&&typeof q.componentWillUpdate!="function"||(typeof q.componentWillUpdate=="function"&&q.componentWillUpdate(M,Xt,_e),typeof q.UNSAFE_componentWillUpdate=="function"&&q.UNSAFE_componentWillUpdate(M,Xt,_e)),typeof q.componentDidUpdate=="function"&&(f.flags|=4),typeof q.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof q.componentDidUpdate!="function"||ce===c.memoizedProps&&nt===c.memoizedState||(f.flags|=4),typeof q.getSnapshotBeforeUpdate!="function"||ce===c.memoizedProps&&nt===c.memoizedState||(f.flags|=1024),f.memoizedProps=M,f.memoizedState=Xt),q.props=M,q.state=Xt,q.context=_e,M=Ne):(typeof q.componentDidUpdate!="function"||ce===c.memoizedProps&&nt===c.memoizedState||(f.flags|=4),typeof q.getSnapshotBeforeUpdate!="function"||ce===c.memoizedProps&&nt===c.memoizedState||(f.flags|=1024),M=!1)}return xn(c,f,y,M,F,I)}function xn(c,f,y,M,I,F){Ue(c,f);var q=(f.flags&128)!==0;if(!M&&!q)return I&&f0(f,y,!1),Lu(c,f,F);M=f.stateNode,nn.current=f;var ce=q&&typeof y.getDerivedStateFromError!="function"?null:M.render();return f.flags|=1,c!==null&&q?(f.child=Su(f,c.child,null,F),f.child=Su(f,null,ce,F)):Lt(c,f,ce,F),f.memoizedState=M.state,I&&f0(f,y,!0),f.child}function yn(c){var f=c.stateNode;f.pendingContext?d0(c,f.pendingContext,f.pendingContext!==f.context):f.context&&d0(c,f.context,!1),wf(c,f.containerInfo)}function Gn(c,f,y,M,I){return Il(),Dc(I),f.flags|=256,Lt(c,f,y,M),f.child}var Ki={dehydrated:null,treeContext:null,retryLane:0};function Hn(c){return{baseLanes:c,cachePool:null,transitions:null}}function nl(c,f,y){var M=f.pendingProps,I=_i.current,F=!1,q=(f.flags&128)!==0,ce;if((ce=q)||(ce=c!==null&&c.memoizedState===null?!1:(I&2)!==0),ce?(F=!0,f.flags&=-129):(c===null||c.memoizedState!==null)&&(I|=1),di(_i,I&1),c===null)return Op(f),c=f.memoizedState,c!==null&&(c=c.dehydrated,c!==null)?((f.mode&1)===0?f.lanes=1:c.data==="$!"?f.lanes=8:f.lanes=1073741824,null):(q=M.children,c=M.fallback,F?(M=f.mode,F=f.child,q={mode:"hidden",children:q},(M&1)===0&&F!==null?(F.childLanes=0,F.pendingProps=q):F=Q_(q,M,0,null),c=Lf(c,M,y,null),F.return=f,c.return=f,F.sibling=c,f.child=F,f.child.memoizedState=Hn(y),f.memoizedState=Ki,c):R0(f,q));if(I=c.memoizedState,I!==null&&(ce=I.dehydrated,ce!==null))return i4(c,f,q,M,ce,I,y);if(F){F=M.fallback,q=f.mode,I=c.child,ce=I.sibling;var _e={mode:"hidden",children:M.children};return(q&1)===0&&f.child!==I?(M=f.child,M.childLanes=0,M.pendingProps=_e,f.deletions=null):(M=Vc(I,_e),M.subtreeFlags=I.subtreeFlags&14680064),ce!==null?F=Vc(ce,F):(F=Lf(F,q,y,null),F.flags|=2),F.return=f,M.return=f,M.sibling=F,f.child=M,M=F,F=f.child,q=c.child.memoizedState,q=q===null?Hn(y):{baseLanes:q.baseLanes|y,cachePool:null,transitions:q.transitions},F.memoizedState=q,F.childLanes=c.childLanes&~y,f.memoizedState=Ki,M}return F=c.child,c=F.sibling,M=Vc(F,{mode:"visible",children:M.children}),(f.mode&1)===0&&(M.lanes=y),M.return=f,M.sibling=null,c!==null&&(y=f.deletions,y===null?(f.deletions=[c],f.flags|=16):y.push(c)),f.child=M,f.memoizedState=null,M}function R0(c,f){return f=Q_({mode:"visible",children:f},c.mode,0,null),f.return=c,c.child=f}function F_(c,f,y,M){return M!==null&&Dc(M),Su(f,c.child,null,y),c=R0(f,f.pendingProps.children),c.flags|=2,f.memoizedState=null,c}function i4(c,f,y,M,I,F,q){if(y)return f.flags&256?(f.flags&=-257,M=B(Error(t(422))),F_(c,f,q,M)):f.memoizedState!==null?(f.child=c.child,f.flags|=128,null):(F=M.fallback,I=f.mode,M=Q_({mode:"visible",children:M.children},I,0,null),F=Lf(F,I,q,null),F.flags|=2,M.return=f,F.return=f,M.sibling=F,f.child=M,(f.mode&1)!==0&&Su(f,c.child,null,q),f.child.memoizedState=Hn(q),f.memoizedState=Ki,F);if((f.mode&1)===0)return F_(c,f,q,null);if(I.data==="$!"){if(M=I.nextSibling&&I.nextSibling.dataset,M)var ce=M.dgst;return M=ce,F=Error(t(419)),M=B(F,M,void 0),F_(c,f,q,M)}if(ce=(q&c.childLanes)!==0,En||ce){if(M=Vr,M!==null){switch(q&-q){case 4:I=2;break;case 16:I=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:I=32;break;case 536870912:I=268435456;break;default:I=0}I=(I&(M.suspendedLanes|q))!==0?0:I,I!==0&&I!==F.retryLane&&(F.retryLane=I,No(c,I),sl(M,c,I,-1))}return vE(),M=B(Error(t(421))),F_(c,f,q,M)}return I.data==="$?"?(f.flags|=128,f.child=c.child,f=g4.bind(null,c),I._reactRetry=f,null):(c=F.treeContext,rs=Wa(I.nextSibling),Pr=f,yi=!0,ho=null,c!==null&&(is[gr++]=wt,is[gr++]=fo,is[gr++]=Au,wt=c.id,fo=c.overflow,Au=f),f=R0(f,M.children),f.flags|=4096,f)}function dP(c,f,y){c.lanes|=f;var M=c.alternate;M!==null&&(M.lanes|=f),_f(c.return,f,y)}function nE(c,f,y,M,I){var F=c.memoizedState;F===null?c.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:M,tail:y,tailMode:I}:(F.isBackwards=f,F.rendering=null,F.renderingStartTime=0,F.last=M,F.tail=y,F.tailMode=I)}function fP(c,f,y){var M=f.pendingProps,I=M.revealOrder,F=M.tail;if(Lt(c,f,M.children,y),M=_i.current,(M&2)!==0)M=M&1|2,f.flags|=128;else{if(c!==null&&(c.flags&128)!==0)e:for(c=f.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&dP(c,y,f);else if(c.tag===19)dP(c,y,f);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===f)break e;for(;c.sibling===null;){if(c.return===null||c.return===f)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}M&=1}if(di(_i,M),(f.mode&1)===0)f.memoizedState=null;else switch(I){case"forwards":for(y=f.child,I=null;y!==null;)c=y.alternate,c!==null&&ko(c)===null&&(I=y),y=y.sibling;y=I,y===null?(I=f.child,f.child=null):(I=y.sibling,y.sibling=null),nE(f,!1,I,y,F);break;case"backwards":for(y=null,I=f.child,f.child=null;I!==null;){if(c=I.alternate,c!==null&&ko(c)===null){f.child=I;break}c=I.sibling,I.sibling=y,y=I,I=c}nE(f,!0,y,null,F);break;case"together":nE(f,!1,null,null,void 0);break;default:f.memoizedState=null}return f.child}function U_(c,f){(f.mode&1)===0&&c!==null&&(c.alternate=null,f.alternate=null,f.flags|=2)}function Lu(c,f,y){if(c!==null&&(f.dependencies=c.dependencies),Rf|=f.lanes,(y&f.childLanes)===0)return null;if(c!==null&&f.child!==c.child)throw Error(t(153));if(f.child!==null){for(c=f.child,y=Vc(c,c.pendingProps),f.child=y,y.return=f;c.sibling!==null;)c=c.sibling,y=y.sibling=Vc(c,c.pendingProps),y.return=f;y.sibling=null}return f.child}function r4(c,f,y){switch(f.tag){case 3:yn(f),Il();break;case 5:Ru(f);break;case 1:Hr(f.type)&&xu(f);break;case 4:wf(f,f.stateNode.containerInfo);break;case 10:var M=f.type._context,I=f.memoizedProps.value;di(Eu,M._currentValue),M._currentValue=I;break;case 13:if(M=f.memoizedState,M!==null)return M.dehydrated!==null?(di(_i,_i.current&1),f.flags|=128,null):(y&f.child.childLanes)!==0?nl(c,f,y):(di(_i,_i.current&1),c=Lu(c,f,y),c!==null?c.sibling:null);di(_i,_i.current&1);break;case 19:if(M=(y&f.childLanes)!==0,(c.flags&128)!==0){if(M)return fP(c,f,y);f.flags|=128}if(I=f.memoizedState,I!==null&&(I.rendering=null,I.tail=null,I.lastEffect=null),di(_i,_i.current),M)break;return null;case 22:case 23:return f.lanes=0,Te(c,f,y)}return Lu(c,f,y)}var hP,iE,pP,mP;hP=function(c,f){for(var y=f.child;y!==null;){if(y.tag===5||y.tag===6)c.appendChild(y.stateNode);else if(y.tag!==4&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===f)break;for(;y.sibling===null;){if(y.return===null||y.return===f)return;y=y.return}y.sibling.return=y.return,y=y.sibling}},iE=function(){},pP=function(c,f,y,M){var I=c.memoizedProps;if(I!==M){c=f.stateNode,Yi(Hs.current);var F=null;switch(y){case"input":I=Be(c,I),M=Be(c,M),F=[];break;case"select":I=W({},I,{value:void 0}),M=W({},M,{value:void 0}),F=[];break;case"textarea":I=Qe(c,I),M=Qe(c,M),F=[];break;default:typeof I.onClick!="function"&&typeof M.onClick=="function"&&(c.onclick=cf)}ge(y,M);var q;y=null;for(Ne in I)if(!M.hasOwnProperty(Ne)&&I.hasOwnProperty(Ne)&&I[Ne]!=null)if(Ne==="style"){var ce=I[Ne];for(q in ce)ce.hasOwnProperty(q)&&(y||(y={}),y[q]="")}else Ne!=="dangerouslySetInnerHTML"&&Ne!=="children"&&Ne!=="suppressContentEditableWarning"&&Ne!=="suppressHydrationWarning"&&Ne!=="autoFocus"&&(r.hasOwnProperty(Ne)?F||(F=[]):(F=F||[]).push(Ne,null));for(Ne in M){var _e=M[Ne];if(ce=I!=null?I[Ne]:void 0,M.hasOwnProperty(Ne)&&_e!==ce&&(_e!=null||ce!=null))if(Ne==="style")if(ce){for(q in ce)!ce.hasOwnProperty(q)||_e&&_e.hasOwnProperty(q)||(y||(y={}),y[q]="");for(q in _e)_e.hasOwnProperty(q)&&ce[q]!==_e[q]&&(y||(y={}),y[q]=_e[q])}else y||(F||(F=[]),F.push(Ne,y)),y=_e;else Ne==="dangerouslySetInnerHTML"?(_e=_e?_e.__html:void 0,ce=ce?ce.__html:void 0,_e!=null&&ce!==_e&&(F=F||[]).push(Ne,_e)):Ne==="children"?typeof _e!="string"&&typeof _e!="number"||(F=F||[]).push(Ne,""+_e):Ne!=="suppressContentEditableWarning"&&Ne!=="suppressHydrationWarning"&&(r.hasOwnProperty(Ne)?(_e!=null&&Ne==="onScroll"&&pi("scroll",c),F||ce===_e||(F=[])):(F=F||[]).push(Ne,_e))}y&&(F=F||[]).push("style",y);var Ne=F;(f.updateQueue=Ne)&&(f.flags|=4)}},mP=function(c,f,y,M){y!==M&&(f.flags|=4)};function P0(c,f){if(!yi)switch(c.tailMode){case"hidden":f=c.tail;for(var y=null;f!==null;)f.alternate!==null&&(y=f),f=f.sibling;y===null?c.tail=null:y.sibling=null;break;case"collapsed":y=c.tail;for(var M=null;y!==null;)y.alternate!==null&&(M=y),y=y.sibling;M===null?f||c.tail===null?c.tail=null:c.tail.sibling=null:M.sibling=null}}function xs(c){var f=c.alternate!==null&&c.alternate.child===c.child,y=0,M=0;if(f)for(var I=c.child;I!==null;)y|=I.lanes|I.childLanes,M|=I.subtreeFlags&14680064,M|=I.flags&14680064,I.return=c,I=I.sibling;else for(I=c.child;I!==null;)y|=I.lanes|I.childLanes,M|=I.subtreeFlags,M|=I.flags,I.return=c,I=I.sibling;return c.subtreeFlags|=M,c.childLanes=y,f}function s4(c,f,y){var M=f.pendingProps;switch(Ka(f),f.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xs(f),null;case 1:return Hr(f.type)&&df(),xs(f),null;case 3:return M=f.stateNode,Ll(),mi(ns),mi(Rr),ha(),M.pendingContext&&(M.context=M.pendingContext,M.pendingContext=null),(c===null||c.child===null)&&(Ic(f)?f.flags|=4:c===null||c.memoizedState.isDehydrated&&(f.flags&256)===0||(f.flags|=1024,ho!==null&&(pE(ho),ho=null))),iE(c,f),xs(f),null;case 5:Nc(f);var I=Yi($a.current);if(y=f.type,c!==null&&f.stateNode!=null)pP(c,f,y,M,I),c.ref!==f.ref&&(f.flags|=512,f.flags|=2097152);else{if(!M){if(f.stateNode===null)throw Error(t(166));return xs(f),null}if(c=Yi(Hs.current),Ic(f)){M=f.stateNode,y=f.type;var F=f.memoizedProps;switch(M[sr]=f,M[Pc]=F,c=(f.mode&1)!==0,y){case"dialog":pi("cancel",M),pi("close",M);break;case"iframe":case"object":case"embed":pi("load",M);break;case"video":case"audio":for(I=0;I<Rl.length;I++)pi(Rl[I],M);break;case"source":pi("error",M);break;case"img":case"image":case"link":pi("error",M),pi("load",M);break;case"details":pi("toggle",M);break;case"input":$e(M,F),pi("invalid",M);break;case"select":M._wrapperState={wasMultiple:!!F.multiple},pi("invalid",M);break;case"textarea":Ye(M,F),pi("invalid",M)}ge(y,F),I=null;for(var q in F)if(F.hasOwnProperty(q)){var ce=F[q];q==="children"?typeof ce=="string"?M.textContent!==ce&&(F.suppressHydrationWarning!==!0&&uf(M.textContent,ce,c),I=["children",ce]):typeof ce=="number"&&M.textContent!==""+ce&&(F.suppressHydrationWarning!==!0&&uf(M.textContent,ce,c),I=["children",""+ce]):r.hasOwnProperty(q)&&ce!=null&&q==="onScroll"&&pi("scroll",M)}switch(y){case"input":gt(M),ct(M,F,!0);break;case"textarea":gt(M),yt(M);break;case"select":case"option":break;default:typeof F.onClick=="function"&&(M.onclick=cf)}M=I,f.updateQueue=M,M!==null&&(f.flags|=4)}else{q=I.nodeType===9?I:I.ownerDocument,c==="http://www.w3.org/1999/xhtml"&&(c=ft(y)),c==="http://www.w3.org/1999/xhtml"?y==="script"?(c=q.createElement("div"),c.innerHTML="<script><\/script>",c=c.removeChild(c.firstChild)):typeof M.is=="string"?c=q.createElement(y,{is:M.is}):(c=q.createElement(y),y==="select"&&(q=c,M.multiple?q.multiple=!0:M.size&&(q.size=M.size))):c=q.createElementNS(c,y),c[sr]=f,c[Pc]=M,hP(c,f,!1,!1),f.stateNode=c;e:{switch(q=He(y,M),y){case"dialog":pi("cancel",c),pi("close",c),I=M;break;case"iframe":case"object":case"embed":pi("load",c),I=M;break;case"video":case"audio":for(I=0;I<Rl.length;I++)pi(Rl[I],c);I=M;break;case"source":pi("error",c),I=M;break;case"img":case"image":case"link":pi("error",c),pi("load",c),I=M;break;case"details":pi("toggle",c),I=M;break;case"input":$e(c,M),I=Be(c,M),pi("invalid",c);break;case"option":I=M;break;case"select":c._wrapperState={wasMultiple:!!M.multiple},I=W({},M,{value:void 0}),pi("invalid",c);break;case"textarea":Ye(c,M),I=Qe(c,M),pi("invalid",c);break;default:I=M}ge(y,I),ce=I;for(F in ce)if(ce.hasOwnProperty(F)){var _e=ce[F];F==="style"?xt(c,_e):F==="dangerouslySetInnerHTML"?(_e=_e?_e.__html:void 0,_e!=null&&Ot(c,_e)):F==="children"?typeof _e=="string"?(y!=="textarea"||_e!=="")&&Xe(c,_e):typeof _e=="number"&&Xe(c,""+_e):F!=="suppressContentEditableWarning"&&F!=="suppressHydrationWarning"&&F!=="autoFocus"&&(r.hasOwnProperty(F)?_e!=null&&F==="onScroll"&&pi("scroll",c):_e!=null&&C(c,F,_e,q))}switch(y){case"input":gt(c),ct(c,M,!1);break;case"textarea":gt(c),yt(c);break;case"option":M.value!=null&&c.setAttribute("value",""+je(M.value));break;case"select":c.multiple=!!M.multiple,F=M.value,F!=null?we(c,!!M.multiple,F,!1):M.defaultValue!=null&&we(c,!!M.multiple,M.defaultValue,!0);break;default:typeof I.onClick=="function"&&(c.onclick=cf)}switch(y){case"button":case"input":case"select":case"textarea":M=!!M.autoFocus;break e;case"img":M=!0;break e;default:M=!1}}M&&(f.flags|=4)}f.ref!==null&&(f.flags|=512,f.flags|=2097152)}return xs(f),null;case 6:if(c&&f.stateNode!=null)mP(c,f,c.memoizedProps,M);else{if(typeof M!="string"&&f.stateNode===null)throw Error(t(166));if(y=Yi($a.current),Yi(Hs.current),Ic(f)){if(M=f.stateNode,y=f.memoizedProps,M[sr]=f,(F=M.nodeValue!==y)&&(c=Pr,c!==null))switch(c.tag){case 3:uf(M.nodeValue,y,(c.mode&1)!==0);break;case 5:c.memoizedProps.suppressHydrationWarning!==!0&&uf(M.nodeValue,y,(c.mode&1)!==0)}F&&(f.flags|=4)}else M=(y.nodeType===9?y:y.ownerDocument).createTextNode(M),M[sr]=f,f.stateNode=M}return xs(f),null;case 13:if(mi(_i),M=f.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(yi&&rs!==null&&(f.mode&1)!==0&&(f.flags&128)===0)v0(),Il(),f.flags|=98560,F=!1;else if(F=Ic(f),M!==null&&M.dehydrated!==null){if(c===null){if(!F)throw Error(t(318));if(F=f.memoizedState,F=F!==null?F.dehydrated:null,!F)throw Error(t(317));F[sr]=f}else Il(),(f.flags&128)===0&&(f.memoizedState=null),f.flags|=4;xs(f),F=!1}else ho!==null&&(pE(ho),ho=null),F=!0;if(!F)return f.flags&65536?f:null}return(f.flags&128)!==0?(f.lanes=y,f):(M=M!==null,M!==(c!==null&&c.memoizedState!==null)&&M&&(f.child.flags|=8192,(f.mode&1)!==0&&(c===null||(_i.current&1)!==0?Br===0&&(Br=3):vE())),f.updateQueue!==null&&(f.flags|=4),xs(f),null);case 4:return Ll(),iE(c,f),c===null&&Cc(f.stateNode.containerInfo),xs(f),null;case 10:return yf(f.type._context),xs(f),null;case 17:return Hr(f.type)&&df(),xs(f),null;case 19:if(mi(_i),F=f.memoizedState,F===null)return xs(f),null;if(M=(f.flags&128)!==0,q=F.rendering,q===null)if(M)P0(F,!1);else{if(Br!==0||c!==null&&(c.flags&128)!==0)for(c=f.child;c!==null;){if(q=ko(c),q!==null){for(f.flags|=128,P0(F,!1),M=q.updateQueue,M!==null&&(f.updateQueue=M,f.flags|=4),f.subtreeFlags=0,M=y,y=f.child;y!==null;)F=y,c=M,F.flags&=14680066,q=F.alternate,q===null?(F.childLanes=0,F.lanes=c,F.child=null,F.subtreeFlags=0,F.memoizedProps=null,F.memoizedState=null,F.updateQueue=null,F.dependencies=null,F.stateNode=null):(F.childLanes=q.childLanes,F.lanes=q.lanes,F.child=q.child,F.subtreeFlags=0,F.deletions=null,F.memoizedProps=q.memoizedProps,F.memoizedState=q.memoizedState,F.updateQueue=q.updateQueue,F.type=q.type,c=q.dependencies,F.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),y=y.sibling;return di(_i,_i.current&1|2),f.child}c=c.sibling}F.tail!==null&&Ce()>Zp&&(f.flags|=128,M=!0,P0(F,!1),f.lanes=4194304)}else{if(!M)if(c=ko(q),c!==null){if(f.flags|=128,M=!0,y=c.updateQueue,y!==null&&(f.updateQueue=y,f.flags|=4),P0(F,!0),F.tail===null&&F.tailMode==="hidden"&&!q.alternate&&!yi)return xs(f),null}else 2*Ce()-F.renderingStartTime>Zp&&y!==1073741824&&(f.flags|=128,M=!0,P0(F,!1),f.lanes=4194304);F.isBackwards?(q.sibling=f.child,f.child=q):(y=F.last,y!==null?y.sibling=q:f.child=q,F.last=q)}return F.tail!==null?(f=F.tail,F.rendering=f,F.tail=f.sibling,F.renderingStartTime=Ce(),f.sibling=null,y=_i.current,di(_i,M?y&1|2:y&1),f):(xs(f),null);case 22:case 23:return gE(),M=f.memoizedState!==null,c!==null&&c.memoizedState!==null!==M&&(f.flags|=8192),M&&(f.mode&1)!==0?(Oo&1073741824)!==0&&(xs(f),f.subtreeFlags&6&&(f.flags|=8192)):xs(f),null;case 24:return null;case 25:return null}throw Error(t(156,f.tag))}function o4(c,f){switch(Ka(f),f.tag){case 1:return Hr(f.type)&&df(),c=f.flags,c&65536?(f.flags=c&-65537|128,f):null;case 3:return Ll(),mi(ns),mi(Rr),ha(),c=f.flags,(c&65536)!==0&&(c&128)===0?(f.flags=c&-65537|128,f):null;case 5:return Nc(f),null;case 13:if(mi(_i),c=f.memoizedState,c!==null&&c.dehydrated!==null){if(f.alternate===null)throw Error(t(340));Il()}return c=f.flags,c&65536?(f.flags=c&-65537|128,f):null;case 19:return mi(_i),null;case 4:return Ll(),null;case 10:return yf(f.type._context),null;case 22:case 23:return gE(),null;case 24:return null;default:return null}}var O_=!1,ws=!1,a4=typeof WeakSet=="function"?WeakSet:Set,Gt=null;function Kp(c,f){var y=c.ref;if(y!==null)if(typeof y=="function")try{y(null)}catch(M){Qi(c,f,M)}else y.current=null}function rE(c,f,y){try{y()}catch(M){Qi(c,f,M)}}var gP=!1;function l4(c,f){if(Rc=so,c=Di(),fr(c)){if("selectionStart"in c)var y={start:c.selectionStart,end:c.selectionEnd};else e:{y=(y=c.ownerDocument)&&y.defaultView||window;var M=y.getSelection&&y.getSelection();if(M&&M.rangeCount!==0){y=M.anchorNode;var I=M.anchorOffset,F=M.focusNode;M=M.focusOffset;try{y.nodeType,F.nodeType}catch{y=null;break e}var q=0,ce=-1,_e=-1,Ne=0,it=0,lt=c,nt=null;t:for(;;){for(var Nt;lt!==y||I!==0&&lt.nodeType!==3||(ce=q+I),lt!==F||M!==0&&lt.nodeType!==3||(_e=q+M),lt.nodeType===3&&(q+=lt.nodeValue.length),(Nt=lt.firstChild)!==null;)nt=lt,lt=Nt;for(;;){if(lt===c)break t;if(nt===y&&++Ne===I&&(ce=q),nt===F&&++it===M&&(_e=q),(Nt=lt.nextSibling)!==null)break;lt=nt,nt=lt.parentNode}lt=Nt}y=ce===-1||_e===-1?null:{start:ce,end:_e}}else y=null}y=y||{start:0,end:0}}else y=null;for(s0={focusedElem:c,selectionRange:y},so=!1,Gt=f;Gt!==null;)if(f=Gt,c=f.child,(f.subtreeFlags&1028)!==0&&c!==null)c.return=f,Gt=c;else for(;Gt!==null;){f=Gt;try{var Xt=f.alternate;if((f.flags&1024)!==0)switch(f.tag){case 0:case 11:case 15:break;case 1:if(Xt!==null){var Yt=Xt.memoizedProps,or=Xt.memoizedState,Re=f.stateNode,Ae=Re.getSnapshotBeforeUpdate(f.elementType===f.type?Yt:po(f.type,Yt),or);Re.__reactInternalSnapshotBeforeUpdate=Ae}break;case 3:var Pe=f.stateNode.containerInfo;Pe.nodeType===1?Pe.textContent="":Pe.nodeType===9&&Pe.documentElement&&Pe.removeChild(Pe.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(vt){Qi(f,f.return,vt)}if(c=f.sibling,c!==null){c.return=f.return,Gt=c;break}Gt=f.return}return Xt=gP,gP=!1,Xt}function I0(c,f,y){var M=f.updateQueue;if(M=M!==null?M.lastEffect:null,M!==null){var I=M=M.next;do{if((I.tag&c)===c){var F=I.destroy;I.destroy=void 0,F!==void 0&&rE(f,y,F)}I=I.next}while(I!==M)}}function H_(c,f){if(f=f.updateQueue,f=f!==null?f.lastEffect:null,f!==null){var y=f=f.next;do{if((y.tag&c)===c){var M=y.create;y.destroy=M()}y=y.next}while(y!==f)}}function sE(c){var f=c.ref;if(f!==null){var y=c.stateNode;switch(c.tag){case 5:c=y;break;default:c=y}typeof f=="function"?f(c):f.current=c}}function vP(c){var f=c.alternate;f!==null&&(c.alternate=null,vP(f)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(f=c.stateNode,f!==null&&(delete f[sr],delete f[Pc],delete f[yu],delete f[Dp],delete f[Lp])),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}function yP(c){return c.tag===5||c.tag===3||c.tag===4}function _P(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||yP(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function oE(c,f,y){var M=c.tag;if(M===5||M===6)c=c.stateNode,f?y.nodeType===8?y.parentNode.insertBefore(c,f):y.insertBefore(c,f):(y.nodeType===8?(f=y.parentNode,f.insertBefore(c,y)):(f=y,f.appendChild(c)),y=y._reactRootContainer,y!=null||f.onclick!==null||(f.onclick=cf));else if(M!==4&&(c=c.child,c!==null))for(oE(c,f,y),c=c.sibling;c!==null;)oE(c,f,y),c=c.sibling}function aE(c,f,y){var M=c.tag;if(M===5||M===6)c=c.stateNode,f?y.insertBefore(c,f):y.appendChild(c);else if(M!==4&&(c=c.child,c!==null))for(aE(c,f,y),c=c.sibling;c!==null;)aE(c,f,y),c=c.sibling}var os=null,il=!1;function Uc(c,f,y){for(y=y.child;y!==null;)xP(c,f,y),y=y.sibling}function xP(c,f,y){if(_t&&typeof _t.onCommitFiberUnmount=="function")try{_t.onCommitFiberUnmount(en,y)}catch{}switch(y.tag){case 5:ws||Kp(y,f);case 6:var M=os,I=il;os=null,Uc(c,f,y),os=M,il=I,os!==null&&(il?(c=os,y=y.stateNode,c.nodeType===8?c.parentNode.removeChild(y):c.removeChild(y)):os.removeChild(y.stateNode));break;case 18:os!==null&&(il?(c=os,y=y.stateNode,c.nodeType===8?Ip(c.parentNode,y):c.nodeType===1&&Ip(c,y),Zd(c)):Ip(os,y.stateNode));break;case 4:M=os,I=il,os=y.stateNode.containerInfo,il=!0,Uc(c,f,y),os=M,il=I;break;case 0:case 11:case 14:case 15:if(!ws&&(M=y.updateQueue,M!==null&&(M=M.lastEffect,M!==null))){I=M=M.next;do{var F=I,q=F.destroy;F=F.tag,q!==void 0&&((F&2)!==0||(F&4)!==0)&&rE(y,f,q),I=I.next}while(I!==M)}Uc(c,f,y);break;case 1:if(!ws&&(Kp(y,f),M=y.stateNode,typeof M.componentWillUnmount=="function"))try{M.props=y.memoizedProps,M.state=y.memoizedState,M.componentWillUnmount()}catch(ce){Qi(y,f,ce)}Uc(c,f,y);break;case 21:Uc(c,f,y);break;case 22:y.mode&1?(ws=(M=ws)||y.memoizedState!==null,Uc(c,f,y),ws=M):Uc(c,f,y);break;default:Uc(c,f,y)}}function wP(c){var f=c.updateQueue;if(f!==null){c.updateQueue=null;var y=c.stateNode;y===null&&(y=c.stateNode=new a4),f.forEach(function(M){var I=v4.bind(null,c,M);y.has(M)||(y.add(M),M.then(I,I))})}}function rl(c,f){var y=f.deletions;if(y!==null)for(var M=0;M<y.length;M++){var I=y[M];try{var F=c,q=f,ce=q;e:for(;ce!==null;){switch(ce.tag){case 5:os=ce.stateNode,il=!1;break e;case 3:os=ce.stateNode.containerInfo,il=!0;break e;case 4:os=ce.stateNode.containerInfo,il=!0;break e}ce=ce.return}if(os===null)throw Error(t(160));xP(F,q,I),os=null,il=!1;var _e=I.alternate;_e!==null&&(_e.return=null),I.return=null}catch(Ne){Qi(I,f,Ne)}}if(f.subtreeFlags&12854)for(f=f.child;f!==null;)AP(f,c),f=f.sibling}function AP(c,f){var y=c.alternate,M=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:if(rl(f,c),Nl(c),M&4){try{I0(3,c,c.return),H_(3,c)}catch(Yt){Qi(c,c.return,Yt)}try{I0(5,c,c.return)}catch(Yt){Qi(c,c.return,Yt)}}break;case 1:rl(f,c),Nl(c),M&512&&y!==null&&Kp(y,y.return);break;case 5:if(rl(f,c),Nl(c),M&512&&y!==null&&Kp(y,y.return),c.flags&32){var I=c.stateNode;try{Xe(I,"")}catch(Yt){Qi(c,c.return,Yt)}}if(M&4&&(I=c.stateNode,I!=null)){var F=c.memoizedProps,q=y!==null?y.memoizedProps:F,ce=c.type,_e=c.updateQueue;if(c.updateQueue=null,_e!==null)try{ce==="input"&&F.type==="radio"&&F.name!=null&&Oe(I,F),He(ce,q);var Ne=He(ce,F);for(q=0;q<_e.length;q+=2){var it=_e[q],lt=_e[q+1];it==="style"?xt(I,lt):it==="dangerouslySetInnerHTML"?Ot(I,lt):it==="children"?Xe(I,lt):C(I,it,lt,Ne)}switch(ce){case"input":xe(I,F);break;case"textarea":qe(I,F);break;case"select":var nt=I._wrapperState.wasMultiple;I._wrapperState.wasMultiple=!!F.multiple;var Nt=F.value;Nt!=null?we(I,!!F.multiple,Nt,!1):nt!==!!F.multiple&&(F.defaultValue!=null?we(I,!!F.multiple,F.defaultValue,!0):we(I,!!F.multiple,F.multiple?[]:"",!1))}I[Pc]=F}catch(Yt){Qi(c,c.return,Yt)}}break;case 6:if(rl(f,c),Nl(c),M&4){if(c.stateNode===null)throw Error(t(162));I=c.stateNode,F=c.memoizedProps;try{I.nodeValue=F}catch(Yt){Qi(c,c.return,Yt)}}break;case 3:if(rl(f,c),Nl(c),M&4&&y!==null&&y.memoizedState.isDehydrated)try{Zd(f.containerInfo)}catch(Yt){Qi(c,c.return,Yt)}break;case 4:rl(f,c),Nl(c);break;case 13:rl(f,c),Nl(c),I=c.child,I.flags&8192&&(F=I.memoizedState!==null,I.stateNode.isHidden=F,!F||I.alternate!==null&&I.alternate.memoizedState!==null||(cE=Ce())),M&4&&wP(c);break;case 22:if(it=y!==null&&y.memoizedState!==null,c.mode&1?(ws=(Ne=ws)||it,rl(f,c),ws=Ne):rl(f,c),Nl(c),M&8192){if(Ne=c.memoizedState!==null,(c.stateNode.isHidden=Ne)&&!it&&(c.mode&1)!==0)for(Gt=c,it=c.child;it!==null;){for(lt=Gt=it;Gt!==null;){switch(nt=Gt,Nt=nt.child,nt.tag){case 0:case 11:case 14:case 15:I0(4,nt,nt.return);break;case 1:Kp(nt,nt.return);var Xt=nt.stateNode;if(typeof Xt.componentWillUnmount=="function"){M=nt,y=nt.return;try{f=M,Xt.props=f.memoizedProps,Xt.state=f.memoizedState,Xt.componentWillUnmount()}catch(Yt){Qi(M,y,Yt)}}break;case 5:Kp(nt,nt.return);break;case 22:if(nt.memoizedState!==null){TP(lt);continue}}Nt!==null?(Nt.return=nt,Gt=Nt):TP(lt)}it=it.sibling}e:for(it=null,lt=c;;){if(lt.tag===5){if(it===null){it=lt;try{I=lt.stateNode,Ne?(F=I.style,typeof F.setProperty=="function"?F.setProperty("display","none","important"):F.display="none"):(ce=lt.stateNode,_e=lt.memoizedProps.style,q=_e!=null&&_e.hasOwnProperty("display")?_e.display:null,ce.style.display=Kt("display",q))}catch(Yt){Qi(c,c.return,Yt)}}}else if(lt.tag===6){if(it===null)try{lt.stateNode.nodeValue=Ne?"":lt.memoizedProps}catch(Yt){Qi(c,c.return,Yt)}}else if((lt.tag!==22&&lt.tag!==23||lt.memoizedState===null||lt===c)&&lt.child!==null){lt.child.return=lt,lt=lt.child;continue}if(lt===c)break e;for(;lt.sibling===null;){if(lt.return===null||lt.return===c)break e;it===lt&&(it=null),lt=lt.return}it===lt&&(it=null),lt.sibling.return=lt.return,lt=lt.sibling}}break;case 19:rl(f,c),Nl(c),M&4&&wP(c);break;case 21:break;default:rl(f,c),Nl(c)}}function Nl(c){var f=c.flags;if(f&2){try{e:{for(var y=c.return;y!==null;){if(yP(y)){var M=y;break e}y=y.return}throw Error(t(160))}switch(M.tag){case 5:var I=M.stateNode;M.flags&32&&(Xe(I,""),M.flags&=-33);var F=_P(c);aE(c,F,I);break;case 3:case 4:var q=M.stateNode.containerInfo,ce=_P(c);oE(c,ce,q);break;default:throw Error(t(161))}}catch(_e){Qi(c,c.return,_e)}c.flags&=-3}f&4096&&(c.flags&=-4097)}function u4(c,f,y){Gt=c,SP(c)}function SP(c,f,y){for(var M=(c.mode&1)!==0;Gt!==null;){var I=Gt,F=I.child;if(I.tag===22&&M){var q=I.memoizedState!==null||O_;if(!q){var ce=I.alternate,_e=ce!==null&&ce.memoizedState!==null||ws;ce=O_;var Ne=ws;if(O_=q,(ws=_e)&&!Ne)for(Gt=I;Gt!==null;)q=Gt,_e=q.child,q.tag===22&&q.memoizedState!==null?MP(I):_e!==null?(_e.return=q,Gt=_e):MP(I);for(;F!==null;)Gt=F,SP(F),F=F.sibling;Gt=I,O_=ce,ws=Ne}EP(c)}else(I.subtreeFlags&8772)!==0&&F!==null?(F.return=I,Gt=F):EP(c)}}function EP(c){for(;Gt!==null;){var f=Gt;if((f.flags&8772)!==0){var y=f.alternate;try{if((f.flags&8772)!==0)switch(f.tag){case 0:case 11:case 15:ws||H_(5,f);break;case 1:var M=f.stateNode;if(f.flags&4&&!ws)if(y===null)M.componentDidMount();else{var I=f.elementType===f.type?y.memoizedProps:po(f.type,y.memoizedProps);M.componentDidUpdate(I,y.memoizedState,M.__reactInternalSnapshotBeforeUpdate)}var F=f.updateQueue;F!==null&&Bc(f,F,M);break;case 3:var q=f.updateQueue;if(q!==null){if(y=null,f.child!==null)switch(f.child.tag){case 5:y=f.child.stateNode;break;case 1:y=f.child.stateNode}Bc(f,q,y)}break;case 5:var ce=f.stateNode;if(y===null&&f.flags&4){y=ce;var _e=f.memoizedProps;switch(f.type){case"button":case"input":case"select":case"textarea":_e.autoFocus&&y.focus();break;case"img":_e.src&&(y.src=_e.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(f.memoizedState===null){var Ne=f.alternate;if(Ne!==null){var it=Ne.memoizedState;if(it!==null){var lt=it.dehydrated;lt!==null&&Zd(lt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}ws||f.flags&512&&sE(f)}catch(nt){Qi(f,f.return,nt)}}if(f===c){Gt=null;break}if(y=f.sibling,y!==null){y.return=f.return,Gt=y;break}Gt=f.return}}function TP(c){for(;Gt!==null;){var f=Gt;if(f===c){Gt=null;break}var y=f.sibling;if(y!==null){y.return=f.return,Gt=y;break}Gt=f.return}}function MP(c){for(;Gt!==null;){var f=Gt;try{switch(f.tag){case 0:case 11:case 15:var y=f.return;try{H_(4,f)}catch(_e){Qi(f,y,_e)}break;case 1:var M=f.stateNode;if(typeof M.componentDidMount=="function"){var I=f.return;try{M.componentDidMount()}catch(_e){Qi(f,I,_e)}}var F=f.return;try{sE(f)}catch(_e){Qi(f,F,_e)}break;case 5:var q=f.return;try{sE(f)}catch(_e){Qi(f,q,_e)}}}catch(_e){Qi(f,f.return,_e)}if(f===c){Gt=null;break}var ce=f.sibling;if(ce!==null){ce.return=f.return,Gt=ce;break}Gt=f.return}}var c4=Math.ceil,G_=P.ReactCurrentDispatcher,lE=P.ReactCurrentOwner,ma=P.ReactCurrentBatchConfig,Yn=0,Vr=null,vr=null,as=0,Oo=0,Qp=Fi(0),Br=0,D0=null,Rf=0,z_=0,uE=0,L0=null,mo=null,cE=0,Zp=1/0,Bu=null,V_=!1,dE=null,Oc=null,W_=!1,Hc=null,q_=0,B0=0,fE=null,J_=-1,X_=0;function Ws(){return(Yn&6)!==0?Ce():J_!==-1?J_:J_=Ce()}function Gc(c){return(c.mode&1)===0?1:(Yn&2)!==0&&as!==0?as&-as:eE.transition!==null?(X_===0&&(X_=ci()),X_):(c=Vn,c!==0||(c=window.event,c=c===void 0?16:f_(c.type)),c)}function sl(c,f,y,M){if(50<B0)throw B0=0,fE=null,Error(t(185));ir(c,y,M),((Yn&2)===0||c!==Vr)&&(c===Vr&&((Yn&2)===0&&(z_|=y),Br===4&&zc(c,as)),go(c,M),y===1&&Yn===0&&(f.mode&1)===0&&(Zp=Ce()+500,hf&&da()))}function go(c,f){var y=c.callbackNode;_n(c,f);var M=An(c,c===Vr?as:0);if(M===0)y!==null&&be(y),c.callbackNode=null,c.callbackPriority=0;else if(f=M&-M,c.callbackPriority!==f){if(y!=null&&be(y),f===1)c.tag===0?M_(bP.bind(null,c)):pf(bP.bind(null,c)),jS(function(){(Yn&6)===0&&da()}),y=null;else{switch(pc(M)){case 1:y=Ke;break;case 4:y=et;break;case 16:y=It;break;case 536870912:y=Ut;break;default:y=It}y=kP(y,CP.bind(null,c))}c.callbackPriority=f,c.callbackNode=y}}function CP(c,f){if(J_=-1,X_=0,(Yn&6)!==0)throw Error(t(327));var y=c.callbackNode;if($p()&&c.callbackNode!==y)return null;var M=An(c,c===Vr?as:0);if(M===0)return null;if((M&30)!==0||(M&c.expiredLanes)!==0||f)f=Y_(c,M);else{f=M;var I=Yn;Yn|=2;var F=PP();(Vr!==c||as!==f)&&(Bu=null,Zp=Ce()+500,If(c,f));do try{h4();break}catch(ce){RP(c,ce)}while(!0);Mu(),G_.current=F,Yn=I,vr!==null?f=0:(Vr=null,as=0,f=Br)}if(f!==0){if(f===2&&(I=In(c),I!==0&&(M=I,f=hE(c,I))),f===1)throw y=D0,If(c,0),zc(c,M),go(c,Ce()),y;if(f===6)zc(c,M);else{if(I=c.current.alternate,(M&30)===0&&!d4(I)&&(f=Y_(c,M),f===2&&(F=In(c),F!==0&&(M=F,f=hE(c,F))),f===1))throw y=D0,If(c,0),zc(c,M),go(c,Ce()),y;switch(c.finishedWork=I,c.finishedLanes=M,f){case 0:case 1:throw Error(t(345));case 2:Df(c,mo,Bu);break;case 3:if(zc(c,M),(M&130023424)===M&&(f=cE+500-Ce(),10<f)){if(An(c,0)!==0)break;if(I=c.suspendedLanes,(I&M)!==M){Ws(),c.pingedLanes|=c.suspendedLanes&I;break}c.timeoutHandle=a0(Df.bind(null,c,mo,Bu),f);break}Df(c,mo,Bu);break;case 4:if(zc(c,M),(M&4194240)===M)break;for(f=c.eventTimes,I=-1;0<M;){var q=31-cn(M);F=1<<q,q=f[q],q>I&&(I=q),M&=~F}if(M=I,M=Ce()-M,M=(120>M?120:480>M?480:1080>M?1080:1920>M?1920:3e3>M?3e3:4320>M?4320:1960*c4(M/1960))-M,10<M){c.timeoutHandle=a0(Df.bind(null,c,mo,Bu),M);break}Df(c,mo,Bu);break;case 5:Df(c,mo,Bu);break;default:throw Error(t(329))}}}return go(c,Ce()),c.callbackNode===y?CP.bind(null,c):null}function hE(c,f){var y=L0;return c.current.memoizedState.isDehydrated&&(If(c,f).flags|=256),c=Y_(c,f),c!==2&&(f=mo,mo=y,f!==null&&pE(f)),c}function pE(c){mo===null?mo=c:mo.push.apply(mo,c)}function d4(c){for(var f=c;;){if(f.flags&16384){var y=f.updateQueue;if(y!==null&&(y=y.stores,y!==null))for(var M=0;M<y.length;M++){var I=y[M],F=I.getSnapshot;I=I.value;try{if(!ks(F(),I))return!1}catch{return!1}}}if(y=f.child,f.subtreeFlags&16384&&y!==null)y.return=f,f=y;else{if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function zc(c,f){for(f&=~uE,f&=~z_,c.suspendedLanes|=f,c.pingedLanes&=~f,c=c.expirationTimes;0<f;){var y=31-cn(f),M=1<<y;c[y]=-1,f&=~M}}function bP(c){if((Yn&6)!==0)throw Error(t(327));$p();var f=An(c,0);if((f&1)===0)return go(c,Ce()),null;var y=Y_(c,f);if(c.tag!==0&&y===2){var M=In(c);M!==0&&(f=M,y=hE(c,M))}if(y===1)throw y=D0,If(c,0),zc(c,f),go(c,Ce()),y;if(y===6)throw Error(t(345));return c.finishedWork=c.current.alternate,c.finishedLanes=f,Df(c,mo,Bu),go(c,Ce()),null}function mE(c,f){var y=Yn;Yn|=1;try{return c(f)}finally{Yn=y,Yn===0&&(Zp=Ce()+500,hf&&da())}}function Pf(c){Hc!==null&&Hc.tag===0&&(Yn&6)===0&&$p();var f=Yn;Yn|=1;var y=ma.transition,M=Vn;try{if(ma.transition=null,Vn=1,c)return c()}finally{Vn=M,ma.transition=y,Yn=f,(Yn&6)===0&&da()}}function gE(){Oo=Qp.current,mi(Qp)}function If(c,f){c.finishedWork=null,c.finishedLanes=0;var y=c.timeoutHandle;if(y!==-1&&(c.timeoutHandle=-1,l0(y)),vr!==null)for(y=vr.return;y!==null;){var M=y;switch(Ka(M),M.tag){case 1:M=M.type.childContextTypes,M!=null&&df();break;case 3:Ll(),mi(ns),mi(Rr),ha();break;case 5:Nc(M);break;case 4:Ll();break;case 13:mi(_i);break;case 19:mi(_i);break;case 10:yf(M.type._context);break;case 22:case 23:gE()}y=y.return}if(Vr=c,vr=c=Vc(c.current,null),as=Oo=f,Br=0,D0=null,uE=z_=Rf=0,mo=L0=null,Za!==null){for(f=0;f<Za.length;f++)if(y=Za[f],M=y.interleaved,M!==null){y.interleaved=null;var I=M.next,F=y.pending;if(F!==null){var q=F.next;F.next=I,M.next=q}y.pending=M}Za=null}return c}function RP(c,f){do{var y=vr;try{if(Mu(),Pu.current=Xp,Fo){for(var M=gi.memoizedState;M!==null;){var I=M.queue;I!==null&&(I.pending=null),M=M.next}Fo=!1}if(ja=0,Wn=Oi=gi=null,zr=!1,Bl=0,lE.current=null,y===null||y.return===null){Br=1,D0=f,vr=null;break}e:{var F=c,q=y.return,ce=y,_e=f;if(f=as,ce.flags|=32768,_e!==null&&typeof _e=="object"&&typeof _e.then=="function"){var Ne=_e,it=ce,lt=it.tag;if((it.mode&1)===0&&(lt===0||lt===11||lt===15)){var nt=it.alternate;nt?(it.updateQueue=nt.updateQueue,it.memoizedState=nt.memoizedState,it.lanes=nt.lanes):(it.updateQueue=null,it.memoizedState=null)}var Nt=Ft(q);if(Nt!==null){Nt.flags&=-257,vn(Nt,q,ce,F,f),Nt.mode&1&&mt(F,Ne,f),f=Nt,_e=Ne;var Xt=f.updateQueue;if(Xt===null){var Yt=new Set;Yt.add(_e),f.updateQueue=Yt}else Xt.add(_e);break e}else{if((f&1)===0){mt(F,Ne,f),vE();break e}_e=Error(t(426))}}else if(yi&&ce.mode&1){var or=Ft(q);if(or!==null){(or.flags&65536)===0&&(or.flags|=256),vn(or,q,ce,F,f),Dc(R(_e,ce));break e}}F=_e=R(_e,ce),Br!==4&&(Br=2),L0===null?L0=[F]:L0.push(F),F=q;do{switch(F.tag){case 3:F.flags|=65536,f&=-f,F.lanes|=f;var Re=Ee(F,_e,f);Cu(F,Re);break e;case 1:ce=_e;var Ae=F.type,Pe=F.stateNode;if((F.flags&128)===0&&(typeof Ae.getDerivedStateFromError=="function"||Pe!==null&&typeof Pe.componentDidCatch=="function"&&(Oc===null||!Oc.has(Pe)))){F.flags|=65536,f&=-f,F.lanes|=f;var vt=Ve(F,ce,f);Cu(F,vt);break e}}F=F.return}while(F!==null)}DP(y)}catch($t){f=$t,vr===y&&y!==null&&(vr=y=y.return);continue}break}while(!0)}function PP(){var c=G_.current;return G_.current=Xp,c===null?Xp:c}function vE(){(Br===0||Br===3||Br===2)&&(Br=4),Vr===null||(Rf&268435455)===0&&(z_&268435455)===0||zc(Vr,as)}function Y_(c,f){var y=Yn;Yn|=2;var M=PP();(Vr!==c||as!==f)&&(Bu=null,If(c,f));do try{f4();break}catch(I){RP(c,I)}while(!0);if(Mu(),Yn=y,G_.current=M,vr!==null)throw Error(t(261));return Vr=null,as=0,Br}function f4(){for(;vr!==null;)IP(vr)}function h4(){for(;vr!==null&&!Le();)IP(vr)}function IP(c){var f=NP(c.alternate,c,Oo);c.memoizedProps=c.pendingProps,f===null?DP(c):vr=f,lE.current=null}function DP(c){var f=c;do{var y=f.alternate;if(c=f.return,(f.flags&32768)===0){if(y=s4(y,f,Oo),y!==null){vr=y;return}}else{if(y=o4(y,f),y!==null){y.flags&=32767,vr=y;return}if(c!==null)c.flags|=32768,c.subtreeFlags=0,c.deletions=null;else{Br=6,vr=null;return}}if(f=f.sibling,f!==null){vr=f;return}vr=f=c}while(f!==null);Br===0&&(Br=5)}function Df(c,f,y){var M=Vn,I=ma.transition;try{ma.transition=null,Vn=1,p4(c,f,y,M)}finally{ma.transition=I,Vn=M}return null}function p4(c,f,y,M){do $p();while(Hc!==null);if((Yn&6)!==0)throw Error(t(327));y=c.finishedWork;var I=c.finishedLanes;if(y===null)return null;if(c.finishedWork=null,c.finishedLanes=0,y===c.current)throw Error(t(177));c.callbackNode=null,c.callbackPriority=0;var F=y.lanes|y.childLanes;if(oa(c,F),c===Vr&&(vr=Vr=null,as=0),(y.subtreeFlags&2064)===0&&(y.flags&2064)===0||W_||(W_=!0,kP(It,function(){return $p(),null})),F=(y.flags&15990)!==0,(y.subtreeFlags&15990)!==0||F){F=ma.transition,ma.transition=null;var q=Vn;Vn=1;var ce=Yn;Yn|=4,lE.current=null,l4(c,y),AP(y,c),hr(s0),so=!!Rc,s0=Rc=null,c.current=y,u4(y),Ge(),Yn=ce,Vn=q,ma.transition=F}else c.current=y;if(W_&&(W_=!1,Hc=c,q_=I),F=c.pendingLanes,F===0&&(Oc=null),ht(y.stateNode),go(c,Ce()),f!==null)for(M=c.onRecoverableError,y=0;y<f.length;y++)I=f[y],M(I.value,{componentStack:I.stack,digest:I.digest});if(V_)throw V_=!1,c=dE,dE=null,c;return(q_&1)!==0&&c.tag!==0&&$p(),F=c.pendingLanes,(F&1)!==0?c===fE?B0++:(B0=0,fE=c):B0=0,da(),null}function $p(){if(Hc!==null){var c=pc(q_),f=ma.transition,y=Vn;try{if(ma.transition=null,Vn=16>c?16:c,Hc===null)var M=!1;else{if(c=Hc,Hc=null,q_=0,(Yn&6)!==0)throw Error(t(331));var I=Yn;for(Yn|=4,Gt=c.current;Gt!==null;){var F=Gt,q=F.child;if((Gt.flags&16)!==0){var ce=F.deletions;if(ce!==null){for(var _e=0;_e<ce.length;_e++){var Ne=ce[_e];for(Gt=Ne;Gt!==null;){var it=Gt;switch(it.tag){case 0:case 11:case 15:I0(8,it,F)}var lt=it.child;if(lt!==null)lt.return=it,Gt=lt;else for(;Gt!==null;){it=Gt;var nt=it.sibling,Nt=it.return;if(vP(it),it===Ne){Gt=null;break}if(nt!==null){nt.return=Nt,Gt=nt;break}Gt=Nt}}}var Xt=F.alternate;if(Xt!==null){var Yt=Xt.child;if(Yt!==null){Xt.child=null;do{var or=Yt.sibling;Yt.sibling=null,Yt=or}while(Yt!==null)}}Gt=F}}if((F.subtreeFlags&2064)!==0&&q!==null)q.return=F,Gt=q;else e:for(;Gt!==null;){if(F=Gt,(F.flags&2048)!==0)switch(F.tag){case 0:case 11:case 15:I0(9,F,F.return)}var Re=F.sibling;if(Re!==null){Re.return=F.return,Gt=Re;break e}Gt=F.return}}var Ae=c.current;for(Gt=Ae;Gt!==null;){q=Gt;var Pe=q.child;if((q.subtreeFlags&2064)!==0&&Pe!==null)Pe.return=q,Gt=Pe;else e:for(q=Ae;Gt!==null;){if(ce=Gt,(ce.flags&2048)!==0)try{switch(ce.tag){case 0:case 11:case 15:H_(9,ce)}}catch($t){Qi(ce,ce.return,$t)}if(ce===q){Gt=null;break e}var vt=ce.sibling;if(vt!==null){vt.return=ce.return,Gt=vt;break e}Gt=ce.return}}if(Yn=I,da(),_t&&typeof _t.onPostCommitFiberRoot=="function")try{_t.onPostCommitFiberRoot(en,c)}catch{}M=!0}return M}finally{Vn=y,ma.transition=f}}return!1}function LP(c,f,y){f=R(y,f),f=Ee(c,f,1),c=Ei(c,f,1),f=Ws(),c!==null&&(ir(c,1,f),go(c,f))}function Qi(c,f,y){if(c.tag===3)LP(c,c,y);else for(;f!==null;){if(f.tag===3){LP(f,c,y);break}else if(f.tag===1){var M=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof M.componentDidCatch=="function"&&(Oc===null||!Oc.has(M))){c=R(y,c),c=Ve(f,c,1),f=Ei(f,c,1),c=Ws(),f!==null&&(ir(f,1,c),go(f,c));break}}f=f.return}}function m4(c,f,y){var M=c.pingCache;M!==null&&M.delete(f),f=Ws(),c.pingedLanes|=c.suspendedLanes&y,Vr===c&&(as&y)===y&&(Br===4||Br===3&&(as&130023424)===as&&500>Ce()-cE?If(c,0):uE|=y),go(c,f)}function BP(c,f){f===0&&((c.mode&1)===0?f=1:(f=ui,ui<<=1,(ui&130023424)===0&&(ui=4194304)));var y=Ws();c=No(c,f),c!==null&&(ir(c,f,y),go(c,y))}function g4(c){var f=c.memoizedState,y=0;f!==null&&(y=f.retryLane),BP(c,y)}function v4(c,f){var y=0;switch(c.tag){case 13:var M=c.stateNode,I=c.memoizedState;I!==null&&(y=I.retryLane);break;case 19:M=c.stateNode;break;default:throw Error(t(314))}M!==null&&M.delete(f),BP(c,y)}var NP;NP=function(c,f,y){if(c!==null)if(c.memoizedProps!==f.pendingProps||ns.current)En=!0;else{if((c.lanes&y)===0&&(f.flags&128)===0)return En=!1,r4(c,f,y);En=(c.flags&131072)!==0}else En=!1,yi&&(f.flags&1048576)!==0&&h0(f,Fp,f.index);switch(f.lanes=0,f.tag){case 2:var M=f.type;U_(c,f),c=f.pendingProps;var I=_u(f,Rr.current);Dl(f,y),I=Sf(null,f,M,c,I,y);var F=w0();return f.flags|=1,typeof I=="object"&&I!==null&&typeof I.render=="function"&&I.$$typeof===void 0?(f.tag=1,f.memoizedState=null,f.updateQueue=null,Hr(M)?(F=!0,xu(f)):F=!1,f.memoizedState=I.state!==null&&I.state!==void 0?I.state:null,Sn(f),I.updater=Yp,f.stateNode=I,I._reactInternals=f,T(f,M,c,y),f=xn(null,f,M,!0,F,y)):(f.tag=0,yi&&F&&p0(f),Lt(null,f,I,y),f=f.child),f;case 16:M=f.elementType;e:{switch(U_(c,f),c=f.pendingProps,I=M._init,M=I(M._payload),f.type=M,I=f.tag=_4(M),c=po(M,c),I){case 0:f=bt(null,f,M,c,y);break e;case 1:f=Qt(null,f,M,c,y);break e;case 11:f=Lr(null,f,M,c,y);break e;case 14:f=Vs(null,f,M,po(M.type,c),y);break e}throw Error(t(306,M,""))}return f;case 0:return M=f.type,I=f.pendingProps,I=f.elementType===M?I:po(M,I),bt(c,f,M,I,y);case 1:return M=f.type,I=f.pendingProps,I=f.elementType===M?I:po(M,I),Qt(c,f,M,I,y);case 3:e:{if(yn(f),c===null)throw Error(t(387));M=f.pendingProps,F=f.memoizedState,I=F.element,zi(c,f),Ui(f,M,null,y);var q=f.memoizedState;if(M=q.element,F.isDehydrated)if(F={element:M,isDehydrated:!1,cache:q.cache,pendingSuspenseBoundaries:q.pendingSuspenseBoundaries,transitions:q.transitions},f.updateQueue.baseState=F,f.memoizedState=F,f.flags&256){I=R(Error(t(423)),f),f=Gn(c,f,M,y,I);break e}else if(M!==I){I=R(Error(t(424)),f),f=Gn(c,f,M,y,I);break e}else for(rs=Wa(f.stateNode.containerInfo.firstChild),Pr=f,yi=!0,ho=null,y=vf(f,null,M,y),f.child=y;y;)y.flags=y.flags&-3|4096,y=y.sibling;else{if(Il(),M===I){f=Lu(c,f,y);break e}Lt(c,f,M,y)}f=f.child}return f;case 5:return Ru(f),c===null&&Op(f),M=f.type,I=f.pendingProps,F=c!==null?c.memoizedProps:null,q=I.children,o0(M,I)?q=null:F!==null&&o0(M,F)&&(f.flags|=32),Ue(c,f),Lt(c,f,q,y),f.child;case 6:return c===null&&Op(f),null;case 13:return nl(c,f,y);case 4:return wf(f,f.stateNode.containerInfo),M=f.pendingProps,c===null?f.child=Su(f,null,M,y):Lt(c,f,M,y),f.child;case 11:return M=f.type,I=f.pendingProps,I=f.elementType===M?I:po(M,I),Lr(c,f,M,I,y);case 7:return Lt(c,f,f.pendingProps,y),f.child;case 8:return Lt(c,f,f.pendingProps.children,y),f.child;case 12:return Lt(c,f,f.pendingProps.children,y),f.child;case 10:e:{if(M=f.type._context,I=f.pendingProps,F=f.memoizedProps,q=I.value,di(Eu,M._currentValue),M._currentValue=q,F!==null)if(ks(F.value,q)){if(F.children===I.children&&!ns.current){f=Lu(c,f,y);break e}}else for(F=f.child,F!==null&&(F.return=f);F!==null;){var ce=F.dependencies;if(ce!==null){q=F.child;for(var _e=ce.firstContext;_e!==null;){if(_e.context===M){if(F.tag===1){_e=ri(-1,y&-y),_e.tag=2;var Ne=F.updateQueue;if(Ne!==null){Ne=Ne.shared;var it=Ne.pending;it===null?_e.next=_e:(_e.next=it.next,it.next=_e),Ne.pending=_e}}F.lanes|=y,_e=F.alternate,_e!==null&&(_e.lanes|=y),_f(F.return,y,f),ce.lanes|=y;break}_e=_e.next}}else if(F.tag===10)q=F.type===f.type?null:F.child;else if(F.tag===18){if(q=F.return,q===null)throw Error(t(341));q.lanes|=y,ce=q.alternate,ce!==null&&(ce.lanes|=y),_f(q,y,f),q=F.sibling}else q=F.child;if(q!==null)q.return=F;else for(q=F;q!==null;){if(q===f){q=null;break}if(F=q.sibling,F!==null){F.return=q.return,q=F;break}q=q.return}F=q}Lt(c,f,I.children,y),f=f.child}return f;case 9:return I=f.type,M=f.pendingProps.children,Dl(f,y),I=Os(I),M=M(I),f.flags|=1,Lt(c,f,M,y),f.child;case 14:return M=f.type,I=po(M,f.pendingProps),I=po(M.type,I),Vs(c,f,M,I,y);case 15:return De(c,f,f.type,f.pendingProps,y);case 17:return M=f.type,I=f.pendingProps,I=f.elementType===M?I:po(M,I),U_(c,f),f.tag=1,Hr(M)?(c=!0,xu(f)):c=!1,Dl(f,y),m(f,M,I),T(f,M,I,y),xn(null,f,M,!0,c,y);case 19:return fP(c,f,y);case 22:return Te(c,f,y)}throw Error(t(156,f.tag))};function kP(c,f){return le(c,f)}function y4(c,f,y,M){this.tag=c,this.key=y,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=M,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ga(c,f,y,M){return new y4(c,f,y,M)}function yE(c){return c=c.prototype,!(!c||!c.isReactComponent)}function _4(c){if(typeof c=="function")return yE(c)?1:0;if(c!=null){if(c=c.$$typeof,c===Z)return 11;if(c===ue)return 14}return 2}function Vc(c,f){var y=c.alternate;return y===null?(y=ga(c.tag,f,c.key,c.mode),y.elementType=c.elementType,y.type=c.type,y.stateNode=c.stateNode,y.alternate=c,c.alternate=y):(y.pendingProps=f,y.type=c.type,y.flags=0,y.subtreeFlags=0,y.deletions=null),y.flags=c.flags&14680064,y.childLanes=c.childLanes,y.lanes=c.lanes,y.child=c.child,y.memoizedProps=c.memoizedProps,y.memoizedState=c.memoizedState,y.updateQueue=c.updateQueue,f=c.dependencies,y.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},y.sibling=c.sibling,y.index=c.index,y.ref=c.ref,y}function K_(c,f,y,M,I,F){var q=2;if(M=c,typeof c=="function")yE(c)&&(q=1);else if(typeof c=="string")q=5;else e:switch(c){case N:return Lf(y.children,I,F,f);case O:q=8,I|=8;break;case D:return c=ga(12,y,f,I|2),c.elementType=D,c.lanes=F,c;case he:return c=ga(13,y,f,I),c.elementType=he,c.lanes=F,c;case Q:return c=ga(19,y,f,I),c.elementType=Q,c.lanes=F,c;case ye:return Q_(y,I,F,f);default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case U:q=10;break e;case X:q=9;break e;case Z:q=11;break e;case ue:q=14;break e;case re:q=16,M=null;break e}throw Error(t(130,c==null?c:typeof c,""))}return f=ga(q,y,f,I),f.elementType=c,f.type=M,f.lanes=F,f}function Lf(c,f,y,M){return c=ga(7,c,M,f),c.lanes=y,c}function Q_(c,f,y,M){return c=ga(22,c,M,f),c.elementType=ye,c.lanes=y,c.stateNode={isHidden:!1},c}function _E(c,f,y){return c=ga(6,c,null,f),c.lanes=y,c}function xE(c,f,y){return f=ga(4,c.children!==null?c.children:[],c.key,f),f.lanes=y,f.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},f}function x4(c,f,y,M,I){this.tag=f,this.containerInfo=c,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ps(0),this.expirationTimes=ps(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ps(0),this.identifierPrefix=M,this.onRecoverableError=I,this.mutableSourceEagerHydrationData=null}function wE(c,f,y,M,I,F,q,ce,_e){return c=new x4(c,f,y,ce,_e),f===1?(f=1,F===!0&&(f|=8)):f=0,F=ga(3,null,null,f),c.current=F,F.stateNode=c,F.memoizedState={element:M,isDehydrated:y,cache:null,transitions:null,pendingSuspenseBoundaries:null},Sn(F),c}function w4(c,f,y){var M=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:L,key:M==null?null:""+M,children:c,containerInfo:f,implementation:y}}function FP(c){if(!c)return Ja;c=c._reactInternals;e:{if(K(c)!==c||c.tag!==1)throw Error(t(170));var f=c;do{switch(f.tag){case 3:f=f.stateNode.context;break e;case 1:if(Hr(f.type)){f=f.stateNode.__reactInternalMemoizedMergedChildContext;break e}}f=f.return}while(f!==null);throw Error(t(171))}if(c.tag===1){var y=c.type;if(Hr(y))return ff(c,y,f)}return f}function UP(c,f,y,M,I,F,q,ce,_e){return c=wE(y,M,!0,c,I,F,q,ce,_e),c.context=FP(null),y=c.current,M=Ws(),I=Gc(y),F=ri(M,I),F.callback=f??null,Ei(y,F,I),c.current.lanes=I,ir(c,I,M),go(c,M),c}function Z_(c,f,y,M){var I=f.current,F=Ws(),q=Gc(I);return y=FP(y),f.context===null?f.context=y:f.pendingContext=y,f=ri(F,q),f.payload={element:c},M=M===void 0?null:M,M!==null&&(f.callback=M),c=Ei(I,f,q),c!==null&&(sl(c,I,q,F),Gr(c,I,q)),q}function $_(c){if(c=c.current,!c.child)return null;switch(c.child.tag){case 5:return c.child.stateNode;default:return c.child.stateNode}}function OP(c,f){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var y=c.retryLane;c.retryLane=y!==0&&y<f?y:f}}function AE(c,f){OP(c,f),(c=c.alternate)&&OP(c,f)}function A4(){return null}var HP=typeof reportError=="function"?reportError:function(c){console.error(c)};function SE(c){this._internalRoot=c}j_.prototype.render=SE.prototype.render=function(c){var f=this._internalRoot;if(f===null)throw Error(t(409));Z_(c,f,null,null)},j_.prototype.unmount=SE.prototype.unmount=function(){var c=this._internalRoot;if(c!==null){this._internalRoot=null;var f=c.containerInfo;Pf(function(){Z_(null,c,null,null)}),f[Us]=null}};function j_(c){this._internalRoot=c}j_.prototype.unstable_scheduleHydration=function(c){if(c){var f=np();c={blockedOn:null,target:c,priority:f};for(var y=0;y<Sl.length&&f!==0&&f<Sl[y].priority;y++);Sl.splice(y,0,c),y===0&&sp(c)}};function EE(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)}function ex(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11&&(c.nodeType!==8||c.nodeValue!==" react-mount-point-unstable "))}function GP(){}function S4(c,f,y,M,I){if(I){if(typeof M=="function"){var F=M;M=function(){var Ne=$_(q);F.call(Ne)}}var q=UP(f,M,c,0,null,!1,!1,"",GP);return c._reactRootContainer=q,c[Us]=q.current,Cc(c.nodeType===8?c.parentNode:c),Pf(),q}for(;I=c.lastChild;)c.removeChild(I);if(typeof M=="function"){var ce=M;M=function(){var Ne=$_(_e);ce.call(Ne)}}var _e=wE(c,0,!1,null,null,!1,!1,"",GP);return c._reactRootContainer=_e,c[Us]=_e.current,Cc(c.nodeType===8?c.parentNode:c),Pf(function(){Z_(f,_e,y,M)}),_e}function tx(c,f,y,M,I){var F=y._reactRootContainer;if(F){var q=F;if(typeof I=="function"){var ce=I;I=function(){var _e=$_(q);ce.call(_e)}}Z_(f,q,c,I)}else q=S4(y,f,c,I,M);return $_(q)}Yd=function(c){switch(c.tag){case 3:var f=c.stateNode;if(f.current.memoizedState.isDehydrated){var y=Pn(f.pendingLanes);y!==0&&(hc(f,y|1),go(f,Ce()),(Yn&6)===0&&(Zp=Ce()+500,da()))}break;case 13:Pf(function(){var M=No(c,1);if(M!==null){var I=Ws();sl(M,c,1,I)}}),AE(c,1)}},zg=function(c){if(c.tag===13){var f=No(c,134217728);if(f!==null){var y=Ws();sl(f,c,134217728,y)}AE(c,134217728)}},d_=function(c){if(c.tag===13){var f=Gc(c),y=No(c,f);if(y!==null){var M=Ws();sl(y,c,f,M)}AE(c,f)}},np=function(){return Vn},ip=function(c,f){var y=Vn;try{return Vn=c,f()}finally{Vn=y}},Me=function(c,f,y){switch(f){case"input":if(xe(c,y),f=y.name,y.type==="radio"&&f!=null){for(y=c;y.parentNode;)y=y.parentNode;for(y=y.querySelectorAll("input[name="+JSON.stringify(""+f)+'][type="radio"]'),f=0;f<y.length;f++){var M=y[f];if(M!==c&&M.form===c.form){var I=Bp(M);if(!I)throw Error(t(90));fe(M),xe(M,I)}}}break;case"textarea":qe(c,y);break;case"select":f=y.value,f!=null&&we(c,!!y.multiple,f,!1)}},rn=mE,gn=Pf;var E4={usingClientEntryPoint:!1,Events:[qa,Gi,Bp,zt,Pt,mE]},N0={findFiberByHostInstance:Pl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},T4={bundleType:N0.bundleType,version:N0.version,rendererPackageName:N0.rendererPackageName,rendererConfig:N0.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:P.ReactCurrentDispatcher,findHostInstanceByFiber:function(c){return c=ne(c),c===null?null:c.stateNode},findFiberByHostInstance:N0.findFiberByHostInstance||A4,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var nx=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nx.isDisabled&&nx.supportsFiber)try{en=nx.inject(T4),_t=nx}catch{}}return vo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=E4,vo.createPortal=function(c,f){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!EE(f))throw Error(t(200));return w4(c,f,null,y)},vo.createRoot=function(c,f){if(!EE(c))throw Error(t(299));var y=!1,M="",I=HP;return f!=null&&(f.unstable_strictMode===!0&&(y=!0),f.identifierPrefix!==void 0&&(M=f.identifierPrefix),f.onRecoverableError!==void 0&&(I=f.onRecoverableError)),f=wE(c,1,!1,null,null,y,!1,M,I),c[Us]=f.current,Cc(c.nodeType===8?c.parentNode:c),new SE(f)},vo.findDOMNode=function(c){if(c==null)return null;if(c.nodeType===1)return c;var f=c._reactInternals;if(f===void 0)throw typeof c.render=="function"?Error(t(188)):(c=Object.keys(c).join(","),Error(t(268,c)));return c=ne(f),c=c===null?null:c.stateNode,c},vo.flushSync=function(c){return Pf(c)},vo.hydrate=function(c,f,y){if(!ex(f))throw Error(t(200));return tx(null,c,f,!0,y)},vo.hydrateRoot=function(c,f,y){if(!EE(c))throw Error(t(405));var M=y!=null&&y.hydratedSources||null,I=!1,F="",q=HP;if(y!=null&&(y.unstable_strictMode===!0&&(I=!0),y.identifierPrefix!==void 0&&(F=y.identifierPrefix),y.onRecoverableError!==void 0&&(q=y.onRecoverableError)),f=UP(f,null,c,1,y??null,I,!1,F,q),c[Us]=f.current,Cc(c),M)for(c=0;c<M.length;c++)y=M[c],I=y._getVersion,I=I(y._source),f.mutableSourceEagerHydrationData==null?f.mutableSourceEagerHydrationData=[y,I]:f.mutableSourceEagerHydrationData.push(y,I);return new j_(f)},vo.render=function(c,f,y){if(!ex(f))throw Error(t(200));return tx(null,c,f,!1,y)},vo.unmountComponentAtNode=function(c){if(!ex(c))throw Error(t(40));return c._reactRootContainer?(Pf(function(){tx(null,null,c,!1,function(){c._reactRootContainer=null,c[Us]=null})}),!0):!1},vo.unstable_batchedUpdates=mE,vo.unstable_renderSubtreeIntoContainer=function(c,f,y,M){if(!ex(y))throw Error(t(200));if(c==null||c._reactInternals===void 0)throw Error(t(38));return tx(c,f,y,!1,M)},vo.version="18.3.1-next-f1338f8080-20240426",vo}var KP;function N4(){if(KP)return CE.exports;KP=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),CE.exports=B4(),CE.exports}var QP;function k4(){if(QP)return ix;QP=1;var n=N4();return ix.createRoot=n.createRoot,ix.hydrateRoot=n.hydrateRoot,ix}var F4=k4();const U4=wC(F4);var Kf=(n=>(n.CONTROLLERS="Controllers",n.MIXERS="Mixers",n.CUSTOM="Custom",n.ACCESSORIES="Accessories",n))(Kf||{});const rx=[{id:"1",name:"Knobo",price:165,category:Kf.CONTROLLERS,description:"Compacto, dinmico y listo para la accin. Control rotatorio de precisin.",specs:["Rotary Encoder","Touch Sensitive","USB-C"],modelType:"knob",modelPath:"/crearttech-3.0/models/KNOBO.glb",scale:12,color:"#ff0055"},{id:"2",name:"LOOPO",price:165,category:Kf.CONTROLLERS,description:"Fluidez total, mezcla a tu manera. Perfecto para live looping.",specs:["Loop Station","RGB Feedback","Portable"],modelType:"pad",modelPath:"/crearttech-3.0/models/LOOPO.glb",scale:11,color:"#00f3ff"},{id:"3",name:"FADO",price:203,category:Kf.MIXERS,description:"Control de faders suave y preciso para tu DAW.",specs:["Motorized Faders","OLED Display","Metal Chassis"],modelType:"fader",modelPath:"/crearttech-3.0/models/FADO.glb",scale:11,color:"#ffffff"},{id:"4",name:"Beato 8",price:241,category:Kf.CONTROLLERS,description:"Controlador MIDI con 8 botones ARCADE y 4 knobs asignables para control preciso de mezclas, efectos y automatizaciones en tiempo real. Cuerpo metlico robusto y personalizable.",specs:["8 Botones ARCADE","4 Knobs Asignables","Cuerpo Metlico","Personalizable"],modelType:"pad",modelPath:"/crearttech-3.0/models/BEATO.glb",scale:11,color:"#d946ef"},{id:"5",name:"Mixo",price:292,category:Kf.MIXERS,description:"La solucin completa de mezcla compacta.",specs:["3-Band EQ","Crossfader","FX Controls"],modelType:"knob",modelPath:"/crearttech-3.0/models/MIXO.glb",scale:10,color:"#39ff14"},{id:"6",name:"Beato 16",price:355,category:Kf.CONTROLLERS,description:"Nuevo Beato, ms control que nunca. 16 pads RGB.",specs:["16 RGB Pads","Sequencer Mode","MIDI 2.0"],modelType:"pad",modelPath:"/crearttech-3.0/models/BEATO16.glb",scale:10,color:"#8b5cf6"}];/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Rg="160",Qf={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Zf={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},ck=0,v1=1,dk=2,O4=3,fk=0,zA=1,Wm=2,dl=3,Zl=0,to=1,Ma=2,H4=2,ql=0,yh=1,Yv=2,y1=3,_1=4,hk=5,od=100,pk=101,mk=102,x1=103,w1=104,gk=200,vk=201,yk=202,_k=203,Yw=204,Kw=205,xk=206,wk=207,Ak=208,Sk=209,Ek=210,Tk=211,Mk=212,Ck=213,bk=214,Rk=0,Pk=1,Ik=2,Kv=3,Dk=4,Lk=5,Bk=6,Nk=7,Iy=0,kk=1,Fk=2,Jl=0,Uk=1,Ok=2,Hk=3,AC=4,Gk=5,zk=6,A1="attached",Vk="detached",Pd=300,$l=301,Id=302,Dh=303,Qv=304,Pg=306,Dd=1e3,Bi=1001,ug=1002,$i=1003,Zv=1004,G4=1004,qm=1005,z4=1005,Kn=1006,VA=1007,V4=1007,jl=1008,S1=1008,Qo=1009,SC=1010,EC=1011,WA=1012,qA=1013,zl=1014,Cr=1015,Yr=1016,TC=1017,MC=1018,xd=1020,Wk=1021,Mr=1023,qk=1024,Jk=1025,wd=1026,Lh=1027,CC=1028,bC=1029,Xk=1030,RC=1031,PC=1033,Sw=33776,Ew=33777,Tw=33778,Mw=33779,E1=35840,T1=35841,M1=35842,C1=35843,IC=36196,b1=37492,R1=37496,P1=37808,I1=37809,D1=37810,L1=37811,B1=37812,N1=37813,k1=37814,F1=37815,U1=37816,O1=37817,H1=37818,G1=37819,z1=37820,V1=37821,Cw=36492,W1=36494,q1=36495,Yk=36283,J1=36284,X1=36285,Y1=36286,Kk=2200,Qk=2201,Zk=2202,cg=2300,Bh=2301,bw=2302,lh=2400,uh=2401,$v=2402,JA=2500,DC=2501,$k=0,LC=1,Qw=2,BC=3e3,Ad=3001,jk=3200,eF=3201,Gd=0,tF=1,Jo="",Er="srgb",jo="srgb-linear",XA="display-p3",Dy="display-p3-linear",jv="linear",Ti="srgb",ey="rec709",ty="p3",W4=0,$f=7680,q4=7681,J4=7682,X4=7683,Y4=34055,K4=34056,Q4=5386,Z4=512,$4=513,j4=514,e5=515,t5=516,n5=517,i5=518,K1=519,nF=512,iF=513,rF=514,NC=515,sF=516,oF=517,aF=518,lF=519,ny=35044,r5=35048,s5=35040,o5=35045,a5=35049,l5=35041,u5=35046,c5=35050,d5=35042,f5="100",Q1="300 es",Zw=1035,pl=2e3,dg=2001;let uc=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}};const As=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let ZP=1234567;const _h=Math.PI/180,fg=180/Math.PI;function Zo(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(As[n&255]+As[n>>8&255]+As[n>>16&255]+As[n>>24&255]+"-"+As[e&255]+As[e>>8&255]+"-"+As[e>>16&15|64]+As[e>>24&255]+"-"+As[t&63|128]+As[t>>8&255]+"-"+As[t>>16&255]+As[t>>24&255]+As[i&255]+As[i>>8&255]+As[i>>16&255]+As[i>>24&255]).toLowerCase()}function ji(n,e,t){return Math.max(e,Math.min(t,n))}function kC(n,e){return(n%e+e)%e}function h5(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)}function p5(n,e,t){return n!==e?(t-n)/(e-n):0}function wv(n,e,t){return(1-t)*n+t*e}function m5(n,e,t,i){return wv(n,e,1-Math.exp(-t*i))}function g5(n,e=1){return e-Math.abs(kC(n,e*2)-e)}function v5(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function y5(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function _5(n,e){return n+Math.floor(Math.random()*(e-n+1))}function x5(n,e){return n+Math.random()*(e-n)}function w5(n){return n*(.5-Math.random())}function A5(n){n!==void 0&&(ZP=n);let e=ZP+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function S5(n){return n*_h}function E5(n){return n*fg}function Z1(n){return(n&n-1)===0&&n!==0}function T5(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function $w(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function M5(n,e,t,i,r){const s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),u=s((e+i)/2),d=o((e+i)/2),h=s((e-i)/2),p=o((e-i)/2),v=s((i-e)/2),_=o((i-e)/2);switch(r){case"XYX":n.set(a*d,l*h,l*p,a*u);break;case"YZY":n.set(l*p,a*d,l*h,a*u);break;case"ZXZ":n.set(l*h,l*p,a*d,a*u);break;case"XZX":n.set(a*d,l*_,l*v,a*u);break;case"YXY":n.set(l*v,a*d,l*_,a*u);break;case"ZYZ":n.set(l*_,l*v,a*d,a*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function wo(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function bn(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const ad={DEG2RAD:_h,RAD2DEG:fg,generateUUID:Zo,clamp:ji,euclideanModulo:kC,mapLinear:h5,inverseLerp:p5,lerp:wv,damp:m5,pingpong:g5,smoothstep:v5,smootherstep:y5,randInt:_5,randFloat:x5,randFloatSpread:w5,seededRandom:A5,degToRad:S5,radToDeg:E5,isPowerOfTwo:Z1,ceilPowerOfTwo:T5,floorPowerOfTwo:$w,setQuaternionFromProperEuler:M5,normalize:bn,denormalize:wo};class Je{constructor(e=0,t=0){Je.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(ji(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*r+e.x,this.y=s*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Dn{constructor(e,t,i,r,s,o,a,l,u){Dn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,o,a,l,u)}set(e,t,i,r,s,o,a,l,u){const d=this.elements;return d[0]=e,d[1]=r,d[2]=a,d[3]=t,d[4]=s,d[5]=l,d[6]=i,d[7]=o,d[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[3],l=i[6],u=i[1],d=i[4],h=i[7],p=i[2],v=i[5],_=i[8],w=r[0],S=r[3],A=r[6],b=r[1],C=r[4],P=r[7],k=r[2],L=r[5],N=r[8];return s[0]=o*w+a*b+l*k,s[3]=o*S+a*C+l*L,s[6]=o*A+a*P+l*N,s[1]=u*w+d*b+h*k,s[4]=u*S+d*C+h*L,s[7]=u*A+d*P+h*N,s[2]=p*w+v*b+_*k,s[5]=p*S+v*C+_*L,s[8]=p*A+v*P+_*N,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],d=e[8];return t*o*d-t*a*u-i*s*d+i*a*l+r*s*u-r*o*l}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],d=e[8],h=d*o-a*u,p=a*l-d*s,v=u*s-o*l,_=t*h+i*p+r*v;if(_===0)return this.set(0,0,0,0,0,0,0,0,0);const w=1/_;return e[0]=h*w,e[1]=(r*u-d*i)*w,e[2]=(a*i-r*o)*w,e[3]=p*w,e[4]=(d*t-r*l)*w,e[5]=(r*s-a*t)*w,e[6]=v*w,e[7]=(i*l-u*t)*w,e[8]=(o*t-i*s)*w,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,o,a){const l=Math.cos(s),u=Math.sin(s);return this.set(i*l,i*u,-i*(l*o+u*a)+o+e,-r*u,r*l,-r*(-u*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(PE.makeScale(e,t)),this}rotate(e){return this.premultiply(PE.makeRotation(-e)),this}translate(e,t){return this.premultiply(PE.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const PE=new Dn;function uF(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const C5={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Im(n,e){return new C5[n](e)}function iy(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function cF(){const n=iy("canvas");return n.style.display="block",n}const $P={};function Av(n){n in $P||($P[n]=!0,console.warn(n))}const jP=new Dn().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),eI=new Dn().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),sx={[jo]:{transfer:jv,primaries:ey,toReference:n=>n,fromReference:n=>n},[Er]:{transfer:Ti,primaries:ey,toReference:n=>n.convertSRGBToLinear(),fromReference:n=>n.convertLinearToSRGB()},[Dy]:{transfer:jv,primaries:ty,toReference:n=>n.applyMatrix3(eI),fromReference:n=>n.applyMatrix3(jP)},[XA]:{transfer:Ti,primaries:ty,toReference:n=>n.convertSRGBToLinear().applyMatrix3(eI),fromReference:n=>n.applyMatrix3(jP).convertLinearToSRGB()}},b5=new Set([jo,Dy]),fi={enabled:!0,_workingColorSpace:jo,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(n){if(!b5.has(n))throw new Error(`Unsupported working color space, "${n}".`);this._workingColorSpace=n},convert:function(n,e,t){if(this.enabled===!1||e===t||!e||!t)return n;const i=sx[e].toReference,r=sx[t].fromReference;return r(i(n))},fromWorkingColorSpace:function(n,e){return this.convert(n,this._workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this._workingColorSpace)},getPrimaries:function(n){return sx[n].primaries},getTransfer:function(n){return n===Jo?jv:sx[n].transfer}};function Jm(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function IE(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let jp;class FC{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{jp===void 0&&(jp=iy("canvas")),jp.width=e.width,jp.height=e.height;const i=jp.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=jp}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=iy("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=Jm(s[o]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(Jm(t[i]/255)*255):t[i]=Jm(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let R5=0;class ch{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:R5++}),this.uuid=Zo(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)r[o].isDataTexture?s.push(DE(r[o].image)):s.push(DE(r[o]))}else s=DE(r);i.url=s}return t||(e.images[this.uuid]=i),i}}function DE(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?FC.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let P5=0;class hi extends uc{constructor(e=hi.DEFAULT_IMAGE,t=hi.DEFAULT_MAPPING,i=Bi,r=Bi,s=Kn,o=jl,a=Mr,l=Qo,u=hi.DEFAULT_ANISOTROPY,d=Jo){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:P5++}),this.uuid=Zo(),this.name="",this.source=new ch(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=o,this.anisotropy=u,this.format=a,this.internalFormat=null,this.type=l,this.offset=new Je(0,0),this.repeat=new Je(1,1),this.center=new Je(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Dn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof d=="string"?this.colorSpace=d:(Av("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=d===Ad?Er:Jo),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Pd)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Dd:e.x=e.x-Math.floor(e.x);break;case Bi:e.x=e.x<0?0:1;break;case ug:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Dd:e.y=e.y-Math.floor(e.y);break;case Bi:e.y=e.y<0?0:1;break;case ug:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return Av("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===Er?Ad:BC}set encoding(e){Av("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===Ad?Er:Jo}}hi.DEFAULT_IMAGE=null;hi.DEFAULT_MAPPING=Pd;hi.DEFAULT_ANISOTROPY=1;class li{constructor(e=0,t=0,i=0,r=1){li.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*i+o[11]*r+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const l=e.elements,u=l[0],d=l[4],h=l[8],p=l[1],v=l[5],_=l[9],w=l[2],S=l[6],A=l[10];if(Math.abs(d-p)<.01&&Math.abs(h-w)<.01&&Math.abs(_-S)<.01){if(Math.abs(d+p)<.1&&Math.abs(h+w)<.1&&Math.abs(_+S)<.1&&Math.abs(u+v+A-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const C=(u+1)/2,P=(v+1)/2,k=(A+1)/2,L=(d+p)/4,N=(h+w)/4,O=(_+S)/4;return C>P&&C>k?C<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(C),r=L/i,s=N/i):P>k?P<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(P),i=L/r,s=O/r):k<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(k),i=N/s,r=O/s),this.set(i,r,s,t),this}let b=Math.sqrt((S-_)*(S-_)+(h-w)*(h-w)+(p-d)*(p-d));return Math.abs(b)<.001&&(b=1),this.x=(S-_)/b,this.y=(h-w)/b,this.z=(p-d)/b,this.w=Math.acos((u+v+A-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class dF extends uc{constructor(e=1,t=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new li(0,0,e,t),this.scissorTest=!1,this.viewport=new li(0,0,e,t);const r={width:e,height:t,depth:1};i.encoding!==void 0&&(Av("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),i.colorSpace=i.encoding===Ad?Er:Jo),i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Kn,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0},i),this.texture=new hi(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=i.generateMipmaps,this.texture.internalFormat=i.internalFormat,this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.depthTexture=i.depthTexture,this.samples=i.samples}setSize(e,t,i=1){(this.width!==e||this.height!==t||this.depth!==i)&&(this.width=e,this.height=t,this.depth=i,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new ch(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class no extends dF{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class YA extends hi{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=$i,this.minFilter=$i,this.wrapR=Bi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class I5 extends no{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new YA(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class UC extends hi{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=$i,this.minFilter=$i,this.wrapR=Bi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class D5 extends no{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new UC(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class L5 extends no{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGLMultipleRenderTargets=!0;const s=this.texture;this.texture=[];for(let o=0;o<i;o++)this.texture[o]=s.clone(),this.texture[o].isRenderTargetTexture=!0}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,s=this.texture.length;r<s;r++)this.texture[r].image.width=e,this.texture[r].image.height=t,this.texture[r].image.depth=i;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,i=e.texture.length;t<i;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}class Kr{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,s,o,a){let l=i[r+0],u=i[r+1],d=i[r+2],h=i[r+3];const p=s[o+0],v=s[o+1],_=s[o+2],w=s[o+3];if(a===0){e[t+0]=l,e[t+1]=u,e[t+2]=d,e[t+3]=h;return}if(a===1){e[t+0]=p,e[t+1]=v,e[t+2]=_,e[t+3]=w;return}if(h!==w||l!==p||u!==v||d!==_){let S=1-a;const A=l*p+u*v+d*_+h*w,b=A>=0?1:-1,C=1-A*A;if(C>Number.EPSILON){const k=Math.sqrt(C),L=Math.atan2(k,A*b);S=Math.sin(S*L)/k,a=Math.sin(a*L)/k}const P=a*b;if(l=l*S+p*P,u=u*S+v*P,d=d*S+_*P,h=h*S+w*P,S===1-a){const k=1/Math.sqrt(l*l+u*u+d*d+h*h);l*=k,u*=k,d*=k,h*=k}}e[t]=l,e[t+1]=u,e[t+2]=d,e[t+3]=h}static multiplyQuaternionsFlat(e,t,i,r,s,o){const a=i[r],l=i[r+1],u=i[r+2],d=i[r+3],h=s[o],p=s[o+1],v=s[o+2],_=s[o+3];return e[t]=a*_+d*h+l*v-u*p,e[t+1]=l*_+d*p+u*h-a*v,e[t+2]=u*_+d*v+a*p-l*h,e[t+3]=d*_-a*h-l*p-u*v,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const i=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,u=a(i/2),d=a(r/2),h=a(s/2),p=l(i/2),v=l(r/2),_=l(s/2);switch(o){case"XYZ":this._x=p*d*h+u*v*_,this._y=u*v*h-p*d*_,this._z=u*d*_+p*v*h,this._w=u*d*h-p*v*_;break;case"YXZ":this._x=p*d*h+u*v*_,this._y=u*v*h-p*d*_,this._z=u*d*_-p*v*h,this._w=u*d*h+p*v*_;break;case"ZXY":this._x=p*d*h-u*v*_,this._y=u*v*h+p*d*_,this._z=u*d*_+p*v*h,this._w=u*d*h-p*v*_;break;case"ZYX":this._x=p*d*h-u*v*_,this._y=u*v*h+p*d*_,this._z=u*d*_-p*v*h,this._w=u*d*h+p*v*_;break;case"YZX":this._x=p*d*h+u*v*_,this._y=u*v*h+p*d*_,this._z=u*d*_-p*v*h,this._w=u*d*h-p*v*_;break;case"XZY":this._x=p*d*h-u*v*_,this._y=u*v*h-p*d*_,this._z=u*d*_+p*v*h,this._w=u*d*h+p*v*_;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],o=t[1],a=t[5],l=t[9],u=t[2],d=t[6],h=t[10],p=i+a+h;if(p>0){const v=.5/Math.sqrt(p+1);this._w=.25/v,this._x=(d-l)*v,this._y=(s-u)*v,this._z=(o-r)*v}else if(i>a&&i>h){const v=2*Math.sqrt(1+i-a-h);this._w=(d-l)/v,this._x=.25*v,this._y=(r+o)/v,this._z=(s+u)/v}else if(a>h){const v=2*Math.sqrt(1+a-i-h);this._w=(s-u)/v,this._x=(r+o)/v,this._y=.25*v,this._z=(l+d)/v}else{const v=2*Math.sqrt(1+h-i-a);this._w=(o-r)/v,this._x=(s+u)/v,this._y=(l+d)/v,this._z=.25*v}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(ji(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,o=e._w,a=t._x,l=t._y,u=t._z,d=t._w;return this._x=i*d+o*a+r*u-s*l,this._y=r*d+o*l+s*a-i*u,this._z=s*d+o*u+i*l-r*a,this._w=o*d-i*a-r*l-s*u,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,r=this._y,s=this._z,o=this._w;let a=o*e._w+i*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const v=1-t;return this._w=v*o+t*this._w,this._x=v*i+t*this._x,this._y=v*r+t*this._y,this._z=v*s+t*this._z,this.normalize(),this}const u=Math.sqrt(l),d=Math.atan2(u,a),h=Math.sin((1-t)*d)/u,p=Math.sin(t*d)/u;return this._w=o*h+this._w*p,this._x=i*h+this._x*p,this._y=r*h+this._y*p,this._z=s*h+this._z*p,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=Math.random(),t=Math.sqrt(1-e),i=Math.sqrt(e),r=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(r),i*Math.sin(s),i*Math.cos(s),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class te{constructor(e=0,t=0,i=0){te.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(tI.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(tI.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z,l=e.w,u=2*(o*r-a*i),d=2*(a*t-s*r),h=2*(s*i-o*t);return this.x=t+l*u+o*h-a*d,this.y=i+l*d+a*u-s*h,this.z=r+l*h+s*d-o*u,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=r*l-s*a,this.y=s*o-i*l,this.z=i*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return LE.copy(this).projectOnVector(e),this.sub(LE)}reflect(e){return this.sub(LE.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(ji(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,i=Math.sqrt(1-e**2);return this.x=i*Math.cos(t),this.y=i*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const LE=new te,tI=new Kr;class cs{constructor(e=new te(1/0,1/0,1/0),t=new te(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(ol.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(ol.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=ol.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const s=i.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,a=s.count;o<a;o++)e.isMesh===!0?e.getVertexPosition(o,ol):ol.fromBufferAttribute(s,o),ol.applyMatrix4(e.matrixWorld),this.expandByPoint(ol);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),ox.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),ox.copy(i.boundingBox)),ox.applyMatrix4(e.matrixWorld),this.union(ox)}const r=e.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,ol),ol.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(F0),ax.subVectors(this.max,F0),em.subVectors(e.a,F0),tm.subVectors(e.b,F0),nm.subVectors(e.c,F0),qc.subVectors(tm,em),Jc.subVectors(nm,tm),Bf.subVectors(em,nm);let t=[0,-qc.z,qc.y,0,-Jc.z,Jc.y,0,-Bf.z,Bf.y,qc.z,0,-qc.x,Jc.z,0,-Jc.x,Bf.z,0,-Bf.x,-qc.y,qc.x,0,-Jc.y,Jc.x,0,-Bf.y,Bf.x,0];return!BE(t,em,tm,nm,ax)||(t=[1,0,0,0,1,0,0,0,1],!BE(t,em,tm,nm,ax))?!1:(lx.crossVectors(qc,Jc),t=[lx.x,lx.y,lx.z],BE(t,em,tm,nm,ax))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,ol).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(ol).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Nu[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Nu[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Nu[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Nu[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Nu[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Nu[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Nu[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Nu[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Nu),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Nu=[new te,new te,new te,new te,new te,new te,new te,new te],ol=new te,ox=new cs,em=new te,tm=new te,nm=new te,qc=new te,Jc=new te,Bf=new te,F0=new te,ax=new te,lx=new te,Nf=new te;function BE(n,e,t,i,r){for(let s=0,o=n.length-3;s<=o;s+=3){Nf.fromArray(n,s);const a=r.x*Math.abs(Nf.x)+r.y*Math.abs(Nf.y)+r.z*Math.abs(Nf.z),l=e.dot(Nf),u=t.dot(Nf),d=i.dot(Nf);if(Math.max(-Math.max(l,u,d),Math.min(l,u,d))>a)return!1}return!0}const B5=new cs,U0=new te,NE=new te;class Qr{constructor(e=new te,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):B5.setFromPoints(e).getCenter(i);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;U0.subVectors(e,this.center);const t=U0.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.addScaledVector(U0,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(NE.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(U0.copy(e.center).add(NE)),this.expandByPoint(U0.copy(e.center).sub(NE))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const ku=new te,kE=new te,ux=new te,Xc=new te,FE=new te,cx=new te,UE=new te;class qh{constructor(e=new te,t=new te(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,ku)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=ku.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(ku.copy(this.origin).addScaledVector(this.direction,t),ku.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){kE.copy(e).add(t).multiplyScalar(.5),ux.copy(t).sub(e).normalize(),Xc.copy(this.origin).sub(kE);const s=e.distanceTo(t)*.5,o=-this.direction.dot(ux),a=Xc.dot(this.direction),l=-Xc.dot(ux),u=Xc.lengthSq(),d=Math.abs(1-o*o);let h,p,v,_;if(d>0)if(h=o*l-a,p=o*a-l,_=s*d,h>=0)if(p>=-_)if(p<=_){const w=1/d;h*=w,p*=w,v=h*(h+o*p+2*a)+p*(o*h+p+2*l)+u}else p=s,h=Math.max(0,-(o*p+a)),v=-h*h+p*(p+2*l)+u;else p=-s,h=Math.max(0,-(o*p+a)),v=-h*h+p*(p+2*l)+u;else p<=-_?(h=Math.max(0,-(-o*s+a)),p=h>0?-s:Math.min(Math.max(-s,-l),s),v=-h*h+p*(p+2*l)+u):p<=_?(h=0,p=Math.min(Math.max(-s,-l),s),v=p*(p+2*l)+u):(h=Math.max(0,-(o*s+a)),p=h>0?s:Math.min(Math.max(-s,-l),s),v=-h*h+p*(p+2*l)+u);else p=o>0?-s:s,h=Math.max(0,-(o*p+a)),v=-h*h+p*(p+2*l)+u;return i&&i.copy(this.origin).addScaledVector(this.direction,h),r&&r.copy(kE).addScaledVector(ux,p),v}intersectSphere(e,t){ku.subVectors(e.center,this.origin);const i=ku.dot(this.direction),r=ku.dot(ku)-i*i,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=i-o,l=i+o;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,o,a,l;const u=1/this.direction.x,d=1/this.direction.y,h=1/this.direction.z,p=this.origin;return u>=0?(i=(e.min.x-p.x)*u,r=(e.max.x-p.x)*u):(i=(e.max.x-p.x)*u,r=(e.min.x-p.x)*u),d>=0?(s=(e.min.y-p.y)*d,o=(e.max.y-p.y)*d):(s=(e.max.y-p.y)*d,o=(e.min.y-p.y)*d),i>o||s>r||((s>i||isNaN(i))&&(i=s),(o<r||isNaN(r))&&(r=o),h>=0?(a=(e.min.z-p.z)*h,l=(e.max.z-p.z)*h):(a=(e.max.z-p.z)*h,l=(e.min.z-p.z)*h),i>l||a>r)||((a>i||i!==i)&&(i=a),(l<r||r!==r)&&(r=l),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,ku)!==null}intersectTriangle(e,t,i,r,s){FE.subVectors(t,e),cx.subVectors(i,e),UE.crossVectors(FE,cx);let o=this.direction.dot(UE),a;if(o>0){if(r)return null;a=1}else if(o<0)a=-1,o=-o;else return null;Xc.subVectors(this.origin,e);const l=a*this.direction.dot(cx.crossVectors(Xc,cx));if(l<0)return null;const u=a*this.direction.dot(FE.cross(Xc));if(u<0||l+u>o)return null;const d=-a*Xc.dot(UE);return d<0?null:this.at(d/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class dn{constructor(e,t,i,r,s,o,a,l,u,d,h,p,v,_,w,S){dn.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,o,a,l,u,d,h,p,v,_,w,S)}set(e,t,i,r,s,o,a,l,u,d,h,p,v,_,w,S){const A=this.elements;return A[0]=e,A[4]=t,A[8]=i,A[12]=r,A[1]=s,A[5]=o,A[9]=a,A[13]=l,A[2]=u,A[6]=d,A[10]=h,A[14]=p,A[3]=v,A[7]=_,A[11]=w,A[15]=S,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new dn().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/im.setFromMatrixColumn(e,0).length(),s=1/im.setFromMatrixColumn(e,1).length(),o=1/im.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,s=e.z,o=Math.cos(i),a=Math.sin(i),l=Math.cos(r),u=Math.sin(r),d=Math.cos(s),h=Math.sin(s);if(e.order==="XYZ"){const p=o*d,v=o*h,_=a*d,w=a*h;t[0]=l*d,t[4]=-l*h,t[8]=u,t[1]=v+_*u,t[5]=p-w*u,t[9]=-a*l,t[2]=w-p*u,t[6]=_+v*u,t[10]=o*l}else if(e.order==="YXZ"){const p=l*d,v=l*h,_=u*d,w=u*h;t[0]=p+w*a,t[4]=_*a-v,t[8]=o*u,t[1]=o*h,t[5]=o*d,t[9]=-a,t[2]=v*a-_,t[6]=w+p*a,t[10]=o*l}else if(e.order==="ZXY"){const p=l*d,v=l*h,_=u*d,w=u*h;t[0]=p-w*a,t[4]=-o*h,t[8]=_+v*a,t[1]=v+_*a,t[5]=o*d,t[9]=w-p*a,t[2]=-o*u,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const p=o*d,v=o*h,_=a*d,w=a*h;t[0]=l*d,t[4]=_*u-v,t[8]=p*u+w,t[1]=l*h,t[5]=w*u+p,t[9]=v*u-_,t[2]=-u,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const p=o*l,v=o*u,_=a*l,w=a*u;t[0]=l*d,t[4]=w-p*h,t[8]=_*h+v,t[1]=h,t[5]=o*d,t[9]=-a*d,t[2]=-u*d,t[6]=v*h+_,t[10]=p-w*h}else if(e.order==="XZY"){const p=o*l,v=o*u,_=a*l,w=a*u;t[0]=l*d,t[4]=-h,t[8]=u*d,t[1]=p*h+w,t[5]=o*d,t[9]=v*h-_,t[2]=_*h-v,t[6]=a*d,t[10]=w*h+p}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(N5,e,k5)}lookAt(e,t,i){const r=this.elements;return Ho.subVectors(e,t),Ho.lengthSq()===0&&(Ho.z=1),Ho.normalize(),Yc.crossVectors(i,Ho),Yc.lengthSq()===0&&(Math.abs(i.z)===1?Ho.x+=1e-4:Ho.z+=1e-4,Ho.normalize(),Yc.crossVectors(i,Ho)),Yc.normalize(),dx.crossVectors(Ho,Yc),r[0]=Yc.x,r[4]=dx.x,r[8]=Ho.x,r[1]=Yc.y,r[5]=dx.y,r[9]=Ho.y,r[2]=Yc.z,r[6]=dx.z,r[10]=Ho.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[4],l=i[8],u=i[12],d=i[1],h=i[5],p=i[9],v=i[13],_=i[2],w=i[6],S=i[10],A=i[14],b=i[3],C=i[7],P=i[11],k=i[15],L=r[0],N=r[4],O=r[8],D=r[12],U=r[1],X=r[5],Z=r[9],he=r[13],Q=r[2],ue=r[6],re=r[10],ye=r[14],$=r[3],oe=r[7],W=r[11],J=r[15];return s[0]=o*L+a*U+l*Q+u*$,s[4]=o*N+a*X+l*ue+u*oe,s[8]=o*O+a*Z+l*re+u*W,s[12]=o*D+a*he+l*ye+u*J,s[1]=d*L+h*U+p*Q+v*$,s[5]=d*N+h*X+p*ue+v*oe,s[9]=d*O+h*Z+p*re+v*W,s[13]=d*D+h*he+p*ye+v*J,s[2]=_*L+w*U+S*Q+A*$,s[6]=_*N+w*X+S*ue+A*oe,s[10]=_*O+w*Z+S*re+A*W,s[14]=_*D+w*he+S*ye+A*J,s[3]=b*L+C*U+P*Q+k*$,s[7]=b*N+C*X+P*ue+k*oe,s[11]=b*O+C*Z+P*re+k*W,s[15]=b*D+C*he+P*ye+k*J,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],o=e[1],a=e[5],l=e[9],u=e[13],d=e[2],h=e[6],p=e[10],v=e[14],_=e[3],w=e[7],S=e[11],A=e[15];return _*(+s*l*h-r*u*h-s*a*p+i*u*p+r*a*v-i*l*v)+w*(+t*l*v-t*u*p+s*o*p-r*o*v+r*u*d-s*l*d)+S*(+t*u*h-t*a*v-s*o*h+i*o*v+s*a*d-i*u*d)+A*(-r*a*d-t*l*h+t*a*p+r*o*h-i*o*p+i*l*d)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],d=e[8],h=e[9],p=e[10],v=e[11],_=e[12],w=e[13],S=e[14],A=e[15],b=h*S*u-w*p*u+w*l*v-a*S*v-h*l*A+a*p*A,C=_*p*u-d*S*u-_*l*v+o*S*v+d*l*A-o*p*A,P=d*w*u-_*h*u+_*a*v-o*w*v-d*a*A+o*h*A,k=_*h*l-d*w*l-_*a*p+o*w*p+d*a*S-o*h*S,L=t*b+i*C+r*P+s*k;if(L===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const N=1/L;return e[0]=b*N,e[1]=(w*p*s-h*S*s-w*r*v+i*S*v+h*r*A-i*p*A)*N,e[2]=(a*S*s-w*l*s+w*r*u-i*S*u-a*r*A+i*l*A)*N,e[3]=(h*l*s-a*p*s-h*r*u+i*p*u+a*r*v-i*l*v)*N,e[4]=C*N,e[5]=(d*S*s-_*p*s+_*r*v-t*S*v-d*r*A+t*p*A)*N,e[6]=(_*l*s-o*S*s-_*r*u+t*S*u+o*r*A-t*l*A)*N,e[7]=(o*p*s-d*l*s+d*r*u-t*p*u-o*r*v+t*l*v)*N,e[8]=P*N,e[9]=(_*h*s-d*w*s-_*i*v+t*w*v+d*i*A-t*h*A)*N,e[10]=(o*w*s-_*a*s+_*i*u-t*w*u-o*i*A+t*a*A)*N,e[11]=(d*a*s-o*h*s-d*i*u+t*h*u+o*i*v-t*a*v)*N,e[12]=k*N,e[13]=(d*w*r-_*h*r+_*i*p-t*w*p-d*i*S+t*h*S)*N,e[14]=(_*a*r-o*w*r-_*i*l+t*w*l+o*i*S-t*a*S)*N,e[15]=(o*h*r-d*a*r+d*i*l-t*h*l-o*i*p+t*a*p)*N,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,o=e.x,a=e.y,l=e.z,u=s*o,d=s*a;return this.set(u*o+i,u*a-r*l,u*l+r*a,0,u*a+r*l,d*a+i,d*l-r*o,0,u*l-r*a,d*l+r*o,s*l*l+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,o){return this.set(1,i,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,u=s+s,d=o+o,h=a+a,p=s*u,v=s*d,_=s*h,w=o*d,S=o*h,A=a*h,b=l*u,C=l*d,P=l*h,k=i.x,L=i.y,N=i.z;return r[0]=(1-(w+A))*k,r[1]=(v+P)*k,r[2]=(_-C)*k,r[3]=0,r[4]=(v-P)*L,r[5]=(1-(p+A))*L,r[6]=(S+b)*L,r[7]=0,r[8]=(_+C)*N,r[9]=(S-b)*N,r[10]=(1-(p+w))*N,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=im.set(r[0],r[1],r[2]).length();const o=im.set(r[4],r[5],r[6]).length(),a=im.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],al.copy(this);const u=1/s,d=1/o,h=1/a;return al.elements[0]*=u,al.elements[1]*=u,al.elements[2]*=u,al.elements[4]*=d,al.elements[5]*=d,al.elements[6]*=d,al.elements[8]*=h,al.elements[9]*=h,al.elements[10]*=h,t.setFromRotationMatrix(al),i.x=s,i.y=o,i.z=a,this}makePerspective(e,t,i,r,s,o,a=pl){const l=this.elements,u=2*s/(t-e),d=2*s/(i-r),h=(t+e)/(t-e),p=(i+r)/(i-r);let v,_;if(a===pl)v=-(o+s)/(o-s),_=-2*o*s/(o-s);else if(a===dg)v=-o/(o-s),_=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=u,l[4]=0,l[8]=h,l[12]=0,l[1]=0,l[5]=d,l[9]=p,l[13]=0,l[2]=0,l[6]=0,l[10]=v,l[14]=_,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,i,r,s,o,a=pl){const l=this.elements,u=1/(t-e),d=1/(i-r),h=1/(o-s),p=(t+e)*u,v=(i+r)*d;let _,w;if(a===pl)_=(o+s)*h,w=-2*h;else if(a===dg)_=s*h,w=-1*h;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*u,l[4]=0,l[8]=0,l[12]=-p,l[1]=0,l[5]=2*d,l[9]=0,l[13]=-v,l[2]=0,l[6]=0,l[10]=w,l[14]=-_,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const im=new te,al=new dn,N5=new te(0,0,0),k5=new te(1,1,1),Yc=new te,dx=new te,Ho=new te,nI=new dn,iI=new Kr;class Ly{constructor(e=0,t=0,i=0,r=Ly.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const r=e.elements,s=r[0],o=r[4],a=r[8],l=r[1],u=r[5],d=r[9],h=r[2],p=r[6],v=r[10];switch(t){case"XYZ":this._y=Math.asin(ji(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-d,v),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(p,u),this._z=0);break;case"YXZ":this._x=Math.asin(-ji(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(a,v),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-h,s),this._z=0);break;case"ZXY":this._x=Math.asin(ji(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(-h,v),this._z=Math.atan2(-o,u)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-ji(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(p,v),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,u));break;case"YZX":this._z=Math.asin(ji(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-d,u),this._y=Math.atan2(-h,s)):(this._x=0,this._y=Math.atan2(a,v));break;case"XZY":this._z=Math.asin(-ji(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(p,u),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-d,v),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return nI.makeRotationFromQuaternion(e),this.setFromRotationMatrix(nI,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return iI.setFromEuler(this),this.setFromQuaternion(iI,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Ly.DEFAULT_ORDER="XYZ";class xh{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let F5=0;const rI=new te,rm=new Kr,Fu=new dn,fx=new te,O0=new te,U5=new te,O5=new Kr,sI=new te(1,0,0),oI=new te(0,1,0),aI=new te(0,0,1),H5={type:"added"},G5={type:"removed"};class Jn extends uc{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:F5++}),this.uuid=Zo(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Jn.DEFAULT_UP.clone();const e=new te,t=new Ly,i=new Kr,r=new te(1,1,1);function s(){i.setFromEuler(t,!1)}function o(){t.setFromQuaternion(i,void 0,!1)}t._onChange(s),i._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new dn},normalMatrix:{value:new Dn}}),this.matrix=new dn,this.matrixWorld=new dn,this.matrixAutoUpdate=Jn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Jn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new xh,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return rm.setFromAxisAngle(e,t),this.quaternion.multiply(rm),this}rotateOnWorldAxis(e,t){return rm.setFromAxisAngle(e,t),this.quaternion.premultiply(rm),this}rotateX(e){return this.rotateOnAxis(sI,e)}rotateY(e){return this.rotateOnAxis(oI,e)}rotateZ(e){return this.rotateOnAxis(aI,e)}translateOnAxis(e,t){return rI.copy(e).applyQuaternion(this.quaternion),this.position.add(rI.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(sI,e)}translateY(e){return this.translateOnAxis(oI,e)}translateZ(e){return this.translateOnAxis(aI,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Fu.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?fx.copy(e):fx.set(e,t,i);const r=this.parent;this.updateWorldMatrix(!0,!1),O0.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Fu.lookAt(O0,fx,this.up):Fu.lookAt(fx,O0,this.up),this.quaternion.setFromRotationMatrix(Fu),r&&(Fu.extractRotation(r.matrixWorld),rm.setFromRotationMatrix(Fu),this.quaternion.premultiply(rm.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(H5)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(G5)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Fu.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Fu.multiply(e.parent.matrixWorld)),e.applyMatrix4(Fu),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i<r;i++){const o=this.children[i].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t,i=[]){this[e]===t&&i.push(this);const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].getObjectsByProperty(e,t,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(O0,e,U5),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(O0,O5,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,r=t.length;i<r;i++){const s=t[i];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.matrixWorldAutoUpdate===!0&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const r=this.children;for(let s=0,o=r.length;s<o;s++){const a=r[s];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.visibility=this._visibility,r.active=this._active,r.bounds=this._bounds.map(a=>({boxInitialized:a.boxInitialized,boxMin:a.box.min.toArray(),boxMax:a.box.max.toArray(),sphereInitialized:a.sphereInitialized,sphereRadius:a.sphere.radius,sphereCenter:a.sphere.center.toArray()})),r.maxGeometryCount=this._maxGeometryCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.geometryCount=this._geometryCount,r.matricesTexture=this._matricesTexture.toJSON(e),this.boundingSphere!==null&&(r.boundingSphere={center:r.boundingSphere.center.toArray(),radius:r.boundingSphere.radius}),this.boundingBox!==null&&(r.boundingBox={min:r.boundingBox.min.toArray(),max:r.boundingBox.max.toArray()}));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let u=0,d=l.length;u<d;u++){const h=l[u];s(e.shapes,h)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,u=this.material.length;l<u;l++)a.push(s(e.materials,this.material[l]));r.material=a}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let a=0;a<this.children.length;a++)r.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];r.animations.push(s(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),u=o(e.textures),d=o(e.images),h=o(e.shapes),p=o(e.skeletons),v=o(e.animations),_=o(e.nodes);a.length>0&&(i.geometries=a),l.length>0&&(i.materials=l),u.length>0&&(i.textures=u),d.length>0&&(i.images=d),h.length>0&&(i.shapes=h),p.length>0&&(i.skeletons=p),v.length>0&&(i.animations=v),_.length>0&&(i.nodes=_)}return i.object=r,i;function o(a){const l=[];for(const u in a){const d=a[u];delete d.metadata,l.push(d)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}Jn.DEFAULT_UP=new te(0,1,0);Jn.DEFAULT_MATRIX_AUTO_UPDATE=!0;Jn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const ll=new te,Uu=new te,OE=new te,Ou=new te,sm=new te,om=new te,lI=new te,HE=new te,GE=new te,zE=new te;let hx=!1;class xo{constructor(e=new te,t=new te,i=new te){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),ll.subVectors(e,t),r.cross(ll);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){ll.subVectors(r,t),Uu.subVectors(i,t),OE.subVectors(e,t);const o=ll.dot(ll),a=ll.dot(Uu),l=ll.dot(OE),u=Uu.dot(Uu),d=Uu.dot(OE),h=o*u-a*a;if(h===0)return s.set(0,0,0),null;const p=1/h,v=(u*l-a*d)*p,_=(o*d-a*l)*p;return s.set(1-v-_,_,v)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,Ou)===null?!1:Ou.x>=0&&Ou.y>=0&&Ou.x+Ou.y<=1}static getUV(e,t,i,r,s,o,a,l){return hx===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),hx=!0),this.getInterpolation(e,t,i,r,s,o,a,l)}static getInterpolation(e,t,i,r,s,o,a,l){return this.getBarycoord(e,t,i,r,Ou)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,Ou.x),l.addScaledVector(o,Ou.y),l.addScaledVector(a,Ou.z),l)}static isFrontFacing(e,t,i,r){return ll.subVectors(i,t),Uu.subVectors(e,t),ll.cross(Uu).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return ll.subVectors(this.c,this.b),Uu.subVectors(this.a,this.b),ll.cross(Uu).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return xo.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return xo.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,i,r,s){return hx===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),hx=!0),xo.getInterpolation(e,this.a,this.b,this.c,t,i,r,s)}getInterpolation(e,t,i,r,s){return xo.getInterpolation(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return xo.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return xo.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let o,a;sm.subVectors(r,i),om.subVectors(s,i),HE.subVectors(e,i);const l=sm.dot(HE),u=om.dot(HE);if(l<=0&&u<=0)return t.copy(i);GE.subVectors(e,r);const d=sm.dot(GE),h=om.dot(GE);if(d>=0&&h<=d)return t.copy(r);const p=l*h-d*u;if(p<=0&&l>=0&&d<=0)return o=l/(l-d),t.copy(i).addScaledVector(sm,o);zE.subVectors(e,s);const v=sm.dot(zE),_=om.dot(zE);if(_>=0&&v<=_)return t.copy(s);const w=v*u-l*_;if(w<=0&&u>=0&&_<=0)return a=u/(u-_),t.copy(i).addScaledVector(om,a);const S=d*_-v*h;if(S<=0&&h-d>=0&&v-_>=0)return lI.subVectors(s,r),a=(h-d)/(h-d+(v-_)),t.copy(r).addScaledVector(lI,a);const A=1/(S+w+p);return o=w*A,a=p*A,t.copy(i).addScaledVector(sm,o).addScaledVector(om,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const fF={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Kc={h:0,s:0,l:0},px={h:0,s:0,l:0};function VE(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class St{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Er){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,fi.toWorkingColorSpace(this,t),this}setRGB(e,t,i,r=fi.workingColorSpace){return this.r=e,this.g=t,this.b=i,fi.toWorkingColorSpace(this,r),this}setHSL(e,t,i,r=fi.workingColorSpace){if(e=kC(e,1),t=ji(t,0,1),i=ji(i,0,1),t===0)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+t):i+t-i*t,o=2*i-s;this.r=VE(o,s,e+1/3),this.g=VE(o,s,e),this.b=VE(o,s,e-1/3)}return fi.toWorkingColorSpace(this,r),this}setStyle(e,t=Er){function i(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=r[1],a=r[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Er){const i=fF[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Jm(e.r),this.g=Jm(e.g),this.b=Jm(e.b),this}copyLinearToSRGB(e){return this.r=IE(e.r),this.g=IE(e.g),this.b=IE(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Er){return fi.fromWorkingColorSpace(Ss.copy(this),e),Math.round(ji(Ss.r*255,0,255))*65536+Math.round(ji(Ss.g*255,0,255))*256+Math.round(ji(Ss.b*255,0,255))}getHexString(e=Er){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=fi.workingColorSpace){fi.fromWorkingColorSpace(Ss.copy(this),t);const i=Ss.r,r=Ss.g,s=Ss.b,o=Math.max(i,r,s),a=Math.min(i,r,s);let l,u;const d=(a+o)/2;if(a===o)l=0,u=0;else{const h=o-a;switch(u=d<=.5?h/(o+a):h/(2-o-a),o){case i:l=(r-s)/h+(r<s?6:0);break;case r:l=(s-i)/h+2;break;case s:l=(i-r)/h+4;break}l/=6}return e.h=l,e.s=u,e.l=d,e}getRGB(e,t=fi.workingColorSpace){return fi.fromWorkingColorSpace(Ss.copy(this),t),e.r=Ss.r,e.g=Ss.g,e.b=Ss.b,e}getStyle(e=Er){fi.fromWorkingColorSpace(Ss.copy(this),e);const t=Ss.r,i=Ss.g,r=Ss.b;return e!==Er?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(e,t,i){return this.getHSL(Kc),this.setHSL(Kc.h+e,Kc.s+t,Kc.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(Kc),e.getHSL(px);const i=wv(Kc.h,px.h,t),r=wv(Kc.s,px.s,t),s=wv(Kc.l,px.l,t);return this.setHSL(i,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*i+s[6]*r,this.g=s[1]*t+s[4]*i+s[7]*r,this.b=s[2]*t+s[5]*i+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Ss=new St;St.NAMES=fF;let z5=0;class Fr extends uc{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:z5++}),this.uuid=Zo(),this.name="",this.type="Material",this.blending=yh,this.side=Zl,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=Yw,this.blendDst=Kw,this.blendEquation=od,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new St(0,0,0),this.blendAlpha=0,this.depthFunc=Kv,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=K1,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=$f,this.stencilZFail=$f,this.stencilZPass=$f,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==yh&&(i.blending=this.blending),this.side!==Zl&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==Yw&&(i.blendSrc=this.blendSrc),this.blendDst!==Kw&&(i.blendDst=this.blendDst),this.blendEquation!==od&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==Kv&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==K1&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==$f&&(i.stencilFail=this.stencilFail),this.stencilZFail!==$f&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==$f&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(t){const s=r(e.textures),o=r(e.images);s.length>0&&(i.textures=s),o.length>0&&(i.images=o)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class Ao extends Fr{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new St(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Iy,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Xu=V5();function V5(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),r=new Uint32Array(512);for(let l=0;l<256;++l){const u=l-127;u<-27?(i[l]=0,i[l|256]=32768,r[l]=24,r[l|256]=24):u<-14?(i[l]=1024>>-u-14,i[l|256]=1024>>-u-14|32768,r[l]=-u-1,r[l|256]=-u-1):u<=15?(i[l]=u+15<<10,i[l|256]=u+15<<10|32768,r[l]=13,r[l|256]=13):u<128?(i[l]=31744,i[l|256]=64512,r[l]=24,r[l|256]=24):(i[l]=31744,i[l|256]=64512,r[l]=13,r[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let u=l<<13,d=0;for(;(u&8388608)===0;)u<<=1,d-=8388608;u&=-8388609,d+=947912704,s[l]=u|d}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:r,mantissaTable:s,exponentTable:o,offsetTable:a}}function yo(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=ji(n,-65504,65504),Xu.floatView[0]=n;const e=Xu.uint32View[0],t=e>>23&511;return Xu.baseTable[t]+((e&8388607)>>Xu.shiftTable[t])}function dv(n){const e=n>>10;return Xu.uint32View[0]=Xu.mantissaTable[Xu.offsetTable[e]+(n&1023)]+Xu.exponentTable[e],Xu.floatView[0]}const dh={toHalfFloat:yo,fromHalfFloat:dv},yr=new te,mx=new Je;class Xn{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=ny,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=Cr,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return console.warn("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)mx.fromBufferAttribute(this,t),mx.applyMatrix3(e),this.setXY(t,mx.x,mx.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)yr.fromBufferAttribute(this,t),yr.applyMatrix3(e),this.setXYZ(t,yr.x,yr.y,yr.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)yr.fromBufferAttribute(this,t),yr.applyMatrix4(e),this.setXYZ(t,yr.x,yr.y,yr.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)yr.fromBufferAttribute(this,t),yr.applyNormalMatrix(e),this.setXYZ(t,yr.x,yr.y,yr.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)yr.fromBufferAttribute(this,t),yr.transformDirection(e),this.setXYZ(t,yr.x,yr.y,yr.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=wo(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=bn(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=wo(t,this.array)),t}setX(e,t){return this.normalized&&(t=bn(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=wo(t,this.array)),t}setY(e,t){return this.normalized&&(t=bn(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=wo(t,this.array)),t}setZ(e,t){return this.normalized&&(t=bn(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=wo(t,this.array)),t}setW(e,t){return this.normalized&&(t=bn(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=bn(t,this.array),i=bn(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=bn(t,this.array),i=bn(i,this.array),r=bn(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=bn(t,this.array),i=bn(i,this.array),r=bn(r,this.array),s=bn(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==ny&&(e.usage=this.usage),e}}class W5 extends Xn{constructor(e,t,i){super(new Int8Array(e),t,i)}}class q5 extends Xn{constructor(e,t,i){super(new Uint8Array(e),t,i)}}class J5 extends Xn{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}}class X5 extends Xn{constructor(e,t,i){super(new Int16Array(e),t,i)}}class OC extends Xn{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class Y5 extends Xn{constructor(e,t,i){super(new Int32Array(e),t,i)}}class HC extends Xn{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class K5 extends Xn{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}getX(e){let t=dv(this.array[e*this.itemSize]);return this.normalized&&(t=wo(t,this.array)),t}setX(e,t){return this.normalized&&(t=bn(t,this.array)),this.array[e*this.itemSize]=yo(t),this}getY(e){let t=dv(this.array[e*this.itemSize+1]);return this.normalized&&(t=wo(t,this.array)),t}setY(e,t){return this.normalized&&(t=bn(t,this.array)),this.array[e*this.itemSize+1]=yo(t),this}getZ(e){let t=dv(this.array[e*this.itemSize+2]);return this.normalized&&(t=wo(t,this.array)),t}setZ(e,t){return this.normalized&&(t=bn(t,this.array)),this.array[e*this.itemSize+2]=yo(t),this}getW(e){let t=dv(this.array[e*this.itemSize+3]);return this.normalized&&(t=wo(t,this.array)),t}setW(e,t){return this.normalized&&(t=bn(t,this.array)),this.array[e*this.itemSize+3]=yo(t),this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=bn(t,this.array),i=bn(i,this.array)),this.array[e+0]=yo(t),this.array[e+1]=yo(i),this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=bn(t,this.array),i=bn(i,this.array),r=bn(r,this.array)),this.array[e+0]=yo(t),this.array[e+1]=yo(i),this.array[e+2]=yo(r),this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=bn(t,this.array),i=bn(i,this.array),r=bn(r,this.array),s=bn(s,this.array)),this.array[e+0]=yo(t),this.array[e+1]=yo(i),this.array[e+2]=yo(r),this.array[e+3]=yo(s),this}}class Zt extends Xn{constructor(e,t,i){super(new Float32Array(e),t,i)}}class Q5 extends Xn{constructor(e,t,i){super(new Float64Array(e),t,i)}}let Z5=0;const va=new dn,WE=new Jn,am=new te,Go=new cs,H0=new cs,qr=new te;class Tn extends uc{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Z5++}),this.uuid=Zo(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(uF(e)?HC:OC)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new Dn().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return va.makeRotationFromQuaternion(e),this.applyMatrix4(va),this}rotateX(e){return va.makeRotationX(e),this.applyMatrix4(va),this}rotateY(e){return va.makeRotationY(e),this.applyMatrix4(va),this}rotateZ(e){return va.makeRotationZ(e),this.applyMatrix4(va),this}translate(e,t,i){return va.makeTranslation(e,t,i),this.applyMatrix4(va),this}scale(e,t,i){return va.makeScale(e,t,i),this.applyMatrix4(va),this}lookAt(e){return WE.lookAt(e),WE.updateMatrix(),this.applyMatrix4(WE.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(am).negate(),this.translate(am.x,am.y,am.z),this}setFromPoints(e){const t=[];for(let i=0,r=e.length;i<r;i++){const s=e[i];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new Zt(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new cs);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new te(-1/0,-1/0,-1/0),new te(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){const s=t[i];Go.setFromBufferAttribute(s),this.morphTargetsRelative?(qr.addVectors(this.boundingBox.min,Go.min),this.boundingBox.expandByPoint(qr),qr.addVectors(this.boundingBox.max,Go.max),this.boundingBox.expandByPoint(qr)):(this.boundingBox.expandByPoint(Go.min),this.boundingBox.expandByPoint(Go.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Qr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new te,1/0);return}if(e){const i=this.boundingSphere.center;if(Go.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];H0.setFromBufferAttribute(a),this.morphTargetsRelative?(qr.addVectors(Go.min,H0.min),Go.expandByPoint(qr),qr.addVectors(Go.max,H0.max),Go.expandByPoint(qr)):(Go.expandByPoint(H0.min),Go.expandByPoint(H0.max))}Go.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)qr.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(qr));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let u=0,d=a.count;u<d;u++)qr.fromBufferAttribute(a,u),l&&(am.fromBufferAttribute(e,u),qr.add(am)),r=Math.max(r,i.distanceToSquared(qr))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=e.array,r=t.position.array,s=t.normal.array,o=t.uv.array,a=r.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Xn(new Float32Array(4*a),4));const l=this.getAttribute("tangent").array,u=[],d=[];for(let U=0;U<a;U++)u[U]=new te,d[U]=new te;const h=new te,p=new te,v=new te,_=new Je,w=new Je,S=new Je,A=new te,b=new te;function C(U,X,Z){h.fromArray(r,U*3),p.fromArray(r,X*3),v.fromArray(r,Z*3),_.fromArray(o,U*2),w.fromArray(o,X*2),S.fromArray(o,Z*2),p.sub(h),v.sub(h),w.sub(_),S.sub(_);const he=1/(w.x*S.y-S.x*w.y);isFinite(he)&&(A.copy(p).multiplyScalar(S.y).addScaledVector(v,-w.y).multiplyScalar(he),b.copy(v).multiplyScalar(w.x).addScaledVector(p,-S.x).multiplyScalar(he),u[U].add(A),u[X].add(A),u[Z].add(A),d[U].add(b),d[X].add(b),d[Z].add(b))}let P=this.groups;P.length===0&&(P=[{start:0,count:i.length}]);for(let U=0,X=P.length;U<X;++U){const Z=P[U],he=Z.start,Q=Z.count;for(let ue=he,re=he+Q;ue<re;ue+=3)C(i[ue+0],i[ue+1],i[ue+2])}const k=new te,L=new te,N=new te,O=new te;function D(U){N.fromArray(s,U*3),O.copy(N);const X=u[U];k.copy(X),k.sub(N.multiplyScalar(N.dot(X))).normalize(),L.crossVectors(O,X);const he=L.dot(d[U])<0?-1:1;l[U*4]=k.x,l[U*4+1]=k.y,l[U*4+2]=k.z,l[U*4+3]=he}for(let U=0,X=P.length;U<X;++U){const Z=P[U],he=Z.start,Q=Z.count;for(let ue=he,re=he+Q;ue<re;ue+=3)D(i[ue+0]),D(i[ue+1]),D(i[ue+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new Xn(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let p=0,v=i.count;p<v;p++)i.setXYZ(p,0,0,0);const r=new te,s=new te,o=new te,a=new te,l=new te,u=new te,d=new te,h=new te;if(e)for(let p=0,v=e.count;p<v;p+=3){const _=e.getX(p+0),w=e.getX(p+1),S=e.getX(p+2);r.fromBufferAttribute(t,_),s.fromBufferAttribute(t,w),o.fromBufferAttribute(t,S),d.subVectors(o,s),h.subVectors(r,s),d.cross(h),a.fromBufferAttribute(i,_),l.fromBufferAttribute(i,w),u.fromBufferAttribute(i,S),a.add(d),l.add(d),u.add(d),i.setXYZ(_,a.x,a.y,a.z),i.setXYZ(w,l.x,l.y,l.z),i.setXYZ(S,u.x,u.y,u.z)}else for(let p=0,v=t.count;p<v;p+=3)r.fromBufferAttribute(t,p+0),s.fromBufferAttribute(t,p+1),o.fromBufferAttribute(t,p+2),d.subVectors(o,s),h.subVectors(r,s),d.cross(h),i.setXYZ(p+0,d.x,d.y,d.z),i.setXYZ(p+1,d.x,d.y,d.z),i.setXYZ(p+2,d.x,d.y,d.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)qr.fromBufferAttribute(e,t),qr.normalize(),e.setXYZ(t,qr.x,qr.y,qr.z)}toNonIndexed(){function e(a,l){const u=a.array,d=a.itemSize,h=a.normalized,p=new u.constructor(l.length*d);let v=0,_=0;for(let w=0,S=l.length;w<S;w++){a.isInterleavedBufferAttribute?v=l[w]*a.data.stride+a.offset:v=l[w]*d;for(let A=0;A<d;A++)p[_++]=u[v++]}return new Xn(p,d,h)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Tn,i=this.index.array,r=this.attributes;for(const a in r){const l=r[a],u=e(l,i);t.setAttribute(a,u)}const s=this.morphAttributes;for(const a in s){const l=[],u=s[a];for(let d=0,h=u.length;d<h;d++){const p=u[d],v=e(p,i);l.push(v)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const u=o[a];t.addGroup(u.start,u.count,u.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const u in l)l[u]!==void 0&&(e[u]=l[u]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const l in i){const u=i[l];e.data.attributes[l]=u.toJSON(e.data)}const r={};let s=!1;for(const l in this.morphAttributes){const u=this.morphAttributes[l],d=[];for(let h=0,p=u.length;h<p;h++){const v=u[h];d.push(v.toJSON(e.data))}d.length>0&&(r[l]=d,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(t));const r=e.attributes;for(const u in r){const d=r[u];this.setAttribute(u,d.clone(t))}const s=e.morphAttributes;for(const u in s){const d=[],h=s[u];for(let p=0,v=h.length;p<v;p++)d.push(h[p].clone(t));this.morphAttributes[u]=d}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let u=0,d=o.length;u<d;u++){const h=o[u];this.addGroup(h.start,h.count,h.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const uI=new dn,kf=new qh,gx=new Qr,cI=new te,lm=new te,um=new te,cm=new te,qE=new te,vx=new te,yx=new Je,_x=new Je,xx=new Je,dI=new te,fI=new te,hI=new te,wx=new te,Ax=new te;class bi extends Jn{constructor(e=new Tn,t=new Ao){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const i=this.geometry,r=i.attributes.position,s=i.morphAttributes.position,o=i.morphTargetsRelative;t.fromBufferAttribute(r,e);const a=this.morphTargetInfluences;if(s&&a){vx.set(0,0,0);for(let l=0,u=s.length;l<u;l++){const d=a[l],h=s[l];d!==0&&(qE.fromBufferAttribute(h,e),o?vx.addScaledVector(qE,d):vx.addScaledVector(qE.sub(t),d))}t.add(vx)}return t}raycast(e,t){const i=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),gx.copy(i.boundingSphere),gx.applyMatrix4(s),kf.copy(e.ray).recast(e.near),!(gx.containsPoint(kf.origin)===!1&&(kf.intersectSphere(gx,cI)===null||kf.origin.distanceToSquared(cI)>(e.far-e.near)**2))&&(uI.copy(s).invert(),kf.copy(e.ray).applyMatrix4(uI),!(i.boundingBox!==null&&kf.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,kf)))}_computeIntersections(e,t,i){let r;const s=this.geometry,o=this.material,a=s.index,l=s.attributes.position,u=s.attributes.uv,d=s.attributes.uv1,h=s.attributes.normal,p=s.groups,v=s.drawRange;if(a!==null)if(Array.isArray(o))for(let _=0,w=p.length;_<w;_++){const S=p[_],A=o[S.materialIndex],b=Math.max(S.start,v.start),C=Math.min(a.count,Math.min(S.start+S.count,v.start+v.count));for(let P=b,k=C;P<k;P+=3){const L=a.getX(P),N=a.getX(P+1),O=a.getX(P+2);r=Sx(this,A,e,i,u,d,h,L,N,O),r&&(r.faceIndex=Math.floor(P/3),r.face.materialIndex=S.materialIndex,t.push(r))}}else{const _=Math.max(0,v.start),w=Math.min(a.count,v.start+v.count);for(let S=_,A=w;S<A;S+=3){const b=a.getX(S),C=a.getX(S+1),P=a.getX(S+2);r=Sx(this,o,e,i,u,d,h,b,C,P),r&&(r.faceIndex=Math.floor(S/3),t.push(r))}}else if(l!==void 0)if(Array.isArray(o))for(let _=0,w=p.length;_<w;_++){const S=p[_],A=o[S.materialIndex],b=Math.max(S.start,v.start),C=Math.min(l.count,Math.min(S.start+S.count,v.start+v.count));for(let P=b,k=C;P<k;P+=3){const L=P,N=P+1,O=P+2;r=Sx(this,A,e,i,u,d,h,L,N,O),r&&(r.faceIndex=Math.floor(P/3),r.face.materialIndex=S.materialIndex,t.push(r))}}else{const _=Math.max(0,v.start),w=Math.min(l.count,v.start+v.count);for(let S=_,A=w;S<A;S+=3){const b=S,C=S+1,P=S+2;r=Sx(this,o,e,i,u,d,h,b,C,P),r&&(r.faceIndex=Math.floor(S/3),t.push(r))}}}}function $5(n,e,t,i,r,s,o,a){let l;if(e.side===to?l=i.intersectTriangle(o,s,r,!0,a):l=i.intersectTriangle(r,s,o,e.side===Zl,a),l===null)return null;Ax.copy(a),Ax.applyMatrix4(n.matrixWorld);const u=t.ray.origin.distanceTo(Ax);return u<t.near||u>t.far?null:{distance:u,point:Ax.clone(),object:n}}function Sx(n,e,t,i,r,s,o,a,l,u){n.getVertexPosition(a,lm),n.getVertexPosition(l,um),n.getVertexPosition(u,cm);const d=$5(n,e,t,i,lm,um,cm,wx);if(d){r&&(yx.fromBufferAttribute(r,a),_x.fromBufferAttribute(r,l),xx.fromBufferAttribute(r,u),d.uv=xo.getInterpolation(wx,lm,um,cm,yx,_x,xx,new Je)),s&&(yx.fromBufferAttribute(s,a),_x.fromBufferAttribute(s,l),xx.fromBufferAttribute(s,u),d.uv1=xo.getInterpolation(wx,lm,um,cm,yx,_x,xx,new Je),d.uv2=d.uv1),o&&(dI.fromBufferAttribute(o,a),fI.fromBufferAttribute(o,l),hI.fromBufferAttribute(o,u),d.normal=xo.getInterpolation(wx,lm,um,cm,dI,fI,hI,new te),d.normal.dot(i.direction)>0&&d.normal.multiplyScalar(-1));const h={a,b:l,c:u,normal:new te,materialIndex:0};xo.getNormal(lm,um,cm,h.normal),d.face=h}return d}class Jh extends Tn{constructor(e=1,t=1,i=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const l=[],u=[],d=[],h=[];let p=0,v=0;_("z","y","x",-1,-1,i,t,e,o,s,0),_("z","y","x",1,-1,i,t,-e,o,s,1),_("x","z","y",1,1,e,i,t,r,o,2),_("x","z","y",1,-1,e,i,-t,r,o,3),_("x","y","z",1,-1,e,t,i,r,s,4),_("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(l),this.setAttribute("position",new Zt(u,3)),this.setAttribute("normal",new Zt(d,3)),this.setAttribute("uv",new Zt(h,2));function _(w,S,A,b,C,P,k,L,N,O,D){const U=P/N,X=k/O,Z=P/2,he=k/2,Q=L/2,ue=N+1,re=O+1;let ye=0,$=0;const oe=new te;for(let W=0;W<re;W++){const J=W*X-he;for(let se=0;se<ue;se++){const me=se*U-Z;oe[w]=me*b,oe[S]=J*C,oe[A]=Q,u.push(oe.x,oe.y,oe.z),oe[w]=0,oe[S]=0,oe[A]=L>0?1:-1,d.push(oe.x,oe.y,oe.z),h.push(se/N),h.push(1-W/O),ye+=1}}for(let W=0;W<O;W++)for(let J=0;J<N;J++){const se=p+J+ue*W,me=p+J+ue*(W+1),Se=p+(J+1)+ue*(W+1),ke=p+(J+1)+ue*W;l.push(se,me,ke),l.push(me,Se,ke),$+=6}a.addGroup(v,$,D),v+=$,p+=ye}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Jh(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function hg(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function Ys(n){const e={};for(let t=0;t<n.length;t++){const i=hg(n[t]);for(const r in i)e[r]=i[r]}return e}function j5(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function hF(n){return n.getRenderTarget()===null?n.outputColorSpace:fi.workingColorSpace}const pF={clone:hg,merge:Ys};var eV=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,tV=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Ds extends Fr{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=eV,this.fragmentShader=tV,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1,clipCullDistance:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=hg(e.uniforms),this.uniformsGroups=j5(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;o&&o.isTexture?t.uniforms[r]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[r]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[r]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[r]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[r]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[r]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[r]={type:"m4",value:o.toArray()}:t.uniforms[r]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class By extends Jn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new dn,this.projectionMatrix=new dn,this.projectionMatrixInverse=new dn,this.coordinateSystem=pl}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class er extends By{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=fg*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(_h*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return fg*2*Math.atan(Math.tan(_h*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,i,r,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(_h*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,u=o.fullHeight;s+=o.offsetX*r/l,t-=o.offsetY*i/u,r*=o.width/l,i*=o.height/u}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const dm=-90,fm=1;class mF extends Jn{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new er(dm,fm,e,t);r.layers=this.layers,this.add(r);const s=new er(dm,fm,e,t);s.layers=this.layers,this.add(s);const o=new er(dm,fm,e,t);o.layers=this.layers,this.add(o);const a=new er(dm,fm,e,t);a.layers=this.layers,this.add(a);const l=new er(dm,fm,e,t);l.layers=this.layers,this.add(l);const u=new er(dm,fm,e,t);u.layers=this.layers,this.add(u)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,r,s,o,a,l]=t;for(const u of t)this.remove(u);if(e===pl)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===dg)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const u of t)this.add(u),u.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,a,l,u,d]=this.children,h=e.getRenderTarget(),p=e.getActiveCubeFace(),v=e.getActiveMipmapLevel(),_=e.xr.enabled;e.xr.enabled=!1;const w=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(t,s),e.setRenderTarget(i,1,r),e.render(t,o),e.setRenderTarget(i,2,r),e.render(t,a),e.setRenderTarget(i,3,r),e.render(t,l),e.setRenderTarget(i,4,r),e.render(t,u),i.texture.generateMipmaps=w,e.setRenderTarget(i,5,r),e.render(t,d),e.setRenderTarget(h,p,v),e.xr.enabled=_,i.texture.needsPMREMUpdate=!0}}class Ny extends hi{constructor(e,t,i,r,s,o,a,l,u,d){e=e!==void 0?e:[],t=t!==void 0?t:$l,super(e,t,i,r,s,o,a,l,u,d),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class GC extends no{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];t.encoding!==void 0&&(Av("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),t.colorSpace=t.encoding===Ad?Er:Jo),this.texture=new Ny(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Kn}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new Jh(5,5,5),s=new Ds({name:"CubemapFromEquirect",uniforms:hg(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:to,blending:ql});s.uniforms.tEquirect.value=t;const o=new bi(r,s),a=t.minFilter;return t.minFilter===jl&&(t.minFilter=Kn),new mF(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,i,r){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,i,r);e.setRenderTarget(s)}}const JE=new te,nV=new te,iV=new Dn;class Wu{constructor(e=new te(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=JE.subVectors(i,t).cross(nV.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(JE),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(i,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||iV.getNormalMatrix(e),r=this.coplanarPoint(JE).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Ff=new Qr,Ex=new te;class ky{constructor(e=new Wu,t=new Wu,i=new Wu,r=new Wu,s=new Wu,o=new Wu){this.planes=[e,t,i,r,s,o]}set(e,t,i,r,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=pl){const i=this.planes,r=e.elements,s=r[0],o=r[1],a=r[2],l=r[3],u=r[4],d=r[5],h=r[6],p=r[7],v=r[8],_=r[9],w=r[10],S=r[11],A=r[12],b=r[13],C=r[14],P=r[15];if(i[0].setComponents(l-s,p-u,S-v,P-A).normalize(),i[1].setComponents(l+s,p+u,S+v,P+A).normalize(),i[2].setComponents(l+o,p+d,S+_,P+b).normalize(),i[3].setComponents(l-o,p-d,S-_,P-b).normalize(),i[4].setComponents(l-a,p-h,S-w,P-C).normalize(),t===pl)i[5].setComponents(l+a,p+h,S+w,P+C).normalize();else if(t===dg)i[5].setComponents(a,h,w,C).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Ff.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Ff.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Ff)}intersectsSprite(e){return Ff.center.set(0,0,0),Ff.radius=.7071067811865476,Ff.applyMatrix4(e.matrixWorld),this.intersectsSphere(Ff)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(Ex.x=r.normal.x>0?e.max.x:e.min.x,Ex.y=r.normal.y>0?e.max.y:e.min.y,Ex.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(Ex)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function gF(){let n=null,e=!1,t=null,i=null;function r(s,o){t(s,o),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function rV(n,e){const t=e.isWebGL2,i=new WeakMap;function r(u,d){const h=u.array,p=u.usage,v=h.byteLength,_=n.createBuffer();n.bindBuffer(d,_),n.bufferData(d,h,p),u.onUploadCallback();let w;if(h instanceof Float32Array)w=n.FLOAT;else if(h instanceof Uint16Array)if(u.isFloat16BufferAttribute)if(t)w=n.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else w=n.UNSIGNED_SHORT;else if(h instanceof Int16Array)w=n.SHORT;else if(h instanceof Uint32Array)w=n.UNSIGNED_INT;else if(h instanceof Int32Array)w=n.INT;else if(h instanceof Int8Array)w=n.BYTE;else if(h instanceof Uint8Array)w=n.UNSIGNED_BYTE;else if(h instanceof Uint8ClampedArray)w=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+h);return{buffer:_,type:w,bytesPerElement:h.BYTES_PER_ELEMENT,version:u.version,size:v}}function s(u,d,h){const p=d.array,v=d._updateRange,_=d.updateRanges;if(n.bindBuffer(h,u),v.count===-1&&_.length===0&&n.bufferSubData(h,0,p),_.length!==0){for(let w=0,S=_.length;w<S;w++){const A=_[w];t?n.bufferSubData(h,A.start*p.BYTES_PER_ELEMENT,p,A.start,A.count):n.bufferSubData(h,A.start*p.BYTES_PER_ELEMENT,p.subarray(A.start,A.start+A.count))}d.clearUpdateRanges()}v.count!==-1&&(t?n.bufferSubData(h,v.offset*p.BYTES_PER_ELEMENT,p,v.offset,v.count):n.bufferSubData(h,v.offset*p.BYTES_PER_ELEMENT,p.subarray(v.offset,v.offset+v.count)),v.count=-1),d.onUploadCallback()}function o(u){return u.isInterleavedBufferAttribute&&(u=u.data),i.get(u)}function a(u){u.isInterleavedBufferAttribute&&(u=u.data);const d=i.get(u);d&&(n.deleteBuffer(d.buffer),i.delete(u))}function l(u,d){if(u.isGLBufferAttribute){const p=i.get(u);(!p||p.version<u.version)&&i.set(u,{buffer:u.buffer,type:u.type,bytesPerElement:u.elementSize,version:u.version});return}u.isInterleavedBufferAttribute&&(u=u.data);const h=i.get(u);if(h===void 0)i.set(u,r(u,d));else if(h.version<u.version){if(h.size!==u.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");s(h.buffer,u,d),h.version=u.version}}return{get:o,remove:a,update:l}}class zd extends Tn{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,o=t/2,a=Math.floor(i),l=Math.floor(r),u=a+1,d=l+1,h=e/a,p=t/l,v=[],_=[],w=[],S=[];for(let A=0;A<d;A++){const b=A*p-o;for(let C=0;C<u;C++){const P=C*h-s;_.push(P,-b,0),w.push(0,0,1),S.push(C/a),S.push(1-A/l)}}for(let A=0;A<l;A++)for(let b=0;b<a;b++){const C=b+u*A,P=b+u*(A+1),k=b+1+u*(A+1),L=b+1+u*A;v.push(C,P,L),v.push(P,k,L)}this.setIndex(v),this.setAttribute("position",new Zt(_,3)),this.setAttribute("normal",new Zt(w,3)),this.setAttribute("uv",new Zt(S,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new zd(e.width,e.height,e.widthSegments,e.heightSegments)}}var sV=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,oV=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,aV=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,lV=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,uV=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,cV=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,dV=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,fV=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,hV=`#ifdef USE_BATCHING
	attribute float batchId;
	uniform highp sampler2D batchingTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,pV=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( batchId );
#endif`,mV=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,gV=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,vV=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,yV=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,_V=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,xV=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,wV=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,AV=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,SV=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,EV=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,TV=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,MV=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,CV=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,bV=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,RV=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,PV=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,IV=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,DV=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,LV=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,BV=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,NV="gl_FragColor = linearToOutputTexel( gl_FragColor );",kV=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,FV=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,UV=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,OV=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,HV=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,GV=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,zV=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,VV=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,WV=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,qV=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,JV=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,XV=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,YV=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,KV=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,QV=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,ZV=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,$V=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,jV=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,e8=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,t8=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,n8=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,i8=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,r8=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,s8=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,o8=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,a8=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,l8=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,u8=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,c8=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,d8=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,f8=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,h8=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,p8=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,m8=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,g8=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,v8=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,y8=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,_8=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,x8=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,w8=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,A8=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,S8=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,E8=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,T8=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,M8=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,C8=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,b8=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,R8=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,P8=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,I8=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,D8=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,L8=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,B8=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,N8=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,k8=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,F8=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,U8=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,O8=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,H8=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,G8=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,z8=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,V8=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,W8=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,q8=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,J8=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,X8=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,Y8=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,K8=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,Q8=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,Z8=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color *= toneMappingExposure;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	return color;
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,$8=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,j8=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,e6=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,t6=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,n6=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,i6=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const r6=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,s6=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,o6=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,a6=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,l6=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,u6=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,c6=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,d6=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,f6=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,h6=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,p6=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,m6=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,g6=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,v6=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,y6=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,_6=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,x6=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,w6=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,A6=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,S6=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,E6=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,T6=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,M6=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,C6=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,b6=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,R6=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,P6=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,I6=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,D6=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,L6=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,B6=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,N6=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,k6=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,F6=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Cn={alphahash_fragment:sV,alphahash_pars_fragment:oV,alphamap_fragment:aV,alphamap_pars_fragment:lV,alphatest_fragment:uV,alphatest_pars_fragment:cV,aomap_fragment:dV,aomap_pars_fragment:fV,batching_pars_vertex:hV,batching_vertex:pV,begin_vertex:mV,beginnormal_vertex:gV,bsdfs:vV,iridescence_fragment:yV,bumpmap_pars_fragment:_V,clipping_planes_fragment:xV,clipping_planes_pars_fragment:wV,clipping_planes_pars_vertex:AV,clipping_planes_vertex:SV,color_fragment:EV,color_pars_fragment:TV,color_pars_vertex:MV,color_vertex:CV,common:bV,cube_uv_reflection_fragment:RV,defaultnormal_vertex:PV,displacementmap_pars_vertex:IV,displacementmap_vertex:DV,emissivemap_fragment:LV,emissivemap_pars_fragment:BV,colorspace_fragment:NV,colorspace_pars_fragment:kV,envmap_fragment:FV,envmap_common_pars_fragment:UV,envmap_pars_fragment:OV,envmap_pars_vertex:HV,envmap_physical_pars_fragment:$V,envmap_vertex:GV,fog_vertex:zV,fog_pars_vertex:VV,fog_fragment:WV,fog_pars_fragment:qV,gradientmap_pars_fragment:JV,lightmap_fragment:XV,lightmap_pars_fragment:YV,lights_lambert_fragment:KV,lights_lambert_pars_fragment:QV,lights_pars_begin:ZV,lights_toon_fragment:jV,lights_toon_pars_fragment:e8,lights_phong_fragment:t8,lights_phong_pars_fragment:n8,lights_physical_fragment:i8,lights_physical_pars_fragment:r8,lights_fragment_begin:s8,lights_fragment_maps:o8,lights_fragment_end:a8,logdepthbuf_fragment:l8,logdepthbuf_pars_fragment:u8,logdepthbuf_pars_vertex:c8,logdepthbuf_vertex:d8,map_fragment:f8,map_pars_fragment:h8,map_particle_fragment:p8,map_particle_pars_fragment:m8,metalnessmap_fragment:g8,metalnessmap_pars_fragment:v8,morphcolor_vertex:y8,morphnormal_vertex:_8,morphtarget_pars_vertex:x8,morphtarget_vertex:w8,normal_fragment_begin:A8,normal_fragment_maps:S8,normal_pars_fragment:E8,normal_pars_vertex:T8,normal_vertex:M8,normalmap_pars_fragment:C8,clearcoat_normal_fragment_begin:b8,clearcoat_normal_fragment_maps:R8,clearcoat_pars_fragment:P8,iridescence_pars_fragment:I8,opaque_fragment:D8,packing:L8,premultiplied_alpha_fragment:B8,project_vertex:N8,dithering_fragment:k8,dithering_pars_fragment:F8,roughnessmap_fragment:U8,roughnessmap_pars_fragment:O8,shadowmap_pars_fragment:H8,shadowmap_pars_vertex:G8,shadowmap_vertex:z8,shadowmask_pars_fragment:V8,skinbase_vertex:W8,skinning_pars_vertex:q8,skinning_vertex:J8,skinnormal_vertex:X8,specularmap_fragment:Y8,specularmap_pars_fragment:K8,tonemapping_fragment:Q8,tonemapping_pars_fragment:Z8,transmission_fragment:$8,transmission_pars_fragment:j8,uv_pars_fragment:e6,uv_pars_vertex:t6,uv_vertex:n6,worldpos_vertex:i6,background_vert:r6,background_frag:s6,backgroundCube_vert:o6,backgroundCube_frag:a6,cube_vert:l6,cube_frag:u6,depth_vert:c6,depth_frag:d6,distanceRGBA_vert:f6,distanceRGBA_frag:h6,equirect_vert:p6,equirect_frag:m6,linedashed_vert:g6,linedashed_frag:v6,meshbasic_vert:y6,meshbasic_frag:_6,meshlambert_vert:x6,meshlambert_frag:w6,meshmatcap_vert:A6,meshmatcap_frag:S6,meshnormal_vert:E6,meshnormal_frag:T6,meshphong_vert:M6,meshphong_frag:C6,meshphysical_vert:b6,meshphysical_frag:R6,meshtoon_vert:P6,meshtoon_frag:I6,points_vert:D6,points_frag:L6,shadow_vert:B6,shadow_frag:N6,sprite_vert:k6,sprite_frag:F6},Et={common:{diffuse:{value:new St(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Dn},alphaMap:{value:null},alphaMapTransform:{value:new Dn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Dn}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Dn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Dn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Dn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Dn},normalScale:{value:new Je(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Dn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Dn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Dn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Dn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new St(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new St(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Dn},alphaTest:{value:0},uvTransform:{value:new Dn}},sprite:{diffuse:{value:new St(16777215)},opacity:{value:1},center:{value:new Je(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Dn},alphaMap:{value:null},alphaMapTransform:{value:new Dn},alphaTest:{value:0}}},fl={basic:{uniforms:Ys([Et.common,Et.specularmap,Et.envmap,Et.aomap,Et.lightmap,Et.fog]),vertexShader:Cn.meshbasic_vert,fragmentShader:Cn.meshbasic_frag},lambert:{uniforms:Ys([Et.common,Et.specularmap,Et.envmap,Et.aomap,Et.lightmap,Et.emissivemap,Et.bumpmap,Et.normalmap,Et.displacementmap,Et.fog,Et.lights,{emissive:{value:new St(0)}}]),vertexShader:Cn.meshlambert_vert,fragmentShader:Cn.meshlambert_frag},phong:{uniforms:Ys([Et.common,Et.specularmap,Et.envmap,Et.aomap,Et.lightmap,Et.emissivemap,Et.bumpmap,Et.normalmap,Et.displacementmap,Et.fog,Et.lights,{emissive:{value:new St(0)},specular:{value:new St(1118481)},shininess:{value:30}}]),vertexShader:Cn.meshphong_vert,fragmentShader:Cn.meshphong_frag},standard:{uniforms:Ys([Et.common,Et.envmap,Et.aomap,Et.lightmap,Et.emissivemap,Et.bumpmap,Et.normalmap,Et.displacementmap,Et.roughnessmap,Et.metalnessmap,Et.fog,Et.lights,{emissive:{value:new St(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Cn.meshphysical_vert,fragmentShader:Cn.meshphysical_frag},toon:{uniforms:Ys([Et.common,Et.aomap,Et.lightmap,Et.emissivemap,Et.bumpmap,Et.normalmap,Et.displacementmap,Et.gradientmap,Et.fog,Et.lights,{emissive:{value:new St(0)}}]),vertexShader:Cn.meshtoon_vert,fragmentShader:Cn.meshtoon_frag},matcap:{uniforms:Ys([Et.common,Et.bumpmap,Et.normalmap,Et.displacementmap,Et.fog,{matcap:{value:null}}]),vertexShader:Cn.meshmatcap_vert,fragmentShader:Cn.meshmatcap_frag},points:{uniforms:Ys([Et.points,Et.fog]),vertexShader:Cn.points_vert,fragmentShader:Cn.points_frag},dashed:{uniforms:Ys([Et.common,Et.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Cn.linedashed_vert,fragmentShader:Cn.linedashed_frag},depth:{uniforms:Ys([Et.common,Et.displacementmap]),vertexShader:Cn.depth_vert,fragmentShader:Cn.depth_frag},normal:{uniforms:Ys([Et.common,Et.bumpmap,Et.normalmap,Et.displacementmap,{opacity:{value:1}}]),vertexShader:Cn.meshnormal_vert,fragmentShader:Cn.meshnormal_frag},sprite:{uniforms:Ys([Et.sprite,Et.fog]),vertexShader:Cn.sprite_vert,fragmentShader:Cn.sprite_frag},background:{uniforms:{uvTransform:{value:new Dn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Cn.background_vert,fragmentShader:Cn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:Cn.backgroundCube_vert,fragmentShader:Cn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Cn.cube_vert,fragmentShader:Cn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Cn.equirect_vert,fragmentShader:Cn.equirect_frag},distanceRGBA:{uniforms:Ys([Et.common,Et.displacementmap,{referencePosition:{value:new te},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Cn.distanceRGBA_vert,fragmentShader:Cn.distanceRGBA_frag},shadow:{uniforms:Ys([Et.lights,Et.fog,{color:{value:new St(0)},opacity:{value:1}}]),vertexShader:Cn.shadow_vert,fragmentShader:Cn.shadow_frag}};fl.physical={uniforms:Ys([fl.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Dn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Dn},clearcoatNormalScale:{value:new Je(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Dn},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Dn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Dn},sheen:{value:0},sheenColor:{value:new St(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Dn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Dn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Dn},transmissionSamplerSize:{value:new Je},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Dn},attenuationDistance:{value:0},attenuationColor:{value:new St(0)},specularColor:{value:new St(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Dn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Dn},anisotropyVector:{value:new Je},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Dn}}]),vertexShader:Cn.meshphysical_vert,fragmentShader:Cn.meshphysical_frag};const Tx={r:0,b:0,g:0};function U6(n,e,t,i,r,s,o){const a=new St(0);let l=s===!0?0:1,u,d,h=null,p=0,v=null;function _(S,A){let b=!1,C=A.isScene===!0?A.background:null;C&&C.isTexture&&(C=(A.backgroundBlurriness>0?t:e).get(C)),C===null?w(a,l):C&&C.isColor&&(w(C,1),b=!0);const P=n.xr.getEnvironmentBlendMode();P==="additive"?i.buffers.color.setClear(0,0,0,1,o):P==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,o),(n.autoClear||b)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),C&&(C.isCubeTexture||C.mapping===Pg)?(d===void 0&&(d=new bi(new Jh(1,1,1),new Ds({name:"BackgroundCubeMaterial",uniforms:hg(fl.backgroundCube.uniforms),vertexShader:fl.backgroundCube.vertexShader,fragmentShader:fl.backgroundCube.fragmentShader,side:to,depthTest:!1,depthWrite:!1,fog:!1})),d.geometry.deleteAttribute("normal"),d.geometry.deleteAttribute("uv"),d.onBeforeRender=function(k,L,N){this.matrixWorld.copyPosition(N.matrixWorld)},Object.defineProperty(d.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(d)),d.material.uniforms.envMap.value=C,d.material.uniforms.flipEnvMap.value=C.isCubeTexture&&C.isRenderTargetTexture===!1?-1:1,d.material.uniforms.backgroundBlurriness.value=A.backgroundBlurriness,d.material.uniforms.backgroundIntensity.value=A.backgroundIntensity,d.material.toneMapped=fi.getTransfer(C.colorSpace)!==Ti,(h!==C||p!==C.version||v!==n.toneMapping)&&(d.material.needsUpdate=!0,h=C,p=C.version,v=n.toneMapping),d.layers.enableAll(),S.unshift(d,d.geometry,d.material,0,0,null)):C&&C.isTexture&&(u===void 0&&(u=new bi(new zd(2,2),new Ds({name:"BackgroundMaterial",uniforms:hg(fl.background.uniforms),vertexShader:fl.background.vertexShader,fragmentShader:fl.background.fragmentShader,side:Zl,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(u)),u.material.uniforms.t2D.value=C,u.material.uniforms.backgroundIntensity.value=A.backgroundIntensity,u.material.toneMapped=fi.getTransfer(C.colorSpace)!==Ti,C.matrixAutoUpdate===!0&&C.updateMatrix(),u.material.uniforms.uvTransform.value.copy(C.matrix),(h!==C||p!==C.version||v!==n.toneMapping)&&(u.material.needsUpdate=!0,h=C,p=C.version,v=n.toneMapping),u.layers.enableAll(),S.unshift(u,u.geometry,u.material,0,0,null))}function w(S,A){S.getRGB(Tx,hF(n)),i.buffers.color.setClear(Tx.r,Tx.g,Tx.b,A,o)}return{getClearColor:function(){return a},setClearColor:function(S,A=1){a.set(S),l=A,w(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(S){l=S,w(a,l)},render:_}}function O6(n,e,t,i){const r=n.getParameter(n.MAX_VERTEX_ATTRIBS),s=i.isWebGL2?null:e.get("OES_vertex_array_object"),o=i.isWebGL2||s!==null,a={},l=S(null);let u=l,d=!1;function h(Q,ue,re,ye,$){let oe=!1;if(o){const W=w(ye,re,ue);u!==W&&(u=W,v(u.object)),oe=A(Q,ye,re,$),oe&&b(Q,ye,re,$)}else{const W=ue.wireframe===!0;(u.geometry!==ye.id||u.program!==re.id||u.wireframe!==W)&&(u.geometry=ye.id,u.program=re.id,u.wireframe=W,oe=!0)}$!==null&&t.update($,n.ELEMENT_ARRAY_BUFFER),(oe||d)&&(d=!1,O(Q,ue,re,ye),$!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.get($).buffer))}function p(){return i.isWebGL2?n.createVertexArray():s.createVertexArrayOES()}function v(Q){return i.isWebGL2?n.bindVertexArray(Q):s.bindVertexArrayOES(Q)}function _(Q){return i.isWebGL2?n.deleteVertexArray(Q):s.deleteVertexArrayOES(Q)}function w(Q,ue,re){const ye=re.wireframe===!0;let $=a[Q.id];$===void 0&&($={},a[Q.id]=$);let oe=$[ue.id];oe===void 0&&(oe={},$[ue.id]=oe);let W=oe[ye];return W===void 0&&(W=S(p()),oe[ye]=W),W}function S(Q){const ue=[],re=[],ye=[];for(let $=0;$<r;$++)ue[$]=0,re[$]=0,ye[$]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:ue,enabledAttributes:re,attributeDivisors:ye,object:Q,attributes:{},index:null}}function A(Q,ue,re,ye){const $=u.attributes,oe=ue.attributes;let W=0;const J=re.getAttributes();for(const se in J)if(J[se].location>=0){const Se=$[se];let ke=oe[se];if(ke===void 0&&(se==="instanceMatrix"&&Q.instanceMatrix&&(ke=Q.instanceMatrix),se==="instanceColor"&&Q.instanceColor&&(ke=Q.instanceColor)),Se===void 0||Se.attribute!==ke||ke&&Se.data!==ke.data)return!0;W++}return u.attributesNum!==W||u.index!==ye}function b(Q,ue,re,ye){const $={},oe=ue.attributes;let W=0;const J=re.getAttributes();for(const se in J)if(J[se].location>=0){let Se=oe[se];Se===void 0&&(se==="instanceMatrix"&&Q.instanceMatrix&&(Se=Q.instanceMatrix),se==="instanceColor"&&Q.instanceColor&&(Se=Q.instanceColor));const ke={};ke.attribute=Se,Se&&Se.data&&(ke.data=Se.data),$[se]=ke,W++}u.attributes=$,u.attributesNum=W,u.index=ye}function C(){const Q=u.newAttributes;for(let ue=0,re=Q.length;ue<re;ue++)Q[ue]=0}function P(Q){k(Q,0)}function k(Q,ue){const re=u.newAttributes,ye=u.enabledAttributes,$=u.attributeDivisors;re[Q]=1,ye[Q]===0&&(n.enableVertexAttribArray(Q),ye[Q]=1),$[Q]!==ue&&((i.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](Q,ue),$[Q]=ue)}function L(){const Q=u.newAttributes,ue=u.enabledAttributes;for(let re=0,ye=ue.length;re<ye;re++)ue[re]!==Q[re]&&(n.disableVertexAttribArray(re),ue[re]=0)}function N(Q,ue,re,ye,$,oe,W){W===!0?n.vertexAttribIPointer(Q,ue,re,$,oe):n.vertexAttribPointer(Q,ue,re,ye,$,oe)}function O(Q,ue,re,ye){if(i.isWebGL2===!1&&(Q.isInstancedMesh||ye.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;C();const $=ye.attributes,oe=re.getAttributes(),W=ue.defaultAttributeValues;for(const J in oe){const se=oe[J];if(se.location>=0){let me=$[J];if(me===void 0&&(J==="instanceMatrix"&&Q.instanceMatrix&&(me=Q.instanceMatrix),J==="instanceColor"&&Q.instanceColor&&(me=Q.instanceColor)),me!==void 0){const Se=me.normalized,ke=me.itemSize,Ie=t.get(me);if(Ie===void 0)continue;const ze=Ie.buffer,je=Ie.type,at=Ie.bytesPerElement,ut=i.isWebGL2===!0&&(je===n.INT||je===n.UNSIGNED_INT||me.gpuType===qA);if(me.isInterleavedBufferAttribute){const gt=me.data,fe=gt.stride,Fe=me.offset;if(gt.isInstancedInterleavedBuffer){for(let Be=0;Be<se.locationSize;Be++)k(se.location+Be,gt.meshPerAttribute);Q.isInstancedMesh!==!0&&ye._maxInstanceCount===void 0&&(ye._maxInstanceCount=gt.meshPerAttribute*gt.count)}else for(let Be=0;Be<se.locationSize;Be++)P(se.location+Be);n.bindBuffer(n.ARRAY_BUFFER,ze);for(let Be=0;Be<se.locationSize;Be++)N(se.location+Be,ke/se.locationSize,je,Se,fe*at,(Fe+ke/se.locationSize*Be)*at,ut)}else{if(me.isInstancedBufferAttribute){for(let gt=0;gt<se.locationSize;gt++)k(se.location+gt,me.meshPerAttribute);Q.isInstancedMesh!==!0&&ye._maxInstanceCount===void 0&&(ye._maxInstanceCount=me.meshPerAttribute*me.count)}else for(let gt=0;gt<se.locationSize;gt++)P(se.location+gt);n.bindBuffer(n.ARRAY_BUFFER,ze);for(let gt=0;gt<se.locationSize;gt++)N(se.location+gt,ke/se.locationSize,je,Se,ke*at,ke/se.locationSize*gt*at,ut)}}else if(W!==void 0){const Se=W[J];if(Se!==void 0)switch(Se.length){case 2:n.vertexAttrib2fv(se.location,Se);break;case 3:n.vertexAttrib3fv(se.location,Se);break;case 4:n.vertexAttrib4fv(se.location,Se);break;default:n.vertexAttrib1fv(se.location,Se)}}}}L()}function D(){Z();for(const Q in a){const ue=a[Q];for(const re in ue){const ye=ue[re];for(const $ in ye)_(ye[$].object),delete ye[$];delete ue[re]}delete a[Q]}}function U(Q){if(a[Q.id]===void 0)return;const ue=a[Q.id];for(const re in ue){const ye=ue[re];for(const $ in ye)_(ye[$].object),delete ye[$];delete ue[re]}delete a[Q.id]}function X(Q){for(const ue in a){const re=a[ue];if(re[Q.id]===void 0)continue;const ye=re[Q.id];for(const $ in ye)_(ye[$].object),delete ye[$];delete re[Q.id]}}function Z(){he(),d=!0,u!==l&&(u=l,v(u.object))}function he(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:h,reset:Z,resetDefaultState:he,dispose:D,releaseStatesOfGeometry:U,releaseStatesOfProgram:X,initAttributes:C,enableAttribute:P,disableUnusedAttributes:L}}function H6(n,e,t,i){const r=i.isWebGL2;let s;function o(d){s=d}function a(d,h){n.drawArrays(s,d,h),t.update(h,s,1)}function l(d,h,p){if(p===0)return;let v,_;if(r)v=n,_="drawArraysInstanced";else if(v=e.get("ANGLE_instanced_arrays"),_="drawArraysInstancedANGLE",v===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}v[_](s,d,h,p),t.update(h,s,p)}function u(d,h,p){if(p===0)return;const v=e.get("WEBGL_multi_draw");if(v===null)for(let _=0;_<p;_++)this.render(d[_],h[_]);else{v.multiDrawArraysWEBGL(s,d,0,h,0,p);let _=0;for(let w=0;w<p;w++)_+=h[w];t.update(_,s,1)}}this.setMode=o,this.render=a,this.renderInstances=l,this.renderMultiDraw=u}function G6(n,e,t){let i;function r(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const N=e.get("EXT_texture_filter_anisotropic");i=n.getParameter(N.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function s(N){if(N==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";N="mediump"}return N==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&n.constructor.name==="WebGL2RenderingContext";let a=t.precision!==void 0?t.precision:"highp";const l=s(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const u=o||e.has("WEBGL_draw_buffers"),d=t.logarithmicDepthBuffer===!0,h=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),p=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),v=n.getParameter(n.MAX_TEXTURE_SIZE),_=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),w=n.getParameter(n.MAX_VERTEX_ATTRIBS),S=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),A=n.getParameter(n.MAX_VARYING_VECTORS),b=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),C=p>0,P=o||e.has("OES_texture_float"),k=C&&P,L=o?n.getParameter(n.MAX_SAMPLES):0;return{isWebGL2:o,drawBuffers:u,getMaxAnisotropy:r,getMaxPrecision:s,precision:a,logarithmicDepthBuffer:d,maxTextures:h,maxVertexTextures:p,maxTextureSize:v,maxCubemapSize:_,maxAttributes:w,maxVertexUniforms:S,maxVaryings:A,maxFragmentUniforms:b,vertexTextures:C,floatFragmentTextures:P,floatVertexTextures:k,maxSamples:L}}function z6(n){const e=this;let t=null,i=0,r=!1,s=!1;const o=new Wu,a=new Dn,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(h,p){const v=h.length!==0||p||i!==0||r;return r=p,i=h.length,v},this.beginShadows=function(){s=!0,d(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(h,p){t=d(h,p,0)},this.setState=function(h,p,v){const _=h.clippingPlanes,w=h.clipIntersection,S=h.clipShadows,A=n.get(h);if(!r||_===null||_.length===0||s&&!S)s?d(null):u();else{const b=s?0:i,C=b*4;let P=A.clippingState||null;l.value=P,P=d(_,p,C,v);for(let k=0;k!==C;++k)P[k]=t[k];A.clippingState=P,this.numIntersection=w?this.numPlanes:0,this.numPlanes+=b}};function u(){l.value!==t&&(l.value=t,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function d(h,p,v,_){const w=h!==null?h.length:0;let S=null;if(w!==0){if(S=l.value,_!==!0||S===null){const A=v+w*4,b=p.matrixWorldInverse;a.getNormalMatrix(b),(S===null||S.length<A)&&(S=new Float32Array(A));for(let C=0,P=v;C!==w;++C,P+=4)o.copy(h[C]).applyMatrix4(b,a),o.normal.toArray(S,P),S[P+3]=o.constant}l.value=S,l.needsUpdate=!0}return e.numPlanes=w,e.numIntersection=0,S}}function V6(n){let e=new WeakMap;function t(o,a){return a===Dh?o.mapping=$l:a===Qv&&(o.mapping=Id),o}function i(o){if(o&&o.isTexture){const a=o.mapping;if(a===Dh||a===Qv)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const u=new GC(l.height/2);return u.fromEquirectangularTexture(n,o),e.set(o,u),o.addEventListener("dispose",r),t(u.texture,o.mapping)}else return null}}return o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}class Xl extends By{constructor(e=-1,t=1,i=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,o=i+e,a=r+t,l=r-t;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,d=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=u*this.view.offsetX,o=s+u*this.view.width,a-=d*this.view.offsetY,l=a-d*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const Dm=4,pI=[.125,.215,.35,.446,.526,.582],oh=20,XE=new Xl,mI=new St;let YE=null,KE=0,QE=0;const jf=(1+Math.sqrt(5))/2,hm=1/jf,gI=[new te(1,1,1),new te(-1,1,1),new te(1,1,-1),new te(-1,1,-1),new te(0,jf,hm),new te(0,jf,-hm),new te(hm,0,jf),new te(-hm,0,jf),new te(jf,hm,0),new te(-jf,hm,0)];class $1{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){YE=this._renderer.getRenderTarget(),KE=this._renderer.getActiveCubeFace(),QE=this._renderer.getActiveMipmapLevel(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,i,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=_I(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=yI(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(YE,KE,QE),e.scissorTest=!1,Mx(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===$l||e.mapping===Id?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),YE=this._renderer.getRenderTarget(),KE=this._renderer.getActiveCubeFace(),QE=this._renderer.getActiveMipmapLevel();const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:Kn,minFilter:Kn,generateMipmaps:!1,type:Yr,format:Mr,colorSpace:jo,depthBuffer:!1},r=vI(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=vI(e,t,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=W6(s)),this._blurMaterial=q6(s,e,t)}return r}_compileMaterial(e){const t=new bi(this._lodPlanes[0],e);this._renderer.compile(t,XE)}_sceneToCubeUV(e,t,i,r){const a=new er(90,1,t,i),l=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],d=this._renderer,h=d.autoClear,p=d.toneMapping;d.getClearColor(mI),d.toneMapping=Jl,d.autoClear=!1;const v=new Ao({name:"PMREM.Background",side:to,depthWrite:!1,depthTest:!1}),_=new bi(new Jh,v);let w=!1;const S=e.background;S?S.isColor&&(v.color.copy(S),e.background=null,w=!0):(v.color.copy(mI),w=!0);for(let A=0;A<6;A++){const b=A%3;b===0?(a.up.set(0,l[A],0),a.lookAt(u[A],0,0)):b===1?(a.up.set(0,0,l[A]),a.lookAt(0,u[A],0)):(a.up.set(0,l[A],0),a.lookAt(0,0,u[A]));const C=this._cubeSize;Mx(r,b*C,A>2?C:0,C,C),d.setRenderTarget(r),w&&d.render(_,a),d.render(e,a)}_.geometry.dispose(),_.material.dispose(),d.toneMapping=p,d.autoClear=h,e.background=S}_textureToCubeUV(e,t){const i=this._renderer,r=e.mapping===$l||e.mapping===Id;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=_I()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=yI());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new bi(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;Mx(t,0,0,3*l,2*l),i.setRenderTarget(t),i.render(o,XE)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const s=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),o=gI[(r-1)%gI.length];this._blur(e,r-1,r,s,o)}t.autoClear=i}_blur(e,t,i,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,i,r,"latitudinal",s),this._halfBlur(o,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,o,a){const l=this._renderer,u=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const d=3,h=new bi(this._lodPlanes[r],u),p=u.uniforms,v=this._sizeLods[i]-1,_=isFinite(s)?Math.PI/(2*v):2*Math.PI/(2*oh-1),w=s/_,S=isFinite(s)?1+Math.floor(d*w):oh;S>oh&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${S} samples when the maximum is set to ${oh}`);const A=[];let b=0;for(let N=0;N<oh;++N){const O=N/w,D=Math.exp(-O*O/2);A.push(D),N===0?b+=D:N<S&&(b+=2*D)}for(let N=0;N<A.length;N++)A[N]=A[N]/b;p.envMap.value=e.texture,p.samples.value=S,p.weights.value=A,p.latitudinal.value=o==="latitudinal",a&&(p.poleAxis.value=a);const{_lodMax:C}=this;p.dTheta.value=_,p.mipInt.value=C-i;const P=this._sizeLods[r],k=3*P*(r>C-Dm?r-C+Dm:0),L=4*(this._cubeSize-P);Mx(t,k,L,3*P,2*P),l.setRenderTarget(t),l.render(h,XE)}}function W6(n){const e=[],t=[],i=[];let r=n;const s=n-Dm+1+pI.length;for(let o=0;o<s;o++){const a=Math.pow(2,r);t.push(a);let l=1/a;o>n-Dm?l=pI[o-n+Dm-1]:o===0&&(l=0),i.push(l);const u=1/(a-2),d=-u,h=1+u,p=[d,d,h,d,h,h,d,d,h,h,d,h],v=6,_=6,w=3,S=2,A=1,b=new Float32Array(w*_*v),C=new Float32Array(S*_*v),P=new Float32Array(A*_*v);for(let L=0;L<v;L++){const N=L%3*2/3-1,O=L>2?0:-1,D=[N,O,0,N+2/3,O,0,N+2/3,O+1,0,N,O,0,N+2/3,O+1,0,N,O+1,0];b.set(D,w*_*L),C.set(p,S*_*L);const U=[L,L,L,L,L,L];P.set(U,A*_*L)}const k=new Tn;k.setAttribute("position",new Xn(b,w)),k.setAttribute("uv",new Xn(C,S)),k.setAttribute("faceIndex",new Xn(P,A)),e.push(k),r>Dm&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function vI(n,e,t){const i=new no(n,e,t);return i.texture.mapping=Pg,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function Mx(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function q6(n,e,t){const i=new Float32Array(oh),r=new te(0,1,0);return new Ds({name:"SphericalGaussianBlur",defines:{n:oh,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:zC(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:ql,depthTest:!1,depthWrite:!1})}function yI(){return new Ds({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:zC(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:ql,depthTest:!1,depthWrite:!1})}function _I(){return new Ds({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:zC(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:ql,depthTest:!1,depthWrite:!1})}function zC(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function J6(n){let e=new WeakMap,t=null;function i(a){if(a&&a.isTexture){const l=a.mapping,u=l===Dh||l===Qv,d=l===$l||l===Id;if(u||d)if(a.isRenderTargetTexture&&a.needsPMREMUpdate===!0){a.needsPMREMUpdate=!1;let h=e.get(a);return t===null&&(t=new $1(n)),h=u?t.fromEquirectangular(a,h):t.fromCubemap(a,h),e.set(a,h),h.texture}else{if(e.has(a))return e.get(a).texture;{const h=a.image;if(u&&h&&h.height>0||d&&h&&r(h)){t===null&&(t=new $1(n));const p=u?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,p),a.addEventListener("dispose",s),p.texture}else return null}}}return a}function r(a){let l=0;const u=6;for(let d=0;d<u;d++)a[d]!==void 0&&l++;return l===u}function s(a){const l=a.target;l.removeEventListener("dispose",s);const u=e.get(l);u!==void 0&&(e.delete(l),u.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:o}}function X6(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(i){i.isWebGL2?(t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance")):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(i){const r=t(i);return r===null&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function Y6(n,e,t,i){const r={},s=new WeakMap;function o(h){const p=h.target;p.index!==null&&e.remove(p.index);for(const _ in p.attributes)e.remove(p.attributes[_]);for(const _ in p.morphAttributes){const w=p.morphAttributes[_];for(let S=0,A=w.length;S<A;S++)e.remove(w[S])}p.removeEventListener("dispose",o),delete r[p.id];const v=s.get(p);v&&(e.remove(v),s.delete(p)),i.releaseStatesOfGeometry(p),p.isInstancedBufferGeometry===!0&&delete p._maxInstanceCount,t.memory.geometries--}function a(h,p){return r[p.id]===!0||(p.addEventListener("dispose",o),r[p.id]=!0,t.memory.geometries++),p}function l(h){const p=h.attributes;for(const _ in p)e.update(p[_],n.ARRAY_BUFFER);const v=h.morphAttributes;for(const _ in v){const w=v[_];for(let S=0,A=w.length;S<A;S++)e.update(w[S],n.ARRAY_BUFFER)}}function u(h){const p=[],v=h.index,_=h.attributes.position;let w=0;if(v!==null){const b=v.array;w=v.version;for(let C=0,P=b.length;C<P;C+=3){const k=b[C+0],L=b[C+1],N=b[C+2];p.push(k,L,L,N,N,k)}}else if(_!==void 0){const b=_.array;w=_.version;for(let C=0,P=b.length/3-1;C<P;C+=3){const k=C+0,L=C+1,N=C+2;p.push(k,L,L,N,N,k)}}else return;const S=new(uF(p)?HC:OC)(p,1);S.version=w;const A=s.get(h);A&&e.remove(A),s.set(h,S)}function d(h){const p=s.get(h);if(p){const v=h.index;v!==null&&p.version<v.version&&u(h)}else u(h);return s.get(h)}return{get:a,update:l,getWireframeAttribute:d}}function K6(n,e,t,i){const r=i.isWebGL2;let s;function o(v){s=v}let a,l;function u(v){a=v.type,l=v.bytesPerElement}function d(v,_){n.drawElements(s,_,a,v*l),t.update(_,s,1)}function h(v,_,w){if(w===0)return;let S,A;if(r)S=n,A="drawElementsInstanced";else if(S=e.get("ANGLE_instanced_arrays"),A="drawElementsInstancedANGLE",S===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}S[A](s,_,a,v*l,w),t.update(_,s,w)}function p(v,_,w){if(w===0)return;const S=e.get("WEBGL_multi_draw");if(S===null)for(let A=0;A<w;A++)this.render(v[A]/l,_[A]);else{S.multiDrawElementsWEBGL(s,_,0,a,v,0,w);let A=0;for(let b=0;b<w;b++)A+=_[b];t.update(A,s,1)}}this.setMode=o,this.setIndex=u,this.render=d,this.renderInstances=h,this.renderMultiDraw=p}function Q6(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,o,a){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=a*(s/3);break;case n.LINES:t.lines+=a*(s/2);break;case n.LINE_STRIP:t.lines+=a*(s-1);break;case n.LINE_LOOP:t.lines+=a*s;break;case n.POINTS:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function Z6(n,e){return n[0]-e[0]}function $6(n,e){return Math.abs(e[1])-Math.abs(n[1])}function j6(n,e,t){const i={},r=new Float32Array(8),s=new WeakMap,o=new li,a=[];for(let u=0;u<8;u++)a[u]=[u,0];function l(u,d,h){const p=u.morphTargetInfluences;if(e.isWebGL2===!0){const _=d.morphAttributes.position||d.morphAttributes.normal||d.morphAttributes.color,w=_!==void 0?_.length:0;let S=s.get(d);if(S===void 0||S.count!==w){let ue=function(){he.dispose(),s.delete(d),d.removeEventListener("dispose",ue)};var v=ue;S!==void 0&&S.texture.dispose();const C=d.morphAttributes.position!==void 0,P=d.morphAttributes.normal!==void 0,k=d.morphAttributes.color!==void 0,L=d.morphAttributes.position||[],N=d.morphAttributes.normal||[],O=d.morphAttributes.color||[];let D=0;C===!0&&(D=1),P===!0&&(D=2),k===!0&&(D=3);let U=d.attributes.position.count*D,X=1;U>e.maxTextureSize&&(X=Math.ceil(U/e.maxTextureSize),U=e.maxTextureSize);const Z=new Float32Array(U*X*4*w),he=new YA(Z,U,X,w);he.type=Cr,he.needsUpdate=!0;const Q=D*4;for(let re=0;re<w;re++){const ye=L[re],$=N[re],oe=O[re],W=U*X*4*re;for(let J=0;J<ye.count;J++){const se=J*Q;C===!0&&(o.fromBufferAttribute(ye,J),Z[W+se+0]=o.x,Z[W+se+1]=o.y,Z[W+se+2]=o.z,Z[W+se+3]=0),P===!0&&(o.fromBufferAttribute($,J),Z[W+se+4]=o.x,Z[W+se+5]=o.y,Z[W+se+6]=o.z,Z[W+se+7]=0),k===!0&&(o.fromBufferAttribute(oe,J),Z[W+se+8]=o.x,Z[W+se+9]=o.y,Z[W+se+10]=o.z,Z[W+se+11]=oe.itemSize===4?o.w:1)}}S={count:w,texture:he,size:new Je(U,X)},s.set(d,S),d.addEventListener("dispose",ue)}let A=0;for(let C=0;C<p.length;C++)A+=p[C];const b=d.morphTargetsRelative?1:1-A;h.getUniforms().setValue(n,"morphTargetBaseInfluence",b),h.getUniforms().setValue(n,"morphTargetInfluences",p),h.getUniforms().setValue(n,"morphTargetsTexture",S.texture,t),h.getUniforms().setValue(n,"morphTargetsTextureSize",S.size)}else{const _=p===void 0?0:p.length;let w=i[d.id];if(w===void 0||w.length!==_){w=[];for(let P=0;P<_;P++)w[P]=[P,0];i[d.id]=w}for(let P=0;P<_;P++){const k=w[P];k[0]=P,k[1]=p[P]}w.sort($6);for(let P=0;P<8;P++)P<_&&w[P][1]?(a[P][0]=w[P][0],a[P][1]=w[P][1]):(a[P][0]=Number.MAX_SAFE_INTEGER,a[P][1]=0);a.sort(Z6);const S=d.morphAttributes.position,A=d.morphAttributes.normal;let b=0;for(let P=0;P<8;P++){const k=a[P],L=k[0],N=k[1];L!==Number.MAX_SAFE_INTEGER&&N?(S&&d.getAttribute("morphTarget"+P)!==S[L]&&d.setAttribute("morphTarget"+P,S[L]),A&&d.getAttribute("morphNormal"+P)!==A[L]&&d.setAttribute("morphNormal"+P,A[L]),r[P]=N,b+=N):(S&&d.hasAttribute("morphTarget"+P)===!0&&d.deleteAttribute("morphTarget"+P),A&&d.hasAttribute("morphNormal"+P)===!0&&d.deleteAttribute("morphNormal"+P),r[P]=0)}const C=d.morphTargetsRelative?1:1-b;h.getUniforms().setValue(n,"morphTargetBaseInfluence",C),h.getUniforms().setValue(n,"morphTargetInfluences",r)}}return{update:l}}function e9(n,e,t,i){let r=new WeakMap;function s(l){const u=i.render.frame,d=l.geometry,h=e.get(l,d);if(r.get(h)!==u&&(e.update(h),r.set(h,u)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),r.get(l)!==u&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER),r.set(l,u))),l.isSkinnedMesh){const p=l.skeleton;r.get(p)!==u&&(p.update(),r.set(p,u))}return h}function o(){r=new WeakMap}function a(l){const u=l.target;u.removeEventListener("dispose",a),t.remove(u.instanceMatrix),u.instanceColor!==null&&t.remove(u.instanceColor)}return{update:s,dispose:o}}class VC extends hi{constructor(e,t,i,r,s,o,a,l,u,d){if(d=d!==void 0?d:wd,d!==wd&&d!==Lh)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&d===wd&&(i=zl),i===void 0&&d===Lh&&(i=xd),super(null,r,s,o,a,l,d,i,u),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:$i,this.minFilter=l!==void 0?l:$i,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}const vF=new hi,yF=new VC(1,1);yF.compareFunction=NC;const _F=new YA,xF=new UC,wF=new Ny,xI=[],wI=[],AI=new Float32Array(16),SI=new Float32Array(9),EI=new Float32Array(4);function Ig(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=xI[r];if(s===void 0&&(s=new Float32Array(r),xI[r]=s),e!==0){i.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function Ur(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function Or(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function KA(n,e){let t=wI[e];t===void 0&&(t=new Int32Array(e),wI[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function t9(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function n9(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ur(t,e))return;n.uniform2fv(this.addr,e),Or(t,e)}}function i9(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Ur(t,e))return;n.uniform3fv(this.addr,e),Or(t,e)}}function r9(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ur(t,e))return;n.uniform4fv(this.addr,e),Or(t,e)}}function s9(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Ur(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Or(t,e)}else{if(Ur(t,i))return;EI.set(i),n.uniformMatrix2fv(this.addr,!1,EI),Or(t,i)}}function o9(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Ur(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Or(t,e)}else{if(Ur(t,i))return;SI.set(i),n.uniformMatrix3fv(this.addr,!1,SI),Or(t,i)}}function a9(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Ur(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Or(t,e)}else{if(Ur(t,i))return;AI.set(i),n.uniformMatrix4fv(this.addr,!1,AI),Or(t,i)}}function l9(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function u9(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ur(t,e))return;n.uniform2iv(this.addr,e),Or(t,e)}}function c9(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Ur(t,e))return;n.uniform3iv(this.addr,e),Or(t,e)}}function d9(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ur(t,e))return;n.uniform4iv(this.addr,e),Or(t,e)}}function f9(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function h9(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ur(t,e))return;n.uniform2uiv(this.addr,e),Or(t,e)}}function p9(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Ur(t,e))return;n.uniform3uiv(this.addr,e),Or(t,e)}}function m9(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ur(t,e))return;n.uniform4uiv(this.addr,e),Or(t,e)}}function g9(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r);const s=this.type===n.SAMPLER_2D_SHADOW?yF:vF;t.setTexture2D(e||s,r)}function v9(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||xF,r)}function y9(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||wF,r)}function _9(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||_F,r)}function x9(n){switch(n){case 5126:return t9;case 35664:return n9;case 35665:return i9;case 35666:return r9;case 35674:return s9;case 35675:return o9;case 35676:return a9;case 5124:case 35670:return l9;case 35667:case 35671:return u9;case 35668:case 35672:return c9;case 35669:case 35673:return d9;case 5125:return f9;case 36294:return h9;case 36295:return p9;case 36296:return m9;case 35678:case 36198:case 36298:case 36306:case 35682:return g9;case 35679:case 36299:case 36307:return v9;case 35680:case 36300:case 36308:case 36293:return y9;case 36289:case 36303:case 36311:case 36292:return _9}}function w9(n,e){n.uniform1fv(this.addr,e)}function A9(n,e){const t=Ig(e,this.size,2);n.uniform2fv(this.addr,t)}function S9(n,e){const t=Ig(e,this.size,3);n.uniform3fv(this.addr,t)}function E9(n,e){const t=Ig(e,this.size,4);n.uniform4fv(this.addr,t)}function T9(n,e){const t=Ig(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function M9(n,e){const t=Ig(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function C9(n,e){const t=Ig(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function b9(n,e){n.uniform1iv(this.addr,e)}function R9(n,e){n.uniform2iv(this.addr,e)}function P9(n,e){n.uniform3iv(this.addr,e)}function I9(n,e){n.uniform4iv(this.addr,e)}function D9(n,e){n.uniform1uiv(this.addr,e)}function L9(n,e){n.uniform2uiv(this.addr,e)}function B9(n,e){n.uniform3uiv(this.addr,e)}function N9(n,e){n.uniform4uiv(this.addr,e)}function k9(n,e,t){const i=this.cache,r=e.length,s=KA(t,r);Ur(i,s)||(n.uniform1iv(this.addr,s),Or(i,s));for(let o=0;o!==r;++o)t.setTexture2D(e[o]||vF,s[o])}function F9(n,e,t){const i=this.cache,r=e.length,s=KA(t,r);Ur(i,s)||(n.uniform1iv(this.addr,s),Or(i,s));for(let o=0;o!==r;++o)t.setTexture3D(e[o]||xF,s[o])}function U9(n,e,t){const i=this.cache,r=e.length,s=KA(t,r);Ur(i,s)||(n.uniform1iv(this.addr,s),Or(i,s));for(let o=0;o!==r;++o)t.setTextureCube(e[o]||wF,s[o])}function O9(n,e,t){const i=this.cache,r=e.length,s=KA(t,r);Ur(i,s)||(n.uniform1iv(this.addr,s),Or(i,s));for(let o=0;o!==r;++o)t.setTexture2DArray(e[o]||_F,s[o])}function H9(n){switch(n){case 5126:return w9;case 35664:return A9;case 35665:return S9;case 35666:return E9;case 35674:return T9;case 35675:return M9;case 35676:return C9;case 5124:case 35670:return b9;case 35667:case 35671:return R9;case 35668:case 35672:return P9;case 35669:case 35673:return I9;case 5125:return D9;case 36294:return L9;case 36295:return B9;case 36296:return N9;case 35678:case 36198:case 36298:case 36306:case 35682:return k9;case 35679:case 36299:case 36307:return F9;case 35680:case 36300:case 36308:case 36293:return U9;case 36289:case 36303:case 36311:case 36292:return O9}}class G9{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=x9(t.type)}}class z9{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=H9(t.type)}}class V9{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const a=r[s];a.setValue(e,t[a.id],i)}}}const ZE=/(\w+)(\])?(\[|\.)?/g;function TI(n,e){n.seq.push(e),n.map[e.id]=e}function W9(n,e,t){const i=n.name,r=i.length;for(ZE.lastIndex=0;;){const s=ZE.exec(i),o=ZE.lastIndex;let a=s[1];const l=s[2]==="]",u=s[3];if(l&&(a=a|0),u===void 0||u==="["&&o+2===r){TI(t,u===void 0?new G9(a,n,e):new z9(a,n,e));break}else{let h=t.map[a];h===void 0&&(h=new V9(a),TI(t,h)),t=h}}}class Rw{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){const s=e.getActiveUniform(t,r),o=e.getUniformLocation(t,s.name);W9(s,o,this)}}setValue(e,t,i,r){const s=this.map[t];s!==void 0&&s.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let s=0,o=t.length;s!==o;++s){const a=t[s],l=i[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,s=e.length;r!==s;++r){const o=e[r];o.id in t&&i.push(o)}return i}}function MI(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}const q9=37297;let J9=0;function X9(n,e){const t=n.split(`
`),i=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=r;o<s;o++){const a=o+1;i.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return i.join(`
`)}function Y9(n){const e=fi.getPrimaries(fi.workingColorSpace),t=fi.getPrimaries(n);let i;switch(e===t?i="":e===ty&&t===ey?i="LinearDisplayP3ToLinearSRGB":e===ey&&t===ty&&(i="LinearSRGBToLinearDisplayP3"),n){case jo:case Dy:return[i,"LinearTransferOETF"];case Er:case XA:return[i,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",n),[i,"LinearTransferOETF"]}}function CI(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),r=n.getShaderInfoLog(e).trim();if(i&&r==="")return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+r+`

`+X9(n.getShaderSource(e),o)}else return r}function K9(n,e){const t=Y9(e);return`vec4 ${n}( vec4 value ) { return ${t[0]}( ${t[1]}( value ) ); }`}function Q9(n,e){let t;switch(e){case Uk:t="Linear";break;case Ok:t="Reinhard";break;case Hk:t="OptimizedCineon";break;case AC:t="ACESFilmic";break;case zk:t="AgX";break;case Gk:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function Z9(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.normalMapTangentSpace||n.clearcoatNormalMap||n.flatShading||n.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Lm).join(`
`)}function $9(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":""].filter(Lm).join(`
`)}function j9(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function eW(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const s=n.getActiveAttrib(e,r),o=s.name;let a=1;s.type===n.FLOAT_MAT2&&(a=2),s.type===n.FLOAT_MAT3&&(a=3),s.type===n.FLOAT_MAT4&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}function Lm(n){return n!==""}function bI(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function RI(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const tW=/^[ \t]*#include +<([\w\d./]+)>/gm;function j1(n){return n.replace(tW,iW)}const nW=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function iW(n,e){let t=Cn[e];if(t===void 0){const i=nW.get(e);if(i!==void 0)t=Cn[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return j1(t)}const rW=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function PI(n){return n.replace(rW,sW)}function sW(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function II(n){let e="precision "+n.precision+` float;
precision `+n.precision+" int;";return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function oW(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===zA?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===Wm?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===dl&&(e="SHADOWMAP_TYPE_VSM"),e}function aW(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case $l:case Id:e="ENVMAP_TYPE_CUBE";break;case Pg:e="ENVMAP_TYPE_CUBE_UV";break}return e}function lW(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case Id:e="ENVMAP_MODE_REFRACTION";break}return e}function uW(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case Iy:e="ENVMAP_BLENDING_MULTIPLY";break;case kk:e="ENVMAP_BLENDING_MIX";break;case Fk:e="ENVMAP_BLENDING_ADD";break}return e}function cW(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:i,maxMip:t}}function dW(n,e,t,i){const r=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=oW(t),u=aW(t),d=lW(t),h=uW(t),p=cW(t),v=t.isWebGL2?"":Z9(t),_=$9(t),w=j9(s),S=r.createProgram();let A,b,C=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(A=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,w].filter(Lm).join(`
`),A.length>0&&(A+=`
`),b=[v,"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,w].filter(Lm).join(`
`),b.length>0&&(b+=`
`)):(A=[II(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,w,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+d:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Lm).join(`
`),b=[v,II(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,w,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.envMap?"#define "+d:"",t.envMap?"#define "+h:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Jl?"#define TONE_MAPPING":"",t.toneMapping!==Jl?Cn.tonemapping_pars_fragment:"",t.toneMapping!==Jl?Q9("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Cn.colorspace_pars_fragment,K9("linearToOutputTexel",t.outputColorSpace),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Lm).join(`
`)),o=j1(o),o=bI(o,t),o=RI(o,t),a=j1(a),a=bI(a,t),a=RI(a,t),o=PI(o),a=PI(a),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(C=`#version 300 es
`,A=[_,"precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+A,b=["precision mediump sampler2DArray;","#define varying in",t.glslVersion===Q1?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===Q1?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+b);const P=C+A+o,k=C+b+a,L=MI(r,r.VERTEX_SHADER,P),N=MI(r,r.FRAGMENT_SHADER,k);r.attachShader(S,L),r.attachShader(S,N),t.index0AttributeName!==void 0?r.bindAttribLocation(S,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(S,0,"position"),r.linkProgram(S);function O(Z){if(n.debug.checkShaderErrors){const he=r.getProgramInfoLog(S).trim(),Q=r.getShaderInfoLog(L).trim(),ue=r.getShaderInfoLog(N).trim();let re=!0,ye=!0;if(r.getProgramParameter(S,r.LINK_STATUS)===!1)if(re=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(r,S,L,N);else{const $=CI(r,L,"vertex"),oe=CI(r,N,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(S,r.VALIDATE_STATUS)+`

Program Info Log: `+he+`
`+$+`
`+oe)}else he!==""?console.warn("THREE.WebGLProgram: Program Info Log:",he):(Q===""||ue==="")&&(ye=!1);ye&&(Z.diagnostics={runnable:re,programLog:he,vertexShader:{log:Q,prefix:A},fragmentShader:{log:ue,prefix:b}})}r.deleteShader(L),r.deleteShader(N),D=new Rw(r,S),U=eW(r,S)}let D;this.getUniforms=function(){return D===void 0&&O(this),D};let U;this.getAttributes=function(){return U===void 0&&O(this),U};let X=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return X===!1&&(X=r.getProgramParameter(S,q9)),X},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(S),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=J9++,this.cacheKey=e,this.usedTimes=1,this.program=S,this.vertexShader=L,this.fragmentShader=N,this}let fW=0;class hW{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return o.has(r)===!1&&(o.add(r),r.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&&(i=new pW(e),t.set(e,i)),i}}class pW{constructor(e){this.id=fW++,this.code=e,this.usedTimes=0}}function mW(n,e,t,i,r,s,o){const a=new xh,l=new hW,u=[],d=r.isWebGL2,h=r.logarithmicDepthBuffer,p=r.vertexTextures;let v=r.precision;const _={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function w(D){return D===0?"uv":`uv${D}`}function S(D,U,X,Z,he){const Q=Z.fog,ue=he.geometry,re=D.isMeshStandardMaterial?Z.environment:null,ye=(D.isMeshStandardMaterial?t:e).get(D.envMap||re),$=ye&&ye.mapping===Pg?ye.image.height:null,oe=_[D.type];D.precision!==null&&(v=r.getMaxPrecision(D.precision),v!==D.precision&&console.warn("THREE.WebGLProgram.getParameters:",D.precision,"not supported, using",v,"instead."));const W=ue.morphAttributes.position||ue.morphAttributes.normal||ue.morphAttributes.color,J=W!==void 0?W.length:0;let se=0;ue.morphAttributes.position!==void 0&&(se=1),ue.morphAttributes.normal!==void 0&&(se=2),ue.morphAttributes.color!==void 0&&(se=3);let me,Se,ke,Ie;if(oe){const Mt=fl[oe];me=Mt.vertexShader,Se=Mt.fragmentShader}else me=D.vertexShader,Se=D.fragmentShader,l.update(D),ke=l.getVertexShaderID(D),Ie=l.getFragmentShaderID(D);const ze=n.getRenderTarget(),je=he.isInstancedMesh===!0,at=he.isBatchedMesh===!0,ut=!!D.map,gt=!!D.matcap,fe=!!ye,Fe=!!D.aoMap,Be=!!D.lightMap,$e=!!D.bumpMap,Oe=!!D.normalMap,xe=!!D.displacementMap,ct=!!D.emissiveMap,j=!!D.metalnessMap,Y=!!D.roughnessMap,we=D.anisotropy>0,Qe=D.clearcoat>0,Ye=D.iridescence>0,qe=D.sheen>0,yt=D.transmission>0,ft=we&&!!D.anisotropyMap,st=Qe&&!!D.clearcoatMap,Rt=Qe&&!!D.clearcoatNormalMap,Ot=Qe&&!!D.clearcoatRoughnessMap,Xe=Ye&&!!D.iridescenceMap,fn=Ye&&!!D.iridescenceThicknessMap,Ht=qe&&!!D.sheenColorMap,Kt=qe&&!!D.sheenRoughnessMap,xt=!!D.specularMap,Tt=!!D.specularColorMap,ge=!!D.specularIntensityMap,He=yt&&!!D.transmissionMap,rt=yt&&!!D.thicknessMap,Ze=!!D.gradientMap,Me=!!D.alphaMap,pe=D.alphaTest>0,tt=!!D.alphaHash,dt=!!D.extensions,zt=!!ue.attributes.uv1,Pt=!!ue.attributes.uv2,rn=!!ue.attributes.uv3;let gn=Jl;return D.toneMapped&&(ze===null||ze.isXRRenderTarget===!0)&&(gn=n.toneMapping),{isWebGL2:d,shaderID:oe,shaderType:D.type,shaderName:D.name,vertexShader:me,fragmentShader:Se,defines:D.defines,customVertexShaderID:ke,customFragmentShaderID:Ie,isRawShaderMaterial:D.isRawShaderMaterial===!0,glslVersion:D.glslVersion,precision:v,batching:at,instancing:je,instancingColor:je&&he.instanceColor!==null,supportsVertexTextures:p,outputColorSpace:ze===null?n.outputColorSpace:ze.isXRRenderTarget===!0?ze.texture.colorSpace:jo,map:ut,matcap:gt,envMap:fe,envMapMode:fe&&ye.mapping,envMapCubeUVHeight:$,aoMap:Fe,lightMap:Be,bumpMap:$e,normalMap:Oe,displacementMap:p&&xe,emissiveMap:ct,normalMapObjectSpace:Oe&&D.normalMapType===tF,normalMapTangentSpace:Oe&&D.normalMapType===Gd,metalnessMap:j,roughnessMap:Y,anisotropy:we,anisotropyMap:ft,clearcoat:Qe,clearcoatMap:st,clearcoatNormalMap:Rt,clearcoatRoughnessMap:Ot,iridescence:Ye,iridescenceMap:Xe,iridescenceThicknessMap:fn,sheen:qe,sheenColorMap:Ht,sheenRoughnessMap:Kt,specularMap:xt,specularColorMap:Tt,specularIntensityMap:ge,transmission:yt,transmissionMap:He,thicknessMap:rt,gradientMap:Ze,opaque:D.transparent===!1&&D.blending===yh,alphaMap:Me,alphaTest:pe,alphaHash:tt,combine:D.combine,mapUv:ut&&w(D.map.channel),aoMapUv:Fe&&w(D.aoMap.channel),lightMapUv:Be&&w(D.lightMap.channel),bumpMapUv:$e&&w(D.bumpMap.channel),normalMapUv:Oe&&w(D.normalMap.channel),displacementMapUv:xe&&w(D.displacementMap.channel),emissiveMapUv:ct&&w(D.emissiveMap.channel),metalnessMapUv:j&&w(D.metalnessMap.channel),roughnessMapUv:Y&&w(D.roughnessMap.channel),anisotropyMapUv:ft&&w(D.anisotropyMap.channel),clearcoatMapUv:st&&w(D.clearcoatMap.channel),clearcoatNormalMapUv:Rt&&w(D.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Ot&&w(D.clearcoatRoughnessMap.channel),iridescenceMapUv:Xe&&w(D.iridescenceMap.channel),iridescenceThicknessMapUv:fn&&w(D.iridescenceThicknessMap.channel),sheenColorMapUv:Ht&&w(D.sheenColorMap.channel),sheenRoughnessMapUv:Kt&&w(D.sheenRoughnessMap.channel),specularMapUv:xt&&w(D.specularMap.channel),specularColorMapUv:Tt&&w(D.specularColorMap.channel),specularIntensityMapUv:ge&&w(D.specularIntensityMap.channel),transmissionMapUv:He&&w(D.transmissionMap.channel),thicknessMapUv:rt&&w(D.thicknessMap.channel),alphaMapUv:Me&&w(D.alphaMap.channel),vertexTangents:!!ue.attributes.tangent&&(Oe||we),vertexColors:D.vertexColors,vertexAlphas:D.vertexColors===!0&&!!ue.attributes.color&&ue.attributes.color.itemSize===4,vertexUv1s:zt,vertexUv2s:Pt,vertexUv3s:rn,pointsUvs:he.isPoints===!0&&!!ue.attributes.uv&&(ut||Me),fog:!!Q,useFog:D.fog===!0,fogExp2:Q&&Q.isFogExp2,flatShading:D.flatShading===!0,sizeAttenuation:D.sizeAttenuation===!0,logarithmicDepthBuffer:h,skinning:he.isSkinnedMesh===!0,morphTargets:ue.morphAttributes.position!==void 0,morphNormals:ue.morphAttributes.normal!==void 0,morphColors:ue.morphAttributes.color!==void 0,morphTargetsCount:J,morphTextureStride:se,numDirLights:U.directional.length,numPointLights:U.point.length,numSpotLights:U.spot.length,numSpotLightMaps:U.spotLightMap.length,numRectAreaLights:U.rectArea.length,numHemiLights:U.hemi.length,numDirLightShadows:U.directionalShadowMap.length,numPointLightShadows:U.pointShadowMap.length,numSpotLightShadows:U.spotShadowMap.length,numSpotLightShadowsWithMaps:U.numSpotLightShadowsWithMaps,numLightProbes:U.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:D.dithering,shadowMapEnabled:n.shadowMap.enabled&&X.length>0,shadowMapType:n.shadowMap.type,toneMapping:gn,useLegacyLights:n._useLegacyLights,decodeVideoTexture:ut&&D.map.isVideoTexture===!0&&fi.getTransfer(D.map.colorSpace)===Ti,premultipliedAlpha:D.premultipliedAlpha,doubleSided:D.side===Ma,flipSided:D.side===to,useDepthPacking:D.depthPacking>=0,depthPacking:D.depthPacking||0,index0AttributeName:D.index0AttributeName,extensionDerivatives:dt&&D.extensions.derivatives===!0,extensionFragDepth:dt&&D.extensions.fragDepth===!0,extensionDrawBuffers:dt&&D.extensions.drawBuffers===!0,extensionShaderTextureLOD:dt&&D.extensions.shaderTextureLOD===!0,extensionClipCullDistance:dt&&D.extensions.clipCullDistance&&i.has("WEBGL_clip_cull_distance"),rendererExtensionFragDepth:d||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:d||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:d||i.has("EXT_shader_texture_lod"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:D.customProgramCacheKey()}}function A(D){const U=[];if(D.shaderID?U.push(D.shaderID):(U.push(D.customVertexShaderID),U.push(D.customFragmentShaderID)),D.defines!==void 0)for(const X in D.defines)U.push(X),U.push(D.defines[X]);return D.isRawShaderMaterial===!1&&(b(U,D),C(U,D),U.push(n.outputColorSpace)),U.push(D.customProgramCacheKey),U.join()}function b(D,U){D.push(U.precision),D.push(U.outputColorSpace),D.push(U.envMapMode),D.push(U.envMapCubeUVHeight),D.push(U.mapUv),D.push(U.alphaMapUv),D.push(U.lightMapUv),D.push(U.aoMapUv),D.push(U.bumpMapUv),D.push(U.normalMapUv),D.push(U.displacementMapUv),D.push(U.emissiveMapUv),D.push(U.metalnessMapUv),D.push(U.roughnessMapUv),D.push(U.anisotropyMapUv),D.push(U.clearcoatMapUv),D.push(U.clearcoatNormalMapUv),D.push(U.clearcoatRoughnessMapUv),D.push(U.iridescenceMapUv),D.push(U.iridescenceThicknessMapUv),D.push(U.sheenColorMapUv),D.push(U.sheenRoughnessMapUv),D.push(U.specularMapUv),D.push(U.specularColorMapUv),D.push(U.specularIntensityMapUv),D.push(U.transmissionMapUv),D.push(U.thicknessMapUv),D.push(U.combine),D.push(U.fogExp2),D.push(U.sizeAttenuation),D.push(U.morphTargetsCount),D.push(U.morphAttributeCount),D.push(U.numDirLights),D.push(U.numPointLights),D.push(U.numSpotLights),D.push(U.numSpotLightMaps),D.push(U.numHemiLights),D.push(U.numRectAreaLights),D.push(U.numDirLightShadows),D.push(U.numPointLightShadows),D.push(U.numSpotLightShadows),D.push(U.numSpotLightShadowsWithMaps),D.push(U.numLightProbes),D.push(U.shadowMapType),D.push(U.toneMapping),D.push(U.numClippingPlanes),D.push(U.numClipIntersection),D.push(U.depthPacking)}function C(D,U){a.disableAll(),U.isWebGL2&&a.enable(0),U.supportsVertexTextures&&a.enable(1),U.instancing&&a.enable(2),U.instancingColor&&a.enable(3),U.matcap&&a.enable(4),U.envMap&&a.enable(5),U.normalMapObjectSpace&&a.enable(6),U.normalMapTangentSpace&&a.enable(7),U.clearcoat&&a.enable(8),U.iridescence&&a.enable(9),U.alphaTest&&a.enable(10),U.vertexColors&&a.enable(11),U.vertexAlphas&&a.enable(12),U.vertexUv1s&&a.enable(13),U.vertexUv2s&&a.enable(14),U.vertexUv3s&&a.enable(15),U.vertexTangents&&a.enable(16),U.anisotropy&&a.enable(17),U.alphaHash&&a.enable(18),U.batching&&a.enable(19),D.push(a.mask),a.disableAll(),U.fog&&a.enable(0),U.useFog&&a.enable(1),U.flatShading&&a.enable(2),U.logarithmicDepthBuffer&&a.enable(3),U.skinning&&a.enable(4),U.morphTargets&&a.enable(5),U.morphNormals&&a.enable(6),U.morphColors&&a.enable(7),U.premultipliedAlpha&&a.enable(8),U.shadowMapEnabled&&a.enable(9),U.useLegacyLights&&a.enable(10),U.doubleSided&&a.enable(11),U.flipSided&&a.enable(12),U.useDepthPacking&&a.enable(13),U.dithering&&a.enable(14),U.transmission&&a.enable(15),U.sheen&&a.enable(16),U.opaque&&a.enable(17),U.pointsUvs&&a.enable(18),U.decodeVideoTexture&&a.enable(19),D.push(a.mask)}function P(D){const U=_[D.type];let X;if(U){const Z=fl[U];X=pF.clone(Z.uniforms)}else X=D.uniforms;return X}function k(D,U){let X;for(let Z=0,he=u.length;Z<he;Z++){const Q=u[Z];if(Q.cacheKey===U){X=Q,++X.usedTimes;break}}return X===void 0&&(X=new dW(n,U,D,s),u.push(X)),X}function L(D){if(--D.usedTimes===0){const U=u.indexOf(D);u[U]=u[u.length-1],u.pop(),D.destroy()}}function N(D){l.remove(D)}function O(){l.dispose()}return{getParameters:S,getProgramCacheKey:A,getUniforms:P,acquireProgram:k,releaseProgram:L,releaseShaderCache:N,programs:u,dispose:O}}function gW(){let n=new WeakMap;function e(s){let o=n.get(s);return o===void 0&&(o={},n.set(s,o)),o}function t(s){n.delete(s)}function i(s,o,a){n.get(s)[o]=a}function r(){n=new WeakMap}return{get:e,remove:t,update:i,dispose:r}}function vW(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function DI(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function LI(){const n=[];let e=0;const t=[],i=[],r=[];function s(){e=0,t.length=0,i.length=0,r.length=0}function o(h,p,v,_,w,S){let A=n[e];return A===void 0?(A={id:h.id,object:h,geometry:p,material:v,groupOrder:_,renderOrder:h.renderOrder,z:w,group:S},n[e]=A):(A.id=h.id,A.object=h,A.geometry=p,A.material=v,A.groupOrder=_,A.renderOrder=h.renderOrder,A.z=w,A.group=S),e++,A}function a(h,p,v,_,w,S){const A=o(h,p,v,_,w,S);v.transmission>0?i.push(A):v.transparent===!0?r.push(A):t.push(A)}function l(h,p,v,_,w,S){const A=o(h,p,v,_,w,S);v.transmission>0?i.unshift(A):v.transparent===!0?r.unshift(A):t.unshift(A)}function u(h,p){t.length>1&&t.sort(h||vW),i.length>1&&i.sort(p||DI),r.length>1&&r.sort(p||DI)}function d(){for(let h=e,p=n.length;h<p;h++){const v=n[h];if(v.id===null)break;v.id=null,v.object=null,v.geometry=null,v.material=null,v.group=null}}return{opaque:t,transmissive:i,transparent:r,init:s,push:a,unshift:l,finish:d,sort:u}}function yW(){let n=new WeakMap;function e(i,r){const s=n.get(i);let o;return s===void 0?(o=new LI,n.set(i,[o])):r>=s.length?(o=new LI,s.push(o)):o=s[r],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function _W(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new te,color:new St};break;case"SpotLight":t={position:new te,direction:new te,color:new St,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new te,color:new St,distance:0,decay:0};break;case"HemisphereLight":t={direction:new te,skyColor:new St,groundColor:new St};break;case"RectAreaLight":t={color:new St,position:new te,halfWidth:new te,halfHeight:new te};break}return n[e.id]=t,t}}}function xW(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Je};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Je};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Je,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let wW=0;function AW(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function SW(n,e){const t=new _W,i=xW(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let d=0;d<9;d++)r.probe.push(new te);const s=new te,o=new dn,a=new dn;function l(d,h){let p=0,v=0,_=0;for(let Z=0;Z<9;Z++)r.probe[Z].set(0,0,0);let w=0,S=0,A=0,b=0,C=0,P=0,k=0,L=0,N=0,O=0,D=0;d.sort(AW);const U=h===!0?Math.PI:1;for(let Z=0,he=d.length;Z<he;Z++){const Q=d[Z],ue=Q.color,re=Q.intensity,ye=Q.distance,$=Q.shadow&&Q.shadow.map?Q.shadow.map.texture:null;if(Q.isAmbientLight)p+=ue.r*re*U,v+=ue.g*re*U,_+=ue.b*re*U;else if(Q.isLightProbe){for(let oe=0;oe<9;oe++)r.probe[oe].addScaledVector(Q.sh.coefficients[oe],re);D++}else if(Q.isDirectionalLight){const oe=t.get(Q);if(oe.color.copy(Q.color).multiplyScalar(Q.intensity*U),Q.castShadow){const W=Q.shadow,J=i.get(Q);J.shadowBias=W.bias,J.shadowNormalBias=W.normalBias,J.shadowRadius=W.radius,J.shadowMapSize=W.mapSize,r.directionalShadow[w]=J,r.directionalShadowMap[w]=$,r.directionalShadowMatrix[w]=Q.shadow.matrix,P++}r.directional[w]=oe,w++}else if(Q.isSpotLight){const oe=t.get(Q);oe.position.setFromMatrixPosition(Q.matrixWorld),oe.color.copy(ue).multiplyScalar(re*U),oe.distance=ye,oe.coneCos=Math.cos(Q.angle),oe.penumbraCos=Math.cos(Q.angle*(1-Q.penumbra)),oe.decay=Q.decay,r.spot[A]=oe;const W=Q.shadow;if(Q.map&&(r.spotLightMap[N]=Q.map,N++,W.updateMatrices(Q),Q.castShadow&&O++),r.spotLightMatrix[A]=W.matrix,Q.castShadow){const J=i.get(Q);J.shadowBias=W.bias,J.shadowNormalBias=W.normalBias,J.shadowRadius=W.radius,J.shadowMapSize=W.mapSize,r.spotShadow[A]=J,r.spotShadowMap[A]=$,L++}A++}else if(Q.isRectAreaLight){const oe=t.get(Q);oe.color.copy(ue).multiplyScalar(re),oe.halfWidth.set(Q.width*.5,0,0),oe.halfHeight.set(0,Q.height*.5,0),r.rectArea[b]=oe,b++}else if(Q.isPointLight){const oe=t.get(Q);if(oe.color.copy(Q.color).multiplyScalar(Q.intensity*U),oe.distance=Q.distance,oe.decay=Q.decay,Q.castShadow){const W=Q.shadow,J=i.get(Q);J.shadowBias=W.bias,J.shadowNormalBias=W.normalBias,J.shadowRadius=W.radius,J.shadowMapSize=W.mapSize,J.shadowCameraNear=W.camera.near,J.shadowCameraFar=W.camera.far,r.pointShadow[S]=J,r.pointShadowMap[S]=$,r.pointShadowMatrix[S]=Q.shadow.matrix,k++}r.point[S]=oe,S++}else if(Q.isHemisphereLight){const oe=t.get(Q);oe.skyColor.copy(Q.color).multiplyScalar(re*U),oe.groundColor.copy(Q.groundColor).multiplyScalar(re*U),r.hemi[C]=oe,C++}}b>0&&(e.isWebGL2?n.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=Et.LTC_FLOAT_1,r.rectAreaLTC2=Et.LTC_FLOAT_2):(r.rectAreaLTC1=Et.LTC_HALF_1,r.rectAreaLTC2=Et.LTC_HALF_2):n.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=Et.LTC_FLOAT_1,r.rectAreaLTC2=Et.LTC_FLOAT_2):n.has("OES_texture_half_float_linear")===!0?(r.rectAreaLTC1=Et.LTC_HALF_1,r.rectAreaLTC2=Et.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=p,r.ambient[1]=v,r.ambient[2]=_;const X=r.hash;(X.directionalLength!==w||X.pointLength!==S||X.spotLength!==A||X.rectAreaLength!==b||X.hemiLength!==C||X.numDirectionalShadows!==P||X.numPointShadows!==k||X.numSpotShadows!==L||X.numSpotMaps!==N||X.numLightProbes!==D)&&(r.directional.length=w,r.spot.length=A,r.rectArea.length=b,r.point.length=S,r.hemi.length=C,r.directionalShadow.length=P,r.directionalShadowMap.length=P,r.pointShadow.length=k,r.pointShadowMap.length=k,r.spotShadow.length=L,r.spotShadowMap.length=L,r.directionalShadowMatrix.length=P,r.pointShadowMatrix.length=k,r.spotLightMatrix.length=L+N-O,r.spotLightMap.length=N,r.numSpotLightShadowsWithMaps=O,r.numLightProbes=D,X.directionalLength=w,X.pointLength=S,X.spotLength=A,X.rectAreaLength=b,X.hemiLength=C,X.numDirectionalShadows=P,X.numPointShadows=k,X.numSpotShadows=L,X.numSpotMaps=N,X.numLightProbes=D,r.version=wW++)}function u(d,h){let p=0,v=0,_=0,w=0,S=0;const A=h.matrixWorldInverse;for(let b=0,C=d.length;b<C;b++){const P=d[b];if(P.isDirectionalLight){const k=r.directional[p];k.direction.setFromMatrixPosition(P.matrixWorld),s.setFromMatrixPosition(P.target.matrixWorld),k.direction.sub(s),k.direction.transformDirection(A),p++}else if(P.isSpotLight){const k=r.spot[_];k.position.setFromMatrixPosition(P.matrixWorld),k.position.applyMatrix4(A),k.direction.setFromMatrixPosition(P.matrixWorld),s.setFromMatrixPosition(P.target.matrixWorld),k.direction.sub(s),k.direction.transformDirection(A),_++}else if(P.isRectAreaLight){const k=r.rectArea[w];k.position.setFromMatrixPosition(P.matrixWorld),k.position.applyMatrix4(A),a.identity(),o.copy(P.matrixWorld),o.premultiply(A),a.extractRotation(o),k.halfWidth.set(P.width*.5,0,0),k.halfHeight.set(0,P.height*.5,0),k.halfWidth.applyMatrix4(a),k.halfHeight.applyMatrix4(a),w++}else if(P.isPointLight){const k=r.point[v];k.position.setFromMatrixPosition(P.matrixWorld),k.position.applyMatrix4(A),v++}else if(P.isHemisphereLight){const k=r.hemi[S];k.direction.setFromMatrixPosition(P.matrixWorld),k.direction.transformDirection(A),S++}}}return{setup:l,setupView:u,state:r}}function BI(n,e){const t=new SW(n,e),i=[],r=[];function s(){i.length=0,r.length=0}function o(h){i.push(h)}function a(h){r.push(h)}function l(h){t.setup(i,h)}function u(h){t.setupView(i,h)}return{init:s,state:{lightsArray:i,shadowsArray:r,lights:t},setupLights:l,setupLightsView:u,pushLight:o,pushShadow:a}}function EW(n,e){let t=new WeakMap;function i(s,o=0){const a=t.get(s);let l;return a===void 0?(l=new BI(n,e),t.set(s,[l])):o>=a.length?(l=new BI(n,e),a.push(l)):l=a[o],l}function r(){t=new WeakMap}return{get:i,dispose:r}}class QA extends Fr{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=jk,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class WC extends Fr{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const TW=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,MW=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function CW(n,e,t){let i=new ky;const r=new Je,s=new Je,o=new li,a=new QA({depthPacking:eF}),l=new WC,u={},d=t.maxTextureSize,h={[Zl]:to,[to]:Zl,[Ma]:Ma},p=new Ds({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Je},radius:{value:4}},vertexShader:TW,fragmentShader:MW}),v=p.clone();v.defines.HORIZONTAL_PASS=1;const _=new Tn;_.setAttribute("position",new Xn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const w=new bi(_,p),S=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=zA;let A=this.type;this.render=function(L,N,O){if(S.enabled===!1||S.autoUpdate===!1&&S.needsUpdate===!1||L.length===0)return;const D=n.getRenderTarget(),U=n.getActiveCubeFace(),X=n.getActiveMipmapLevel(),Z=n.state;Z.setBlending(ql),Z.buffers.color.setClear(1,1,1,1),Z.buffers.depth.setTest(!0),Z.setScissorTest(!1);const he=A!==dl&&this.type===dl,Q=A===dl&&this.type!==dl;for(let ue=0,re=L.length;ue<re;ue++){const ye=L[ue],$=ye.shadow;if($===void 0){console.warn("THREE.WebGLShadowMap:",ye,"has no shadow.");continue}if($.autoUpdate===!1&&$.needsUpdate===!1)continue;r.copy($.mapSize);const oe=$.getFrameExtents();if(r.multiply(oe),s.copy($.mapSize),(r.x>d||r.y>d)&&(r.x>d&&(s.x=Math.floor(d/oe.x),r.x=s.x*oe.x,$.mapSize.x=s.x),r.y>d&&(s.y=Math.floor(d/oe.y),r.y=s.y*oe.y,$.mapSize.y=s.y)),$.map===null||he===!0||Q===!0){const J=this.type!==dl?{minFilter:$i,magFilter:$i}:{};$.map!==null&&$.map.dispose(),$.map=new no(r.x,r.y,J),$.map.texture.name=ye.name+".shadowMap",$.camera.updateProjectionMatrix()}n.setRenderTarget($.map),n.clear();const W=$.getViewportCount();for(let J=0;J<W;J++){const se=$.getViewport(J);o.set(s.x*se.x,s.y*se.y,s.x*se.z,s.y*se.w),Z.viewport(o),$.updateMatrices(ye,J),i=$.getFrustum(),P(N,O,$.camera,ye,this.type)}$.isPointLightShadow!==!0&&this.type===dl&&b($,O),$.needsUpdate=!1}A=this.type,S.needsUpdate=!1,n.setRenderTarget(D,U,X)};function b(L,N){const O=e.update(w);p.defines.VSM_SAMPLES!==L.blurSamples&&(p.defines.VSM_SAMPLES=L.blurSamples,v.defines.VSM_SAMPLES=L.blurSamples,p.needsUpdate=!0,v.needsUpdate=!0),L.mapPass===null&&(L.mapPass=new no(r.x,r.y)),p.uniforms.shadow_pass.value=L.map.texture,p.uniforms.resolution.value=L.mapSize,p.uniforms.radius.value=L.radius,n.setRenderTarget(L.mapPass),n.clear(),n.renderBufferDirect(N,null,O,p,w,null),v.uniforms.shadow_pass.value=L.mapPass.texture,v.uniforms.resolution.value=L.mapSize,v.uniforms.radius.value=L.radius,n.setRenderTarget(L.map),n.clear(),n.renderBufferDirect(N,null,O,v,w,null)}function C(L,N,O,D){let U=null;const X=O.isPointLight===!0?L.customDistanceMaterial:L.customDepthMaterial;if(X!==void 0)U=X;else if(U=O.isPointLight===!0?l:a,n.localClippingEnabled&&N.clipShadows===!0&&Array.isArray(N.clippingPlanes)&&N.clippingPlanes.length!==0||N.displacementMap&&N.displacementScale!==0||N.alphaMap&&N.alphaTest>0||N.map&&N.alphaTest>0){const Z=U.uuid,he=N.uuid;let Q=u[Z];Q===void 0&&(Q={},u[Z]=Q);let ue=Q[he];ue===void 0&&(ue=U.clone(),Q[he]=ue,N.addEventListener("dispose",k)),U=ue}if(U.visible=N.visible,U.wireframe=N.wireframe,D===dl?U.side=N.shadowSide!==null?N.shadowSide:N.side:U.side=N.shadowSide!==null?N.shadowSide:h[N.side],U.alphaMap=N.alphaMap,U.alphaTest=N.alphaTest,U.map=N.map,U.clipShadows=N.clipShadows,U.clippingPlanes=N.clippingPlanes,U.clipIntersection=N.clipIntersection,U.displacementMap=N.displacementMap,U.displacementScale=N.displacementScale,U.displacementBias=N.displacementBias,U.wireframeLinewidth=N.wireframeLinewidth,U.linewidth=N.linewidth,O.isPointLight===!0&&U.isMeshDistanceMaterial===!0){const Z=n.properties.get(U);Z.light=O}return U}function P(L,N,O,D,U){if(L.visible===!1)return;if(L.layers.test(N.layers)&&(L.isMesh||L.isLine||L.isPoints)&&(L.castShadow||L.receiveShadow&&U===dl)&&(!L.frustumCulled||i.intersectsObject(L))){L.modelViewMatrix.multiplyMatrices(O.matrixWorldInverse,L.matrixWorld);const he=e.update(L),Q=L.material;if(Array.isArray(Q)){const ue=he.groups;for(let re=0,ye=ue.length;re<ye;re++){const $=ue[re],oe=Q[$.materialIndex];if(oe&&oe.visible){const W=C(L,oe,D,U);L.onBeforeShadow(n,L,N,O,he,W,$),n.renderBufferDirect(O,null,he,W,L,$),L.onAfterShadow(n,L,N,O,he,W,$)}}}else if(Q.visible){const ue=C(L,Q,D,U);L.onBeforeShadow(n,L,N,O,he,ue,null),n.renderBufferDirect(O,null,he,ue,L,null),L.onAfterShadow(n,L,N,O,he,ue,null)}}const Z=L.children;for(let he=0,Q=Z.length;he<Q;he++)P(Z[he],N,O,D,U)}function k(L){L.target.removeEventListener("dispose",k);for(const O in u){const D=u[O],U=L.target.uuid;U in D&&(D[U].dispose(),delete D[U])}}}function bW(n,e,t){const i=t.isWebGL2;function r(){let pe=!1;const tt=new li;let dt=null;const zt=new li(0,0,0,0);return{setMask:function(Pt){dt!==Pt&&!pe&&(n.colorMask(Pt,Pt,Pt,Pt),dt=Pt)},setLocked:function(Pt){pe=Pt},setClear:function(Pt,rn,gn,Ct,Mt){Mt===!0&&(Pt*=Ct,rn*=Ct,gn*=Ct),tt.set(Pt,rn,gn,Ct),zt.equals(tt)===!1&&(n.clearColor(Pt,rn,gn,Ct),zt.copy(tt))},reset:function(){pe=!1,dt=null,zt.set(-1,0,0,0)}}}function s(){let pe=!1,tt=null,dt=null,zt=null;return{setTest:function(Pt){Pt?at(n.DEPTH_TEST):ut(n.DEPTH_TEST)},setMask:function(Pt){tt!==Pt&&!pe&&(n.depthMask(Pt),tt=Pt)},setFunc:function(Pt){if(dt!==Pt){switch(Pt){case Rk:n.depthFunc(n.NEVER);break;case Pk:n.depthFunc(n.ALWAYS);break;case Ik:n.depthFunc(n.LESS);break;case Kv:n.depthFunc(n.LEQUAL);break;case Dk:n.depthFunc(n.EQUAL);break;case Lk:n.depthFunc(n.GEQUAL);break;case Bk:n.depthFunc(n.GREATER);break;case Nk:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}dt=Pt}},setLocked:function(Pt){pe=Pt},setClear:function(Pt){zt!==Pt&&(n.clearDepth(Pt),zt=Pt)},reset:function(){pe=!1,tt=null,dt=null,zt=null}}}function o(){let pe=!1,tt=null,dt=null,zt=null,Pt=null,rn=null,gn=null,Ct=null,Mt=null;return{setTest:function(Dt){pe||(Dt?at(n.STENCIL_TEST):ut(n.STENCIL_TEST))},setMask:function(Dt){tt!==Dt&&!pe&&(n.stencilMask(Dt),tt=Dt)},setFunc:function(Dt,ot,qt){(dt!==Dt||zt!==ot||Pt!==qt)&&(n.stencilFunc(Dt,ot,qt),dt=Dt,zt=ot,Pt=qt)},setOp:function(Dt,ot,qt){(rn!==Dt||gn!==ot||Ct!==qt)&&(n.stencilOp(Dt,ot,qt),rn=Dt,gn=ot,Ct=qt)},setLocked:function(Dt){pe=Dt},setClear:function(Dt){Mt!==Dt&&(n.clearStencil(Dt),Mt=Dt)},reset:function(){pe=!1,tt=null,dt=null,zt=null,Pt=null,rn=null,gn=null,Ct=null,Mt=null}}}const a=new r,l=new s,u=new o,d=new WeakMap,h=new WeakMap;let p={},v={},_=new WeakMap,w=[],S=null,A=!1,b=null,C=null,P=null,k=null,L=null,N=null,O=null,D=new St(0,0,0),U=0,X=!1,Z=null,he=null,Q=null,ue=null,re=null;const ye=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let $=!1,oe=0;const W=n.getParameter(n.VERSION);W.indexOf("WebGL")!==-1?(oe=parseFloat(/^WebGL (\d)/.exec(W)[1]),$=oe>=1):W.indexOf("OpenGL ES")!==-1&&(oe=parseFloat(/^OpenGL ES (\d)/.exec(W)[1]),$=oe>=2);let J=null,se={};const me=n.getParameter(n.SCISSOR_BOX),Se=n.getParameter(n.VIEWPORT),ke=new li().fromArray(me),Ie=new li().fromArray(Se);function ze(pe,tt,dt,zt){const Pt=new Uint8Array(4),rn=n.createTexture();n.bindTexture(pe,rn),n.texParameteri(pe,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(pe,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let gn=0;gn<dt;gn++)i&&(pe===n.TEXTURE_3D||pe===n.TEXTURE_2D_ARRAY)?n.texImage3D(tt,0,n.RGBA,1,1,zt,0,n.RGBA,n.UNSIGNED_BYTE,Pt):n.texImage2D(tt+gn,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,Pt);return rn}const je={};je[n.TEXTURE_2D]=ze(n.TEXTURE_2D,n.TEXTURE_2D,1),je[n.TEXTURE_CUBE_MAP]=ze(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),i&&(je[n.TEXTURE_2D_ARRAY]=ze(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),je[n.TEXTURE_3D]=ze(n.TEXTURE_3D,n.TEXTURE_3D,1,1)),a.setClear(0,0,0,1),l.setClear(1),u.setClear(0),at(n.DEPTH_TEST),l.setFunc(Kv),ct(!1),j(v1),at(n.CULL_FACE),Oe(ql);function at(pe){p[pe]!==!0&&(n.enable(pe),p[pe]=!0)}function ut(pe){p[pe]!==!1&&(n.disable(pe),p[pe]=!1)}function gt(pe,tt){return v[pe]!==tt?(n.bindFramebuffer(pe,tt),v[pe]=tt,i&&(pe===n.DRAW_FRAMEBUFFER&&(v[n.FRAMEBUFFER]=tt),pe===n.FRAMEBUFFER&&(v[n.DRAW_FRAMEBUFFER]=tt)),!0):!1}function fe(pe,tt){let dt=w,zt=!1;if(pe)if(dt=_.get(tt),dt===void 0&&(dt=[],_.set(tt,dt)),pe.isWebGLMultipleRenderTargets){const Pt=pe.texture;if(dt.length!==Pt.length||dt[0]!==n.COLOR_ATTACHMENT0){for(let rn=0,gn=Pt.length;rn<gn;rn++)dt[rn]=n.COLOR_ATTACHMENT0+rn;dt.length=Pt.length,zt=!0}}else dt[0]!==n.COLOR_ATTACHMENT0&&(dt[0]=n.COLOR_ATTACHMENT0,zt=!0);else dt[0]!==n.BACK&&(dt[0]=n.BACK,zt=!0);zt&&(t.isWebGL2?n.drawBuffers(dt):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(dt))}function Fe(pe){return S!==pe?(n.useProgram(pe),S=pe,!0):!1}const Be={[od]:n.FUNC_ADD,[pk]:n.FUNC_SUBTRACT,[mk]:n.FUNC_REVERSE_SUBTRACT};if(i)Be[x1]=n.MIN,Be[w1]=n.MAX;else{const pe=e.get("EXT_blend_minmax");pe!==null&&(Be[x1]=pe.MIN_EXT,Be[w1]=pe.MAX_EXT)}const $e={[gk]:n.ZERO,[vk]:n.ONE,[yk]:n.SRC_COLOR,[Yw]:n.SRC_ALPHA,[Ek]:n.SRC_ALPHA_SATURATE,[Ak]:n.DST_COLOR,[xk]:n.DST_ALPHA,[_k]:n.ONE_MINUS_SRC_COLOR,[Kw]:n.ONE_MINUS_SRC_ALPHA,[Sk]:n.ONE_MINUS_DST_COLOR,[wk]:n.ONE_MINUS_DST_ALPHA,[Tk]:n.CONSTANT_COLOR,[Mk]:n.ONE_MINUS_CONSTANT_COLOR,[Ck]:n.CONSTANT_ALPHA,[bk]:n.ONE_MINUS_CONSTANT_ALPHA};function Oe(pe,tt,dt,zt,Pt,rn,gn,Ct,Mt,Dt){if(pe===ql){A===!0&&(ut(n.BLEND),A=!1);return}if(A===!1&&(at(n.BLEND),A=!0),pe!==hk){if(pe!==b||Dt!==X){if((C!==od||L!==od)&&(n.blendEquation(n.FUNC_ADD),C=od,L=od),Dt)switch(pe){case yh:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case Yv:n.blendFunc(n.ONE,n.ONE);break;case y1:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case _1:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",pe);break}else switch(pe){case yh:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case Yv:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case y1:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case _1:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",pe);break}P=null,k=null,N=null,O=null,D.set(0,0,0),U=0,b=pe,X=Dt}return}Pt=Pt||tt,rn=rn||dt,gn=gn||zt,(tt!==C||Pt!==L)&&(n.blendEquationSeparate(Be[tt],Be[Pt]),C=tt,L=Pt),(dt!==P||zt!==k||rn!==N||gn!==O)&&(n.blendFuncSeparate($e[dt],$e[zt],$e[rn],$e[gn]),P=dt,k=zt,N=rn,O=gn),(Ct.equals(D)===!1||Mt!==U)&&(n.blendColor(Ct.r,Ct.g,Ct.b,Mt),D.copy(Ct),U=Mt),b=pe,X=!1}function xe(pe,tt){pe.side===Ma?ut(n.CULL_FACE):at(n.CULL_FACE);let dt=pe.side===to;tt&&(dt=!dt),ct(dt),pe.blending===yh&&pe.transparent===!1?Oe(ql):Oe(pe.blending,pe.blendEquation,pe.blendSrc,pe.blendDst,pe.blendEquationAlpha,pe.blendSrcAlpha,pe.blendDstAlpha,pe.blendColor,pe.blendAlpha,pe.premultipliedAlpha),l.setFunc(pe.depthFunc),l.setTest(pe.depthTest),l.setMask(pe.depthWrite),a.setMask(pe.colorWrite);const zt=pe.stencilWrite;u.setTest(zt),zt&&(u.setMask(pe.stencilWriteMask),u.setFunc(pe.stencilFunc,pe.stencilRef,pe.stencilFuncMask),u.setOp(pe.stencilFail,pe.stencilZFail,pe.stencilZPass)),we(pe.polygonOffset,pe.polygonOffsetFactor,pe.polygonOffsetUnits),pe.alphaToCoverage===!0?at(n.SAMPLE_ALPHA_TO_COVERAGE):ut(n.SAMPLE_ALPHA_TO_COVERAGE)}function ct(pe){Z!==pe&&(pe?n.frontFace(n.CW):n.frontFace(n.CCW),Z=pe)}function j(pe){pe!==ck?(at(n.CULL_FACE),pe!==he&&(pe===v1?n.cullFace(n.BACK):pe===dk?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):ut(n.CULL_FACE),he=pe}function Y(pe){pe!==Q&&($&&n.lineWidth(pe),Q=pe)}function we(pe,tt,dt){pe?(at(n.POLYGON_OFFSET_FILL),(ue!==tt||re!==dt)&&(n.polygonOffset(tt,dt),ue=tt,re=dt)):ut(n.POLYGON_OFFSET_FILL)}function Qe(pe){pe?at(n.SCISSOR_TEST):ut(n.SCISSOR_TEST)}function Ye(pe){pe===void 0&&(pe=n.TEXTURE0+ye-1),J!==pe&&(n.activeTexture(pe),J=pe)}function qe(pe,tt,dt){dt===void 0&&(J===null?dt=n.TEXTURE0+ye-1:dt=J);let zt=se[dt];zt===void 0&&(zt={type:void 0,texture:void 0},se[dt]=zt),(zt.type!==pe||zt.texture!==tt)&&(J!==dt&&(n.activeTexture(dt),J=dt),n.bindTexture(pe,tt||je[pe]),zt.type=pe,zt.texture=tt)}function yt(){const pe=se[J];pe!==void 0&&pe.type!==void 0&&(n.bindTexture(pe.type,null),pe.type=void 0,pe.texture=void 0)}function ft(){try{n.compressedTexImage2D.apply(n,arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}}function st(){try{n.compressedTexImage3D.apply(n,arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}}function Rt(){try{n.texSubImage2D.apply(n,arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}}function Ot(){try{n.texSubImage3D.apply(n,arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}}function Xe(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}}function fn(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}}function Ht(){try{n.texStorage2D.apply(n,arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}}function Kt(){try{n.texStorage3D.apply(n,arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}}function xt(){try{n.texImage2D.apply(n,arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}}function Tt(){try{n.texImage3D.apply(n,arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}}function ge(pe){ke.equals(pe)===!1&&(n.scissor(pe.x,pe.y,pe.z,pe.w),ke.copy(pe))}function He(pe){Ie.equals(pe)===!1&&(n.viewport(pe.x,pe.y,pe.z,pe.w),Ie.copy(pe))}function rt(pe,tt){let dt=h.get(tt);dt===void 0&&(dt=new WeakMap,h.set(tt,dt));let zt=dt.get(pe);zt===void 0&&(zt=n.getUniformBlockIndex(tt,pe.name),dt.set(pe,zt))}function Ze(pe,tt){const zt=h.get(tt).get(pe);d.get(tt)!==zt&&(n.uniformBlockBinding(tt,zt,pe.__bindingPointIndex),d.set(tt,zt))}function Me(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),i===!0&&(n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),p={},J=null,se={},v={},_=new WeakMap,w=[],S=null,A=!1,b=null,C=null,P=null,k=null,L=null,N=null,O=null,D=new St(0,0,0),U=0,X=!1,Z=null,he=null,Q=null,ue=null,re=null,ke.set(0,0,n.canvas.width,n.canvas.height),Ie.set(0,0,n.canvas.width,n.canvas.height),a.reset(),l.reset(),u.reset()}return{buffers:{color:a,depth:l,stencil:u},enable:at,disable:ut,bindFramebuffer:gt,drawBuffers:fe,useProgram:Fe,setBlending:Oe,setMaterial:xe,setFlipSided:ct,setCullFace:j,setLineWidth:Y,setPolygonOffset:we,setScissorTest:Qe,activeTexture:Ye,bindTexture:qe,unbindTexture:yt,compressedTexImage2D:ft,compressedTexImage3D:st,texImage2D:xt,texImage3D:Tt,updateUBOMapping:rt,uniformBlockBinding:Ze,texStorage2D:Ht,texStorage3D:Kt,texSubImage2D:Rt,texSubImage3D:Ot,compressedTexSubImage2D:Xe,compressedTexSubImage3D:fn,scissor:ge,viewport:He,reset:Me}}function RW(n,e,t,i,r,s,o){const a=r.isWebGL2,l=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,u=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),d=new WeakMap;let h;const p=new WeakMap;let v=!1;try{v=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function _(j,Y){return v?new OffscreenCanvas(j,Y):iy("canvas")}function w(j,Y,we,Qe){let Ye=1;if((j.width>Qe||j.height>Qe)&&(Ye=Qe/Math.max(j.width,j.height)),Ye<1||Y===!0)if(typeof HTMLImageElement<"u"&&j instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&j instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&j instanceof ImageBitmap){const qe=Y?$w:Math.floor,yt=qe(Ye*j.width),ft=qe(Ye*j.height);h===void 0&&(h=_(yt,ft));const st=we?_(yt,ft):h;return st.width=yt,st.height=ft,st.getContext("2d").drawImage(j,0,0,yt,ft),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+j.width+"x"+j.height+") to ("+yt+"x"+ft+")."),st}else return"data"in j&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+j.width+"x"+j.height+")."),j;return j}function S(j){return Z1(j.width)&&Z1(j.height)}function A(j){return a?!1:j.wrapS!==Bi||j.wrapT!==Bi||j.minFilter!==$i&&j.minFilter!==Kn}function b(j,Y){return j.generateMipmaps&&Y&&j.minFilter!==$i&&j.minFilter!==Kn}function C(j){n.generateMipmap(j)}function P(j,Y,we,Qe,Ye=!1){if(a===!1)return Y;if(j!==null){if(n[j]!==void 0)return n[j];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+j+"'")}let qe=Y;if(Y===n.RED&&(we===n.FLOAT&&(qe=n.R32F),we===n.HALF_FLOAT&&(qe=n.R16F),we===n.UNSIGNED_BYTE&&(qe=n.R8)),Y===n.RED_INTEGER&&(we===n.UNSIGNED_BYTE&&(qe=n.R8UI),we===n.UNSIGNED_SHORT&&(qe=n.R16UI),we===n.UNSIGNED_INT&&(qe=n.R32UI),we===n.BYTE&&(qe=n.R8I),we===n.SHORT&&(qe=n.R16I),we===n.INT&&(qe=n.R32I)),Y===n.RG&&(we===n.FLOAT&&(qe=n.RG32F),we===n.HALF_FLOAT&&(qe=n.RG16F),we===n.UNSIGNED_BYTE&&(qe=n.RG8)),Y===n.RGBA){const yt=Ye?jv:fi.getTransfer(Qe);we===n.FLOAT&&(qe=n.RGBA32F),we===n.HALF_FLOAT&&(qe=n.RGBA16F),we===n.UNSIGNED_BYTE&&(qe=yt===Ti?n.SRGB8_ALPHA8:n.RGBA8),we===n.UNSIGNED_SHORT_4_4_4_4&&(qe=n.RGBA4),we===n.UNSIGNED_SHORT_5_5_5_1&&(qe=n.RGB5_A1)}return(qe===n.R16F||qe===n.R32F||qe===n.RG16F||qe===n.RG32F||qe===n.RGBA16F||qe===n.RGBA32F)&&e.get("EXT_color_buffer_float"),qe}function k(j,Y,we){return b(j,we)===!0||j.isFramebufferTexture&&j.minFilter!==$i&&j.minFilter!==Kn?Math.log2(Math.max(Y.width,Y.height))+1:j.mipmaps!==void 0&&j.mipmaps.length>0?j.mipmaps.length:j.isCompressedTexture&&Array.isArray(j.image)?Y.mipmaps.length:1}function L(j){return j===$i||j===Zv||j===qm?n.NEAREST:n.LINEAR}function N(j){const Y=j.target;Y.removeEventListener("dispose",N),D(Y),Y.isVideoTexture&&d.delete(Y)}function O(j){const Y=j.target;Y.removeEventListener("dispose",O),X(Y)}function D(j){const Y=i.get(j);if(Y.__webglInit===void 0)return;const we=j.source,Qe=p.get(we);if(Qe){const Ye=Qe[Y.__cacheKey];Ye.usedTimes--,Ye.usedTimes===0&&U(j),Object.keys(Qe).length===0&&p.delete(we)}i.remove(j)}function U(j){const Y=i.get(j);n.deleteTexture(Y.__webglTexture);const we=j.source,Qe=p.get(we);delete Qe[Y.__cacheKey],o.memory.textures--}function X(j){const Y=j.texture,we=i.get(j),Qe=i.get(Y);if(Qe.__webglTexture!==void 0&&(n.deleteTexture(Qe.__webglTexture),o.memory.textures--),j.depthTexture&&j.depthTexture.dispose(),j.isWebGLCubeRenderTarget)for(let Ye=0;Ye<6;Ye++){if(Array.isArray(we.__webglFramebuffer[Ye]))for(let qe=0;qe<we.__webglFramebuffer[Ye].length;qe++)n.deleteFramebuffer(we.__webglFramebuffer[Ye][qe]);else n.deleteFramebuffer(we.__webglFramebuffer[Ye]);we.__webglDepthbuffer&&n.deleteRenderbuffer(we.__webglDepthbuffer[Ye])}else{if(Array.isArray(we.__webglFramebuffer))for(let Ye=0;Ye<we.__webglFramebuffer.length;Ye++)n.deleteFramebuffer(we.__webglFramebuffer[Ye]);else n.deleteFramebuffer(we.__webglFramebuffer);if(we.__webglDepthbuffer&&n.deleteRenderbuffer(we.__webglDepthbuffer),we.__webglMultisampledFramebuffer&&n.deleteFramebuffer(we.__webglMultisampledFramebuffer),we.__webglColorRenderbuffer)for(let Ye=0;Ye<we.__webglColorRenderbuffer.length;Ye++)we.__webglColorRenderbuffer[Ye]&&n.deleteRenderbuffer(we.__webglColorRenderbuffer[Ye]);we.__webglDepthRenderbuffer&&n.deleteRenderbuffer(we.__webglDepthRenderbuffer)}if(j.isWebGLMultipleRenderTargets)for(let Ye=0,qe=Y.length;Ye<qe;Ye++){const yt=i.get(Y[Ye]);yt.__webglTexture&&(n.deleteTexture(yt.__webglTexture),o.memory.textures--),i.remove(Y[Ye])}i.remove(Y),i.remove(j)}let Z=0;function he(){Z=0}function Q(){const j=Z;return j>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+j+" texture units while this GPU supports only "+r.maxTextures),Z+=1,j}function ue(j){const Y=[];return Y.push(j.wrapS),Y.push(j.wrapT),Y.push(j.wrapR||0),Y.push(j.magFilter),Y.push(j.minFilter),Y.push(j.anisotropy),Y.push(j.internalFormat),Y.push(j.format),Y.push(j.type),Y.push(j.generateMipmaps),Y.push(j.premultiplyAlpha),Y.push(j.flipY),Y.push(j.unpackAlignment),Y.push(j.colorSpace),Y.join()}function re(j,Y){const we=i.get(j);if(j.isVideoTexture&&xe(j),j.isRenderTargetTexture===!1&&j.version>0&&we.__version!==j.version){const Qe=j.image;if(Qe===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Qe.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{ke(we,j,Y);return}}t.bindTexture(n.TEXTURE_2D,we.__webglTexture,n.TEXTURE0+Y)}function ye(j,Y){const we=i.get(j);if(j.version>0&&we.__version!==j.version){ke(we,j,Y);return}t.bindTexture(n.TEXTURE_2D_ARRAY,we.__webglTexture,n.TEXTURE0+Y)}function $(j,Y){const we=i.get(j);if(j.version>0&&we.__version!==j.version){ke(we,j,Y);return}t.bindTexture(n.TEXTURE_3D,we.__webglTexture,n.TEXTURE0+Y)}function oe(j,Y){const we=i.get(j);if(j.version>0&&we.__version!==j.version){Ie(we,j,Y);return}t.bindTexture(n.TEXTURE_CUBE_MAP,we.__webglTexture,n.TEXTURE0+Y)}const W={[Dd]:n.REPEAT,[Bi]:n.CLAMP_TO_EDGE,[ug]:n.MIRRORED_REPEAT},J={[$i]:n.NEAREST,[Zv]:n.NEAREST_MIPMAP_NEAREST,[qm]:n.NEAREST_MIPMAP_LINEAR,[Kn]:n.LINEAR,[VA]:n.LINEAR_MIPMAP_NEAREST,[jl]:n.LINEAR_MIPMAP_LINEAR},se={[nF]:n.NEVER,[lF]:n.ALWAYS,[iF]:n.LESS,[NC]:n.LEQUAL,[rF]:n.EQUAL,[aF]:n.GEQUAL,[sF]:n.GREATER,[oF]:n.NOTEQUAL};function me(j,Y,we){if(we?(n.texParameteri(j,n.TEXTURE_WRAP_S,W[Y.wrapS]),n.texParameteri(j,n.TEXTURE_WRAP_T,W[Y.wrapT]),(j===n.TEXTURE_3D||j===n.TEXTURE_2D_ARRAY)&&n.texParameteri(j,n.TEXTURE_WRAP_R,W[Y.wrapR]),n.texParameteri(j,n.TEXTURE_MAG_FILTER,J[Y.magFilter]),n.texParameteri(j,n.TEXTURE_MIN_FILTER,J[Y.minFilter])):(n.texParameteri(j,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(j,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),(j===n.TEXTURE_3D||j===n.TEXTURE_2D_ARRAY)&&n.texParameteri(j,n.TEXTURE_WRAP_R,n.CLAMP_TO_EDGE),(Y.wrapS!==Bi||Y.wrapT!==Bi)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(j,n.TEXTURE_MAG_FILTER,L(Y.magFilter)),n.texParameteri(j,n.TEXTURE_MIN_FILTER,L(Y.minFilter)),Y.minFilter!==$i&&Y.minFilter!==Kn&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),Y.compareFunction&&(n.texParameteri(j,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(j,n.TEXTURE_COMPARE_FUNC,se[Y.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){const Qe=e.get("EXT_texture_filter_anisotropic");if(Y.magFilter===$i||Y.minFilter!==qm&&Y.minFilter!==jl||Y.type===Cr&&e.has("OES_texture_float_linear")===!1||a===!1&&Y.type===Yr&&e.has("OES_texture_half_float_linear")===!1)return;(Y.anisotropy>1||i.get(Y).__currentAnisotropy)&&(n.texParameterf(j,Qe.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Y.anisotropy,r.getMaxAnisotropy())),i.get(Y).__currentAnisotropy=Y.anisotropy)}}function Se(j,Y){let we=!1;j.__webglInit===void 0&&(j.__webglInit=!0,Y.addEventListener("dispose",N));const Qe=Y.source;let Ye=p.get(Qe);Ye===void 0&&(Ye={},p.set(Qe,Ye));const qe=ue(Y);if(qe!==j.__cacheKey){Ye[qe]===void 0&&(Ye[qe]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,we=!0),Ye[qe].usedTimes++;const yt=Ye[j.__cacheKey];yt!==void 0&&(Ye[j.__cacheKey].usedTimes--,yt.usedTimes===0&&U(Y)),j.__cacheKey=qe,j.__webglTexture=Ye[qe].texture}return we}function ke(j,Y,we){let Qe=n.TEXTURE_2D;(Y.isDataArrayTexture||Y.isCompressedArrayTexture)&&(Qe=n.TEXTURE_2D_ARRAY),Y.isData3DTexture&&(Qe=n.TEXTURE_3D);const Ye=Se(j,Y),qe=Y.source;t.bindTexture(Qe,j.__webglTexture,n.TEXTURE0+we);const yt=i.get(qe);if(qe.version!==yt.__version||Ye===!0){t.activeTexture(n.TEXTURE0+we);const ft=fi.getPrimaries(fi.workingColorSpace),st=Y.colorSpace===Jo?null:fi.getPrimaries(Y.colorSpace),Rt=Y.colorSpace===Jo||ft===st?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,Y.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Y.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,Y.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Rt);const Ot=A(Y)&&S(Y.image)===!1;let Xe=w(Y.image,Ot,!1,r.maxTextureSize);Xe=ct(Y,Xe);const fn=S(Xe)||a,Ht=s.convert(Y.format,Y.colorSpace);let Kt=s.convert(Y.type),xt=P(Y.internalFormat,Ht,Kt,Y.colorSpace,Y.isVideoTexture);me(Qe,Y,fn);let Tt;const ge=Y.mipmaps,He=a&&Y.isVideoTexture!==!0&&xt!==IC,rt=yt.__version===void 0||Ye===!0,Ze=k(Y,Xe,fn);if(Y.isDepthTexture)xt=n.DEPTH_COMPONENT,a?Y.type===Cr?xt=n.DEPTH_COMPONENT32F:Y.type===zl?xt=n.DEPTH_COMPONENT24:Y.type===xd?xt=n.DEPTH24_STENCIL8:xt=n.DEPTH_COMPONENT16:Y.type===Cr&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),Y.format===wd&&xt===n.DEPTH_COMPONENT&&Y.type!==WA&&Y.type!==zl&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),Y.type=zl,Kt=s.convert(Y.type)),Y.format===Lh&&xt===n.DEPTH_COMPONENT&&(xt=n.DEPTH_STENCIL,Y.type!==xd&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),Y.type=xd,Kt=s.convert(Y.type))),rt&&(He?t.texStorage2D(n.TEXTURE_2D,1,xt,Xe.width,Xe.height):t.texImage2D(n.TEXTURE_2D,0,xt,Xe.width,Xe.height,0,Ht,Kt,null));else if(Y.isDataTexture)if(ge.length>0&&fn){He&&rt&&t.texStorage2D(n.TEXTURE_2D,Ze,xt,ge[0].width,ge[0].height);for(let Me=0,pe=ge.length;Me<pe;Me++)Tt=ge[Me],He?t.texSubImage2D(n.TEXTURE_2D,Me,0,0,Tt.width,Tt.height,Ht,Kt,Tt.data):t.texImage2D(n.TEXTURE_2D,Me,xt,Tt.width,Tt.height,0,Ht,Kt,Tt.data);Y.generateMipmaps=!1}else He?(rt&&t.texStorage2D(n.TEXTURE_2D,Ze,xt,Xe.width,Xe.height),t.texSubImage2D(n.TEXTURE_2D,0,0,0,Xe.width,Xe.height,Ht,Kt,Xe.data)):t.texImage2D(n.TEXTURE_2D,0,xt,Xe.width,Xe.height,0,Ht,Kt,Xe.data);else if(Y.isCompressedTexture)if(Y.isCompressedArrayTexture){He&&rt&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Ze,xt,ge[0].width,ge[0].height,Xe.depth);for(let Me=0,pe=ge.length;Me<pe;Me++)Tt=ge[Me],Y.format!==Mr?Ht!==null?He?t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Me,0,0,0,Tt.width,Tt.height,Xe.depth,Ht,Tt.data,0,0):t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,Me,xt,Tt.width,Tt.height,Xe.depth,0,Tt.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):He?t.texSubImage3D(n.TEXTURE_2D_ARRAY,Me,0,0,0,Tt.width,Tt.height,Xe.depth,Ht,Kt,Tt.data):t.texImage3D(n.TEXTURE_2D_ARRAY,Me,xt,Tt.width,Tt.height,Xe.depth,0,Ht,Kt,Tt.data)}else{He&&rt&&t.texStorage2D(n.TEXTURE_2D,Ze,xt,ge[0].width,ge[0].height);for(let Me=0,pe=ge.length;Me<pe;Me++)Tt=ge[Me],Y.format!==Mr?Ht!==null?He?t.compressedTexSubImage2D(n.TEXTURE_2D,Me,0,0,Tt.width,Tt.height,Ht,Tt.data):t.compressedTexImage2D(n.TEXTURE_2D,Me,xt,Tt.width,Tt.height,0,Tt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):He?t.texSubImage2D(n.TEXTURE_2D,Me,0,0,Tt.width,Tt.height,Ht,Kt,Tt.data):t.texImage2D(n.TEXTURE_2D,Me,xt,Tt.width,Tt.height,0,Ht,Kt,Tt.data)}else if(Y.isDataArrayTexture)He?(rt&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Ze,xt,Xe.width,Xe.height,Xe.depth),t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,Xe.width,Xe.height,Xe.depth,Ht,Kt,Xe.data)):t.texImage3D(n.TEXTURE_2D_ARRAY,0,xt,Xe.width,Xe.height,Xe.depth,0,Ht,Kt,Xe.data);else if(Y.isData3DTexture)He?(rt&&t.texStorage3D(n.TEXTURE_3D,Ze,xt,Xe.width,Xe.height,Xe.depth),t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,Xe.width,Xe.height,Xe.depth,Ht,Kt,Xe.data)):t.texImage3D(n.TEXTURE_3D,0,xt,Xe.width,Xe.height,Xe.depth,0,Ht,Kt,Xe.data);else if(Y.isFramebufferTexture){if(rt)if(He)t.texStorage2D(n.TEXTURE_2D,Ze,xt,Xe.width,Xe.height);else{let Me=Xe.width,pe=Xe.height;for(let tt=0;tt<Ze;tt++)t.texImage2D(n.TEXTURE_2D,tt,xt,Me,pe,0,Ht,Kt,null),Me>>=1,pe>>=1}}else if(ge.length>0&&fn){He&&rt&&t.texStorage2D(n.TEXTURE_2D,Ze,xt,ge[0].width,ge[0].height);for(let Me=0,pe=ge.length;Me<pe;Me++)Tt=ge[Me],He?t.texSubImage2D(n.TEXTURE_2D,Me,0,0,Ht,Kt,Tt):t.texImage2D(n.TEXTURE_2D,Me,xt,Ht,Kt,Tt);Y.generateMipmaps=!1}else He?(rt&&t.texStorage2D(n.TEXTURE_2D,Ze,xt,Xe.width,Xe.height),t.texSubImage2D(n.TEXTURE_2D,0,0,0,Ht,Kt,Xe)):t.texImage2D(n.TEXTURE_2D,0,xt,Ht,Kt,Xe);b(Y,fn)&&C(Qe),yt.__version=qe.version,Y.onUpdate&&Y.onUpdate(Y)}j.__version=Y.version}function Ie(j,Y,we){if(Y.image.length!==6)return;const Qe=Se(j,Y),Ye=Y.source;t.bindTexture(n.TEXTURE_CUBE_MAP,j.__webglTexture,n.TEXTURE0+we);const qe=i.get(Ye);if(Ye.version!==qe.__version||Qe===!0){t.activeTexture(n.TEXTURE0+we);const yt=fi.getPrimaries(fi.workingColorSpace),ft=Y.colorSpace===Jo?null:fi.getPrimaries(Y.colorSpace),st=Y.colorSpace===Jo||yt===ft?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,Y.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Y.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,Y.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,st);const Rt=Y.isCompressedTexture||Y.image[0].isCompressedTexture,Ot=Y.image[0]&&Y.image[0].isDataTexture,Xe=[];for(let Me=0;Me<6;Me++)!Rt&&!Ot?Xe[Me]=w(Y.image[Me],!1,!0,r.maxCubemapSize):Xe[Me]=Ot?Y.image[Me].image:Y.image[Me],Xe[Me]=ct(Y,Xe[Me]);const fn=Xe[0],Ht=S(fn)||a,Kt=s.convert(Y.format,Y.colorSpace),xt=s.convert(Y.type),Tt=P(Y.internalFormat,Kt,xt,Y.colorSpace),ge=a&&Y.isVideoTexture!==!0,He=qe.__version===void 0||Qe===!0;let rt=k(Y,fn,Ht);me(n.TEXTURE_CUBE_MAP,Y,Ht);let Ze;if(Rt){ge&&He&&t.texStorage2D(n.TEXTURE_CUBE_MAP,rt,Tt,fn.width,fn.height);for(let Me=0;Me<6;Me++){Ze=Xe[Me].mipmaps;for(let pe=0;pe<Ze.length;pe++){const tt=Ze[pe];Y.format!==Mr?Kt!==null?ge?t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Me,pe,0,0,tt.width,tt.height,Kt,tt.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Me,pe,Tt,tt.width,tt.height,0,tt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):ge?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Me,pe,0,0,tt.width,tt.height,Kt,xt,tt.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Me,pe,Tt,tt.width,tt.height,0,Kt,xt,tt.data)}}}else{Ze=Y.mipmaps,ge&&He&&(Ze.length>0&&rt++,t.texStorage2D(n.TEXTURE_CUBE_MAP,rt,Tt,Xe[0].width,Xe[0].height));for(let Me=0;Me<6;Me++)if(Ot){ge?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Me,0,0,0,Xe[Me].width,Xe[Me].height,Kt,xt,Xe[Me].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Me,0,Tt,Xe[Me].width,Xe[Me].height,0,Kt,xt,Xe[Me].data);for(let pe=0;pe<Ze.length;pe++){const dt=Ze[pe].image[Me].image;ge?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Me,pe+1,0,0,dt.width,dt.height,Kt,xt,dt.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Me,pe+1,Tt,dt.width,dt.height,0,Kt,xt,dt.data)}}else{ge?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Me,0,0,0,Kt,xt,Xe[Me]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Me,0,Tt,Kt,xt,Xe[Me]);for(let pe=0;pe<Ze.length;pe++){const tt=Ze[pe];ge?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Me,pe+1,0,0,Kt,xt,tt.image[Me]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Me,pe+1,Tt,Kt,xt,tt.image[Me])}}}b(Y,Ht)&&C(n.TEXTURE_CUBE_MAP),qe.__version=Ye.version,Y.onUpdate&&Y.onUpdate(Y)}j.__version=Y.version}function ze(j,Y,we,Qe,Ye,qe){const yt=s.convert(we.format,we.colorSpace),ft=s.convert(we.type),st=P(we.internalFormat,yt,ft,we.colorSpace);if(!i.get(Y).__hasExternalTextures){const Ot=Math.max(1,Y.width>>qe),Xe=Math.max(1,Y.height>>qe);Ye===n.TEXTURE_3D||Ye===n.TEXTURE_2D_ARRAY?t.texImage3D(Ye,qe,st,Ot,Xe,Y.depth,0,yt,ft,null):t.texImage2D(Ye,qe,st,Ot,Xe,0,yt,ft,null)}t.bindFramebuffer(n.FRAMEBUFFER,j),Oe(Y)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,Qe,Ye,i.get(we).__webglTexture,0,$e(Y)):(Ye===n.TEXTURE_2D||Ye>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&Ye<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,Qe,Ye,i.get(we).__webglTexture,qe),t.bindFramebuffer(n.FRAMEBUFFER,null)}function je(j,Y,we){if(n.bindRenderbuffer(n.RENDERBUFFER,j),Y.depthBuffer&&!Y.stencilBuffer){let Qe=a===!0?n.DEPTH_COMPONENT24:n.DEPTH_COMPONENT16;if(we||Oe(Y)){const Ye=Y.depthTexture;Ye&&Ye.isDepthTexture&&(Ye.type===Cr?Qe=n.DEPTH_COMPONENT32F:Ye.type===zl&&(Qe=n.DEPTH_COMPONENT24));const qe=$e(Y);Oe(Y)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,qe,Qe,Y.width,Y.height):n.renderbufferStorageMultisample(n.RENDERBUFFER,qe,Qe,Y.width,Y.height)}else n.renderbufferStorage(n.RENDERBUFFER,Qe,Y.width,Y.height);n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,j)}else if(Y.depthBuffer&&Y.stencilBuffer){const Qe=$e(Y);we&&Oe(Y)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,Qe,n.DEPTH24_STENCIL8,Y.width,Y.height):Oe(Y)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Qe,n.DEPTH24_STENCIL8,Y.width,Y.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,Y.width,Y.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,j)}else{const Qe=Y.isWebGLMultipleRenderTargets===!0?Y.texture:[Y.texture];for(let Ye=0;Ye<Qe.length;Ye++){const qe=Qe[Ye],yt=s.convert(qe.format,qe.colorSpace),ft=s.convert(qe.type),st=P(qe.internalFormat,yt,ft,qe.colorSpace),Rt=$e(Y);we&&Oe(Y)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,Rt,st,Y.width,Y.height):Oe(Y)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Rt,st,Y.width,Y.height):n.renderbufferStorage(n.RENDERBUFFER,st,Y.width,Y.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function at(j,Y){if(Y&&Y.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,j),!(Y.depthTexture&&Y.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(Y.depthTexture).__webglTexture||Y.depthTexture.image.width!==Y.width||Y.depthTexture.image.height!==Y.height)&&(Y.depthTexture.image.width=Y.width,Y.depthTexture.image.height=Y.height,Y.depthTexture.needsUpdate=!0),re(Y.depthTexture,0);const Qe=i.get(Y.depthTexture).__webglTexture,Ye=$e(Y);if(Y.depthTexture.format===wd)Oe(Y)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Qe,0,Ye):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Qe,0);else if(Y.depthTexture.format===Lh)Oe(Y)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Qe,0,Ye):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Qe,0);else throw new Error("Unknown depthTexture format")}function ut(j){const Y=i.get(j),we=j.isWebGLCubeRenderTarget===!0;if(j.depthTexture&&!Y.__autoAllocateDepthBuffer){if(we)throw new Error("target.depthTexture not supported in Cube render targets");at(Y.__webglFramebuffer,j)}else if(we){Y.__webglDepthbuffer=[];for(let Qe=0;Qe<6;Qe++)t.bindFramebuffer(n.FRAMEBUFFER,Y.__webglFramebuffer[Qe]),Y.__webglDepthbuffer[Qe]=n.createRenderbuffer(),je(Y.__webglDepthbuffer[Qe],j,!1)}else t.bindFramebuffer(n.FRAMEBUFFER,Y.__webglFramebuffer),Y.__webglDepthbuffer=n.createRenderbuffer(),je(Y.__webglDepthbuffer,j,!1);t.bindFramebuffer(n.FRAMEBUFFER,null)}function gt(j,Y,we){const Qe=i.get(j);Y!==void 0&&ze(Qe.__webglFramebuffer,j,j.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),we!==void 0&&ut(j)}function fe(j){const Y=j.texture,we=i.get(j),Qe=i.get(Y);j.addEventListener("dispose",O),j.isWebGLMultipleRenderTargets!==!0&&(Qe.__webglTexture===void 0&&(Qe.__webglTexture=n.createTexture()),Qe.__version=Y.version,o.memory.textures++);const Ye=j.isWebGLCubeRenderTarget===!0,qe=j.isWebGLMultipleRenderTargets===!0,yt=S(j)||a;if(Ye){we.__webglFramebuffer=[];for(let ft=0;ft<6;ft++)if(a&&Y.mipmaps&&Y.mipmaps.length>0){we.__webglFramebuffer[ft]=[];for(let st=0;st<Y.mipmaps.length;st++)we.__webglFramebuffer[ft][st]=n.createFramebuffer()}else we.__webglFramebuffer[ft]=n.createFramebuffer()}else{if(a&&Y.mipmaps&&Y.mipmaps.length>0){we.__webglFramebuffer=[];for(let ft=0;ft<Y.mipmaps.length;ft++)we.__webglFramebuffer[ft]=n.createFramebuffer()}else we.__webglFramebuffer=n.createFramebuffer();if(qe)if(r.drawBuffers){const ft=j.texture;for(let st=0,Rt=ft.length;st<Rt;st++){const Ot=i.get(ft[st]);Ot.__webglTexture===void 0&&(Ot.__webglTexture=n.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&j.samples>0&&Oe(j)===!1){const ft=qe?Y:[Y];we.__webglMultisampledFramebuffer=n.createFramebuffer(),we.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,we.__webglMultisampledFramebuffer);for(let st=0;st<ft.length;st++){const Rt=ft[st];we.__webglColorRenderbuffer[st]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,we.__webglColorRenderbuffer[st]);const Ot=s.convert(Rt.format,Rt.colorSpace),Xe=s.convert(Rt.type),fn=P(Rt.internalFormat,Ot,Xe,Rt.colorSpace,j.isXRRenderTarget===!0),Ht=$e(j);n.renderbufferStorageMultisample(n.RENDERBUFFER,Ht,fn,j.width,j.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+st,n.RENDERBUFFER,we.__webglColorRenderbuffer[st])}n.bindRenderbuffer(n.RENDERBUFFER,null),j.depthBuffer&&(we.__webglDepthRenderbuffer=n.createRenderbuffer(),je(we.__webglDepthRenderbuffer,j,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(Ye){t.bindTexture(n.TEXTURE_CUBE_MAP,Qe.__webglTexture),me(n.TEXTURE_CUBE_MAP,Y,yt);for(let ft=0;ft<6;ft++)if(a&&Y.mipmaps&&Y.mipmaps.length>0)for(let st=0;st<Y.mipmaps.length;st++)ze(we.__webglFramebuffer[ft][st],j,Y,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+ft,st);else ze(we.__webglFramebuffer[ft],j,Y,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+ft,0);b(Y,yt)&&C(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(qe){const ft=j.texture;for(let st=0,Rt=ft.length;st<Rt;st++){const Ot=ft[st],Xe=i.get(Ot);t.bindTexture(n.TEXTURE_2D,Xe.__webglTexture),me(n.TEXTURE_2D,Ot,yt),ze(we.__webglFramebuffer,j,Ot,n.COLOR_ATTACHMENT0+st,n.TEXTURE_2D,0),b(Ot,yt)&&C(n.TEXTURE_2D)}t.unbindTexture()}else{let ft=n.TEXTURE_2D;if((j.isWebGL3DRenderTarget||j.isWebGLArrayRenderTarget)&&(a?ft=j.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(ft,Qe.__webglTexture),me(ft,Y,yt),a&&Y.mipmaps&&Y.mipmaps.length>0)for(let st=0;st<Y.mipmaps.length;st++)ze(we.__webglFramebuffer[st],j,Y,n.COLOR_ATTACHMENT0,ft,st);else ze(we.__webglFramebuffer,j,Y,n.COLOR_ATTACHMENT0,ft,0);b(Y,yt)&&C(ft),t.unbindTexture()}j.depthBuffer&&ut(j)}function Fe(j){const Y=S(j)||a,we=j.isWebGLMultipleRenderTargets===!0?j.texture:[j.texture];for(let Qe=0,Ye=we.length;Qe<Ye;Qe++){const qe=we[Qe];if(b(qe,Y)){const yt=j.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:n.TEXTURE_2D,ft=i.get(qe).__webglTexture;t.bindTexture(yt,ft),C(yt),t.unbindTexture()}}}function Be(j){if(a&&j.samples>0&&Oe(j)===!1){const Y=j.isWebGLMultipleRenderTargets?j.texture:[j.texture],we=j.width,Qe=j.height;let Ye=n.COLOR_BUFFER_BIT;const qe=[],yt=j.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,ft=i.get(j),st=j.isWebGLMultipleRenderTargets===!0;if(st)for(let Rt=0;Rt<Y.length;Rt++)t.bindFramebuffer(n.FRAMEBUFFER,ft.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Rt,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,ft.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Rt,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,ft.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,ft.__webglFramebuffer);for(let Rt=0;Rt<Y.length;Rt++){qe.push(n.COLOR_ATTACHMENT0+Rt),j.depthBuffer&&qe.push(yt);const Ot=ft.__ignoreDepthValues!==void 0?ft.__ignoreDepthValues:!1;if(Ot===!1&&(j.depthBuffer&&(Ye|=n.DEPTH_BUFFER_BIT),j.stencilBuffer&&(Ye|=n.STENCIL_BUFFER_BIT)),st&&n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,ft.__webglColorRenderbuffer[Rt]),Ot===!0&&(n.invalidateFramebuffer(n.READ_FRAMEBUFFER,[yt]),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[yt])),st){const Xe=i.get(Y[Rt]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,Xe,0)}n.blitFramebuffer(0,0,we,Qe,0,0,we,Qe,Ye,n.NEAREST),u&&n.invalidateFramebuffer(n.READ_FRAMEBUFFER,qe)}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),st)for(let Rt=0;Rt<Y.length;Rt++){t.bindFramebuffer(n.FRAMEBUFFER,ft.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Rt,n.RENDERBUFFER,ft.__webglColorRenderbuffer[Rt]);const Ot=i.get(Y[Rt]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,ft.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Rt,n.TEXTURE_2D,Ot,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,ft.__webglMultisampledFramebuffer)}}function $e(j){return Math.min(r.maxSamples,j.samples)}function Oe(j){const Y=i.get(j);return a&&j.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&Y.__useRenderToTexture!==!1}function xe(j){const Y=o.render.frame;d.get(j)!==Y&&(d.set(j,Y),j.update())}function ct(j,Y){const we=j.colorSpace,Qe=j.format,Ye=j.type;return j.isCompressedTexture===!0||j.isVideoTexture===!0||j.format===Zw||we!==jo&&we!==Jo&&(fi.getTransfer(we)===Ti?a===!1?e.has("EXT_sRGB")===!0&&Qe===Mr?(j.format=Zw,j.minFilter=Kn,j.generateMipmaps=!1):Y=FC.sRGBToLinear(Y):(Qe!==Mr||Ye!==Qo)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",we)),Y}this.allocateTextureUnit=Q,this.resetTextureUnits=he,this.setTexture2D=re,this.setTexture2DArray=ye,this.setTexture3D=$,this.setTextureCube=oe,this.rebindTextures=gt,this.setupRenderTarget=fe,this.updateRenderTargetMipmap=Fe,this.updateMultisampleRenderTarget=Be,this.setupDepthRenderbuffer=ut,this.setupFrameBufferTexture=ze,this.useMultisampledRTT=Oe}function AF(n,e,t){const i=t.isWebGL2;function r(s,o=Jo){let a;const l=fi.getTransfer(o);if(s===Qo)return n.UNSIGNED_BYTE;if(s===TC)return n.UNSIGNED_SHORT_4_4_4_4;if(s===MC)return n.UNSIGNED_SHORT_5_5_5_1;if(s===SC)return n.BYTE;if(s===EC)return n.SHORT;if(s===WA)return n.UNSIGNED_SHORT;if(s===qA)return n.INT;if(s===zl)return n.UNSIGNED_INT;if(s===Cr)return n.FLOAT;if(s===Yr)return i?n.HALF_FLOAT:(a=e.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(s===Wk)return n.ALPHA;if(s===Mr)return n.RGBA;if(s===qk)return n.LUMINANCE;if(s===Jk)return n.LUMINANCE_ALPHA;if(s===wd)return n.DEPTH_COMPONENT;if(s===Lh)return n.DEPTH_STENCIL;if(s===Zw)return a=e.get("EXT_sRGB"),a!==null?a.SRGB_ALPHA_EXT:null;if(s===CC)return n.RED;if(s===bC)return n.RED_INTEGER;if(s===Xk)return n.RG;if(s===RC)return n.RG_INTEGER;if(s===PC)return n.RGBA_INTEGER;if(s===Sw||s===Ew||s===Tw||s===Mw)if(l===Ti)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(s===Sw)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===Ew)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===Tw)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===Mw)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(s===Sw)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===Ew)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===Tw)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===Mw)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===E1||s===T1||s===M1||s===C1)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(s===E1)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===T1)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===M1)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===C1)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===IC)return a=e.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===b1||s===R1)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(s===b1)return l===Ti?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(s===R1)return l===Ti?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===P1||s===I1||s===D1||s===L1||s===B1||s===N1||s===k1||s===F1||s===U1||s===O1||s===H1||s===G1||s===z1||s===V1)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(s===P1)return l===Ti?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===I1)return l===Ti?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===D1)return l===Ti?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===L1)return l===Ti?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===B1)return l===Ti?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===N1)return l===Ti?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===k1)return l===Ti?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===F1)return l===Ti?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===U1)return l===Ti?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===O1)return l===Ti?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===H1)return l===Ti?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===G1)return l===Ti?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===z1)return l===Ti?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===V1)return l===Ti?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===Cw||s===W1||s===q1)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(s===Cw)return l===Ti?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(s===W1)return a.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(s===q1)return a.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(s===Yk||s===J1||s===X1||s===Y1)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(s===Cw)return a.COMPRESSED_RED_RGTC1_EXT;if(s===J1)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(s===X1)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(s===Y1)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return s===xd?i?n.UNSIGNED_INT_24_8:(a=e.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null):n[s]!==void 0?n[s]:null}return{convert:r}}class SF extends er{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Ku extends Jn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const PW={type:"move"};class $E{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Ku,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Ku,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new te,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new te),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Ku,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new te,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new te),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,o=null;const a=this._targetRay,l=this._grip,u=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(u&&e.hand){o=!0;for(const w of e.hand.values()){const S=t.getJointPose(w,i),A=this._getHandJoint(u,w);S!==null&&(A.matrix.fromArray(S.transform.matrix),A.matrix.decompose(A.position,A.rotation,A.scale),A.matrixWorldNeedsUpdate=!0,A.jointRadius=S.radius),A.visible=S!==null}const d=u.joints["index-finger-tip"],h=u.joints["thumb-tip"],p=d.position.distanceTo(h.position),v=.02,_=.005;u.inputState.pinching&&p>v+_?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&p<=v-_&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(r=t.getPose(e.targetRaySpace,i),r===null&&s!==null&&(r=s),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(PW)))}return a!==null&&(a.visible=r!==null),l!==null&&(l.visible=s!==null),u!==null&&(u.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new Ku;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}class IW extends uc{constructor(e,t){super();const i=this;let r=null,s=1,o=null,a="local-floor",l=1,u=null,d=null,h=null,p=null,v=null,_=null;const w=t.getContextAttributes();let S=null,A=null;const b=[],C=[],P=new Je;let k=null;const L=new er;L.layers.enable(1),L.viewport=new li;const N=new er;N.layers.enable(2),N.viewport=new li;const O=[L,N],D=new SF;D.layers.enable(1),D.layers.enable(2);let U=null,X=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(me){let Se=b[me];return Se===void 0&&(Se=new $E,b[me]=Se),Se.getTargetRaySpace()},this.getControllerGrip=function(me){let Se=b[me];return Se===void 0&&(Se=new $E,b[me]=Se),Se.getGripSpace()},this.getHand=function(me){let Se=b[me];return Se===void 0&&(Se=new $E,b[me]=Se),Se.getHandSpace()};function Z(me){const Se=C.indexOf(me.inputSource);if(Se===-1)return;const ke=b[Se];ke!==void 0&&(ke.update(me.inputSource,me.frame,u||o),ke.dispatchEvent({type:me.type,data:me.inputSource}))}function he(){r.removeEventListener("select",Z),r.removeEventListener("selectstart",Z),r.removeEventListener("selectend",Z),r.removeEventListener("squeeze",Z),r.removeEventListener("squeezestart",Z),r.removeEventListener("squeezeend",Z),r.removeEventListener("end",he),r.removeEventListener("inputsourceschange",Q);for(let me=0;me<b.length;me++){const Se=C[me];Se!==null&&(C[me]=null,b[me].disconnect(Se))}U=null,X=null,e.setRenderTarget(S),v=null,p=null,h=null,r=null,A=null,se.stop(),i.isPresenting=!1,e.setPixelRatio(k),e.setSize(P.width,P.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(me){s=me,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(me){a=me,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||o},this.setReferenceSpace=function(me){u=me},this.getBaseLayer=function(){return p!==null?p:v},this.getBinding=function(){return h},this.getFrame=function(){return _},this.getSession=function(){return r},this.setSession=async function(me){if(r=me,r!==null){if(S=e.getRenderTarget(),r.addEventListener("select",Z),r.addEventListener("selectstart",Z),r.addEventListener("selectend",Z),r.addEventListener("squeeze",Z),r.addEventListener("squeezestart",Z),r.addEventListener("squeezeend",Z),r.addEventListener("end",he),r.addEventListener("inputsourceschange",Q),w.xrCompatible!==!0&&await t.makeXRCompatible(),k=e.getPixelRatio(),e.getSize(P),r.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const Se={antialias:r.renderState.layers===void 0?w.antialias:!0,alpha:!0,depth:w.depth,stencil:w.stencil,framebufferScaleFactor:s};v=new XRWebGLLayer(r,t,Se),r.updateRenderState({baseLayer:v}),e.setPixelRatio(1),e.setSize(v.framebufferWidth,v.framebufferHeight,!1),A=new no(v.framebufferWidth,v.framebufferHeight,{format:Mr,type:Qo,colorSpace:e.outputColorSpace,stencilBuffer:w.stencil})}else{let Se=null,ke=null,Ie=null;w.depth&&(Ie=w.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,Se=w.stencil?Lh:wd,ke=w.stencil?xd:zl);const ze={colorFormat:t.RGBA8,depthFormat:Ie,scaleFactor:s};h=new XRWebGLBinding(r,t),p=h.createProjectionLayer(ze),r.updateRenderState({layers:[p]}),e.setPixelRatio(1),e.setSize(p.textureWidth,p.textureHeight,!1),A=new no(p.textureWidth,p.textureHeight,{format:Mr,type:Qo,depthTexture:new VC(p.textureWidth,p.textureHeight,ke,void 0,void 0,void 0,void 0,void 0,void 0,Se),stencilBuffer:w.stencil,colorSpace:e.outputColorSpace,samples:w.antialias?4:0});const je=e.properties.get(A);je.__ignoreDepthValues=p.ignoreDepthValues}A.isXRRenderTarget=!0,this.setFoveation(l),u=null,o=await r.requestReferenceSpace(a),se.setContext(r),se.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode};function Q(me){for(let Se=0;Se<me.removed.length;Se++){const ke=me.removed[Se],Ie=C.indexOf(ke);Ie>=0&&(C[Ie]=null,b[Ie].disconnect(ke))}for(let Se=0;Se<me.added.length;Se++){const ke=me.added[Se];let Ie=C.indexOf(ke);if(Ie===-1){for(let je=0;je<b.length;je++)if(je>=C.length){C.push(ke),Ie=je;break}else if(C[je]===null){C[je]=ke,Ie=je;break}if(Ie===-1)break}const ze=b[Ie];ze&&ze.connect(ke)}}const ue=new te,re=new te;function ye(me,Se,ke){ue.setFromMatrixPosition(Se.matrixWorld),re.setFromMatrixPosition(ke.matrixWorld);const Ie=ue.distanceTo(re),ze=Se.projectionMatrix.elements,je=ke.projectionMatrix.elements,at=ze[14]/(ze[10]-1),ut=ze[14]/(ze[10]+1),gt=(ze[9]+1)/ze[5],fe=(ze[9]-1)/ze[5],Fe=(ze[8]-1)/ze[0],Be=(je[8]+1)/je[0],$e=at*Fe,Oe=at*Be,xe=Ie/(-Fe+Be),ct=xe*-Fe;Se.matrixWorld.decompose(me.position,me.quaternion,me.scale),me.translateX(ct),me.translateZ(xe),me.matrixWorld.compose(me.position,me.quaternion,me.scale),me.matrixWorldInverse.copy(me.matrixWorld).invert();const j=at+xe,Y=ut+xe,we=$e-ct,Qe=Oe+(Ie-ct),Ye=gt*ut/Y*j,qe=fe*ut/Y*j;me.projectionMatrix.makePerspective(we,Qe,Ye,qe,j,Y),me.projectionMatrixInverse.copy(me.projectionMatrix).invert()}function $(me,Se){Se===null?me.matrixWorld.copy(me.matrix):me.matrixWorld.multiplyMatrices(Se.matrixWorld,me.matrix),me.matrixWorldInverse.copy(me.matrixWorld).invert()}this.updateCamera=function(me){if(r===null)return;D.near=N.near=L.near=me.near,D.far=N.far=L.far=me.far,(U!==D.near||X!==D.far)&&(r.updateRenderState({depthNear:D.near,depthFar:D.far}),U=D.near,X=D.far);const Se=me.parent,ke=D.cameras;$(D,Se);for(let Ie=0;Ie<ke.length;Ie++)$(ke[Ie],Se);ke.length===2?ye(D,L,N):D.projectionMatrix.copy(L.projectionMatrix),oe(me,D,Se)};function oe(me,Se,ke){ke===null?me.matrix.copy(Se.matrixWorld):(me.matrix.copy(ke.matrixWorld),me.matrix.invert(),me.matrix.multiply(Se.matrixWorld)),me.matrix.decompose(me.position,me.quaternion,me.scale),me.updateMatrixWorld(!0),me.projectionMatrix.copy(Se.projectionMatrix),me.projectionMatrixInverse.copy(Se.projectionMatrixInverse),me.isPerspectiveCamera&&(me.fov=fg*2*Math.atan(1/me.projectionMatrix.elements[5]),me.zoom=1)}this.getCamera=function(){return D},this.getFoveation=function(){if(!(p===null&&v===null))return l},this.setFoveation=function(me){l=me,p!==null&&(p.fixedFoveation=me),v!==null&&v.fixedFoveation!==void 0&&(v.fixedFoveation=me)};let W=null;function J(me,Se){if(d=Se.getViewerPose(u||o),_=Se,d!==null){const ke=d.views;v!==null&&(e.setRenderTargetFramebuffer(A,v.framebuffer),e.setRenderTarget(A));let Ie=!1;ke.length!==D.cameras.length&&(D.cameras.length=0,Ie=!0);for(let ze=0;ze<ke.length;ze++){const je=ke[ze];let at=null;if(v!==null)at=v.getViewport(je);else{const gt=h.getViewSubImage(p,je);at=gt.viewport,ze===0&&(e.setRenderTargetTextures(A,gt.colorTexture,p.ignoreDepthValues?void 0:gt.depthStencilTexture),e.setRenderTarget(A))}let ut=O[ze];ut===void 0&&(ut=new er,ut.layers.enable(ze),ut.viewport=new li,O[ze]=ut),ut.matrix.fromArray(je.transform.matrix),ut.matrix.decompose(ut.position,ut.quaternion,ut.scale),ut.projectionMatrix.fromArray(je.projectionMatrix),ut.projectionMatrixInverse.copy(ut.projectionMatrix).invert(),ut.viewport.set(at.x,at.y,at.width,at.height),ze===0&&(D.matrix.copy(ut.matrix),D.matrix.decompose(D.position,D.quaternion,D.scale)),Ie===!0&&D.cameras.push(ut)}}for(let ke=0;ke<b.length;ke++){const Ie=C[ke],ze=b[ke];Ie!==null&&ze!==void 0&&ze.update(Ie,Se,u||o)}W&&W(me,Se),Se.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:Se}),_=null}const se=new gF;se.setAnimationLoop(J),this.setAnimationLoop=function(me){W=me},this.dispose=function(){}}}function DW(n,e){function t(S,A){S.matrixAutoUpdate===!0&&S.updateMatrix(),A.value.copy(S.matrix)}function i(S,A){A.color.getRGB(S.fogColor.value,hF(n)),A.isFog?(S.fogNear.value=A.near,S.fogFar.value=A.far):A.isFogExp2&&(S.fogDensity.value=A.density)}function r(S,A,b,C,P){A.isMeshBasicMaterial||A.isMeshLambertMaterial?s(S,A):A.isMeshToonMaterial?(s(S,A),h(S,A)):A.isMeshPhongMaterial?(s(S,A),d(S,A)):A.isMeshStandardMaterial?(s(S,A),p(S,A),A.isMeshPhysicalMaterial&&v(S,A,P)):A.isMeshMatcapMaterial?(s(S,A),_(S,A)):A.isMeshDepthMaterial?s(S,A):A.isMeshDistanceMaterial?(s(S,A),w(S,A)):A.isMeshNormalMaterial?s(S,A):A.isLineBasicMaterial?(o(S,A),A.isLineDashedMaterial&&a(S,A)):A.isPointsMaterial?l(S,A,b,C):A.isSpriteMaterial?u(S,A):A.isShadowMaterial?(S.color.value.copy(A.color),S.opacity.value=A.opacity):A.isShaderMaterial&&(A.uniformsNeedUpdate=!1)}function s(S,A){S.opacity.value=A.opacity,A.color&&S.diffuse.value.copy(A.color),A.emissive&&S.emissive.value.copy(A.emissive).multiplyScalar(A.emissiveIntensity),A.map&&(S.map.value=A.map,t(A.map,S.mapTransform)),A.alphaMap&&(S.alphaMap.value=A.alphaMap,t(A.alphaMap,S.alphaMapTransform)),A.bumpMap&&(S.bumpMap.value=A.bumpMap,t(A.bumpMap,S.bumpMapTransform),S.bumpScale.value=A.bumpScale,A.side===to&&(S.bumpScale.value*=-1)),A.normalMap&&(S.normalMap.value=A.normalMap,t(A.normalMap,S.normalMapTransform),S.normalScale.value.copy(A.normalScale),A.side===to&&S.normalScale.value.negate()),A.displacementMap&&(S.displacementMap.value=A.displacementMap,t(A.displacementMap,S.displacementMapTransform),S.displacementScale.value=A.displacementScale,S.displacementBias.value=A.displacementBias),A.emissiveMap&&(S.emissiveMap.value=A.emissiveMap,t(A.emissiveMap,S.emissiveMapTransform)),A.specularMap&&(S.specularMap.value=A.specularMap,t(A.specularMap,S.specularMapTransform)),A.alphaTest>0&&(S.alphaTest.value=A.alphaTest);const b=e.get(A).envMap;if(b&&(S.envMap.value=b,S.flipEnvMap.value=b.isCubeTexture&&b.isRenderTargetTexture===!1?-1:1,S.reflectivity.value=A.reflectivity,S.ior.value=A.ior,S.refractionRatio.value=A.refractionRatio),A.lightMap){S.lightMap.value=A.lightMap;const C=n._useLegacyLights===!0?Math.PI:1;S.lightMapIntensity.value=A.lightMapIntensity*C,t(A.lightMap,S.lightMapTransform)}A.aoMap&&(S.aoMap.value=A.aoMap,S.aoMapIntensity.value=A.aoMapIntensity,t(A.aoMap,S.aoMapTransform))}function o(S,A){S.diffuse.value.copy(A.color),S.opacity.value=A.opacity,A.map&&(S.map.value=A.map,t(A.map,S.mapTransform))}function a(S,A){S.dashSize.value=A.dashSize,S.totalSize.value=A.dashSize+A.gapSize,S.scale.value=A.scale}function l(S,A,b,C){S.diffuse.value.copy(A.color),S.opacity.value=A.opacity,S.size.value=A.size*b,S.scale.value=C*.5,A.map&&(S.map.value=A.map,t(A.map,S.uvTransform)),A.alphaMap&&(S.alphaMap.value=A.alphaMap,t(A.alphaMap,S.alphaMapTransform)),A.alphaTest>0&&(S.alphaTest.value=A.alphaTest)}function u(S,A){S.diffuse.value.copy(A.color),S.opacity.value=A.opacity,S.rotation.value=A.rotation,A.map&&(S.map.value=A.map,t(A.map,S.mapTransform)),A.alphaMap&&(S.alphaMap.value=A.alphaMap,t(A.alphaMap,S.alphaMapTransform)),A.alphaTest>0&&(S.alphaTest.value=A.alphaTest)}function d(S,A){S.specular.value.copy(A.specular),S.shininess.value=Math.max(A.shininess,1e-4)}function h(S,A){A.gradientMap&&(S.gradientMap.value=A.gradientMap)}function p(S,A){S.metalness.value=A.metalness,A.metalnessMap&&(S.metalnessMap.value=A.metalnessMap,t(A.metalnessMap,S.metalnessMapTransform)),S.roughness.value=A.roughness,A.roughnessMap&&(S.roughnessMap.value=A.roughnessMap,t(A.roughnessMap,S.roughnessMapTransform)),e.get(A).envMap&&(S.envMapIntensity.value=A.envMapIntensity)}function v(S,A,b){S.ior.value=A.ior,A.sheen>0&&(S.sheenColor.value.copy(A.sheenColor).multiplyScalar(A.sheen),S.sheenRoughness.value=A.sheenRoughness,A.sheenColorMap&&(S.sheenColorMap.value=A.sheenColorMap,t(A.sheenColorMap,S.sheenColorMapTransform)),A.sheenRoughnessMap&&(S.sheenRoughnessMap.value=A.sheenRoughnessMap,t(A.sheenRoughnessMap,S.sheenRoughnessMapTransform))),A.clearcoat>0&&(S.clearcoat.value=A.clearcoat,S.clearcoatRoughness.value=A.clearcoatRoughness,A.clearcoatMap&&(S.clearcoatMap.value=A.clearcoatMap,t(A.clearcoatMap,S.clearcoatMapTransform)),A.clearcoatRoughnessMap&&(S.clearcoatRoughnessMap.value=A.clearcoatRoughnessMap,t(A.clearcoatRoughnessMap,S.clearcoatRoughnessMapTransform)),A.clearcoatNormalMap&&(S.clearcoatNormalMap.value=A.clearcoatNormalMap,t(A.clearcoatNormalMap,S.clearcoatNormalMapTransform),S.clearcoatNormalScale.value.copy(A.clearcoatNormalScale),A.side===to&&S.clearcoatNormalScale.value.negate())),A.iridescence>0&&(S.iridescence.value=A.iridescence,S.iridescenceIOR.value=A.iridescenceIOR,S.iridescenceThicknessMinimum.value=A.iridescenceThicknessRange[0],S.iridescenceThicknessMaximum.value=A.iridescenceThicknessRange[1],A.iridescenceMap&&(S.iridescenceMap.value=A.iridescenceMap,t(A.iridescenceMap,S.iridescenceMapTransform)),A.iridescenceThicknessMap&&(S.iridescenceThicknessMap.value=A.iridescenceThicknessMap,t(A.iridescenceThicknessMap,S.iridescenceThicknessMapTransform))),A.transmission>0&&(S.transmission.value=A.transmission,S.transmissionSamplerMap.value=b.texture,S.transmissionSamplerSize.value.set(b.width,b.height),A.transmissionMap&&(S.transmissionMap.value=A.transmissionMap,t(A.transmissionMap,S.transmissionMapTransform)),S.thickness.value=A.thickness,A.thicknessMap&&(S.thicknessMap.value=A.thicknessMap,t(A.thicknessMap,S.thicknessMapTransform)),S.attenuationDistance.value=A.attenuationDistance,S.attenuationColor.value.copy(A.attenuationColor)),A.anisotropy>0&&(S.anisotropyVector.value.set(A.anisotropy*Math.cos(A.anisotropyRotation),A.anisotropy*Math.sin(A.anisotropyRotation)),A.anisotropyMap&&(S.anisotropyMap.value=A.anisotropyMap,t(A.anisotropyMap,S.anisotropyMapTransform))),S.specularIntensity.value=A.specularIntensity,S.specularColor.value.copy(A.specularColor),A.specularColorMap&&(S.specularColorMap.value=A.specularColorMap,t(A.specularColorMap,S.specularColorMapTransform)),A.specularIntensityMap&&(S.specularIntensityMap.value=A.specularIntensityMap,t(A.specularIntensityMap,S.specularIntensityMapTransform))}function _(S,A){A.matcap&&(S.matcap.value=A.matcap)}function w(S,A){const b=e.get(A).light;S.referencePosition.value.setFromMatrixPosition(b.matrixWorld),S.nearDistance.value=b.shadow.camera.near,S.farDistance.value=b.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function LW(n,e,t,i){let r={},s={},o=[];const a=t.isWebGL2?n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(b,C){const P=C.program;i.uniformBlockBinding(b,P)}function u(b,C){let P=r[b.id];P===void 0&&(_(b),P=d(b),r[b.id]=P,b.addEventListener("dispose",S));const k=C.program;i.updateUBOMapping(b,k);const L=e.render.frame;s[b.id]!==L&&(p(b),s[b.id]=L)}function d(b){const C=h();b.__bindingPointIndex=C;const P=n.createBuffer(),k=b.__size,L=b.usage;return n.bindBuffer(n.UNIFORM_BUFFER,P),n.bufferData(n.UNIFORM_BUFFER,k,L),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,C,P),P}function h(){for(let b=0;b<a;b++)if(o.indexOf(b)===-1)return o.push(b),b;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function p(b){const C=r[b.id],P=b.uniforms,k=b.__cache;n.bindBuffer(n.UNIFORM_BUFFER,C);for(let L=0,N=P.length;L<N;L++){const O=Array.isArray(P[L])?P[L]:[P[L]];for(let D=0,U=O.length;D<U;D++){const X=O[D];if(v(X,L,D,k)===!0){const Z=X.__offset,he=Array.isArray(X.value)?X.value:[X.value];let Q=0;for(let ue=0;ue<he.length;ue++){const re=he[ue],ye=w(re);typeof re=="number"||typeof re=="boolean"?(X.__data[0]=re,n.bufferSubData(n.UNIFORM_BUFFER,Z+Q,X.__data)):re.isMatrix3?(X.__data[0]=re.elements[0],X.__data[1]=re.elements[1],X.__data[2]=re.elements[2],X.__data[3]=0,X.__data[4]=re.elements[3],X.__data[5]=re.elements[4],X.__data[6]=re.elements[5],X.__data[7]=0,X.__data[8]=re.elements[6],X.__data[9]=re.elements[7],X.__data[10]=re.elements[8],X.__data[11]=0):(re.toArray(X.__data,Q),Q+=ye.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,Z,X.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function v(b,C,P,k){const L=b.value,N=C+"_"+P;if(k[N]===void 0)return typeof L=="number"||typeof L=="boolean"?k[N]=L:k[N]=L.clone(),!0;{const O=k[N];if(typeof L=="number"||typeof L=="boolean"){if(O!==L)return k[N]=L,!0}else if(O.equals(L)===!1)return O.copy(L),!0}return!1}function _(b){const C=b.uniforms;let P=0;const k=16;for(let N=0,O=C.length;N<O;N++){const D=Array.isArray(C[N])?C[N]:[C[N]];for(let U=0,X=D.length;U<X;U++){const Z=D[U],he=Array.isArray(Z.value)?Z.value:[Z.value];for(let Q=0,ue=he.length;Q<ue;Q++){const re=he[Q],ye=w(re),$=P%k;$!==0&&k-$<ye.boundary&&(P+=k-$),Z.__data=new Float32Array(ye.storage/Float32Array.BYTES_PER_ELEMENT),Z.__offset=P,P+=ye.storage}}}const L=P%k;return L>0&&(P+=k-L),b.__size=P,b.__cache={},this}function w(b){const C={boundary:0,storage:0};return typeof b=="number"||typeof b=="boolean"?(C.boundary=4,C.storage=4):b.isVector2?(C.boundary=8,C.storage=8):b.isVector3||b.isColor?(C.boundary=16,C.storage=12):b.isVector4?(C.boundary=16,C.storage=16):b.isMatrix3?(C.boundary=48,C.storage=48):b.isMatrix4?(C.boundary=64,C.storage=64):b.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",b),C}function S(b){const C=b.target;C.removeEventListener("dispose",S);const P=o.indexOf(C.__bindingPointIndex);o.splice(P,1),n.deleteBuffer(r[C.id]),delete r[C.id],delete s[C.id]}function A(){for(const b in r)n.deleteBuffer(r[b]);o=[],r={},s={}}return{bind:l,update:u,dispose:A}}class ZA{constructor(e={}){const{canvas:t=cF(),context:i=null,depth:r=!0,stencil:s=!0,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:u=!1,powerPreference:d="default",failIfMajorPerformanceCaveat:h=!1}=e;this.isWebGLRenderer=!0;let p;i!==null?p=i.getContextAttributes().alpha:p=o;const v=new Uint32Array(4),_=new Int32Array(4);let w=null,S=null;const A=[],b=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Er,this._useLegacyLights=!1,this.toneMapping=Jl,this.toneMappingExposure=1;const C=this;let P=!1,k=0,L=0,N=null,O=-1,D=null;const U=new li,X=new li;let Z=null;const he=new St(0);let Q=0,ue=t.width,re=t.height,ye=1,$=null,oe=null;const W=new li(0,0,ue,re),J=new li(0,0,ue,re);let se=!1;const me=new ky;let Se=!1,ke=!1,Ie=null;const ze=new dn,je=new Je,at=new te,ut={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function gt(){return N===null?ye:1}let fe=i;function Fe(G,ee){for(let ne=0;ne<G.length;ne++){const de=G[ne],le=t.getContext(de,ee);if(le!==null)return le}return null}try{const G={alpha:!0,depth:r,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:u,powerPreference:d,failIfMajorPerformanceCaveat:h};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${Rg}`),t.addEventListener("webglcontextlost",Me,!1),t.addEventListener("webglcontextrestored",pe,!1),t.addEventListener("webglcontextcreationerror",tt,!1),fe===null){const ee=["webgl2","webgl","experimental-webgl"];if(C.isWebGL1Renderer===!0&&ee.shift(),fe=Fe(ee,G),fe===null)throw Fe(ee)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&fe instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),fe.getShaderPrecisionFormat===void 0&&(fe.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(G){throw console.error("THREE.WebGLRenderer: "+G.message),G}let Be,$e,Oe,xe,ct,j,Y,we,Qe,Ye,qe,yt,ft,st,Rt,Ot,Xe,fn,Ht,Kt,xt,Tt,ge,He;function rt(){Be=new X6(fe),$e=new G6(fe,Be,e),Be.init($e),Tt=new AF(fe,Be,$e),Oe=new bW(fe,Be,$e),xe=new Q6(fe),ct=new gW,j=new RW(fe,Be,Oe,ct,$e,Tt,xe),Y=new V6(C),we=new J6(C),Qe=new rV(fe,$e),ge=new O6(fe,Be,Qe,$e),Ye=new Y6(fe,Qe,xe,ge),qe=new e9(fe,Ye,Qe,xe),Ht=new j6(fe,$e,j),Ot=new z6(ct),yt=new mW(C,Y,we,Be,$e,ge,Ot),ft=new DW(C,ct),st=new yW,Rt=new EW(Be,$e),fn=new U6(C,Y,we,Oe,qe,p,l),Xe=new CW(C,qe,$e),He=new LW(fe,xe,$e,Oe),Kt=new H6(fe,Be,xe,$e),xt=new K6(fe,Be,xe,$e),xe.programs=yt.programs,C.capabilities=$e,C.extensions=Be,C.properties=ct,C.renderLists=st,C.shadowMap=Xe,C.state=Oe,C.info=xe}rt();const Ze=new IW(C,fe);this.xr=Ze,this.getContext=function(){return fe},this.getContextAttributes=function(){return fe.getContextAttributes()},this.forceContextLoss=function(){const G=Be.get("WEBGL_lose_context");G&&G.loseContext()},this.forceContextRestore=function(){const G=Be.get("WEBGL_lose_context");G&&G.restoreContext()},this.getPixelRatio=function(){return ye},this.setPixelRatio=function(G){G!==void 0&&(ye=G,this.setSize(ue,re,!1))},this.getSize=function(G){return G.set(ue,re)},this.setSize=function(G,ee,ne=!0){if(Ze.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}ue=G,re=ee,t.width=Math.floor(G*ye),t.height=Math.floor(ee*ye),ne===!0&&(t.style.width=G+"px",t.style.height=ee+"px"),this.setViewport(0,0,G,ee)},this.getDrawingBufferSize=function(G){return G.set(ue*ye,re*ye).floor()},this.setDrawingBufferSize=function(G,ee,ne){ue=G,re=ee,ye=ne,t.width=Math.floor(G*ne),t.height=Math.floor(ee*ne),this.setViewport(0,0,G,ee)},this.getCurrentViewport=function(G){return G.copy(U)},this.getViewport=function(G){return G.copy(W)},this.setViewport=function(G,ee,ne,de){G.isVector4?W.set(G.x,G.y,G.z,G.w):W.set(G,ee,ne,de),Oe.viewport(U.copy(W).multiplyScalar(ye).floor())},this.getScissor=function(G){return G.copy(J)},this.setScissor=function(G,ee,ne,de){G.isVector4?J.set(G.x,G.y,G.z,G.w):J.set(G,ee,ne,de),Oe.scissor(X.copy(J).multiplyScalar(ye).floor())},this.getScissorTest=function(){return se},this.setScissorTest=function(G){Oe.setScissorTest(se=G)},this.setOpaqueSort=function(G){$=G},this.setTransparentSort=function(G){oe=G},this.getClearColor=function(G){return G.copy(fn.getClearColor())},this.setClearColor=function(){fn.setClearColor.apply(fn,arguments)},this.getClearAlpha=function(){return fn.getClearAlpha()},this.setClearAlpha=function(){fn.setClearAlpha.apply(fn,arguments)},this.clear=function(G=!0,ee=!0,ne=!0){let de=0;if(G){let le=!1;if(N!==null){const be=N.texture.format;le=be===PC||be===RC||be===bC}if(le){const be=N.texture.type,Le=be===Qo||be===zl||be===WA||be===xd||be===TC||be===MC,Ge=fn.getClearColor(),Ce=fn.getClearAlpha(),pt=Ge.r,Ke=Ge.g,et=Ge.b;Le?(v[0]=pt,v[1]=Ke,v[2]=et,v[3]=Ce,fe.clearBufferuiv(fe.COLOR,0,v)):(_[0]=pt,_[1]=Ke,_[2]=et,_[3]=Ce,fe.clearBufferiv(fe.COLOR,0,_))}else de|=fe.COLOR_BUFFER_BIT}ee&&(de|=fe.DEPTH_BUFFER_BIT),ne&&(de|=fe.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),fe.clear(de)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Me,!1),t.removeEventListener("webglcontextrestored",pe,!1),t.removeEventListener("webglcontextcreationerror",tt,!1),st.dispose(),Rt.dispose(),ct.dispose(),Y.dispose(),we.dispose(),qe.dispose(),ge.dispose(),He.dispose(),yt.dispose(),Ze.dispose(),Ze.removeEventListener("sessionstart",Mt),Ze.removeEventListener("sessionend",Dt),Ie&&(Ie.dispose(),Ie=null),ot.stop()};function Me(G){G.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),P=!0}function pe(){console.log("THREE.WebGLRenderer: Context Restored."),P=!1;const G=xe.autoReset,ee=Xe.enabled,ne=Xe.autoUpdate,de=Xe.needsUpdate,le=Xe.type;rt(),xe.autoReset=G,Xe.enabled=ee,Xe.autoUpdate=ne,Xe.needsUpdate=de,Xe.type=le}function tt(G){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",G.statusMessage)}function dt(G){const ee=G.target;ee.removeEventListener("dispose",dt),zt(ee)}function zt(G){Pt(G),ct.remove(G)}function Pt(G){const ee=ct.get(G).programs;ee!==void 0&&(ee.forEach(function(ne){yt.releaseProgram(ne)}),G.isShaderMaterial&&yt.releaseShaderCache(G))}this.renderBufferDirect=function(G,ee,ne,de,le,be){ee===null&&(ee=ut);const Le=le.isMesh&&le.matrixWorld.determinant()<0,Ge=z(G,ee,ne,de,le);Oe.setMaterial(de,Le);let Ce=ne.index,pt=1;if(de.wireframe===!0){if(Ce=Ye.getWireframeAttribute(ne),Ce===void 0)return;pt=2}const Ke=ne.drawRange,et=ne.attributes.position;let It=Ke.start*pt,Jt=(Ke.start+Ke.count)*pt;be!==null&&(It=Math.max(It,be.start*pt),Jt=Math.min(Jt,(be.start+be.count)*pt)),Ce!==null?(It=Math.max(It,0),Jt=Math.min(Jt,Ce.count)):et!=null&&(It=Math.max(It,0),Jt=Math.min(Jt,et.count));const Ut=Jt-It;if(Ut<0||Ut===1/0)return;ge.setup(le,de,Ge,ne,Ce);let en,_t=Kt;if(Ce!==null&&(en=Qe.get(Ce),_t=xt,_t.setIndex(en)),le.isMesh)de.wireframe===!0?(Oe.setLineWidth(de.wireframeLinewidth*gt()),_t.setMode(fe.LINES)):_t.setMode(fe.TRIANGLES);else if(le.isLine){let ht=de.linewidth;ht===void 0&&(ht=1),Oe.setLineWidth(ht*gt()),le.isLineSegments?_t.setMode(fe.LINES):le.isLineLoop?_t.setMode(fe.LINE_LOOP):_t.setMode(fe.LINE_STRIP)}else le.isPoints?_t.setMode(fe.POINTS):le.isSprite&&_t.setMode(fe.TRIANGLES);if(le.isBatchedMesh)_t.renderMultiDraw(le._multiDrawStarts,le._multiDrawCounts,le._multiDrawCount);else if(le.isInstancedMesh)_t.renderInstances(It,Ut,le.count);else if(ne.isInstancedBufferGeometry){const ht=ne._maxInstanceCount!==void 0?ne._maxInstanceCount:1/0,cn=Math.min(ne.instanceCount,ht);_t.renderInstances(It,Ut,cn)}else _t.render(It,Ut)};function rn(G,ee,ne){G.transparent===!0&&G.side===Ma&&G.forceSinglePass===!1?(G.side=to,G.needsUpdate=!0,kt(G,ee,ne),G.side=Zl,G.needsUpdate=!0,kt(G,ee,ne),G.side=Ma):kt(G,ee,ne)}this.compile=function(G,ee,ne=null){ne===null&&(ne=G),S=Rt.get(ne),S.init(),b.push(S),ne.traverseVisible(function(le){le.isLight&&le.layers.test(ee.layers)&&(S.pushLight(le),le.castShadow&&S.pushShadow(le))}),G!==ne&&G.traverseVisible(function(le){le.isLight&&le.layers.test(ee.layers)&&(S.pushLight(le),le.castShadow&&S.pushShadow(le))}),S.setupLights(C._useLegacyLights);const de=new Set;return G.traverse(function(le){const be=le.material;if(be)if(Array.isArray(be))for(let Le=0;Le<be.length;Le++){const Ge=be[Le];rn(Ge,ne,le),de.add(Ge)}else rn(be,ne,le),de.add(be)}),b.pop(),S=null,de},this.compileAsync=function(G,ee,ne=null){const de=this.compile(G,ee,ne);return new Promise(le=>{function be(){if(de.forEach(function(Le){ct.get(Le).currentProgram.isReady()&&de.delete(Le)}),de.size===0){le(G);return}setTimeout(be,10)}Be.get("KHR_parallel_shader_compile")!==null?be():setTimeout(be,10)})};let gn=null;function Ct(G){gn&&gn(G)}function Mt(){ot.stop()}function Dt(){ot.start()}const ot=new gF;ot.setAnimationLoop(Ct),typeof self<"u"&&ot.setContext(self),this.setAnimationLoop=function(G){gn=G,Ze.setAnimationLoop(G),G===null?ot.stop():ot.start()},Ze.addEventListener("sessionstart",Mt),Ze.addEventListener("sessionend",Dt),this.render=function(G,ee){if(ee!==void 0&&ee.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(P===!0)return;G.matrixWorldAutoUpdate===!0&&G.updateMatrixWorld(),ee.parent===null&&ee.matrixWorldAutoUpdate===!0&&ee.updateMatrixWorld(),Ze.enabled===!0&&Ze.isPresenting===!0&&(Ze.cameraAutoUpdate===!0&&Ze.updateCamera(ee),ee=Ze.getCamera()),G.isScene===!0&&G.onBeforeRender(C,G,ee,N),S=Rt.get(G,b.length),S.init(),b.push(S),ze.multiplyMatrices(ee.projectionMatrix,ee.matrixWorldInverse),me.setFromProjectionMatrix(ze),ke=this.localClippingEnabled,Se=Ot.init(this.clippingPlanes,ke),w=st.get(G,A.length),w.init(),A.push(w),qt(G,ee,0,C.sortObjects),w.finish(),C.sortObjects===!0&&w.sort($,oe),this.info.render.frame++,Se===!0&&Ot.beginShadows();const ne=S.state.shadowsArray;if(Xe.render(ne,G,ee),Se===!0&&Ot.endShadows(),this.info.autoReset===!0&&this.info.reset(),fn.render(w,G),S.setupLights(C._useLegacyLights),ee.isArrayCamera){const de=ee.cameras;for(let le=0,be=de.length;le<be;le++){const Le=de[le];Vt(w,G,Le,Le.viewport)}}else Vt(w,G,ee);N!==null&&(j.updateMultisampleRenderTarget(N),j.updateRenderTargetMipmap(N)),G.isScene===!0&&G.onAfterRender(C,G,ee),ge.resetDefaultState(),O=-1,D=null,b.pop(),b.length>0?S=b[b.length-1]:S=null,A.pop(),A.length>0?w=A[A.length-1]:w=null};function qt(G,ee,ne,de){if(G.visible===!1)return;if(G.layers.test(ee.layers)){if(G.isGroup)ne=G.renderOrder;else if(G.isLOD)G.autoUpdate===!0&&G.update(ee);else if(G.isLight)S.pushLight(G),G.castShadow&&S.pushShadow(G);else if(G.isSprite){if(!G.frustumCulled||me.intersectsSprite(G)){de&&at.setFromMatrixPosition(G.matrixWorld).applyMatrix4(ze);const Le=qe.update(G),Ge=G.material;Ge.visible&&w.push(G,Le,Ge,ne,at.z,null)}}else if((G.isMesh||G.isLine||G.isPoints)&&(!G.frustumCulled||me.intersectsObject(G))){const Le=qe.update(G),Ge=G.material;if(de&&(G.boundingSphere!==void 0?(G.boundingSphere===null&&G.computeBoundingSphere(),at.copy(G.boundingSphere.center)):(Le.boundingSphere===null&&Le.computeBoundingSphere(),at.copy(Le.boundingSphere.center)),at.applyMatrix4(G.matrixWorld).applyMatrix4(ze)),Array.isArray(Ge)){const Ce=Le.groups;for(let pt=0,Ke=Ce.length;pt<Ke;pt++){const et=Ce[pt],It=Ge[et.materialIndex];It&&It.visible&&w.push(G,Le,It,ne,at.z,et)}}else Ge.visible&&w.push(G,Le,Ge,ne,at.z,null)}}const be=G.children;for(let Le=0,Ge=be.length;Le<Ge;Le++)qt(be[Le],ee,ne,de)}function Vt(G,ee,ne,de){const le=G.opaque,be=G.transmissive,Le=G.transparent;S.setupLightsView(ne),Se===!0&&Ot.setGlobalState(C.clippingPlanes,ne),be.length>0&&jt(le,be,ee,ne),de&&Oe.viewport(U.copy(de)),le.length>0&&On(le,ee,ne),be.length>0&&On(be,ee,ne),Le.length>0&&On(Le,ee,ne),Oe.buffers.depth.setTest(!0),Oe.buffers.depth.setMask(!0),Oe.buffers.color.setMask(!0),Oe.setPolygonOffset(!1)}function jt(G,ee,ne,de){if((ne.isScene===!0?ne.overrideMaterial:null)!==null)return;const be=$e.isWebGL2;Ie===null&&(Ie=new no(1,1,{generateMipmaps:!0,type:Be.has("EXT_color_buffer_half_float")?Yr:Qo,minFilter:jl,samples:be?4:0})),C.getDrawingBufferSize(je),be?Ie.setSize(je.x,je.y):Ie.setSize($w(je.x),$w(je.y));const Le=C.getRenderTarget();C.setRenderTarget(Ie),C.getClearColor(he),Q=C.getClearAlpha(),Q<1&&C.setClearColor(16777215,.5),C.clear();const Ge=C.toneMapping;C.toneMapping=Jl,On(G,ne,de),j.updateMultisampleRenderTarget(Ie),j.updateRenderTargetMipmap(Ie);let Ce=!1;for(let pt=0,Ke=ee.length;pt<Ke;pt++){const et=ee[pt],It=et.object,Jt=et.geometry,Ut=et.material,en=et.group;if(Ut.side===Ma&&It.layers.test(de.layers)){const _t=Ut.side;Ut.side=to,Ut.needsUpdate=!0,tn(It,ne,de,Jt,Ut,en),Ut.side=_t,Ut.needsUpdate=!0,Ce=!0}}Ce===!0&&(j.updateMultisampleRenderTarget(Ie),j.updateRenderTargetMipmap(Ie)),C.setRenderTarget(Le),C.setClearColor(he,Q),C.toneMapping=Ge}function On(G,ee,ne){const de=ee.isScene===!0?ee.overrideMaterial:null;for(let le=0,be=G.length;le<be;le++){const Le=G[le],Ge=Le.object,Ce=Le.geometry,pt=de===null?Le.material:de,Ke=Le.group;Ge.layers.test(ne.layers)&&tn(Ge,ee,ne,Ce,pt,Ke)}}function tn(G,ee,ne,de,le,be){G.onBeforeRender(C,ee,ne,de,le,be),G.modelViewMatrix.multiplyMatrices(ne.matrixWorldInverse,G.matrixWorld),G.normalMatrix.getNormalMatrix(G.modelViewMatrix),le.onBeforeRender(C,ee,ne,de,G,be),le.transparent===!0&&le.side===Ma&&le.forceSinglePass===!1?(le.side=to,le.needsUpdate=!0,C.renderBufferDirect(ne,ee,de,le,G,be),le.side=Zl,le.needsUpdate=!0,C.renderBufferDirect(ne,ee,de,le,G,be),le.side=Ma):C.renderBufferDirect(ne,ee,de,le,G,be),G.onAfterRender(C,ee,ne,de,le,be)}function kt(G,ee,ne){ee.isScene!==!0&&(ee=ut);const de=ct.get(G),le=S.state.lights,be=S.state.shadowsArray,Le=le.state.version,Ge=yt.getParameters(G,le.state,be,ee,ne),Ce=yt.getProgramCacheKey(Ge);let pt=de.programs;de.environment=G.isMeshStandardMaterial?ee.environment:null,de.fog=ee.fog,de.envMap=(G.isMeshStandardMaterial?we:Y).get(G.envMap||de.environment),pt===void 0&&(G.addEventListener("dispose",dt),pt=new Map,de.programs=pt);let Ke=pt.get(Ce);if(Ke!==void 0){if(de.currentProgram===Ke&&de.lightsStateVersion===Le)return jn(G,Ge),Ke}else Ge.uniforms=yt.getUniforms(G),G.onBuild(ne,Ge,C),G.onBeforeCompile(Ge,C),Ke=yt.acquireProgram(Ge,Ce),pt.set(Ce,Ke),de.uniforms=Ge.uniforms;const et=de.uniforms;return(!G.isShaderMaterial&&!G.isRawShaderMaterial||G.clipping===!0)&&(et.clippingPlanes=Ot.uniform),jn(G,Ge),de.needsLights=ve(G),de.lightsStateVersion=Le,de.needsLights&&(et.ambientLightColor.value=le.state.ambient,et.lightProbe.value=le.state.probe,et.directionalLights.value=le.state.directional,et.directionalLightShadows.value=le.state.directionalShadow,et.spotLights.value=le.state.spot,et.spotLightShadows.value=le.state.spotShadow,et.rectAreaLights.value=le.state.rectArea,et.ltc_1.value=le.state.rectAreaLTC1,et.ltc_2.value=le.state.rectAreaLTC2,et.pointLights.value=le.state.point,et.pointLightShadows.value=le.state.pointShadow,et.hemisphereLights.value=le.state.hemi,et.directionalShadowMap.value=le.state.directionalShadowMap,et.directionalShadowMatrix.value=le.state.directionalShadowMatrix,et.spotShadowMap.value=le.state.spotShadowMap,et.spotLightMatrix.value=le.state.spotLightMatrix,et.spotLightMap.value=le.state.spotLightMap,et.pointShadowMap.value=le.state.pointShadowMap,et.pointShadowMatrix.value=le.state.pointShadowMatrix),de.currentProgram=Ke,de.uniformsList=null,Ke}function Ai(G){if(G.uniformsList===null){const ee=G.currentProgram.getUniforms();G.uniformsList=Rw.seqWithValue(ee.seq,G.uniforms)}return G.uniformsList}function jn(G,ee){const ne=ct.get(G);ne.outputColorSpace=ee.outputColorSpace,ne.batching=ee.batching,ne.instancing=ee.instancing,ne.instancingColor=ee.instancingColor,ne.skinning=ee.skinning,ne.morphTargets=ee.morphTargets,ne.morphNormals=ee.morphNormals,ne.morphColors=ee.morphColors,ne.morphTargetsCount=ee.morphTargetsCount,ne.numClippingPlanes=ee.numClippingPlanes,ne.numIntersection=ee.numClipIntersection,ne.vertexAlphas=ee.vertexAlphas,ne.vertexTangents=ee.vertexTangents,ne.toneMapping=ee.toneMapping}function z(G,ee,ne,de,le){ee.isScene!==!0&&(ee=ut),j.resetTextureUnits();const be=ee.fog,Le=de.isMeshStandardMaterial?ee.environment:null,Ge=N===null?C.outputColorSpace:N.isXRRenderTarget===!0?N.texture.colorSpace:jo,Ce=(de.isMeshStandardMaterial?we:Y).get(de.envMap||Le),pt=de.vertexColors===!0&&!!ne.attributes.color&&ne.attributes.color.itemSize===4,Ke=!!ne.attributes.tangent&&(!!de.normalMap||de.anisotropy>0),et=!!ne.morphAttributes.position,It=!!ne.morphAttributes.normal,Jt=!!ne.morphAttributes.color;let Ut=Jl;de.toneMapped&&(N===null||N.isXRRenderTarget===!0)&&(Ut=C.toneMapping);const en=ne.morphAttributes.position||ne.morphAttributes.normal||ne.morphAttributes.color,_t=en!==void 0?en.length:0,ht=ct.get(de),cn=S.state.lights;if(Se===!0&&(ke===!0||G!==D)){const _n=G===D&&de.id===O;Ot.setState(de,G,_n)}let sn=!1;de.version===ht.__version?(ht.needsLights&&ht.lightsStateVersion!==cn.state.version||ht.outputColorSpace!==Ge||le.isBatchedMesh&&ht.batching===!1||!le.isBatchedMesh&&ht.batching===!0||le.isInstancedMesh&&ht.instancing===!1||!le.isInstancedMesh&&ht.instancing===!0||le.isSkinnedMesh&&ht.skinning===!1||!le.isSkinnedMesh&&ht.skinning===!0||le.isInstancedMesh&&ht.instancingColor===!0&&le.instanceColor===null||le.isInstancedMesh&&ht.instancingColor===!1&&le.instanceColor!==null||ht.envMap!==Ce||de.fog===!0&&ht.fog!==be||ht.numClippingPlanes!==void 0&&(ht.numClippingPlanes!==Ot.numPlanes||ht.numIntersection!==Ot.numIntersection)||ht.vertexAlphas!==pt||ht.vertexTangents!==Ke||ht.morphTargets!==et||ht.morphNormals!==It||ht.morphColors!==Jt||ht.toneMapping!==Ut||$e.isWebGL2===!0&&ht.morphTargetsCount!==_t)&&(sn=!0):(sn=!0,ht.__version=de.version);let hn=ht.currentProgram;sn===!0&&(hn=kt(de,ee,le));let ei=!1,vi=!1,ui=!1;const Pn=hn.getUniforms(),An=ht.uniforms;if(Oe.useProgram(hn.program)&&(ei=!0,vi=!0,ui=!0),de.id!==O&&(O=de.id,vi=!0),ei||D!==G){Pn.setValue(fe,"projectionMatrix",G.projectionMatrix),Pn.setValue(fe,"viewMatrix",G.matrixWorldInverse);const _n=Pn.map.cameraPosition;_n!==void 0&&_n.setValue(fe,at.setFromMatrixPosition(G.matrixWorld)),$e.logarithmicDepthBuffer&&Pn.setValue(fe,"logDepthBufFC",2/(Math.log(G.far+1)/Math.LN2)),(de.isMeshPhongMaterial||de.isMeshToonMaterial||de.isMeshLambertMaterial||de.isMeshBasicMaterial||de.isMeshStandardMaterial||de.isShaderMaterial)&&Pn.setValue(fe,"isOrthographic",G.isOrthographicCamera===!0),D!==G&&(D=G,vi=!0,ui=!0)}if(le.isSkinnedMesh){Pn.setOptional(fe,le,"bindMatrix"),Pn.setOptional(fe,le,"bindMatrixInverse");const _n=le.skeleton;_n&&($e.floatVertexTextures?(_n.boneTexture===null&&_n.computeBoneTexture(),Pn.setValue(fe,"boneTexture",_n.boneTexture,j)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}le.isBatchedMesh&&(Pn.setOptional(fe,le,"batchingTexture"),Pn.setValue(fe,"batchingTexture",le._matricesTexture,j));const Pi=ne.morphAttributes;if((Pi.position!==void 0||Pi.normal!==void 0||Pi.color!==void 0&&$e.isWebGL2===!0)&&Ht.update(le,ne,hn),(vi||ht.receiveShadow!==le.receiveShadow)&&(ht.receiveShadow=le.receiveShadow,Pn.setValue(fe,"receiveShadow",le.receiveShadow)),de.isMeshGouraudMaterial&&de.envMap!==null&&(An.envMap.value=Ce,An.flipEnvMap.value=Ce.isCubeTexture&&Ce.isRenderTargetTexture===!1?-1:1),vi&&(Pn.setValue(fe,"toneMappingExposure",C.toneMappingExposure),ht.needsLights&&K(An,ui),be&&de.fog===!0&&ft.refreshFogUniforms(An,be),ft.refreshMaterialUniforms(An,de,ye,re,Ie),Rw.upload(fe,Ai(ht),An,j)),de.isShaderMaterial&&de.uniformsNeedUpdate===!0&&(Rw.upload(fe,Ai(ht),An,j),de.uniformsNeedUpdate=!1),de.isSpriteMaterial&&Pn.setValue(fe,"center",le.center),Pn.setValue(fe,"modelViewMatrix",le.modelViewMatrix),Pn.setValue(fe,"normalMatrix",le.normalMatrix),Pn.setValue(fe,"modelMatrix",le.matrixWorld),de.isShaderMaterial||de.isRawShaderMaterial){const _n=de.uniformsGroups;for(let In=0,ci=_n.length;In<ci;In++)if($e.isWebGL2){const ps=_n[In];He.update(ps,hn),He.bind(ps,hn)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return hn}function K(G,ee){G.ambientLightColor.needsUpdate=ee,G.lightProbe.needsUpdate=ee,G.directionalLights.needsUpdate=ee,G.directionalLightShadows.needsUpdate=ee,G.pointLights.needsUpdate=ee,G.pointLightShadows.needsUpdate=ee,G.spotLights.needsUpdate=ee,G.spotLightShadows.needsUpdate=ee,G.rectAreaLights.needsUpdate=ee,G.hemisphereLights.needsUpdate=ee}function ve(G){return G.isMeshLambertMaterial||G.isMeshToonMaterial||G.isMeshPhongMaterial||G.isMeshStandardMaterial||G.isShadowMaterial||G.isShaderMaterial&&G.lights===!0}this.getActiveCubeFace=function(){return k},this.getActiveMipmapLevel=function(){return L},this.getRenderTarget=function(){return N},this.setRenderTargetTextures=function(G,ee,ne){ct.get(G.texture).__webglTexture=ee,ct.get(G.depthTexture).__webglTexture=ne;const de=ct.get(G);de.__hasExternalTextures=!0,de.__hasExternalTextures&&(de.__autoAllocateDepthBuffer=ne===void 0,de.__autoAllocateDepthBuffer||Be.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),de.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(G,ee){const ne=ct.get(G);ne.__webglFramebuffer=ee,ne.__useDefaultFramebuffer=ee===void 0},this.setRenderTarget=function(G,ee=0,ne=0){N=G,k=ee,L=ne;let de=!0,le=null,be=!1,Le=!1;if(G){const Ce=ct.get(G);Ce.__useDefaultFramebuffer!==void 0?(Oe.bindFramebuffer(fe.FRAMEBUFFER,null),de=!1):Ce.__webglFramebuffer===void 0?j.setupRenderTarget(G):Ce.__hasExternalTextures&&j.rebindTextures(G,ct.get(G.texture).__webglTexture,ct.get(G.depthTexture).__webglTexture);const pt=G.texture;(pt.isData3DTexture||pt.isDataArrayTexture||pt.isCompressedArrayTexture)&&(Le=!0);const Ke=ct.get(G).__webglFramebuffer;G.isWebGLCubeRenderTarget?(Array.isArray(Ke[ee])?le=Ke[ee][ne]:le=Ke[ee],be=!0):$e.isWebGL2&&G.samples>0&&j.useMultisampledRTT(G)===!1?le=ct.get(G).__webglMultisampledFramebuffer:Array.isArray(Ke)?le=Ke[ne]:le=Ke,U.copy(G.viewport),X.copy(G.scissor),Z=G.scissorTest}else U.copy(W).multiplyScalar(ye).floor(),X.copy(J).multiplyScalar(ye).floor(),Z=se;if(Oe.bindFramebuffer(fe.FRAMEBUFFER,le)&&$e.drawBuffers&&de&&Oe.drawBuffers(G,le),Oe.viewport(U),Oe.scissor(X),Oe.setScissorTest(Z),be){const Ce=ct.get(G.texture);fe.framebufferTexture2D(fe.FRAMEBUFFER,fe.COLOR_ATTACHMENT0,fe.TEXTURE_CUBE_MAP_POSITIVE_X+ee,Ce.__webglTexture,ne)}else if(Le){const Ce=ct.get(G.texture),pt=ee||0;fe.framebufferTextureLayer(fe.FRAMEBUFFER,fe.COLOR_ATTACHMENT0,Ce.__webglTexture,ne||0,pt)}O=-1},this.readRenderTargetPixels=function(G,ee,ne,de,le,be,Le){if(!(G&&G.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Ge=ct.get(G).__webglFramebuffer;if(G.isWebGLCubeRenderTarget&&Le!==void 0&&(Ge=Ge[Le]),Ge){Oe.bindFramebuffer(fe.FRAMEBUFFER,Ge);try{const Ce=G.texture,pt=Ce.format,Ke=Ce.type;if(pt!==Mr&&Tt.convert(pt)!==fe.getParameter(fe.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const et=Ke===Yr&&(Be.has("EXT_color_buffer_half_float")||$e.isWebGL2&&Be.has("EXT_color_buffer_float"));if(Ke!==Qo&&Tt.convert(Ke)!==fe.getParameter(fe.IMPLEMENTATION_COLOR_READ_TYPE)&&!(Ke===Cr&&($e.isWebGL2||Be.has("OES_texture_float")||Be.has("WEBGL_color_buffer_float")))&&!et){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ee>=0&&ee<=G.width-de&&ne>=0&&ne<=G.height-le&&fe.readPixels(ee,ne,de,le,Tt.convert(pt),Tt.convert(Ke),be)}finally{const Ce=N!==null?ct.get(N).__webglFramebuffer:null;Oe.bindFramebuffer(fe.FRAMEBUFFER,Ce)}}},this.copyFramebufferToTexture=function(G,ee,ne=0){const de=Math.pow(2,-ne),le=Math.floor(ee.image.width*de),be=Math.floor(ee.image.height*de);j.setTexture2D(ee,0),fe.copyTexSubImage2D(fe.TEXTURE_2D,ne,0,0,G.x,G.y,le,be),Oe.unbindTexture()},this.copyTextureToTexture=function(G,ee,ne,de=0){const le=ee.image.width,be=ee.image.height,Le=Tt.convert(ne.format),Ge=Tt.convert(ne.type);j.setTexture2D(ne,0),fe.pixelStorei(fe.UNPACK_FLIP_Y_WEBGL,ne.flipY),fe.pixelStorei(fe.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ne.premultiplyAlpha),fe.pixelStorei(fe.UNPACK_ALIGNMENT,ne.unpackAlignment),ee.isDataTexture?fe.texSubImage2D(fe.TEXTURE_2D,de,G.x,G.y,le,be,Le,Ge,ee.image.data):ee.isCompressedTexture?fe.compressedTexSubImage2D(fe.TEXTURE_2D,de,G.x,G.y,ee.mipmaps[0].width,ee.mipmaps[0].height,Le,ee.mipmaps[0].data):fe.texSubImage2D(fe.TEXTURE_2D,de,G.x,G.y,Le,Ge,ee.image),de===0&&ne.generateMipmaps&&fe.generateMipmap(fe.TEXTURE_2D),Oe.unbindTexture()},this.copyTextureToTexture3D=function(G,ee,ne,de,le=0){if(C.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const be=G.max.x-G.min.x+1,Le=G.max.y-G.min.y+1,Ge=G.max.z-G.min.z+1,Ce=Tt.convert(de.format),pt=Tt.convert(de.type);let Ke;if(de.isData3DTexture)j.setTexture3D(de,0),Ke=fe.TEXTURE_3D;else if(de.isDataArrayTexture||de.isCompressedArrayTexture)j.setTexture2DArray(de,0),Ke=fe.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}fe.pixelStorei(fe.UNPACK_FLIP_Y_WEBGL,de.flipY),fe.pixelStorei(fe.UNPACK_PREMULTIPLY_ALPHA_WEBGL,de.premultiplyAlpha),fe.pixelStorei(fe.UNPACK_ALIGNMENT,de.unpackAlignment);const et=fe.getParameter(fe.UNPACK_ROW_LENGTH),It=fe.getParameter(fe.UNPACK_IMAGE_HEIGHT),Jt=fe.getParameter(fe.UNPACK_SKIP_PIXELS),Ut=fe.getParameter(fe.UNPACK_SKIP_ROWS),en=fe.getParameter(fe.UNPACK_SKIP_IMAGES),_t=ne.isCompressedTexture?ne.mipmaps[le]:ne.image;fe.pixelStorei(fe.UNPACK_ROW_LENGTH,_t.width),fe.pixelStorei(fe.UNPACK_IMAGE_HEIGHT,_t.height),fe.pixelStorei(fe.UNPACK_SKIP_PIXELS,G.min.x),fe.pixelStorei(fe.UNPACK_SKIP_ROWS,G.min.y),fe.pixelStorei(fe.UNPACK_SKIP_IMAGES,G.min.z),ne.isDataTexture||ne.isData3DTexture?fe.texSubImage3D(Ke,le,ee.x,ee.y,ee.z,be,Le,Ge,Ce,pt,_t.data):ne.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),fe.compressedTexSubImage3D(Ke,le,ee.x,ee.y,ee.z,be,Le,Ge,Ce,_t.data)):fe.texSubImage3D(Ke,le,ee.x,ee.y,ee.z,be,Le,Ge,Ce,pt,_t),fe.pixelStorei(fe.UNPACK_ROW_LENGTH,et),fe.pixelStorei(fe.UNPACK_IMAGE_HEIGHT,It),fe.pixelStorei(fe.UNPACK_SKIP_PIXELS,Jt),fe.pixelStorei(fe.UNPACK_SKIP_ROWS,Ut),fe.pixelStorei(fe.UNPACK_SKIP_IMAGES,en),le===0&&de.generateMipmaps&&fe.generateMipmap(Ke),Oe.unbindTexture()},this.initTexture=function(G){G.isCubeTexture?j.setTextureCube(G,0):G.isData3DTexture?j.setTexture3D(G,0):G.isDataArrayTexture||G.isCompressedArrayTexture?j.setTexture2DArray(G,0):j.setTexture2D(G,0),Oe.unbindTexture()},this.resetState=function(){k=0,L=0,N=null,Oe.reset(),ge.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return pl}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=e===XA?"display-p3":"srgb",t.unpackColorSpace=fi.workingColorSpace===Dy?"display-p3":"srgb"}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===Er?Ad:BC}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===Ad?Er:jo}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}class EF extends ZA{}EF.prototype.isWebGL1Renderer=!0;class $A{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new St(e),this.density=t}clone(){return new $A(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class jA{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new St(e),this.near=t,this.far=i}clone(){return new jA(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class Fy extends Jn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t}}class Uy{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=ny,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=Zo()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return console.warn("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Zo()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Zo()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const qs=new te;class Ld{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)qs.fromBufferAttribute(this,t),qs.applyMatrix4(e),this.setXYZ(t,qs.x,qs.y,qs.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)qs.fromBufferAttribute(this,t),qs.applyNormalMatrix(e),this.setXYZ(t,qs.x,qs.y,qs.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)qs.fromBufferAttribute(this,t),qs.transformDirection(e),this.setXYZ(t,qs.x,qs.y,qs.z);return this}setX(e,t){return this.normalized&&(t=bn(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=bn(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=bn(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=bn(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=wo(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=wo(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=wo(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=wo(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=bn(t,this.array),i=bn(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=bn(t,this.array),i=bn(i,this.array),r=bn(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=bn(t,this.array),i=bn(i,this.array),r=bn(r,this.array),s=bn(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new Xn(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Ld(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class qC extends Fr{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new St(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let pm;const G0=new te,mm=new te,gm=new te,vm=new Je,z0=new Je,TF=new dn,Cx=new te,V0=new te,bx=new te,NI=new Je,jE=new Je,kI=new Je;class MF extends Jn{constructor(e=new qC){if(super(),this.isSprite=!0,this.type="Sprite",pm===void 0){pm=new Tn;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new Uy(t,5);pm.setIndex([0,1,2,0,2,3]),pm.setAttribute("position",new Ld(i,3,0,!1)),pm.setAttribute("uv",new Ld(i,2,3,!1))}this.geometry=pm,this.material=e,this.center=new Je(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),mm.setFromMatrixScale(this.matrixWorld),TF.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),gm.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&mm.multiplyScalar(-gm.z);const i=this.material.rotation;let r,s;i!==0&&(s=Math.cos(i),r=Math.sin(i));const o=this.center;Rx(Cx.set(-.5,-.5,0),gm,o,mm,r,s),Rx(V0.set(.5,-.5,0),gm,o,mm,r,s),Rx(bx.set(.5,.5,0),gm,o,mm,r,s),NI.set(0,0),jE.set(1,0),kI.set(1,1);let a=e.ray.intersectTriangle(Cx,V0,bx,!1,G0);if(a===null&&(Rx(V0.set(-.5,.5,0),gm,o,mm,r,s),jE.set(0,1),a=e.ray.intersectTriangle(Cx,bx,V0,!1,G0),a===null))return;const l=e.ray.origin.distanceTo(G0);l<e.near||l>e.far||t.push({distance:l,point:G0.clone(),uv:xo.getInterpolation(G0,Cx,V0,bx,NI,jE,kI,new Je),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function Rx(n,e,t,i,r,s){vm.subVectors(n,t).addScalar(.5).multiply(i),r!==void 0?(z0.x=s*vm.x-r*vm.y,z0.y=r*vm.x+s*vm.y):z0.copy(vm),n.copy(e),n.x+=z0.x,n.y+=z0.y,n.applyMatrix4(TF)}const Px=new te,FI=new te;class CF extends Jn{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let i=0,r=t.length;i<r;i++){const s=t[i];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,i=0){t=Math.abs(t);const r=this.levels;let s;for(s=0;s<r.length&&!(t<r[s].distance);s++);return r.splice(s,0,{distance:t,hysteresis:i,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let i,r;for(i=1,r=t.length;i<r;i++){let s=t[i].distance;if(t[i].object.visible&&(s-=s*t[i].hysteresis),e<s)break}return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){Px.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(Px);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){Px.setFromMatrixPosition(e.matrixWorld),FI.setFromMatrixPosition(this.matrixWorld);const i=Px.distanceTo(FI)/e.zoom;t[0].object.visible=!0;let r,s;for(r=1,s=t.length;r<s;r++){let o=t[r].distance;if(t[r].object.visible&&(o-=o*t[r].hysteresis),i>=o)t[r-1].object.visible=!1,t[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<s;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let r=0,s=i.length;r<s;r++){const o=i[r];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const UI=new te,OI=new li,HI=new li,BW=new te,GI=new dn,Ix=new te,eT=new Qr,zI=new dn,tT=new qh;class JC extends bi{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=A1,this.bindMatrix=new dn,this.bindMatrixInverse=new dn,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new cs),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,Ix),this.boundingBox.expandByPoint(Ix)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Qr),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,Ix),this.boundingSphere.expandByPoint(Ix)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const i=this.material,r=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),eT.copy(this.boundingSphere),eT.applyMatrix4(r),e.ray.intersectsSphere(eT)!==!1&&(zI.copy(r).invert(),tT.copy(e.ray).applyMatrix4(zI),!(this.boundingBox!==null&&tT.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,tT)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new li,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===A1?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===Vk?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,r=this.geometry;OI.fromBufferAttribute(r.attributes.skinIndex,e),HI.fromBufferAttribute(r.attributes.skinWeight,e),UI.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=HI.getComponent(s);if(o!==0){const a=OI.getComponent(s);GI.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),t.addScaledVector(BW.copy(UI).applyMatrix4(GI),o)}}return t.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,t){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,t)}}class eS extends Jn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Sd extends hi{constructor(e=null,t=1,i=1,r,s,o,a,l,u=$i,d=$i,h,p){super(null,o,a,l,u,d,r,s,h,p),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const VI=new dn,NW=new dn;class Oy{constructor(e=[],t=[]){this.uuid=Zo(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new dn)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new dn;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:NW;VI.multiplyMatrices(a,t[s]),VI.toArray(i,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new Oy(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new Sd(t,e,e,Mr,Cr);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const s=e.bones[i];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new eS),this.bones.push(o),this.boneInverses.push(new dn().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let r=0,s=t.length;r<s;r++){const o=t[r];e.bones.push(o.uuid);const a=i[r];e.boneInverses.push(a.toArray())}return e}}class Nh extends Xn{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const ym=new dn,WI=new dn,Dx=[],qI=new cs,kW=new dn,W0=new bi,q0=new Qr;class XC extends bi{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Nh(new Float32Array(i*16),16),this.instanceColor=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,kW)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new cs),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,ym),qI.copy(e.boundingBox).applyMatrix4(ym),this.boundingBox.union(qI)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new Qr),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,ym),q0.copy(e.boundingSphere).applyMatrix4(ym),this.boundingSphere.union(q0)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const i=this.matrixWorld,r=this.count;if(W0.geometry=this.geometry,W0.material=this.material,W0.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),q0.copy(this.boundingSphere),q0.applyMatrix4(i),e.ray.intersectsSphere(q0)!==!1))for(let s=0;s<r;s++){this.getMatrixAt(s,ym),WI.multiplyMatrices(i,ym),W0.matrixWorld=WI,W0.raycast(e,Dx);for(let o=0,a=Dx.length;o<a;o++){const l=Dx[o];l.instanceId=s,l.object=this,t.push(l)}Dx.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Nh(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}function FW(n,e){return n.z-e.z}function UW(n,e){return e.z-n.z}class OW{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t){const i=this.pool,r=this.list;this.index>=i.length&&i.push({start:-1,count:-1,z:-1});const s=i[this.index];r.push(s),this.index++,s.start=e.start,s.count=e.count,s.z=t}reset(){this.list.length=0,this.index=0}}const _m="batchId",Qc=new dn,JI=new dn,HW=new dn,XI=new dn,nT=new ky,Lx=new cs,Uf=new Qr,J0=new te,iT=new OW,Es=new bi,Bx=[];function GW(n,e,t=0){const i=e.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==e.array.constructor){const r=n.count;for(let s=0;s<r;s++)for(let o=0;o<i;o++)e.setComponent(s+t,o,n.getComponent(s,o))}else e.array.set(n.array,t*i);e.needsUpdate=!0}class bF extends bi{get maxGeometryCount(){return this._maxGeometryCount}constructor(e,t,i=t*2,r){super(new Tn,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawRanges=[],this._reservedRanges=[],this._visibility=[],this._active=[],this._bounds=[],this._maxGeometryCount=e,this._maxVertexCount=t,this._maxIndexCount=i,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._visibilityChanged=!0,this._matricesTexture=null,this._initMatricesTexture()}_initMatricesTexture(){let e=Math.sqrt(this._maxGeometryCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),i=new Sd(t,e,e,Mr,Cr);this._matricesTexture=i}_initializeGeometry(e){const t=this.geometry,i=this._maxVertexCount,r=this._maxGeometryCount,s=this._maxIndexCount;if(this._geometryInitialized===!1){for(const a in e.attributes){const l=e.getAttribute(a),{array:u,itemSize:d,normalized:h}=l,p=new u.constructor(i*d),v=new l.constructor(p,d,h);v.setUsage(l.usage),t.setAttribute(a,v)}if(e.getIndex()!==null){const a=i>65536?new Uint32Array(s):new Uint16Array(s);t.setIndex(new Xn(a,1))}const o=r>65536?new Uint32Array(i):new Uint16Array(i);t.setAttribute(_m,new Xn(o,1)),this._geometryInitialized=!0}}_validateGeometry(e){if(e.getAttribute(_m))throw new Error(`BatchedMesh: Geometry cannot use attribute "${_m}"`);const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const i in t.attributes){if(i===_m)continue;if(!e.hasAttribute(i))throw new Error(`BatchedMesh: Added geometry missing "${i}". All geometries must have consistent attributes.`);const r=e.getAttribute(i),s=t.getAttribute(i);if(r.itemSize!==s.itemSize||r.normalized!==s.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new cs);const e=this._geometryCount,t=this.boundingBox,i=this._active;t.makeEmpty();for(let r=0;r<e;r++)i[r]!==!1&&(this.getMatrixAt(r,Qc),this.getBoundingBoxAt(r,Lx).applyMatrix4(Qc),t.union(Lx))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Qr);const e=this._geometryCount,t=this.boundingSphere,i=this._active;t.makeEmpty();for(let r=0;r<e;r++)i[r]!==!1&&(this.getMatrixAt(r,Qc),this.getBoundingSphereAt(r,Uf).applyMatrix4(Qc),t.union(Uf))}addGeometry(e,t=-1,i=-1){if(this._initializeGeometry(e),this._validateGeometry(e),this._geometryCount>=this._maxGeometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");const r={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1};let s=null;const o=this._reservedRanges,a=this._drawRanges,l=this._bounds;this._geometryCount!==0&&(s=o[o.length-1]),t===-1?r.vertexCount=e.getAttribute("position").count:r.vertexCount=t,s===null?r.vertexStart=0:r.vertexStart=s.vertexStart+s.vertexCount;const u=e.getIndex(),d=u!==null;if(d&&(i===-1?r.indexCount=u.count:r.indexCount=i,s===null?r.indexStart=0:r.indexStart=s.indexStart+s.indexCount),r.indexStart!==-1&&r.indexStart+r.indexCount>this._maxIndexCount||r.vertexStart+r.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");const h=this._visibility,p=this._active,v=this._matricesTexture,_=this._matricesTexture.image.data;h.push(!0),p.push(!0);const w=this._geometryCount;this._geometryCount++,HW.toArray(_,w*16),v.needsUpdate=!0,o.push(r),a.push({start:d?r.indexStart:r.vertexStart,count:-1}),l.push({boxInitialized:!1,box:new cs,sphereInitialized:!1,sphere:new Qr});const S=this.geometry.getAttribute(_m);for(let A=0;A<r.vertexCount;A++)S.setX(r.vertexStart+A,w);return S.needsUpdate=!0,this.setGeometryAt(w,e),w}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const i=this.geometry,r=i.getIndex()!==null,s=i.getIndex(),o=t.getIndex(),a=this._reservedRanges[e];if(r&&o.count>a.indexCount||t.attributes.position.count>a.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const l=a.vertexStart,u=a.vertexCount;for(const v in i.attributes){if(v===_m)continue;const _=t.getAttribute(v),w=i.getAttribute(v);GW(_,w,l);const S=_.itemSize;for(let A=_.count,b=u;A<b;A++){const C=l+A;for(let P=0;P<S;P++)w.setComponent(C,P,0)}w.needsUpdate=!0}if(r){const v=a.indexStart;for(let _=0;_<o.count;_++)s.setX(v+_,l+o.getX(_));for(let _=o.count,w=a.indexCount;_<w;_++)s.setX(v+_,l);s.needsUpdate=!0}const d=this._bounds[e];t.boundingBox!==null?(d.box.copy(t.boundingBox),d.boxInitialized=!0):d.boxInitialized=!1,t.boundingSphere!==null?(d.sphere.copy(t.boundingSphere),d.sphereInitialized=!0):d.sphereInitialized=!1;const h=this._drawRanges[e],p=t.getAttribute("position");return h.count=r?o.count:p.count,this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._active;return e>=t.length||t[e]===!1?this:(t[e]=!1,this._visibilityChanged=!0,this)}getBoundingBoxAt(e,t){if(this._active[e]===!1)return this;const r=this._bounds[e],s=r.box,o=this.geometry;if(r.boxInitialized===!1){s.makeEmpty();const a=o.index,l=o.attributes.position,u=this._drawRanges[e];for(let d=u.start,h=u.start+u.count;d<h;d++){let p=d;a&&(p=a.getX(p)),s.expandByPoint(J0.fromBufferAttribute(l,p))}r.boxInitialized=!0}return t.copy(s),t}getBoundingSphereAt(e,t){if(this._active[e]===!1)return this;const r=this._bounds[e],s=r.sphere,o=this.geometry;if(r.sphereInitialized===!1){s.makeEmpty(),this.getBoundingBoxAt(e,Lx),Lx.getCenter(s.center);const a=o.index,l=o.attributes.position,u=this._drawRanges[e];let d=0;for(let h=u.start,p=u.start+u.count;h<p;h++){let v=h;a&&(v=a.getX(v)),J0.fromBufferAttribute(l,v),d=Math.max(d,s.center.distanceToSquared(J0))}s.radius=Math.sqrt(d),r.sphereInitialized=!0}return t.copy(s),t}setMatrixAt(e,t){const i=this._active,r=this._matricesTexture,s=this._matricesTexture.image.data,o=this._geometryCount;return e>=o||i[e]===!1?this:(t.toArray(s,e*16),r.needsUpdate=!0,this)}getMatrixAt(e,t){const i=this._active,r=this._matricesTexture.image.data,s=this._geometryCount;return e>=s||i[e]===!1?null:t.fromArray(r,e*16)}setVisibleAt(e,t){const i=this._visibility,r=this._active,s=this._geometryCount;return e>=s||r[e]===!1||i[e]===t?this:(i[e]=t,this._visibilityChanged=!0,this)}getVisibleAt(e){const t=this._visibility,i=this._active,r=this._geometryCount;return e>=r||i[e]===!1?!1:t[e]}raycast(e,t){const i=this._visibility,r=this._active,s=this._drawRanges,o=this._geometryCount,a=this.matrixWorld,l=this.geometry;Es.material=this.material,Es.geometry.index=l.index,Es.geometry.attributes=l.attributes,Es.geometry.boundingBox===null&&(Es.geometry.boundingBox=new cs),Es.geometry.boundingSphere===null&&(Es.geometry.boundingSphere=new Qr);for(let u=0;u<o;u++){if(!i[u]||!r[u])continue;const d=s[u];Es.geometry.setDrawRange(d.start,d.count),this.getMatrixAt(u,Es.matrixWorld).premultiply(a),this.getBoundingBoxAt(u,Es.geometry.boundingBox),this.getBoundingSphereAt(u,Es.geometry.boundingSphere),Es.raycast(e,Bx);for(let h=0,p=Bx.length;h<p;h++){const v=Bx[h];v.object=this,v.batchId=u,t.push(v)}Bx.length=0}Es.material=null,Es.geometry.index=null,Es.geometry.attributes={},Es.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._drawRanges=e._drawRanges.map(t=>({...t})),this._reservedRanges=e._reservedRanges.map(t=>({...t})),this._visibility=e._visibility.slice(),this._active=e._active.slice(),this._bounds=e._bounds.map(t=>({boxInitialized:t.boxInitialized,box:t.box.clone(),sphereInitialized:t.sphereInitialized,sphere:t.sphere.clone()})),this._maxGeometryCount=e._maxGeometryCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.slice(),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this}onBeforeRender(e,t,i,r,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=r.getIndex(),a=o===null?1:o.array.BYTES_PER_ELEMENT,l=this._visibility,u=this._multiDrawStarts,d=this._multiDrawCounts,h=this._drawRanges,p=this.perObjectFrustumCulled;p&&(XI.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse).multiply(this.matrixWorld),nT.setFromProjectionMatrix(XI,e.isWebGPURenderer?dg:pl));let v=0;if(this.sortObjects){JI.copy(this.matrixWorld).invert(),J0.setFromMatrixPosition(i.matrixWorld).applyMatrix4(JI);for(let S=0,A=l.length;S<A;S++)if(l[S]){this.getMatrixAt(S,Qc),this.getBoundingSphereAt(S,Uf).applyMatrix4(Qc);let b=!1;if(p&&(b=!nT.intersectsSphere(Uf)),!b){const C=J0.distanceTo(Uf.center);iT.push(h[S],C)}}const _=iT.list,w=this.customSort;w===null?_.sort(s.transparent?UW:FW):w.call(this,_,i);for(let S=0,A=_.length;S<A;S++){const b=_[S];u[v]=b.start*a,d[v]=b.count,v++}iT.reset()}else for(let _=0,w=l.length;_<w;_++)if(l[_]){let S=!1;if(p&&(this.getMatrixAt(_,Qc),this.getBoundingSphereAt(_,Uf).applyMatrix4(Qc),S=!nT.intersectsSphere(Uf)),!S){const A=h[_];u[v]=A.start*a,d[v]=A.count,v++}}this._multiDrawCount=v,this._visibilityChanged=!1}onBeforeShadow(e,t,i,r,s,o){this.onBeforeRender(e,null,r,s,o)}}class Bs extends Fr{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new St(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const YI=new te,KI=new te,QI=new dn,rT=new qh,Nx=new Qr;class rc extends Jn{constructor(e=new Tn,t=new Bs){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let r=1,s=t.count;r<s;r++)YI.fromBufferAttribute(t,r-1),KI.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=YI.distanceTo(KI);e.setAttribute("lineDistance",new Zt(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Nx.copy(i.boundingSphere),Nx.applyMatrix4(r),Nx.radius+=s,e.ray.intersectsSphere(Nx)===!1)return;QI.copy(r).invert(),rT.copy(e.ray).applyMatrix4(QI);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,u=new te,d=new te,h=new te,p=new te,v=this.isLineSegments?2:1,_=i.index,S=i.attributes.position;if(_!==null){const A=Math.max(0,o.start),b=Math.min(_.count,o.start+o.count);for(let C=A,P=b-1;C<P;C+=v){const k=_.getX(C),L=_.getX(C+1);if(u.fromBufferAttribute(S,k),d.fromBufferAttribute(S,L),rT.distanceSqToSegment(u,d,p,h)>l)continue;p.applyMatrix4(this.matrixWorld);const O=e.ray.origin.distanceTo(p);O<e.near||O>e.far||t.push({distance:O,point:h.clone().applyMatrix4(this.matrixWorld),index:C,face:null,faceIndex:null,object:this})}}else{const A=Math.max(0,o.start),b=Math.min(S.count,o.start+o.count);for(let C=A,P=b-1;C<P;C+=v){if(u.fromBufferAttribute(S,C),d.fromBufferAttribute(S,C+1),rT.distanceSqToSegment(u,d,p,h)>l)continue;p.applyMatrix4(this.matrixWorld);const L=e.ray.origin.distanceTo(p);L<e.near||L>e.far||t.push({distance:L,point:h.clone().applyMatrix4(this.matrixWorld),index:C,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}const ZI=new te,$I=new te;class _l extends rc{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let r=0,s=t.count;r<s;r+=2)ZI.fromBufferAttribute(t,r),$I.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+ZI.distanceTo($I);e.setAttribute("lineDistance",new Zt(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class YC extends rc{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class tS extends Fr{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new St(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const jI=new dn,eM=new qh,kx=new Qr,Fx=new te;class KC extends Jn{constructor(e=new Tn,t=new tS){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),kx.copy(i.boundingSphere),kx.applyMatrix4(r),kx.radius+=s,e.ray.intersectsSphere(kx)===!1)return;jI.copy(r).invert(),eM.copy(e.ray).applyMatrix4(jI);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,u=i.index,h=i.attributes.position;if(u!==null){const p=Math.max(0,o.start),v=Math.min(u.count,o.start+o.count);for(let _=p,w=v;_<w;_++){const S=u.getX(_);Fx.fromBufferAttribute(h,S),e2(Fx,S,l,r,e,t,this)}}else{const p=Math.max(0,o.start),v=Math.min(h.count,o.start+o.count);for(let _=p,w=v;_<w;_++)Fx.fromBufferAttribute(h,_),e2(Fx,_,l,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function e2(n,e,t,i,r,s,o){const a=eM.distanceSqToPoint(n);if(a<t){const l=new te;eM.closestPointToPoint(n,l),l.applyMatrix4(i);const u=r.ray.origin.distanceTo(l);if(u<r.near||u>r.far)return;s.push({distance:u,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}class zW extends hi{constructor(e,t,i,r,s,o,a,l,u){super(e,t,i,r,s,o,a,l,u),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:Kn,this.magFilter=s!==void 0?s:Kn,this.generateMipmaps=!1;const d=this;function h(){d.needsUpdate=!0,e.requestVideoFrameCallback(h)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(h)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class VW extends hi{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=$i,this.minFilter=$i,this.generateMipmaps=!1,this.needsUpdate=!0}}class nS extends hi{constructor(e,t,i,r,s,o,a,l,u,d,h,p){super(null,o,a,l,u,d,r,s,h,p),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class WW extends nS{constructor(e,t,i,r,s,o){super(e,t,i,s,o),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=Bi}}class qW extends nS{constructor(e,t,i){super(void 0,e[0].width,e[0].height,t,i,$l),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class JW extends hi{constructor(e,t,i,r,s,o,a,l,u){super(e,t,i,r,s,o,a,l,u),this.isCanvasTexture=!0,this.needsUpdate=!0}}class xl{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,r=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)i=this.getPoint(o/e),s+=i.distanceTo(r),t.push(s),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const i=this.getLengths();let r=0;const s=i.length;let o;t?o=t:o=e*i[s-1];let a=0,l=s-1,u;for(;a<=l;)if(r=Math.floor(a+(l-a)/2),u=i[r]-o,u<0)a=r+1;else if(u>0)l=r-1;else{l=r;break}if(r=l,i[r]===o)return r/(s-1);const d=i[r],p=i[r+1]-d,v=(o-d)/p;return(r+v)/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),a=this.getPoint(s),l=t||(o.isVector2?new Je:new te);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){const i=new te,r=[],s=[],o=[],a=new te,l=new dn;for(let v=0;v<=e;v++){const _=v/e;r[v]=this.getTangentAt(_,new te)}s[0]=new te,o[0]=new te;let u=Number.MAX_VALUE;const d=Math.abs(r[0].x),h=Math.abs(r[0].y),p=Math.abs(r[0].z);d<=u&&(u=d,i.set(1,0,0)),h<=u&&(u=h,i.set(0,1,0)),p<=u&&i.set(0,0,1),a.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],a),o[0].crossVectors(r[0],s[0]);for(let v=1;v<=e;v++){if(s[v]=s[v-1].clone(),o[v]=o[v-1].clone(),a.crossVectors(r[v-1],r[v]),a.length()>Number.EPSILON){a.normalize();const _=Math.acos(ji(r[v-1].dot(r[v]),-1,1));s[v].applyMatrix4(l.makeRotationAxis(a,_))}o[v].crossVectors(r[v],s[v])}if(t===!0){let v=Math.acos(ji(s[0].dot(s[e]),-1,1));v/=e,r[0].dot(a.crossVectors(s[0],s[e]))>0&&(v=-v);for(let _=1;_<=e;_++)s[_].applyMatrix4(l.makeRotationAxis(r[_],v*_)),o[_].crossVectors(r[_],s[_])}return{tangents:r,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class iS extends xl{constructor(e=0,t=0,i=1,r=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t){const i=t||new Je,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(o?s=0:s=r),this.aClockwise===!0&&!o&&(s===r?s=-r:s=s-r);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),u=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const d=Math.cos(this.aRotation),h=Math.sin(this.aRotation),p=l-this.aX,v=u-this.aY;l=p*d-v*h+this.aX,u=p*h+v*d+this.aY}return i.set(l,u)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class RF extends iS{constructor(e,t,i,r,s,o){super(e,t,i,i,r,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function QC(){let n=0,e=0,t=0,i=0;function r(s,o,a,l){n=s,e=a,t=-3*s+3*o-2*a-l,i=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,u){r(o,a,u*(a-s),u*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,u,d,h){let p=(o-s)/u-(a-s)/(u+d)+(a-o)/d,v=(a-o)/d-(l-o)/(d+h)+(l-a)/h;p*=d,v*=d,r(o,a,p,v)},calc:function(s){const o=s*s,a=o*s;return n+e*s+t*o+i*a}}}const Ux=new te,sT=new QC,oT=new QC,aT=new QC;class PF extends xl{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new te){const i=t,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let u,d;this.closed||a>0?u=r[(a-1)%s]:(Ux.subVectors(r[0],r[1]).add(r[0]),u=Ux);const h=r[a%s],p=r[(a+1)%s];if(this.closed||a+2<s?d=r[(a+2)%s]:(Ux.subVectors(r[s-1],r[s-2]).add(r[s-1]),d=Ux),this.curveType==="centripetal"||this.curveType==="chordal"){const v=this.curveType==="chordal"?.5:.25;let _=Math.pow(u.distanceToSquared(h),v),w=Math.pow(h.distanceToSquared(p),v),S=Math.pow(p.distanceToSquared(d),v);w<1e-4&&(w=1),_<1e-4&&(_=w),S<1e-4&&(S=w),sT.initNonuniformCatmullRom(u.x,h.x,p.x,d.x,_,w,S),oT.initNonuniformCatmullRom(u.y,h.y,p.y,d.y,_,w,S),aT.initNonuniformCatmullRom(u.z,h.z,p.z,d.z,_,w,S)}else this.curveType==="catmullrom"&&(sT.initCatmullRom(u.x,h.x,p.x,d.x,this.tension),oT.initCatmullRom(u.y,h.y,p.y,d.y,this.tension),aT.initCatmullRom(u.z,h.z,p.z,d.z,this.tension));return i.set(sT.calc(l),oT.calc(l),aT.calc(l)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new te().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function t2(n,e,t,i,r){const s=(i-e)*.5,o=(r-t)*.5,a=n*n,l=n*a;return(2*t-2*i+s+o)*l+(-3*t+3*i-2*s-o)*a+s*n+t}function XW(n,e){const t=1-n;return t*t*e}function YW(n,e){return 2*(1-n)*n*e}function KW(n,e){return n*n*e}function Sv(n,e,t,i){return XW(n,e)+YW(n,t)+KW(n,i)}function QW(n,e){const t=1-n;return t*t*t*e}function ZW(n,e){const t=1-n;return 3*t*t*n*e}function $W(n,e){return 3*(1-n)*n*n*e}function jW(n,e){return n*n*n*e}function Ev(n,e,t,i,r){return QW(n,e)+ZW(n,t)+$W(n,i)+jW(n,r)}class ZC extends xl{constructor(e=new Je,t=new Je,i=new Je,r=new Je){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new Je){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(Ev(e,r.x,s.x,o.x,a.x),Ev(e,r.y,s.y,o.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class IF extends xl{constructor(e=new te,t=new te,i=new te,r=new te){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new te){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(Ev(e,r.x,s.x,o.x,a.x),Ev(e,r.y,s.y,o.y,a.y),Ev(e,r.z,s.z,o.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class $C extends xl{constructor(e=new Je,t=new Je){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Je){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Je){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class DF extends xl{constructor(e=new te,t=new te){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new te){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new te){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class jC extends xl{constructor(e=new Je,t=new Je,i=new Je){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new Je){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(Sv(e,r.x,s.x,o.x),Sv(e,r.y,s.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class eb extends xl{constructor(e=new te,t=new te,i=new te){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new te){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(Sv(e,r.x,s.x,o.x),Sv(e,r.y,s.y,o.y),Sv(e,r.z,s.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class tb extends xl{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Je){const i=t,r=this.points,s=(r.length-1)*e,o=Math.floor(s),a=s-o,l=r[o===0?o:o-1],u=r[o],d=r[o>r.length-2?r.length-1:o+1],h=r[o>r.length-3?r.length-1:o+2];return i.set(t2(a,l.x,u.x,d.x,h.x),t2(a,l.y,u.y,d.y,h.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new Je().fromArray(r))}return this}}var jw=Object.freeze({__proto__:null,ArcCurve:RF,CatmullRomCurve3:PF,CubicBezierCurve:ZC,CubicBezierCurve3:IF,EllipseCurve:iS,LineCurve:$C,LineCurve3:DF,QuadraticBezierCurve:jC,QuadraticBezierCurve3:eb,SplineCurve:tb});class LF extends xl{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const i=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new jw[i](t,e))}return this}getPoint(e,t){const i=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=i){const o=r[s]-i,a=this.curves[s],l=a.getLength(),u=l===0?0:1-o/l;return a.getPointAt(u,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let u=0;u<l.length;u++){const d=l[u];i&&i.equals(d)||(t.push(d),i=d)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(new jw[r.type]().fromJSON(r))}return this}}class ry extends LF{constructor(e){super(),this.type="Path",this.currentPoint=new Je,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new $C(this.currentPoint.clone(),new Je(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){const s=new jC(this.currentPoint.clone(),new Je(e,t),new Je(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,s,o){const a=new ZC(this.currentPoint.clone(),new Je(e,t),new Je(i,r),new Je(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new tb(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,t+l,i,r,s,o),this}absarc(e,t,i,r,s,o){return this.absellipse(e,t,i,i,r,s,o),this}ellipse(e,t,i,r,s,o,a,l){const u=this.currentPoint.x,d=this.currentPoint.y;return this.absellipse(e+u,t+d,i,r,s,o,a,l),this}absellipse(e,t,i,r,s,o,a,l){const u=new iS(e,t,i,r,s,o,a,l);if(this.curves.length>0){const h=u.getPoint(0);h.equals(this.currentPoint)||this.lineTo(h.x,h.y)}this.curves.push(u);const d=u.getPoint(1);return this.currentPoint.copy(d),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Hy extends Tn{constructor(e=[new Je(0,-.5),new Je(.5,0),new Je(0,.5)],t=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:r},t=Math.floor(t),r=ji(r,0,Math.PI*2);const s=[],o=[],a=[],l=[],u=[],d=1/t,h=new te,p=new Je,v=new te,_=new te,w=new te;let S=0,A=0;for(let b=0;b<=e.length-1;b++)switch(b){case 0:S=e[b+1].x-e[b].x,A=e[b+1].y-e[b].y,v.x=A*1,v.y=-S,v.z=A*0,w.copy(v),v.normalize(),l.push(v.x,v.y,v.z);break;case e.length-1:l.push(w.x,w.y,w.z);break;default:S=e[b+1].x-e[b].x,A=e[b+1].y-e[b].y,v.x=A*1,v.y=-S,v.z=A*0,_.copy(v),v.x+=w.x,v.y+=w.y,v.z+=w.z,v.normalize(),l.push(v.x,v.y,v.z),w.copy(_)}for(let b=0;b<=t;b++){const C=i+b*d*r,P=Math.sin(C),k=Math.cos(C);for(let L=0;L<=e.length-1;L++){h.x=e[L].x*P,h.y=e[L].y,h.z=e[L].x*k,o.push(h.x,h.y,h.z),p.x=b/t,p.y=L/(e.length-1),a.push(p.x,p.y);const N=l[3*L+0]*P,O=l[3*L+1],D=l[3*L+0]*k;u.push(N,O,D)}}for(let b=0;b<t;b++)for(let C=0;C<e.length-1;C++){const P=C+b*e.length,k=P,L=P+e.length,N=P+e.length+1,O=P+1;s.push(k,L,O),s.push(N,O,L)}this.setIndex(s),this.setAttribute("position",new Zt(o,3)),this.setAttribute("uv",new Zt(a,2)),this.setAttribute("normal",new Zt(u,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Hy(e.points,e.segments,e.phiStart,e.phiLength)}}class rS extends Hy{constructor(e=1,t=1,i=4,r=8){const s=new ry;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(i),r),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:i,radialSegments:r}}static fromJSON(e){return new rS(e.radius,e.length,e.capSegments,e.radialSegments)}}class sS extends Tn{constructor(e=1,t=32,i=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:r},t=Math.max(3,t);const s=[],o=[],a=[],l=[],u=new te,d=new Je;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let h=0,p=3;h<=t;h++,p+=3){const v=i+h/t*r;u.x=e*Math.cos(v),u.y=e*Math.sin(v),o.push(u.x,u.y,u.z),a.push(0,0,1),d.x=(o[p]/e+1)/2,d.y=(o[p+1]/e+1)/2,l.push(d.x,d.y)}for(let h=1;h<=t;h++)s.push(h,h+1,0);this.setIndex(s),this.setAttribute("position",new Zt(o,3)),this.setAttribute("normal",new Zt(a,3)),this.setAttribute("uv",new Zt(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new sS(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Dg extends Tn{constructor(e=1,t=1,i=1,r=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const u=this;r=Math.floor(r),s=Math.floor(s);const d=[],h=[],p=[],v=[];let _=0;const w=[],S=i/2;let A=0;b(),o===!1&&(e>0&&C(!0),t>0&&C(!1)),this.setIndex(d),this.setAttribute("position",new Zt(h,3)),this.setAttribute("normal",new Zt(p,3)),this.setAttribute("uv",new Zt(v,2));function b(){const P=new te,k=new te;let L=0;const N=(t-e)/i;for(let O=0;O<=s;O++){const D=[],U=O/s,X=U*(t-e)+e;for(let Z=0;Z<=r;Z++){const he=Z/r,Q=he*l+a,ue=Math.sin(Q),re=Math.cos(Q);k.x=X*ue,k.y=-U*i+S,k.z=X*re,h.push(k.x,k.y,k.z),P.set(ue,N,re).normalize(),p.push(P.x,P.y,P.z),v.push(he,1-U),D.push(_++)}w.push(D)}for(let O=0;O<r;O++)for(let D=0;D<s;D++){const U=w[D][O],X=w[D+1][O],Z=w[D+1][O+1],he=w[D][O+1];d.push(U,X,he),d.push(X,Z,he),L+=6}u.addGroup(A,L,0),A+=L}function C(P){const k=_,L=new Je,N=new te;let O=0;const D=P===!0?e:t,U=P===!0?1:-1;for(let Z=1;Z<=r;Z++)h.push(0,S*U,0),p.push(0,U,0),v.push(.5,.5),_++;const X=_;for(let Z=0;Z<=r;Z++){const Q=Z/r*l+a,ue=Math.cos(Q),re=Math.sin(Q);N.x=D*re,N.y=S*U,N.z=D*ue,h.push(N.x,N.y,N.z),p.push(0,U,0),L.x=ue*.5+.5,L.y=re*.5*U+.5,v.push(L.x,L.y),_++}for(let Z=0;Z<r;Z++){const he=k+Z,Q=X+Z;P===!0?d.push(Q,Q+1,he):d.push(Q+1,Q,he),O+=3}u.addGroup(A,O,P===!0?1:2),A+=O}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Dg(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class oS extends Dg{constructor(e=1,t=1,i=32,r=1,s=!1,o=0,a=Math.PI*2){super(0,e,t,i,r,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new oS(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Vd extends Tn{constructor(e=[],t=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:r};const s=[],o=[];a(r),u(i),d(),this.setAttribute("position",new Zt(s,3)),this.setAttribute("normal",new Zt(s.slice(),3)),this.setAttribute("uv",new Zt(o,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function a(b){const C=new te,P=new te,k=new te;for(let L=0;L<t.length;L+=3)v(t[L+0],C),v(t[L+1],P),v(t[L+2],k),l(C,P,k,b)}function l(b,C,P,k){const L=k+1,N=[];for(let O=0;O<=L;O++){N[O]=[];const D=b.clone().lerp(P,O/L),U=C.clone().lerp(P,O/L),X=L-O;for(let Z=0;Z<=X;Z++)Z===0&&O===L?N[O][Z]=D:N[O][Z]=D.clone().lerp(U,Z/X)}for(let O=0;O<L;O++)for(let D=0;D<2*(L-O)-1;D++){const U=Math.floor(D/2);D%2===0?(p(N[O][U+1]),p(N[O+1][U]),p(N[O][U])):(p(N[O][U+1]),p(N[O+1][U+1]),p(N[O+1][U]))}}function u(b){const C=new te;for(let P=0;P<s.length;P+=3)C.x=s[P+0],C.y=s[P+1],C.z=s[P+2],C.normalize().multiplyScalar(b),s[P+0]=C.x,s[P+1]=C.y,s[P+2]=C.z}function d(){const b=new te;for(let C=0;C<s.length;C+=3){b.x=s[C+0],b.y=s[C+1],b.z=s[C+2];const P=S(b)/2/Math.PI+.5,k=A(b)/Math.PI+.5;o.push(P,1-k)}_(),h()}function h(){for(let b=0;b<o.length;b+=6){const C=o[b+0],P=o[b+2],k=o[b+4],L=Math.max(C,P,k),N=Math.min(C,P,k);L>.9&&N<.1&&(C<.2&&(o[b+0]+=1),P<.2&&(o[b+2]+=1),k<.2&&(o[b+4]+=1))}}function p(b){s.push(b.x,b.y,b.z)}function v(b,C){const P=b*3;C.x=e[P+0],C.y=e[P+1],C.z=e[P+2]}function _(){const b=new te,C=new te,P=new te,k=new te,L=new Je,N=new Je,O=new Je;for(let D=0,U=0;D<s.length;D+=9,U+=6){b.set(s[D+0],s[D+1],s[D+2]),C.set(s[D+3],s[D+4],s[D+5]),P.set(s[D+6],s[D+7],s[D+8]),L.set(o[U+0],o[U+1]),N.set(o[U+2],o[U+3]),O.set(o[U+4],o[U+5]),k.copy(b).add(C).add(P).divideScalar(3);const X=S(k);w(L,U+0,b,X),w(N,U+2,C,X),w(O,U+4,P,X)}}function w(b,C,P,k){k<0&&b.x===1&&(o[C]=b.x-1),P.x===0&&P.z===0&&(o[C]=k/2/Math.PI+.5)}function S(b){return Math.atan2(b.z,-b.x)}function A(b){return Math.atan2(-b.y,Math.sqrt(b.x*b.x+b.z*b.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Vd(e.vertices,e.indices,e.radius,e.details)}}class aS extends Vd{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=1/i,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new aS(e.radius,e.detail)}}const Ox=new te,Hx=new te,lT=new te,Gx=new xo;class BF extends Tn{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),s=Math.cos(_h*t),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,u=[0,0,0],d=["a","b","c"],h=new Array(3),p={},v=[];for(let _=0;_<l;_+=3){o?(u[0]=o.getX(_),u[1]=o.getX(_+1),u[2]=o.getX(_+2)):(u[0]=_,u[1]=_+1,u[2]=_+2);const{a:w,b:S,c:A}=Gx;if(w.fromBufferAttribute(a,u[0]),S.fromBufferAttribute(a,u[1]),A.fromBufferAttribute(a,u[2]),Gx.getNormal(lT),h[0]=`${Math.round(w.x*r)},${Math.round(w.y*r)},${Math.round(w.z*r)}`,h[1]=`${Math.round(S.x*r)},${Math.round(S.y*r)},${Math.round(S.z*r)}`,h[2]=`${Math.round(A.x*r)},${Math.round(A.y*r)},${Math.round(A.z*r)}`,!(h[0]===h[1]||h[1]===h[2]||h[2]===h[0]))for(let b=0;b<3;b++){const C=(b+1)%3,P=h[b],k=h[C],L=Gx[d[b]],N=Gx[d[C]],O=`${P}_${k}`,D=`${k}_${P}`;D in p&&p[D]?(lT.dot(p[D].normal)<=s&&(v.push(L.x,L.y,L.z),v.push(N.x,N.y,N.z)),p[D]=null):O in p||(p[O]={index0:u[b],index1:u[C],normal:lT.clone()})}}for(const _ in p)if(p[_]){const{index0:w,index1:S}=p[_];Ox.fromBufferAttribute(a,w),Hx.fromBufferAttribute(a,S),v.push(Ox.x,Ox.y,Ox.z),v.push(Hx.x,Hx.y,Hx.z)}this.setAttribute("position",new Zt(v,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class wh extends ry{constructor(e){super(e),this.uuid=Zo(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(new ry().fromJSON(r))}return this}}const e7={triangulate:function(n,e,t=2){const i=e&&e.length,r=i?e[0]*t:n.length;let s=NF(n,0,r,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,u,d,h,p,v;if(i&&(s=s7(n,e,s,t)),n.length>80*t){a=u=n[0],l=d=n[1];for(let _=t;_<r;_+=t)h=n[_],p=n[_+1],h<a&&(a=h),p<l&&(l=p),h>u&&(u=h),p>d&&(d=p);v=Math.max(u-a,d-l),v=v!==0?32767/v:0}return sy(s,o,t,a,l,v,0),o}};function NF(n,e,t,i,r){let s,o;if(r===g7(n,e,t,i)>0)for(s=e;s<t;s+=i)o=n2(s,n[s],n[s+1],o);else for(s=t-i;s>=e;s-=i)o=n2(s,n[s],n[s+1],o);return o&&lS(o,o.next)&&(ay(o),o=o.next),o}function kh(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(lS(t,t.next)||Wi(t.prev,t,t.next)===0)){if(ay(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function sy(n,e,t,i,r,s,o){if(!n)return;!o&&s&&c7(n,i,r,s);let a=n,l,u;for(;n.prev!==n.next;){if(l=n.prev,u=n.next,s?n7(n,i,r,s):t7(n)){e.push(l.i/t|0),e.push(n.i/t|0),e.push(u.i/t|0),ay(n),n=u.next,a=u.next;continue}if(n=u,n===a){o?o===1?(n=i7(kh(n),e,t),sy(n,e,t,i,r,s,2)):o===2&&r7(n,e,t,i,r,s):sy(kh(n),e,t,i,r,s,1);break}}}function t7(n){const e=n.prev,t=n,i=n.next;if(Wi(e,t,i)>=0)return!1;const r=e.x,s=t.x,o=i.x,a=e.y,l=t.y,u=i.y,d=r<s?r<o?r:o:s<o?s:o,h=a<l?a<u?a:u:l<u?l:u,p=r>s?r>o?r:o:s>o?s:o,v=a>l?a>u?a:u:l>u?l:u;let _=i.next;for(;_!==e;){if(_.x>=d&&_.x<=p&&_.y>=h&&_.y<=v&&Bm(r,a,s,l,o,u,_.x,_.y)&&Wi(_.prev,_,_.next)>=0)return!1;_=_.next}return!0}function n7(n,e,t,i){const r=n.prev,s=n,o=n.next;if(Wi(r,s,o)>=0)return!1;const a=r.x,l=s.x,u=o.x,d=r.y,h=s.y,p=o.y,v=a<l?a<u?a:u:l<u?l:u,_=d<h?d<p?d:p:h<p?h:p,w=a>l?a>u?a:u:l>u?l:u,S=d>h?d>p?d:p:h>p?h:p,A=tM(v,_,e,t,i),b=tM(w,S,e,t,i);let C=n.prevZ,P=n.nextZ;for(;C&&C.z>=A&&P&&P.z<=b;){if(C.x>=v&&C.x<=w&&C.y>=_&&C.y<=S&&C!==r&&C!==o&&Bm(a,d,l,h,u,p,C.x,C.y)&&Wi(C.prev,C,C.next)>=0||(C=C.prevZ,P.x>=v&&P.x<=w&&P.y>=_&&P.y<=S&&P!==r&&P!==o&&Bm(a,d,l,h,u,p,P.x,P.y)&&Wi(P.prev,P,P.next)>=0))return!1;P=P.nextZ}for(;C&&C.z>=A;){if(C.x>=v&&C.x<=w&&C.y>=_&&C.y<=S&&C!==r&&C!==o&&Bm(a,d,l,h,u,p,C.x,C.y)&&Wi(C.prev,C,C.next)>=0)return!1;C=C.prevZ}for(;P&&P.z<=b;){if(P.x>=v&&P.x<=w&&P.y>=_&&P.y<=S&&P!==r&&P!==o&&Bm(a,d,l,h,u,p,P.x,P.y)&&Wi(P.prev,P,P.next)>=0)return!1;P=P.nextZ}return!0}function i7(n,e,t){let i=n;do{const r=i.prev,s=i.next.next;!lS(r,s)&&kF(r,i,i.next,s)&&oy(r,s)&&oy(s,r)&&(e.push(r.i/t|0),e.push(i.i/t|0),e.push(s.i/t|0),ay(i),ay(i.next),i=n=s),i=i.next}while(i!==n);return kh(i)}function r7(n,e,t,i,r,s){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&h7(o,a)){let l=FF(o,a);o=kh(o,o.next),l=kh(l,l.next),sy(o,e,t,i,r,s,0),sy(l,e,t,i,r,s,0);return}a=a.next}o=o.next}while(o!==n)}function s7(n,e,t,i){const r=[];let s,o,a,l,u;for(s=0,o=e.length;s<o;s++)a=e[s]*i,l=s<o-1?e[s+1]*i:n.length,u=NF(n,a,l,i,!1),u===u.next&&(u.steiner=!0),r.push(f7(u));for(r.sort(o7),s=0;s<r.length;s++)t=a7(r[s],t);return t}function o7(n,e){return n.x-e.x}function a7(n,e){const t=l7(n,e);if(!t)return e;const i=FF(t,n);return kh(i,i.next),kh(t,t.next)}function l7(n,e){let t=e,i=-1/0,r;const s=n.x,o=n.y;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const p=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(p<=s&&p>i&&(i=p,r=t.x<t.next.x?t:t.next,p===s))return r}t=t.next}while(t!==e);if(!r)return null;const a=r,l=r.x,u=r.y;let d=1/0,h;t=r;do s>=t.x&&t.x>=l&&s!==t.x&&Bm(o<u?s:i,o,l,u,o<u?i:s,o,t.x,t.y)&&(h=Math.abs(o-t.y)/(s-t.x),oy(t,n)&&(h<d||h===d&&(t.x>r.x||t.x===r.x&&u7(r,t)))&&(r=t,d=h)),t=t.next;while(t!==a);return r}function u7(n,e){return Wi(n.prev,n,e.prev)<0&&Wi(e.next,n,n.next)<0}function c7(n,e,t,i){let r=n;do r.z===0&&(r.z=tM(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,d7(r)}function d7(n){let e,t,i,r,s,o,a,l,u=1;do{for(t=n,n=null,s=null,o=0;t;){for(o++,i=t,a=0,e=0;e<u&&(a++,i=i.nextZ,!!i);e++);for(l=u;a>0||l>0&&i;)a!==0&&(l===0||!i||t.z<=i.z)?(r=t,t=t.nextZ,a--):(r=i,i=i.nextZ,l--),s?s.nextZ=r:n=r,r.prevZ=s,s=r;t=i}s.nextZ=null,u*=2}while(o>1);return n}function tM(n,e,t,i,r){return n=(n-t)*r|0,e=(e-i)*r|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function f7(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function Bm(n,e,t,i,r,s,o,a){return(r-o)*(e-a)>=(n-o)*(s-a)&&(n-o)*(i-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(r-o)*(i-a)}function h7(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!p7(n,e)&&(oy(n,e)&&oy(e,n)&&m7(n,e)&&(Wi(n.prev,n,e.prev)||Wi(n,e.prev,e))||lS(n,e)&&Wi(n.prev,n,n.next)>0&&Wi(e.prev,e,e.next)>0)}function Wi(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function lS(n,e){return n.x===e.x&&n.y===e.y}function kF(n,e,t,i){const r=Vx(Wi(n,e,t)),s=Vx(Wi(n,e,i)),o=Vx(Wi(t,i,n)),a=Vx(Wi(t,i,e));return!!(r!==s&&o!==a||r===0&&zx(n,t,e)||s===0&&zx(n,i,e)||o===0&&zx(t,n,i)||a===0&&zx(t,e,i))}function zx(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function Vx(n){return n>0?1:n<0?-1:0}function p7(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&kF(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function oy(n,e){return Wi(n.prev,n,n.next)<0?Wi(n,e,n.next)>=0&&Wi(n,n.prev,e)>=0:Wi(n,e,n.prev)<0||Wi(n,n.next,e)<0}function m7(n,e){let t=n,i=!1;const r=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function FF(n,e){const t=new nM(n.i,n.x,n.y),i=new nM(e.i,e.x,e.y),r=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function n2(n,e,t,i){const r=new nM(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function ay(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function nM(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function g7(n,e,t,i){let r=0;for(let s=e,o=t-i;s<t;s+=i)r+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return r}class Yl{static area(e){const t=e.length;let i=0;for(let r=t-1,s=0;s<t;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return i*.5}static isClockWise(e){return Yl.area(e)<0}static triangulateShape(e,t){const i=[],r=[],s=[];i2(e),r2(i,e);let o=e.length;t.forEach(i2);for(let l=0;l<t.length;l++)r.push(o),o+=t[l].length,r2(i,t[l]);const a=e7.triangulate(i,r);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function i2(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function r2(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class uS extends Tn{constructor(e=new wh([new Je(.5,.5),new Je(-.5,.5),new Je(-.5,-.5),new Je(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,r=[],s=[];for(let a=0,l=e.length;a<l;a++){const u=e[a];o(u)}this.setAttribute("position",new Zt(r,3)),this.setAttribute("uv",new Zt(s,2)),this.computeVertexNormals();function o(a){const l=[],u=t.curveSegments!==void 0?t.curveSegments:12,d=t.steps!==void 0?t.steps:1,h=t.depth!==void 0?t.depth:1;let p=t.bevelEnabled!==void 0?t.bevelEnabled:!0,v=t.bevelThickness!==void 0?t.bevelThickness:.2,_=t.bevelSize!==void 0?t.bevelSize:v-.1,w=t.bevelOffset!==void 0?t.bevelOffset:0,S=t.bevelSegments!==void 0?t.bevelSegments:3;const A=t.extrudePath,b=t.UVGenerator!==void 0?t.UVGenerator:v7;let C,P=!1,k,L,N,O;A&&(C=A.getSpacedPoints(d),P=!0,p=!1,k=A.computeFrenetFrames(d,!1),L=new te,N=new te,O=new te),p||(S=0,v=0,_=0,w=0);const D=a.extractPoints(u);let U=D.shape;const X=D.holes;if(!Yl.isClockWise(U)){U=U.reverse();for(let fe=0,Fe=X.length;fe<Fe;fe++){const Be=X[fe];Yl.isClockWise(Be)&&(X[fe]=Be.reverse())}}const he=Yl.triangulateShape(U,X),Q=U;for(let fe=0,Fe=X.length;fe<Fe;fe++){const Be=X[fe];U=U.concat(Be)}function ue(fe,Fe,Be){return Fe||console.error("THREE.ExtrudeGeometry: vec does not exist"),fe.clone().addScaledVector(Fe,Be)}const re=U.length,ye=he.length;function $(fe,Fe,Be){let $e,Oe,xe;const ct=fe.x-Fe.x,j=fe.y-Fe.y,Y=Be.x-fe.x,we=Be.y-fe.y,Qe=ct*ct+j*j,Ye=ct*we-j*Y;if(Math.abs(Ye)>Number.EPSILON){const qe=Math.sqrt(Qe),yt=Math.sqrt(Y*Y+we*we),ft=Fe.x-j/qe,st=Fe.y+ct/qe,Rt=Be.x-we/yt,Ot=Be.y+Y/yt,Xe=((Rt-ft)*we-(Ot-st)*Y)/(ct*we-j*Y);$e=ft+ct*Xe-fe.x,Oe=st+j*Xe-fe.y;const fn=$e*$e+Oe*Oe;if(fn<=2)return new Je($e,Oe);xe=Math.sqrt(fn/2)}else{let qe=!1;ct>Number.EPSILON?Y>Number.EPSILON&&(qe=!0):ct<-Number.EPSILON?Y<-Number.EPSILON&&(qe=!0):Math.sign(j)===Math.sign(we)&&(qe=!0),qe?($e=-j,Oe=ct,xe=Math.sqrt(Qe)):($e=ct,Oe=j,xe=Math.sqrt(Qe/2))}return new Je($e/xe,Oe/xe)}const oe=[];for(let fe=0,Fe=Q.length,Be=Fe-1,$e=fe+1;fe<Fe;fe++,Be++,$e++)Be===Fe&&(Be=0),$e===Fe&&($e=0),oe[fe]=$(Q[fe],Q[Be],Q[$e]);const W=[];let J,se=oe.concat();for(let fe=0,Fe=X.length;fe<Fe;fe++){const Be=X[fe];J=[];for(let $e=0,Oe=Be.length,xe=Oe-1,ct=$e+1;$e<Oe;$e++,xe++,ct++)xe===Oe&&(xe=0),ct===Oe&&(ct=0),J[$e]=$(Be[$e],Be[xe],Be[ct]);W.push(J),se=se.concat(J)}for(let fe=0;fe<S;fe++){const Fe=fe/S,Be=v*Math.cos(Fe*Math.PI/2),$e=_*Math.sin(Fe*Math.PI/2)+w;for(let Oe=0,xe=Q.length;Oe<xe;Oe++){const ct=ue(Q[Oe],oe[Oe],$e);ze(ct.x,ct.y,-Be)}for(let Oe=0,xe=X.length;Oe<xe;Oe++){const ct=X[Oe];J=W[Oe];for(let j=0,Y=ct.length;j<Y;j++){const we=ue(ct[j],J[j],$e);ze(we.x,we.y,-Be)}}}const me=_+w;for(let fe=0;fe<re;fe++){const Fe=p?ue(U[fe],se[fe],me):U[fe];P?(N.copy(k.normals[0]).multiplyScalar(Fe.x),L.copy(k.binormals[0]).multiplyScalar(Fe.y),O.copy(C[0]).add(N).add(L),ze(O.x,O.y,O.z)):ze(Fe.x,Fe.y,0)}for(let fe=1;fe<=d;fe++)for(let Fe=0;Fe<re;Fe++){const Be=p?ue(U[Fe],se[Fe],me):U[Fe];P?(N.copy(k.normals[fe]).multiplyScalar(Be.x),L.copy(k.binormals[fe]).multiplyScalar(Be.y),O.copy(C[fe]).add(N).add(L),ze(O.x,O.y,O.z)):ze(Be.x,Be.y,h/d*fe)}for(let fe=S-1;fe>=0;fe--){const Fe=fe/S,Be=v*Math.cos(Fe*Math.PI/2),$e=_*Math.sin(Fe*Math.PI/2)+w;for(let Oe=0,xe=Q.length;Oe<xe;Oe++){const ct=ue(Q[Oe],oe[Oe],$e);ze(ct.x,ct.y,h+Be)}for(let Oe=0,xe=X.length;Oe<xe;Oe++){const ct=X[Oe];J=W[Oe];for(let j=0,Y=ct.length;j<Y;j++){const we=ue(ct[j],J[j],$e);P?ze(we.x,we.y+C[d-1].y,C[d-1].x+Be):ze(we.x,we.y,h+Be)}}}Se(),ke();function Se(){const fe=r.length/3;if(p){let Fe=0,Be=re*Fe;for(let $e=0;$e<ye;$e++){const Oe=he[$e];je(Oe[2]+Be,Oe[1]+Be,Oe[0]+Be)}Fe=d+S*2,Be=re*Fe;for(let $e=0;$e<ye;$e++){const Oe=he[$e];je(Oe[0]+Be,Oe[1]+Be,Oe[2]+Be)}}else{for(let Fe=0;Fe<ye;Fe++){const Be=he[Fe];je(Be[2],Be[1],Be[0])}for(let Fe=0;Fe<ye;Fe++){const Be=he[Fe];je(Be[0]+re*d,Be[1]+re*d,Be[2]+re*d)}}i.addGroup(fe,r.length/3-fe,0)}function ke(){const fe=r.length/3;let Fe=0;Ie(Q,Fe),Fe+=Q.length;for(let Be=0,$e=X.length;Be<$e;Be++){const Oe=X[Be];Ie(Oe,Fe),Fe+=Oe.length}i.addGroup(fe,r.length/3-fe,1)}function Ie(fe,Fe){let Be=fe.length;for(;--Be>=0;){const $e=Be;let Oe=Be-1;Oe<0&&(Oe=fe.length-1);for(let xe=0,ct=d+S*2;xe<ct;xe++){const j=re*xe,Y=re*(xe+1),we=Fe+$e+j,Qe=Fe+Oe+j,Ye=Fe+Oe+Y,qe=Fe+$e+Y;at(we,Qe,Ye,qe)}}}function ze(fe,Fe,Be){l.push(fe),l.push(Fe),l.push(Be)}function je(fe,Fe,Be){ut(fe),ut(Fe),ut(Be);const $e=r.length/3,Oe=b.generateTopUV(i,r,$e-3,$e-2,$e-1);gt(Oe[0]),gt(Oe[1]),gt(Oe[2])}function at(fe,Fe,Be,$e){ut(fe),ut(Fe),ut($e),ut(Fe),ut(Be),ut($e);const Oe=r.length/3,xe=b.generateSideWallUV(i,r,Oe-6,Oe-3,Oe-2,Oe-1);gt(xe[0]),gt(xe[1]),gt(xe[3]),gt(xe[1]),gt(xe[2]),gt(xe[3])}function ut(fe){r.push(l[fe*3+0]),r.push(l[fe*3+1]),r.push(l[fe*3+2])}function gt(fe){s.push(fe.x),s.push(fe.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return y7(t,i,e)}static fromJSON(e,t){const i=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=t[e.shapes[s]];i.push(a)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new jw[r.type]().fromJSON(r)),new uS(i,e.options)}}const v7={generateTopUV:function(n,e,t,i,r){const s=e[t*3],o=e[t*3+1],a=e[i*3],l=e[i*3+1],u=e[r*3],d=e[r*3+1];return[new Je(s,o),new Je(a,l),new Je(u,d)]},generateSideWallUV:function(n,e,t,i,r,s){const o=e[t*3],a=e[t*3+1],l=e[t*3+2],u=e[i*3],d=e[i*3+1],h=e[i*3+2],p=e[r*3],v=e[r*3+1],_=e[r*3+2],w=e[s*3],S=e[s*3+1],A=e[s*3+2];return Math.abs(a-d)<Math.abs(o-u)?[new Je(o,1-l),new Je(u,1-h),new Je(p,1-_),new Je(w,1-A)]:[new Je(a,1-l),new Je(d,1-h),new Je(v,1-_),new Je(S,1-A)]}};function y7(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++){const s=n[i];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class Gy extends Vd{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Gy(e.radius,e.detail)}}class zy extends Vd{constructor(e=1,t=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new zy(e.radius,e.detail)}}class cS extends Tn{constructor(e=.5,t=1,i=32,r=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:r,thetaStart:s,thetaLength:o},i=Math.max(3,i),r=Math.max(1,r);const a=[],l=[],u=[],d=[];let h=e;const p=(t-e)/r,v=new te,_=new Je;for(let w=0;w<=r;w++){for(let S=0;S<=i;S++){const A=s+S/i*o;v.x=h*Math.cos(A),v.y=h*Math.sin(A),l.push(v.x,v.y,v.z),u.push(0,0,1),_.x=(v.x/t+1)/2,_.y=(v.y/t+1)/2,d.push(_.x,_.y)}h+=p}for(let w=0;w<r;w++){const S=w*(i+1);for(let A=0;A<i;A++){const b=A+S,C=b,P=b+i+1,k=b+i+2,L=b+1;a.push(C,P,L),a.push(P,k,L)}}this.setIndex(a),this.setAttribute("position",new Zt(l,3)),this.setAttribute("normal",new Zt(u,3)),this.setAttribute("uv",new Zt(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new cS(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class dS extends Tn{constructor(e=new wh([new Je(0,.5),new Je(-.5,-.5),new Je(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],r=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)u(e);else for(let d=0;d<e.length;d++)u(e[d]),this.addGroup(a,l,d),a+=l,l=0;this.setIndex(i),this.setAttribute("position",new Zt(r,3)),this.setAttribute("normal",new Zt(s,3)),this.setAttribute("uv",new Zt(o,2));function u(d){const h=r.length/3,p=d.extractPoints(t);let v=p.shape;const _=p.holes;Yl.isClockWise(v)===!1&&(v=v.reverse());for(let S=0,A=_.length;S<A;S++){const b=_[S];Yl.isClockWise(b)===!0&&(_[S]=b.reverse())}const w=Yl.triangulateShape(v,_);for(let S=0,A=_.length;S<A;S++){const b=_[S];v=v.concat(b)}for(let S=0,A=v.length;S<A;S++){const b=v[S];r.push(b.x,b.y,0),s.push(0,0,1),o.push(b.x,b.y)}for(let S=0,A=w.length;S<A;S++){const b=w[S],C=b[0]+h,P=b[1]+h,k=b[2]+h;i.push(C,P,k),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return _7(t,e)}static fromJSON(e,t){const i=[];for(let r=0,s=e.shapes.length;r<s;r++){const o=t[e.shapes[r]];i.push(o)}return new dS(i,e.curveSegments)}}function _7(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const r=n[t];e.shapes.push(r.uuid)}else e.shapes.push(n.uuid);return e}class Vy extends Tn{constructor(e=1,t=32,i=16,r=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const l=Math.min(o+a,Math.PI);let u=0;const d=[],h=new te,p=new te,v=[],_=[],w=[],S=[];for(let A=0;A<=i;A++){const b=[],C=A/i;let P=0;A===0&&o===0?P=.5/t:A===i&&l===Math.PI&&(P=-.5/t);for(let k=0;k<=t;k++){const L=k/t;h.x=-e*Math.cos(r+L*s)*Math.sin(o+C*a),h.y=e*Math.cos(o+C*a),h.z=e*Math.sin(r+L*s)*Math.sin(o+C*a),_.push(h.x,h.y,h.z),p.copy(h).normalize(),w.push(p.x,p.y,p.z),S.push(L+P,1-C),b.push(u++)}d.push(b)}for(let A=0;A<i;A++)for(let b=0;b<t;b++){const C=d[A][b+1],P=d[A][b],k=d[A+1][b],L=d[A+1][b+1];(A!==0||o>0)&&v.push(C,P,L),(A!==i-1||l<Math.PI)&&v.push(P,k,L)}this.setIndex(v),this.setAttribute("position",new Zt(_,3)),this.setAttribute("normal",new Zt(w,3)),this.setAttribute("uv",new Zt(S,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Vy(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class fS extends Vd{constructor(e=1,t=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new fS(e.radius,e.detail)}}class hS extends Tn{constructor(e=1,t=.4,i=12,r=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,arc:s},i=Math.floor(i),r=Math.floor(r);const o=[],a=[],l=[],u=[],d=new te,h=new te,p=new te;for(let v=0;v<=i;v++)for(let _=0;_<=r;_++){const w=_/r*s,S=v/i*Math.PI*2;h.x=(e+t*Math.cos(S))*Math.cos(w),h.y=(e+t*Math.cos(S))*Math.sin(w),h.z=t*Math.sin(S),a.push(h.x,h.y,h.z),d.x=e*Math.cos(w),d.y=e*Math.sin(w),p.subVectors(h,d).normalize(),l.push(p.x,p.y,p.z),u.push(_/r),u.push(v/i)}for(let v=1;v<=i;v++)for(let _=1;_<=r;_++){const w=(r+1)*v+_-1,S=(r+1)*(v-1)+_-1,A=(r+1)*(v-1)+_,b=(r+1)*v+_;o.push(w,S,b),o.push(S,A,b)}this.setIndex(o),this.setAttribute("position",new Zt(a,3)),this.setAttribute("normal",new Zt(l,3)),this.setAttribute("uv",new Zt(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new hS(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class pS extends Tn{constructor(e=1,t=.4,i=64,r=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:r,p:s,q:o},i=Math.floor(i),r=Math.floor(r);const a=[],l=[],u=[],d=[],h=new te,p=new te,v=new te,_=new te,w=new te,S=new te,A=new te;for(let C=0;C<=i;++C){const P=C/i*s*Math.PI*2;b(P,s,o,e,v),b(P+.01,s,o,e,_),S.subVectors(_,v),A.addVectors(_,v),w.crossVectors(S,A),A.crossVectors(w,S),w.normalize(),A.normalize();for(let k=0;k<=r;++k){const L=k/r*Math.PI*2,N=-t*Math.cos(L),O=t*Math.sin(L);h.x=v.x+(N*A.x+O*w.x),h.y=v.y+(N*A.y+O*w.y),h.z=v.z+(N*A.z+O*w.z),l.push(h.x,h.y,h.z),p.subVectors(h,v).normalize(),u.push(p.x,p.y,p.z),d.push(C/i),d.push(k/r)}}for(let C=1;C<=i;C++)for(let P=1;P<=r;P++){const k=(r+1)*(C-1)+(P-1),L=(r+1)*C+(P-1),N=(r+1)*C+P,O=(r+1)*(C-1)+P;a.push(k,L,O),a.push(L,N,O)}this.setIndex(a),this.setAttribute("position",new Zt(l,3)),this.setAttribute("normal",new Zt(u,3)),this.setAttribute("uv",new Zt(d,2));function b(C,P,k,L,N){const O=Math.cos(C),D=Math.sin(C),U=k/P*C,X=Math.cos(U);N.x=L*(2+X)*.5*O,N.y=L*(2+X)*D*.5,N.z=L*Math.sin(U)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new pS(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class mS extends Tn{constructor(e=new eb(new te(-1,-1,0),new te(-1,1,0),new te(1,1,0)),t=64,i=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:r,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new te,l=new te,u=new Je;let d=new te;const h=[],p=[],v=[],_=[];w(),this.setIndex(_),this.setAttribute("position",new Zt(h,3)),this.setAttribute("normal",new Zt(p,3)),this.setAttribute("uv",new Zt(v,2));function w(){for(let C=0;C<t;C++)S(C);S(s===!1?t:0),b(),A()}function S(C){d=e.getPointAt(C/t,d);const P=o.normals[C],k=o.binormals[C];for(let L=0;L<=r;L++){const N=L/r*Math.PI*2,O=Math.sin(N),D=-Math.cos(N);l.x=D*P.x+O*k.x,l.y=D*P.y+O*k.y,l.z=D*P.z+O*k.z,l.normalize(),p.push(l.x,l.y,l.z),a.x=d.x+i*l.x,a.y=d.y+i*l.y,a.z=d.z+i*l.z,h.push(a.x,a.y,a.z)}}function A(){for(let C=1;C<=t;C++)for(let P=1;P<=r;P++){const k=(r+1)*(C-1)+(P-1),L=(r+1)*C+(P-1),N=(r+1)*C+P,O=(r+1)*(C-1)+P;_.push(k,L,O),_.push(L,N,O)}}function b(){for(let C=0;C<=t;C++)for(let P=0;P<=r;P++)u.x=C/t,u.y=P/r,v.push(u.x,u.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new mS(new jw[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class UF extends Tn{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],i=new Set,r=new te,s=new te;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let u=0,d=l.length;u<d;++u){const h=l[u],p=h.start,v=h.count;for(let _=p,w=p+v;_<w;_+=3)for(let S=0;S<3;S++){const A=a.getX(_+S),b=a.getX(_+(S+1)%3);r.fromBufferAttribute(o,A),s.fromBufferAttribute(o,b),s2(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let u=0;u<3;u++){const d=3*a+u,h=3*a+(u+1)%3;r.fromBufferAttribute(o,d),s.fromBufferAttribute(o,h),s2(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new Zt(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function s2(n,e,t){const i=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(i)===!0||t.has(r)===!0?!1:(t.add(i),t.add(r),!0)}var o2=Object.freeze({__proto__:null,BoxGeometry:Jh,CapsuleGeometry:rS,CircleGeometry:sS,ConeGeometry:oS,CylinderGeometry:Dg,DodecahedronGeometry:aS,EdgesGeometry:BF,ExtrudeGeometry:uS,IcosahedronGeometry:Gy,LatheGeometry:Hy,OctahedronGeometry:zy,PlaneGeometry:zd,PolyhedronGeometry:Vd,RingGeometry:cS,ShapeGeometry:dS,SphereGeometry:Vy,TetrahedronGeometry:fS,TorusGeometry:hS,TorusKnotGeometry:pS,TubeGeometry:mS,WireframeGeometry:UF});class OF extends Fr{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new St(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class HF extends Ds{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class Lg extends Fr{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new St(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new St(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Gd,this.normalScale=new Je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Ps extends Lg{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Je(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return ji(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new St(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new St(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new St(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class GF extends Fr{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new St(16777215),this.specular=new St(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new St(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Gd,this.normalScale=new Je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Iy,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class zF extends Fr{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new St(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new St(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Gd,this.normalScale=new Je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class VF extends Fr{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Gd,this.normalScale=new Je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class WF extends Fr{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new St(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new St(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Gd,this.normalScale=new Je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Iy,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class qF extends Fr{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new St(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Gd,this.normalScale=new Je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class JF extends Bs{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function fh(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function XF(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function YF(n){function e(r,s){return n[r]-n[s]}const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(e),i}function iM(n,e,t){const i=n.length,r=new n.constructor(i);for(let s=0,o=0;o!==i;++s){const a=t[s]*e;for(let l=0;l!==e;++l)r[o++]=n[a+l]}return r}function nb(n,e,t,i){let r=1,s=n[0];for(;s!==void 0&&s[i]===void 0;)s=n[r++];if(s===void 0)return;let o=s[i];if(o!==void 0)if(Array.isArray(o))do o=s[i],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=n[r++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[i],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=n[r++];while(s!==void 0);else do o=s[i],o!==void 0&&(e.push(s.time),t.push(o)),s=n[r++];while(s!==void 0)}function x7(n,e,t,i,r=30){const s=n.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const u=s.tracks[l],d=u.getValueSize(),h=[],p=[];for(let v=0;v<u.times.length;++v){const _=u.times[v]*r;if(!(_<t||_>=i)){h.push(u.times[v]);for(let w=0;w<d;++w)p.push(u.values[v*d+w])}}h.length!==0&&(u.times=fh(h,u.times.constructor),u.values=fh(p,u.values.constructor),o.push(u))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function w7(n,e=0,t=n,i=30){i<=0&&(i=30);const r=t.tracks.length,s=e/i;for(let o=0;o<r;++o){const a=t.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const u=n.tracks.find(function(A){return A.name===a.name&&A.ValueTypeName===l});if(u===void 0)continue;let d=0;const h=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(d=h/3);let p=0;const v=u.getValueSize();u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(p=v/3);const _=a.times.length-1;let w;if(s<=a.times[0]){const A=d,b=h-d;w=a.values.slice(A,b)}else if(s>=a.times[_]){const A=_*h+d,b=A+h-d;w=a.values.slice(A,b)}else{const A=a.createInterpolant(),b=d,C=h-d;A.evaluate(s),w=A.resultBuffer.slice(b,C)}l==="quaternion"&&new Kr().fromArray(w).normalize().conjugate().toArray(w);const S=u.times.length;for(let A=0;A<S;++A){const b=A*v+p;if(l==="quaternion")Kr.multiplyQuaternionsFlat(u.values,b,w,0,u.values,b);else{const C=v-p*2;for(let P=0;P<C;++P)u.values[b+P]-=w[P]}}}return n.blendMode=DC,n}const A7={convertArray:fh,isTypedArray:XF,getKeyframeOrder:YF,sortedArray:iM,flattenJSON:nb,subclip:x7,makeClipAdditive:w7};class Bg{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let o;n:{i:if(!(e<r)){for(let a=i+2;;){if(r===void 0){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(s=r,r=t[++i],e<r)break t}o=t.length;break n}if(!(e>=s)){const a=t[1];e<a&&(i=2,s=a);for(let l=i-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===l)break;if(r=s,s=t[--i-1],e>=s)break t}o=i,i=0;break n}break e}for(;i<o;){const a=i+o>>>1;e<t[a]?o=a:i=a+1}if(r=t[i],s=t[i-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=i[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class KF extends Bg{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:lh,endingEnd:lh}}intervalChanged_(e,t,i){const r=this.parameterPositions;let s=e-2,o=e+1,a=r[s],l=r[o];if(a===void 0)switch(this.getSettings_().endingStart){case uh:s=e,a=2*t-i;break;case $v:s=r.length-2,a=t+r[s]-r[s+1];break;default:s=e,a=i}if(l===void 0)switch(this.getSettings_().endingEnd){case uh:o=e,l=2*i-t;break;case $v:o=1,l=i+r[1]-r[0];break;default:o=e-1,l=t}const u=(i-t)*.5,d=this.valueSize;this._weightPrev=u/(t-a),this._weightNext=u/(l-i),this._offsetPrev=s*d,this._offsetNext=o*d}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,u=l-a,d=this._offsetPrev,h=this._offsetNext,p=this._weightPrev,v=this._weightNext,_=(i-t)/(r-t),w=_*_,S=w*_,A=-p*S+2*p*w-p*_,b=(1+p)*S+(-1.5-2*p)*w+(-.5+p)*_+1,C=(-1-v)*S+(1.5+v)*w+.5*_,P=v*S-v*w;for(let k=0;k!==a;++k)s[k]=A*o[d+k]+b*o[u+k]+C*o[l+k]+P*o[h+k];return s}}class ib extends Bg{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,u=l-a,d=(i-t)/(r-t),h=1-d;for(let p=0;p!==a;++p)s[p]=o[u+p]*h+o[l+p]*d;return s}}class QF extends Bg{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class wl{constructor(e,t,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=fh(t,this.TimeBufferType),this.values=fh(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:fh(e.times,Array),values:fh(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new QF(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new ib(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new KF(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case cg:t=this.InterpolantFactoryMethodDiscrete;break;case Bh:t=this.InterpolantFactoryMethodLinear;break;case bw:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return cg;case this.InterpolantFactoryMethodLinear:return Bh;case this.InterpolantFactoryMethodSmooth:return bw}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let s=0,o=r-1;for(;s!==r&&i[s]<e;)++s;for(;o!==-1&&i[o]>t;)--o;if(++o,s!==0||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=i.slice(s,o),this.values=this.values.slice(s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=i[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(r!==void 0&&XF(r))for(let a=0,l=r.length;a!==l;++a){const u=r[a];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,u),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),r=this.getInterpolation()===bw,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const u=e[a],d=e[a+1];if(u!==d&&(a!==1||u!==e[0]))if(r)l=!0;else{const h=a*i,p=h-i,v=h+i;for(let _=0;_!==i;++_){const w=t[h+_];if(w!==t[p+_]||w!==t[v+_]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const h=a*i,p=o*i;for(let v=0;v!==i;++v)t[p+v]=t[h+v]}++o}}if(s>0){e[o]=e[s];for(let a=s*i,l=o*i,u=0;u!==i;++u)t[l+u]=t[a+u];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*i)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}wl.prototype.TimeBufferType=Float32Array;wl.prototype.ValueBufferType=Float32Array;wl.prototype.DefaultInterpolation=Bh;class Xh extends wl{}Xh.prototype.ValueTypeName="bool";Xh.prototype.ValueBufferType=Array;Xh.prototype.DefaultInterpolation=cg;Xh.prototype.InterpolantFactoryMethodLinear=void 0;Xh.prototype.InterpolantFactoryMethodSmooth=void 0;class rb extends wl{}rb.prototype.ValueTypeName="color";class Fh extends wl{}Fh.prototype.ValueTypeName="number";class ZF extends Bg{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(i-t)/(r-t);let u=e*a;for(let d=u+a;u!==d;u+=4)Kr.slerpFlat(s,0,o,u-a,o,u,l);return s}}class Bd extends wl{InterpolantFactoryMethodLinear(e){return new ZF(this.times,this.values,this.getValueSize(),e)}}Bd.prototype.ValueTypeName="quaternion";Bd.prototype.DefaultInterpolation=Bh;Bd.prototype.InterpolantFactoryMethodSmooth=void 0;class Yh extends wl{}Yh.prototype.ValueTypeName="string";Yh.prototype.ValueBufferType=Array;Yh.prototype.DefaultInterpolation=cg;Yh.prototype.InterpolantFactoryMethodLinear=void 0;Yh.prototype.InterpolantFactoryMethodSmooth=void 0;class Uh extends wl{}Uh.prototype.ValueTypeName="vector";class pg{constructor(e,t=-1,i,r=JA){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=Zo(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let o=0,a=i.length;o!==a;++o)t.push(E7(i[o]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=i.length;s!==o;++s)t.push(wl.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],u=[];l.push((a+s-1)%s,a,(a+1)%s),u.push(0,1,0);const d=YF(l);l=iM(l,1,d),u=iM(u,1,d),!r&&l[0]===0&&(l.push(s),u.push(u[0])),o.push(new Fh(".morphTargetInfluences["+t[a].name+"]",l,u).scale(1/i))}return new this(e,-1,o)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const u=e[a],d=u.name.match(s);if(d&&d.length>1){const h=d[1];let p=r[h];p||(r[h]=p=[]),p.push(u)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],t,i));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(h,p,v,_,w){if(v.length!==0){const S=[],A=[];nb(v,S,A,_),S.length!==0&&w.push(new h(p,S,A))}},r=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const u=e.hierarchy||[];for(let h=0;h<u.length;h++){const p=u[h].keys;if(!(!p||p.length===0))if(p[0].morphTargets){const v={};let _;for(_=0;_<p.length;_++)if(p[_].morphTargets)for(let w=0;w<p[_].morphTargets.length;w++)v[p[_].morphTargets[w]]=-1;for(const w in v){const S=[],A=[];for(let b=0;b!==p[_].morphTargets.length;++b){const C=p[_];S.push(C.time),A.push(C.morphTarget===w?1:0)}r.push(new Fh(".morphTargetInfluence["+w+"]",S,A))}l=v.length*o}else{const v=".bones["+t[h].name+"]";i(Uh,v+".position",p,"pos",r),i(Bd,v+".quaternion",p,"rot",r),i(Uh,v+".scale",p,"scl",r)}}return r.length===0?null:new this(s,l,r,a)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,r=e.length;i!==r;++i){const s=this.tracks[i];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function S7(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Fh;case"vector":case"vector2":case"vector3":case"vector4":return Uh;case"color":return rb;case"quaternion":return Bd;case"bool":case"boolean":return Xh;case"string":return Yh}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function E7(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=S7(n.type);if(n.times===void 0){const t=[],i=[];nb(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const Qu={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class gS{constructor(e,t,i){const r=this;let s=!1,o=0,a=0,l;const u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(d){a++,s===!1&&r.onStart!==void 0&&r.onStart(d,o,a),s=!0},this.itemEnd=function(d){o++,r.onProgress!==void 0&&r.onProgress(d,o,a),o===a&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(d){r.onError!==void 0&&r.onError(d)},this.resolveURL=function(d){return l?l(d):d},this.setURLModifier=function(d){return l=d,this},this.addHandler=function(d,h){return u.push(d,h),this},this.removeHandler=function(d){const h=u.indexOf(d);return h!==-1&&u.splice(h,2),this},this.getHandler=function(d){for(let h=0,p=u.length;h<p;h+=2){const v=u[h],_=u[h+1];if(v.global&&(v.lastIndex=0),v.test(d))return _}return null}}}const $F=new gS;class hs{constructor(e){this.manager=e!==void 0?e:$F,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,s){i.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}hs.DEFAULT_MATERIAL_NAME="__DEFAULT";const Hu={};class T7 extends Error{constructor(e,t){super(e),this.response=t}}class ds extends hs{constructor(e){super(e)}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Qu.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(Hu[e]!==void 0){Hu[e].push({onLoad:t,onProgress:i,onError:r});return}Hu[e]=[],Hu[e].push({onLoad:t,onProgress:i,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(u=>{if(u.status===200||u.status===0){if(u.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||u.body===void 0||u.body.getReader===void 0)return u;const d=Hu[e],h=u.body.getReader(),p=u.headers.get("Content-Length")||u.headers.get("X-File-Size"),v=p?parseInt(p):0,_=v!==0;let w=0;const S=new ReadableStream({start(A){b();function b(){h.read().then(({done:C,value:P})=>{if(C)A.close();else{w+=P.byteLength;const k=new ProgressEvent("progress",{lengthComputable:_,loaded:w,total:v});for(let L=0,N=d.length;L<N;L++){const O=d[L];O.onProgress&&O.onProgress(k)}A.enqueue(P),b()}})}}});return new Response(S)}else throw new T7(`fetch for "${u.url}" responded with ${u.status}: ${u.statusText}`,u)}).then(u=>{switch(l){case"arraybuffer":return u.arrayBuffer();case"blob":return u.blob();case"document":return u.text().then(d=>new DOMParser().parseFromString(d,a));case"json":return u.json();default:if(a===void 0)return u.text();{const h=/charset="?([^;"\s]*)"?/i.exec(a),p=h&&h[1]?h[1].toLowerCase():void 0,v=new TextDecoder(p);return u.arrayBuffer().then(_=>v.decode(_))}}}).then(u=>{Qu.add(e,u);const d=Hu[e];delete Hu[e];for(let h=0,p=d.length;h<p;h++){const v=d[h];v.onLoad&&v.onLoad(u)}}).catch(u=>{const d=Hu[e];if(d===void 0)throw this.manager.itemError(e),u;delete Hu[e];for(let h=0,p=d.length;h<p;h++){const v=d[h];v.onError&&v.onError(u)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class M7 extends hs{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new ds(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t=[];for(let i=0;i<e.length;i++){const r=pg.parse(e[i]);t.push(r)}return t}}class C7 extends hs{constructor(e){super(e)}load(e,t,i,r){const s=this,o=[],a=new nS,l=new ds(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let u=0;function d(h){l.load(e[h],function(p){const v=s.parse(p,!0);o[h]={width:v.width,height:v.height,format:v.format,mipmaps:v.mipmaps},u+=1,u===6&&(v.mipmapCount===1&&(a.minFilter=Kn),a.image=o,a.format=v.format,a.needsUpdate=!0,t&&t(a))},i,r)}if(Array.isArray(e))for(let h=0,p=e.length;h<p;++h)d(h);else l.load(e,function(h){const p=s.parse(h,!0);if(p.isCubemap){const v=p.mipmaps.length/p.mipmapCount;for(let _=0;_<v;_++){o[_]={mipmaps:[]};for(let w=0;w<p.mipmapCount;w++)o[_].mipmaps.push(p.mipmaps[_*p.mipmapCount+w]),o[_].format=p.format,o[_].width=p.width,o[_].height=p.height}a.image=o}else a.image.width=p.width,a.image.height=p.height,a.mipmaps=p.mipmaps;p.mipmapCount===1&&(a.minFilter=Kn),a.format=p.format,a.needsUpdate=!0,t&&t(a)},i,r);return a}}class ly extends hs{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Qu.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=iy("img");function l(){d(),Qu.add(e,this),t&&t(this),s.manager.itemEnd(e)}function u(h){d(),r&&r(h),s.manager.itemError(e),s.manager.itemEnd(e)}function d(){a.removeEventListener("load",l,!1),a.removeEventListener("error",u,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",u,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class jF extends hs{constructor(e){super(e)}load(e,t,i,r){const s=new Ny;s.colorSpace=Er;const o=new ly(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(u){o.load(e[u],function(d){s.images[u]=d,a++,a===6&&(s.needsUpdate=!0,t&&t(s))},void 0,r)}for(let u=0;u<e.length;++u)l(u);return s}}class sb extends hs{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Sd,a=new ds(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){let u;try{u=s.parse(l)}catch(d){if(r!==void 0)r(d);else{console.error(d);return}}u.image!==void 0?o.image=u.image:u.data!==void 0&&(o.image.width=u.width,o.image.height=u.height,o.image.data=u.data),o.wrapS=u.wrapS!==void 0?u.wrapS:Bi,o.wrapT=u.wrapT!==void 0?u.wrapT:Bi,o.magFilter=u.magFilter!==void 0?u.magFilter:Kn,o.minFilter=u.minFilter!==void 0?u.minFilter:Kn,o.anisotropy=u.anisotropy!==void 0?u.anisotropy:1,u.colorSpace!==void 0?o.colorSpace=u.colorSpace:u.encoding!==void 0&&(o.encoding=u.encoding),u.flipY!==void 0&&(o.flipY=u.flipY),u.format!==void 0&&(o.format=u.format),u.type!==void 0&&(o.type=u.type),u.mipmaps!==void 0&&(o.mipmaps=u.mipmaps,o.minFilter=jl),u.mipmapCount===1&&(o.minFilter=Kn),u.generateMipmaps!==void 0&&(o.generateMipmaps=u.generateMipmaps),o.needsUpdate=!0,t&&t(o,u)},i,r),o}}class ob extends hs{constructor(e){super(e)}load(e,t,i,r){const s=new hi,o=new ly(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},i,r),s}}class Wd extends Jn{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new St(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}class e3 extends Wd{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Jn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new St(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const uT=new dn,a2=new te,l2=new te;class ab{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Je(512,512),this.map=null,this.mapPass=null,this.matrix=new dn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new ky,this._frameExtents=new Je(1,1),this._viewportCount=1,this._viewports=[new li(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;a2.setFromMatrixPosition(e.matrixWorld),t.position.copy(a2),l2.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(l2),t.updateMatrixWorld(),uT.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(uT),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(uT)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class b7 extends ab{constructor(){super(new er(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=fg*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(i!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=i,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class lb extends Wd{constructor(e,t,i=0,r=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Jn.DEFAULT_UP),this.updateMatrix(),this.target=new Jn,this.distance=i,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new b7}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const u2=new dn,X0=new te,cT=new te;class R7 extends ab{constructor(){super(new er(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Je(4,2),this._viewportCount=6,this._viewports=[new li(2,1,1,1),new li(0,1,1,1),new li(3,1,1,1),new li(1,1,1,1),new li(3,0,1,1),new li(1,0,1,1)],this._cubeDirections=[new te(1,0,0),new te(-1,0,0),new te(0,0,1),new te(0,0,-1),new te(0,1,0),new te(0,-1,0)],this._cubeUps=[new te(0,1,0),new te(0,1,0),new te(0,1,0),new te(0,1,0),new te(0,0,1),new te(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),X0.setFromMatrixPosition(e.matrixWorld),i.position.copy(X0),cT.copy(i.position),cT.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(cT),i.updateMatrixWorld(),r.makeTranslation(-X0.x,-X0.y,-X0.z),u2.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(u2)}}class ub extends Wd{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new R7}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class P7 extends ab{constructor(){super(new Xl(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class cb extends Wd{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Jn.DEFAULT_UP),this.updateMatrix(),this.target=new Jn,this.shadow=new P7}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class t3 extends Wd{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class n3 extends Wd{constructor(e,t,i=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class i3{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new te)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*r),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*i),t.addScaledVector(o[4],1.092548*(i*r)),t.addScaledVector(o[5],1.092548*(r*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(i*s)),t.addScaledVector(o[8],.546274*(i*i-r*r)),t}getIrradianceAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*r),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*i),t.addScaledVector(o[4],2*.429043*i*r),t.addScaledVector(o[5],2*.429043*r*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*i*s),t.addScaledVector(o[8],.429043*(i*i-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const i=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*i,t[4]=1.092548*i*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*i*s,t[8]=.546274*(i*i-r*r)}}class r3 extends Wd{constructor(e=new i3,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class vS extends hs{constructor(e){super(e),this.textures={}}load(e,t,i,r){const s=this,o=new ds(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t=this.textures;function i(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const r=vS.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new St().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(r.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(r.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(r.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(r.depthFunc=e.depthFunc),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(r.blendSrc=e.blendSrc),e.blendDst!==void 0&&(r.blendDst=e.blendDst),e.blendEquation!==void 0&&(r.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(r.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(r.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(r.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&r.blendColor!==void 0&&r.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(r.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==void 0&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(r.uniforms[s]={},o.type){case"t":r.uniforms[s].value=i(o.value);break;case"c":r.uniforms[s].value=new St().setHex(o.value);break;case"v2":r.uniforms[s].value=new Je().fromArray(o.value);break;case"v3":r.uniforms[s].value=new te().fromArray(o.value);break;case"v4":r.uniforms[s].value=new li().fromArray(o.value);break;case"m3":r.uniforms[s].value=new Dn().fromArray(o.value);break;case"m4":r.uniforms[s].value=new dn().fromArray(o.value);break;default:r.uniforms[s].value=o.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)r.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(r.lights=e.lights),e.clipping!==void 0&&(r.clipping=e.clipping),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=i(e.map)),e.matcap!==void 0&&(r.matcap=i(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),r.normalScale=new Je().fromArray(s)}return e.displacementMap!==void 0&&(r.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=i(e.envMap)),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new Je().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=i(e.thicknessMap)),e.anisotropyMap!==void 0&&(r.anisotropyMap=i(e.anisotropyMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:OF,SpriteMaterial:qC,RawShaderMaterial:HF,ShaderMaterial:Ds,PointsMaterial:tS,MeshPhysicalMaterial:Ps,MeshStandardMaterial:Lg,MeshPhongMaterial:GF,MeshToonMaterial:zF,MeshNormalMaterial:VF,MeshLambertMaterial:WF,MeshDepthMaterial:QA,MeshDistanceMaterial:WC,MeshBasicMaterial:Ao,MeshMatcapMaterial:qF,LineDashedMaterial:JF,LineBasicMaterial:Bs,Material:Fr};return new t[e]}}class Ed{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let i=0,r=e.length;i<r;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class s3 extends Tn{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class o3 extends hs{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new ds(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t={},i={};function r(v,_){if(t[_]!==void 0)return t[_];const S=v.interleavedBuffers[_],A=s(v,S.buffer),b=Im(S.type,A),C=new Uy(b,S.stride);return C.uuid=S.uuid,t[_]=C,C}function s(v,_){if(i[_]!==void 0)return i[_];const S=v.arrayBuffers[_],A=new Uint32Array(S).buffer;return i[_]=A,A}const o=e.isInstancedBufferGeometry?new s3:new Tn,a=e.data.index;if(a!==void 0){const v=Im(a.type,a.array);o.setIndex(new Xn(v,1))}const l=e.data.attributes;for(const v in l){const _=l[v];let w;if(_.isInterleavedBufferAttribute){const S=r(e.data,_.data);w=new Ld(S,_.itemSize,_.offset,_.normalized)}else{const S=Im(_.type,_.array),A=_.isInstancedBufferAttribute?Nh:Xn;w=new A(S,_.itemSize,_.normalized)}_.name!==void 0&&(w.name=_.name),_.usage!==void 0&&w.setUsage(_.usage),o.setAttribute(v,w)}const u=e.data.morphAttributes;if(u)for(const v in u){const _=u[v],w=[];for(let S=0,A=_.length;S<A;S++){const b=_[S];let C;if(b.isInterleavedBufferAttribute){const P=r(e.data,b.data);C=new Ld(P,b.itemSize,b.offset,b.normalized)}else{const P=Im(b.type,b.array);C=new Xn(P,b.itemSize,b.normalized)}b.name!==void 0&&(C.name=b.name),w.push(C)}o.morphAttributes[v]=w}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const h=e.data.groups||e.data.drawcalls||e.data.offsets;if(h!==void 0)for(let v=0,_=h.length;v!==_;++v){const w=h[v];o.addGroup(w.start,w.count,w.materialIndex)}const p=e.data.boundingSphere;if(p!==void 0){const v=new te;p.center!==void 0&&v.fromArray(p.center),o.boundingSphere=new Qr(v,p.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class I7 extends hs{constructor(e){super(e)}load(e,t,i,r){const s=this,o=this.path===""?Ed.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new ds(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let u=null;try{u=JSON.parse(l)}catch(h){r!==void 0&&r(h),console.error("THREE:ObjectLoader: Can't parse "+e+".",h.message);return}const d=u.metadata;if(d===void 0||d.type===void 0||d.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(u,t)},i,r)}async loadAsync(e,t){const i=this,r=this.path===""?Ed.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const s=new ds(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(a)}parse(e,t){const i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),o=this.parseImages(e.images,function(){t!==void 0&&t(u)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),u=this.parseObject(e.object,s,l,a,i),d=this.parseSkeletons(e.skeletons,u);if(this.bindSkeletons(u,d),t!==void 0){let h=!1;for(const p in o)if(o[p].data instanceof HTMLImageElement){h=!0;break}h===!1&&t(u)}return u}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,r,a,o,t),u=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,u),l}parseShapes(e){const t={};if(e!==void 0)for(let i=0,r=e.length;i<r;i++){const s=new wh().fromJSON(e[i]);t[s.uuid]=s}return t}parseSkeletons(e,t){const i={},r={};if(t.traverse(function(s){s.isBone&&(r[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new Oy().fromJSON(e[s],r);i[a.uuid]=a}return i}parseGeometries(e,t){const i={};if(e!==void 0){const r=new o3;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=r.parse(l);break;default:l.type in o2?a=o2[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),i[l.uuid]=a}}return i}parseMaterials(e,t){const i={},r={};if(e!==void 0){const s=new vS;s.setTextures(t);for(let o=0,a=e.length;o<a;o++){const l=e[o];i[l.uuid]===void 0&&(i[l.uuid]=s.parse(l)),r[l.uuid]=i[l.uuid]}}return r}parseAnimations(e){const t={};if(e!==void 0)for(let i=0;i<e.length;i++){const r=e[i],s=pg.parse(r);t[s.uuid]=s}return t}parseImages(e,t){const i=this,r={};let s;function o(l){return i.manager.itemStart(l),s.load(l,function(){i.manager.itemEnd(l)},void 0,function(){i.manager.itemError(l),i.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const u=l,d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u)?u:i.resourcePath+u;return o(d)}else return l.data?{data:Im(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new gS(t);s=new ly(l),s.setCrossOrigin(this.crossOrigin);for(let u=0,d=e.length;u<d;u++){const h=e[u],p=h.url;if(Array.isArray(p)){const v=[];for(let _=0,w=p.length;_<w;_++){const S=p[_],A=a(S);A!==null&&(A instanceof HTMLImageElement?v.push(A):v.push(new Sd(A.data,A.width,A.height)))}r[h.uuid]=new ch(v)}else{const v=a(h.url);r[h.uuid]=new ch(v)}}}return r}async parseImagesAsync(e){const t=this,i={};let r;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:t.resourcePath+a;return await r.loadAsync(l)}else return o.data?{data:Im(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){r=new ly(this.manager),r.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],u=l.url;if(Array.isArray(u)){const d=[];for(let h=0,p=u.length;h<p;h++){const v=u[h],_=await s(v);_!==null&&(_ instanceof HTMLImageElement?d.push(_):d.push(new Sd(_.data,_.width,_.height)))}i[l.uuid]=new ch(d)}else{const d=await s(l.url);i[l.uuid]=new ch(d)}}}return i}parseTextures(e,t){function i(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const r={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),t[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=t[a.image],u=l.data;let d;Array.isArray(u)?(d=new Ny,u.length===6&&(d.needsUpdate=!0)):(u&&u.data?d=new Sd:d=new hi,u&&(d.needsUpdate=!0)),d.source=l,d.uuid=a.uuid,a.name!==void 0&&(d.name=a.name),a.mapping!==void 0&&(d.mapping=i(a.mapping,D7)),a.channel!==void 0&&(d.channel=a.channel),a.offset!==void 0&&d.offset.fromArray(a.offset),a.repeat!==void 0&&d.repeat.fromArray(a.repeat),a.center!==void 0&&d.center.fromArray(a.center),a.rotation!==void 0&&(d.rotation=a.rotation),a.wrap!==void 0&&(d.wrapS=i(a.wrap[0],c2),d.wrapT=i(a.wrap[1],c2)),a.format!==void 0&&(d.format=a.format),a.internalFormat!==void 0&&(d.internalFormat=a.internalFormat),a.type!==void 0&&(d.type=a.type),a.colorSpace!==void 0&&(d.colorSpace=a.colorSpace),a.encoding!==void 0&&(d.encoding=a.encoding),a.minFilter!==void 0&&(d.minFilter=i(a.minFilter,d2)),a.magFilter!==void 0&&(d.magFilter=i(a.magFilter,d2)),a.anisotropy!==void 0&&(d.anisotropy=a.anisotropy),a.flipY!==void 0&&(d.flipY=a.flipY),a.generateMipmaps!==void 0&&(d.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(d.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(d.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(d.compareFunction=a.compareFunction),a.userData!==void 0&&(d.userData=a.userData),r[a.uuid]=d}return r}parseObject(e,t,i,r,s){let o;function a(p){return t[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",p),t[p]}function l(p){if(p!==void 0){if(Array.isArray(p)){const v=[];for(let _=0,w=p.length;_<w;_++){const S=p[_];i[S]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",S),v.push(i[S])}return v}return i[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",p),i[p]}}function u(p){return r[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",p),r[p]}let d,h;switch(e.type){case"Scene":o=new Fy,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new St(e.background):o.background=u(e.background)),e.environment!==void 0&&(o.environment=u(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new jA(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new $A(e.fog.color,e.fog.density)),e.fog.name!==""&&(o.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":o=new er(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new Xl(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new t3(e.color,e.intensity);break;case"DirectionalLight":o=new cb(e.color,e.intensity);break;case"PointLight":o=new ub(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new n3(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new lb(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new e3(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new r3().fromJSON(e);break;case"SkinnedMesh":d=a(e.geometry),h=l(e.material),o=new JC(d,h),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":d=a(e.geometry),h=l(e.material),o=new bi(d,h);break;case"InstancedMesh":d=a(e.geometry),h=l(e.material);const p=e.count,v=e.instanceMatrix,_=e.instanceColor;o=new XC(d,h,p),o.instanceMatrix=new Nh(new Float32Array(v.array),16),_!==void 0&&(o.instanceColor=new Nh(new Float32Array(_.array),_.itemSize));break;case"BatchedMesh":d=a(e.geometry),h=l(e.material),o=new bF(e.maxGeometryCount,e.maxVertexCount,e.maxIndexCount,h),o.geometry=d,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._visibility=e.visibility,o._active=e.active,o._bounds=e.bounds.map(w=>{const S=new cs;S.min.fromArray(w.boxMin),S.max.fromArray(w.boxMax);const A=new Qr;return A.radius=w.sphereRadius,A.center.fromArray(w.sphereCenter),{boxInitialized:w.boxInitialized,box:S,sphereInitialized:w.sphereInitialized,sphere:A}}),o._maxGeometryCount=e.maxGeometryCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._geometryCount=e.geometryCount,o._matricesTexture=u(e.matricesTexture.uuid);break;case"LOD":o=new CF;break;case"Line":o=new rc(a(e.geometry),l(e.material));break;case"LineLoop":o=new YC(a(e.geometry),l(e.material));break;case"LineSegments":o=new _l(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new KC(a(e.geometry),l(e.material));break;case"Sprite":o=new MF(l(e.material));break;case"Group":o=new Ku;break;case"Bone":o=new eS;break;default:o=new Jn}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const p=e.children;for(let v=0;v<p.length;v++)o.add(this.parseObject(p[v],t,i,r,s))}if(e.animations!==void 0){const p=e.animations;for(let v=0;v<p.length;v++){const _=p[v];o.animations.push(s[_])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const p=e.levels;for(let v=0;v<p.length;v++){const _=p[v],w=o.getObjectByProperty("uuid",_.object);w!==void 0&&o.addLevel(w,_.distance,_.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const r=t[i.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(r,i.bindMatrix)}})}}const D7={UVMapping:Pd,CubeReflectionMapping:$l,CubeRefractionMapping:Id,EquirectangularReflectionMapping:Dh,EquirectangularRefractionMapping:Qv,CubeUVReflectionMapping:Pg},c2={RepeatWrapping:Dd,ClampToEdgeWrapping:Bi,MirroredRepeatWrapping:ug},d2={NearestFilter:$i,NearestMipmapNearestFilter:Zv,NearestMipmapLinearFilter:qm,LinearFilter:Kn,LinearMipmapNearestFilter:VA,LinearMipmapLinearFilter:jl};class a3 extends hs{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Qu.get(e);if(o!==void 0){if(s.manager.itemStart(e),o.then){o.then(u=>{t&&t(u),s.manager.itemEnd(e)}).catch(u=>{r&&r(u)});return}return setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o}const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader;const l=fetch(e,a).then(function(u){return u.blob()}).then(function(u){return createImageBitmap(u,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(u){return Qu.add(e,u),t&&t(u),s.manager.itemEnd(e),u}).catch(function(u){r&&r(u),Qu.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)});Qu.add(e,l),s.manager.itemStart(e)}}let Wx;class db{static getContext(){return Wx===void 0&&(Wx=new(window.AudioContext||window.webkitAudioContext)),Wx}static setContext(e){Wx=e}}class L7 extends hs{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new ds(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{const u=l.slice(0);db.getContext().decodeAudioData(u,function(h){t(h)}).catch(a)}catch(u){a(u)}},i,r);function a(l){r?r(l):console.error(l),s.manager.itemError(e)}}}const f2=new dn,h2=new dn,Of=new dn;class B7{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new er,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new er,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Of.copy(e.projectionMatrix);const r=t.eyeSep/2,s=r*t.near/t.focus,o=t.near*Math.tan(_h*t.fov*.5)/t.zoom;let a,l;h2.elements[12]=-r,f2.elements[12]=r,a=-o*t.aspect+s,l=o*t.aspect+s,Of.elements[0]=2*t.near/(l-a),Of.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(Of),a=-o*t.aspect-s,l=o*t.aspect-s,Of.elements[0]=2*t.near/(l-a),Of.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(Of)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(h2),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(f2)}}class fb{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=p2(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=p2();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function p2(){return(typeof performance>"u"?Date:performance).now()}const Hf=new te,m2=new Kr,N7=new te,Gf=new te;class k7 extends Jn{constructor(){super(),this.type="AudioListener",this.context=db.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new fb}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Hf,m2,N7),Gf.set(0,0,-1).applyQuaternion(m2),t.positionX){const r=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Hf.x,r),t.positionY.linearRampToValueAtTime(Hf.y,r),t.positionZ.linearRampToValueAtTime(Hf.z,r),t.forwardX.linearRampToValueAtTime(Gf.x,r),t.forwardY.linearRampToValueAtTime(Gf.y,r),t.forwardZ.linearRampToValueAtTime(Gf.z,r),t.upX.linearRampToValueAtTime(i.x,r),t.upY.linearRampToValueAtTime(i.y,r),t.upZ.linearRampToValueAtTime(i.z,r)}else t.setPosition(Hf.x,Hf.y,Hf.z),t.setOrientation(Gf.x,Gf.y,Gf.z,i.x,i.y,i.z)}}class l3 extends Jn{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const zf=new te,g2=new Kr,F7=new te,Vf=new te;class U7 extends l3{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(zf,g2,F7),Vf.set(0,0,1).applyQuaternion(g2);const t=this.panner;if(t.positionX){const i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(zf.x,i),t.positionY.linearRampToValueAtTime(zf.y,i),t.positionZ.linearRampToValueAtTime(zf.z,i),t.orientationX.linearRampToValueAtTime(Vf.x,i),t.orientationY.linearRampToValueAtTime(Vf.y,i),t.orientationZ.linearRampToValueAtTime(Vf.z,i)}else t.setPosition(zf.x,zf.y,zf.z),t.setOrientation(Vf.x,Vf.y,Vf.z)}}class O7{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}}class u3{constructor(e,t,i){this.binding=e,this.valueSize=i;let r,s,o;switch(t){case"quaternion":r=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,r=this.valueSize,s=e*r+r;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==r;++a)i[s+a]=i[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(i,s,0,a,r)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,r=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(i,r,l,1-s,t)}o>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*t,1,t);for(let l=t,u=t+t;l!==u;++l)if(i[l]!==i[l+t]){a.setValue(i,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(t,r);for(let s=i,o=r;s!==o;++s)t[s]=t[r+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,r,s){if(r>=.5)for(let o=0;o!==s;++o)e[t+o]=e[i+o]}_slerp(e,t,i,r){Kr.slerpFlat(e,t,e,t,e,i,r)}_slerpAdditive(e,t,i,r,s){const o=this._workIndex*s;Kr.multiplyQuaternionsFlat(e,o,e,t,e,i),Kr.slerpFlat(e,t,e,t,e,o,r)}_lerp(e,t,i,r,s){const o=1-r;for(let a=0;a!==s;++a){const l=t+a;e[l]=e[l]*o+e[i+a]*r}}_lerpAdditive(e,t,i,r,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[i+o]*r}}}const hb="\\[\\]\\.:\\/",H7=new RegExp("["+hb+"]","g"),pb="[^"+hb+"]",G7="[^"+hb.replace("\\.","")+"]",z7=/((?:WC+[\/:])*)/.source.replace("WC",pb),V7=/(WCOD+)?/.source.replace("WCOD",G7),W7=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",pb),q7=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",pb),J7=new RegExp("^"+z7+V7+W7+q7+"$"),X7=["material","materials","bones","map"];class Y7{constructor(e,t,i){const r=i||qn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class qn{constructor(e,t,i){this.path=t,this.parsedPath=i||qn.parseTrackName(t),this.node=qn.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new qn.Composite(e,t,i):new qn(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(H7,"")}static parseTrackName(e){const t=J7.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=i.nodeName.substring(r+1);X7.indexOf(s)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=s)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===t||a.uuid===t)return a;const l=i(a.children);if(l)return l}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)e[t++]=i[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,r=t.propertyName;let s=t.propertyIndex;if(e||(e=qn.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(i){let u=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let d=0;d<e.length;d++)if(e[d].name===u){u=d;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(u!==void 0){if(e[u]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[u]}}const o=e[r];if(o===void 0){const u=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+r+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}qn.Composite=Y7;qn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};qn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};qn.prototype.GetterByBindingType=[qn.prototype._getValue_direct,qn.prototype._getValue_array,qn.prototype._getValue_arrayElement,qn.prototype._getValue_toArray];qn.prototype.SetterByBindingTypeAndVersioning=[[qn.prototype._setValue_direct,qn.prototype._setValue_direct_setNeedsUpdate,qn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[qn.prototype._setValue_array,qn.prototype._setValue_array_setNeedsUpdate,qn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[qn.prototype._setValue_arrayElement,qn.prototype._setValue_arrayElement_setNeedsUpdate,qn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[qn.prototype._setValue_fromArray,qn.prototype._setValue_fromArray_setNeedsUpdate,qn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class K7{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Zo(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,r=arguments.length;i!==r;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,i=this._paths,r=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,u=this.nCachedObjects_;for(let d=0,h=arguments.length;d!==h;++d){const p=arguments[d],v=p.uuid;let _=t[v];if(_===void 0){_=l++,t[v]=_,e.push(p);for(let w=0,S=o;w!==S;++w)s[w].push(new qn(p,i[w],r[w]))}else if(_<u){a=e[_];const w=--u,S=e[w];t[S.uuid]=_,e[_]=S,t[v]=w,e[w]=p;for(let A=0,b=o;A!==b;++A){const C=s[A],P=C[w];let k=C[_];C[_]=P,k===void 0&&(k=new qn(p,i[A],r[A])),C[w]=k}}else e[_]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=u}remove(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],u=l.uuid,d=t[u];if(d!==void 0&&d>=s){const h=s++,p=e[h];t[p.uuid]=d,e[d]=p,t[u]=h,e[h]=l;for(let v=0,_=r;v!==_;++v){const w=i[v],S=w[h],A=w[d];w[d]=S,w[h]=A}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const u=arguments[a],d=u.uuid,h=t[d];if(h!==void 0)if(delete t[d],h<s){const p=--s,v=e[p],_=--o,w=e[_];t[v.uuid]=h,e[h]=v,t[w.uuid]=p,e[p]=w,e.pop();for(let S=0,A=r;S!==A;++S){const b=i[S],C=b[p],P=b[_];b[h]=C,b[p]=P,b.pop()}}else{const p=--o,v=e[p];p>0&&(t[v.uuid]=h),e[h]=v,e.pop();for(let _=0,w=r;_!==w;++_){const S=i[_];S[h]=S[p],S.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const i=this._bindingsIndicesByPath;let r=i[e];const s=this._bindings;if(r!==void 0)return s[r];const o=this._paths,a=this._parsedPaths,l=this._objects,u=l.length,d=this.nCachedObjects_,h=new Array(u);r=s.length,i[e]=r,o.push(e),a.push(t),s.push(h);for(let p=d,v=l.length;p!==v;++p){const _=l[p];h[p]=new qn(_,e,t)}return h}unsubscribe_(e){const t=this._bindingsIndicesByPath,i=t[e];if(i!==void 0){const r=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],u=e[a];t[u]=i,o[i]=l,o.pop(),s[i]=s[a],s.pop(),r[i]=r[a],r.pop()}}}class c3{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;const s=t.tracks,o=s.length,a=new Array(o),l={endingStart:lh,endingEnd:lh};for(let u=0;u!==o;++u){const d=s[u].createInterpolant(null);a[u]=d,d.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Qk,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){const r=this._clip.duration,s=e._clip.duration,o=s/r,a=r/s;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const r=this._mixer,s=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,u=a.sampleValues;return l[0]=s,l[1]=s+i,u[0]=e/o,u[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*i;l<0||i===0?t=0:(this._startTime=null,t=i*l)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,u=this._propertyBindings;switch(this.blendMode){case DC:for(let d=0,h=l.length;d!==h;++d)l[d].evaluate(o),u[d].accumulateAdditive(a);break;case JA:default:for(let d=0,h=l.length;d!==h;++d)l[d].evaluate(o),u[d].accumulate(r,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let r=this.time+e,s=this._loopCount;const o=i===Zk;if(e===0)return s===-1?r:o&&(s&1)===1?t-r:r;if(i===Kk){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),r>=t||r<0){const a=Math.floor(r/t);r-=t*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const u=e<0;this._setEndings(u,!u,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(o&&(s&1)===1)return t-r}return r}_setEndings(e,t,i){const r=this._interpolantSettings;i?(r.endingStart=uh,r.endingEnd=uh):(e?r.endingStart=this.zeroSlopeAtStart?uh:lh:r.endingStart=$v,t?r.endingEnd=this.zeroSlopeAtEnd?uh:lh:r.endingEnd=$v)}_scheduleFading(e,t,i){const r=this._mixer,s=r.time;let o=this._weightInterpolant;o===null&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=t,a[1]=s+e,l[1]=i,this}}const Q7=new Float32Array(1);class Z7 extends uc{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,r=e._clip.tracks,s=r.length,o=e._propertyBindings,a=e._interpolants,l=i.uuid,u=this._bindingsByRootAndName;let d=u[l];d===void 0&&(d={},u[l]=d);for(let h=0;h!==s;++h){const p=r[h],v=p.name;let _=d[v];if(_!==void 0)++_.referenceCount,o[h]=_;else{if(_=o[h],_!==void 0){_._cacheIndex===null&&(++_.referenceCount,this._addInactiveBinding(_,l,v));continue}const w=t&&t._propertyBindings[h].binding.parsedPath;_=new u3(qn.create(i,v,w),p.ValueTypeName,p.getValueSize()),++_.referenceCount,this._addInactiveBinding(_,l,v),o[h]=_}a[h].resultBuffer=_.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,i)}const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const r=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,u=l[l.length-1],d=e._byClipCacheIndex;u._byClipCacheIndex=d,l[d]=u,l.pop(),e._byClipCacheIndex=null;const h=a.actionByRoot,p=(e._localRoot||this._root).uuid;delete h[p],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_addInactiveBinding(e,t,i){const r=this._bindingsByRootAndName,s=this._bindings;let o=r[t];o===void 0&&(o={},r[t]=o),o[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,r=i.rootNode.uuid,s=i.path,o=this._bindingsByRootAndName,a=o[r],l=t[t.length-1],u=e._cacheIndex;l._cacheIndex=u,t[u]=l,t.pop(),delete a[s],Object.keys(a).length===0&&delete o[r]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new ib(new Float32Array(2),new Float32Array(2),1,Q7),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=i,t[i]=s}clipAction(e,t,i){const r=t||this._root,s=r.uuid;let o=typeof e=="string"?pg.findByName(r,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let u=null;if(i===void 0&&(o!==null?i=o.blendMode:i=JA),l!==void 0){const h=l.actionByRoot[s];if(h!==void 0&&h.blendMode===i)return h;u=l.knownActions[0],o===null&&(o=u._clip)}if(o===null)return null;const d=new c3(this,o,t,i);return this._bindAction(d,u),this._addInactiveAction(d,a,s),d}existingAction(e,t){const i=t||this._root,r=i.uuid,s=typeof e=="string"?pg.findByName(i,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,r=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let u=0;u!==i;++u)t[u]._update(r,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let u=0;u!==l;++u)a[u].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,r=this._actionsByClip,s=r[i];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const u=o[a];this._deactivateAction(u);const d=u._cacheIndex,h=t[t.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,h._cacheIndex=d,t[d]=h,t.pop(),this._removeInactiveBindingsForAction(u)}delete r[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const o in i){const a=i[o].actionByRoot,l=a[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const r=this._bindingsByRootAndName,s=r[t];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class mb{constructor(e){this.value=e}clone(){return new mb(this.value.clone===void 0?this.value:this.value.clone())}}let $7=0;class j7 extends uc{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:$7++}),this.name="",this.usage=ny,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let i=0,r=t.length;i<r;i++){const s=Array.isArray(t[i])?t[i]:[t[i]];for(let o=0;o<s.length;o++)this.uniforms.push(s[o].clone())}return this}clone(){return new this.constructor().copy(this)}}class eq extends Uy{constructor(e,t,i=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class tq{constructor(e,t,i,r,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=r,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class gb{constructor(e,t,i=0,r=1/0){this.ray=new qh(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new xh,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,i=[]){return rM(e,this,i,t),i.sort(v2),i}intersectObjects(e,t=!0,i=[]){for(let r=0,s=e.length;r<s;r++)rM(e[r],this,i,t);return i.sort(v2),i}}function v2(n,e){return n.distance-e.distance}function rM(n,e,t,i){if(n.layers.test(e.layers)&&n.raycast(e,t),i===!0){const r=n.children;for(let s=0,o=r.length;s<o;s++)rM(r[s],e,t,!0)}}class sM{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(ji(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class nq{constructor(e=1,t=0,i=0){return this.radius=e,this.theta=t,this.y=i,this}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return new this.constructor().copy(this)}}const y2=new Je;class iq{constructor(e=new Je(1/0,1/0),t=new Je(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=y2.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,y2).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const _2=new te,qx=new te;class rq{constructor(e=new te,t=new te){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){_2.subVectors(e,this.start),qx.subVectors(this.end,this.start);const i=qx.dot(qx);let s=qx.dot(_2)/i;return t&&(s=ji(s,0,1)),s}closestPointToPoint(e,t,i){const r=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const x2=new te;class sq extends Jn{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const i=new Tn,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const u=o/l*Math.PI*2,d=a/l*Math.PI*2;r.push(Math.cos(u),Math.sin(u),1,Math.cos(d),Math.sin(d),1)}i.setAttribute("position",new Zt(r,3));const s=new Bs({fog:!1,toneMapped:!1});this.cone=new _l(i,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),x2.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(x2),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Zc=new te,Jx=new dn,dT=new dn;class oq extends _l{constructor(e){const t=d3(e),i=new Tn,r=[],s=[],o=new St(0,0,1),a=new St(0,1,0);for(let u=0;u<t.length;u++){const d=t[u];d.parent&&d.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}i.setAttribute("position",new Zt(r,3)),i.setAttribute("color",new Zt(s,3));const l=new Bs({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,i=this.geometry,r=i.getAttribute("position");dT.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const a=t[s];a.parent&&a.parent.isBone&&(Jx.multiplyMatrices(dT,a.matrixWorld),Zc.setFromMatrixPosition(Jx),r.setXYZ(o,Zc.x,Zc.y,Zc.z),Jx.multiplyMatrices(dT,a.parent.matrixWorld),Zc.setFromMatrixPosition(Jx),r.setXYZ(o+1,Zc.x,Zc.y,Zc.z),o+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function d3(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,d3(n.children[t]));return e}class aq extends bi{constructor(e,t,i){const r=new Vy(t,4,2),s=new Ao({wireframe:!0,fog:!1,toneMapped:!1});super(r,s),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const lq=new te,w2=new St,A2=new St;class uq extends Jn{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const r=new zy(t);r.rotateY(Math.PI*.5),this.material=new Ao({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=r.getAttribute("position"),o=new Float32Array(s.count*3);r.setAttribute("color",new Xn(o,3)),this.add(new bi(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");w2.copy(this.light.color),A2.copy(this.light.groundColor);for(let i=0,r=t.count;i<r;i++){const s=i<r/2?w2:A2;t.setXYZ(i,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(lq.setFromMatrixPosition(this.light.matrixWorld).negate())}}class cq extends _l{constructor(e=10,t=10,i=4473924,r=8947848){i=new St(i),r=new St(r);const s=t/2,o=e/t,a=e/2,l=[],u=[];for(let p=0,v=0,_=-a;p<=t;p++,_+=o){l.push(-a,0,_,a,0,_),l.push(_,0,-a,_,0,a);const w=p===s?i:r;w.toArray(u,v),v+=3,w.toArray(u,v),v+=3,w.toArray(u,v),v+=3,w.toArray(u,v),v+=3}const d=new Tn;d.setAttribute("position",new Zt(l,3)),d.setAttribute("color",new Zt(u,3));const h=new Bs({vertexColors:!0,toneMapped:!1});super(d,h),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class dq extends _l{constructor(e=10,t=16,i=8,r=64,s=4473924,o=8947848){s=new St(s),o=new St(o);const a=[],l=[];if(t>1)for(let h=0;h<t;h++){const p=h/t*(Math.PI*2),v=Math.sin(p)*e,_=Math.cos(p)*e;a.push(0,0,0),a.push(v,0,_);const w=h&1?s:o;l.push(w.r,w.g,w.b),l.push(w.r,w.g,w.b)}for(let h=0;h<i;h++){const p=h&1?s:o,v=e-e/i*h;for(let _=0;_<r;_++){let w=_/r*(Math.PI*2),S=Math.sin(w)*v,A=Math.cos(w)*v;a.push(S,0,A),l.push(p.r,p.g,p.b),w=(_+1)/r*(Math.PI*2),S=Math.sin(w)*v,A=Math.cos(w)*v,a.push(S,0,A),l.push(p.r,p.g,p.b)}}const u=new Tn;u.setAttribute("position",new Zt(a,3)),u.setAttribute("color",new Zt(l,3));const d=new Bs({vertexColors:!0,toneMapped:!1});super(u,d),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const S2=new te,Xx=new te,E2=new te;class fq extends Jn{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",t===void 0&&(t=1);let r=new Tn;r.setAttribute("position",new Zt([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new Bs({fog:!1,toneMapped:!1});this.lightPlane=new rc(r,s),this.add(this.lightPlane),r=new Tn,r.setAttribute("position",new Zt([0,0,0,0,0,1],3)),this.targetLine=new rc(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),S2.setFromMatrixPosition(this.light.matrixWorld),Xx.setFromMatrixPosition(this.light.target.matrixWorld),E2.subVectors(Xx,S2),this.lightPlane.lookAt(Xx),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Xx),this.targetLine.scale.z=E2.length()}}const Yx=new te,Zi=new By;class hq extends _l{constructor(e){const t=new Tn,i=new Bs({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(_,w){l(_),l(w)}function l(_){r.push(0,0,0),s.push(0,0,0),o[_]===void 0&&(o[_]=[]),o[_].push(r.length/3-1)}t.setAttribute("position",new Zt(r,3)),t.setAttribute("color",new Zt(s,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const u=new St(16755200),d=new St(16711680),h=new St(43775),p=new St(16777215),v=new St(3355443);this.setColors(u,d,h,p,v)}setColors(e,t,i,r,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,i.r,i.g,i.b),a.setXYZ(33,i.r,i.g,i.b),a.setXYZ(34,i.r,i.g,i.b),a.setXYZ(35,i.r,i.g,i.b),a.setXYZ(36,i.r,i.g,i.b),a.setXYZ(37,i.r,i.g,i.b),a.setXYZ(38,r.r,r.g,r.b),a.setXYZ(39,r.r,r.g,r.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,i=1,r=1;Zi.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),ar("c",t,e,Zi,0,0,-1),ar("t",t,e,Zi,0,0,1),ar("n1",t,e,Zi,-i,-r,-1),ar("n2",t,e,Zi,i,-r,-1),ar("n3",t,e,Zi,-i,r,-1),ar("n4",t,e,Zi,i,r,-1),ar("f1",t,e,Zi,-i,-r,1),ar("f2",t,e,Zi,i,-r,1),ar("f3",t,e,Zi,-i,r,1),ar("f4",t,e,Zi,i,r,1),ar("u1",t,e,Zi,i*.7,r*1.1,-1),ar("u2",t,e,Zi,-i*.7,r*1.1,-1),ar("u3",t,e,Zi,0,r*2,-1),ar("cf1",t,e,Zi,-i,0,1),ar("cf2",t,e,Zi,i,0,1),ar("cf3",t,e,Zi,0,-r,1),ar("cf4",t,e,Zi,0,r,1),ar("cn1",t,e,Zi,-i,0,-1),ar("cn2",t,e,Zi,i,0,-1),ar("cn3",t,e,Zi,0,-r,-1),ar("cn4",t,e,Zi,0,r,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function ar(n,e,t,i,r,s,o){Yx.set(r,s,o).unproject(i);const a=e[n];if(a!==void 0){const l=t.getAttribute("position");for(let u=0,d=a.length;u<d;u++)l.setXYZ(a[u],Yx.x,Yx.y,Yx.z)}}const Kx=new cs;class pq extends _l{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),s=new Tn;s.setIndex(new Xn(i,1)),s.setAttribute("position",new Xn(r,3)),super(s,new Bs({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&Kx.setFromObject(this.object),Kx.isEmpty())return;const t=Kx.min,i=Kx.max,r=this.geometry.attributes.position,s=r.array;s[0]=i.x,s[1]=i.y,s[2]=i.z,s[3]=t.x,s[4]=i.y,s[5]=i.z,s[6]=t.x,s[7]=t.y,s[8]=i.z,s[9]=i.x,s[10]=t.y,s[11]=i.z,s[12]=i.x,s[13]=i.y,s[14]=t.z,s[15]=t.x,s[16]=i.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=i.x,s[22]=t.y,s[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class mq extends _l{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new Tn;s.setIndex(new Xn(i,1)),s.setAttribute("position",new Zt(r,3)),super(s,new Bs({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class gq extends rc{constructor(e,t=1,i=16776960){const r=i,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new Tn;o.setAttribute("position",new Zt(s,3)),o.computeBoundingSphere(),super(o,new Bs({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new Tn;l.setAttribute("position",new Zt(a,3)),l.computeBoundingSphere(),this.add(new bi(l,new Ao({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const T2=new te;let Qx,fT;class vq extends Jn{constructor(e=new te(0,0,1),t=new te(0,0,0),i=1,r=16776960,s=i*.2,o=s*.2){super(),this.type="ArrowHelper",Qx===void 0&&(Qx=new Tn,Qx.setAttribute("position",new Zt([0,0,0,0,1,0],3)),fT=new Dg(0,.5,1,5,1),fT.translate(0,-.5,0)),this.position.copy(t),this.line=new rc(Qx,new Bs({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new bi(fT,new Ao({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{T2.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(T2,t)}}setLength(e,t=e*.2,i=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class yq extends _l{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new Tn;r.setAttribute("position",new Zt(t,3)),r.setAttribute("color",new Zt(i,3));const s=new Bs({vertexColors:!0,toneMapped:!1});super(r,s),this.type="AxesHelper"}setColors(e,t,i){const r=new St,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(t),r.toArray(s,6),r.toArray(s,9),r.set(i),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class _q{constructor(){this.type="ShapePath",this.color=new St,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new ry,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,r){return this.currentPath.quadraticCurveTo(e,t,i,r),this}bezierCurveTo(e,t,i,r,s,o){return this.currentPath.bezierCurveTo(e,t,i,r,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(A){const b=[];for(let C=0,P=A.length;C<P;C++){const k=A[C],L=new wh;L.curves=k.curves,b.push(L)}return b}function i(A,b){const C=b.length;let P=!1;for(let k=C-1,L=0;L<C;k=L++){let N=b[k],O=b[L],D=O.x-N.x,U=O.y-N.y;if(Math.abs(U)>Number.EPSILON){if(U<0&&(N=b[L],D=-D,O=b[k],U=-U),A.y<N.y||A.y>O.y)continue;if(A.y===N.y){if(A.x===N.x)return!0}else{const X=U*(A.x-N.x)-D*(A.y-N.y);if(X===0)return!0;if(X<0)continue;P=!P}}else{if(A.y!==N.y)continue;if(O.x<=A.x&&A.x<=N.x||N.x<=A.x&&A.x<=O.x)return!0}}return P}const r=Yl.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const u=[];if(s.length===1)return a=s[0],l=new wh,l.curves=a.curves,u.push(l),u;let d=!r(s[0].getPoints());d=e?!d:d;const h=[],p=[];let v=[],_=0,w;p[_]=void 0,v[_]=[];for(let A=0,b=s.length;A<b;A++)a=s[A],w=a.getPoints(),o=r(w),o=e?!o:o,o?(!d&&p[_]&&_++,p[_]={s:new wh,p:w},p[_].s.curves=a.curves,d&&_++,v[_]=[]):v[_].push({h:a,p:w[0]});if(!p[0])return t(s);if(p.length>1){let A=!1,b=0;for(let C=0,P=p.length;C<P;C++)h[C]=[];for(let C=0,P=p.length;C<P;C++){const k=v[C];for(let L=0;L<k.length;L++){const N=k[L];let O=!0;for(let D=0;D<p.length;D++)i(N.p,p[D].p)&&(C!==D&&b++,O?(O=!1,h[D].push(N)):A=!0);O&&h[C].push(N)}}b>0&&A===!1&&(v=h)}let S;for(let A=0,b=p.length;A<b;A++){l=p[A].s,u.push(l),S=v[A];for(let C=0,P=S.length;C<P;C++)l.holes.push(S[C].h)}return u}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Rg}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Rg);const f3=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:AC,AddEquation:od,AddOperation:Fk,AdditiveAnimationBlendMode:DC,AdditiveBlending:Yv,AgXToneMapping:zk,AlphaFormat:Wk,AlwaysCompare:lF,AlwaysDepth:Pk,AlwaysStencilFunc:K1,AmbientLight:t3,AnimationAction:c3,AnimationClip:pg,AnimationLoader:M7,AnimationMixer:Z7,AnimationObjectGroup:K7,AnimationUtils:A7,ArcCurve:RF,ArrayCamera:SF,ArrowHelper:vq,AttachedBindMode:A1,Audio:l3,AudioAnalyser:O7,AudioContext:db,AudioListener:k7,AudioLoader:L7,AxesHelper:yq,BackSide:to,BasicDepthPacking:jk,BasicShadowMap:fk,BatchedMesh:bF,Bone:eS,BooleanKeyframeTrack:Xh,Box2:iq,Box3:cs,Box3Helper:mq,BoxGeometry:Jh,BoxHelper:pq,BufferAttribute:Xn,BufferGeometry:Tn,BufferGeometryLoader:o3,ByteType:SC,Cache:Qu,Camera:By,CameraHelper:hq,CanvasTexture:JW,CapsuleGeometry:rS,CatmullRomCurve3:PF,CineonToneMapping:Hk,CircleGeometry:sS,ClampToEdgeWrapping:Bi,Clock:fb,Color:St,ColorKeyframeTrack:rb,ColorManagement:fi,CompressedArrayTexture:WW,CompressedCubeTexture:qW,CompressedTexture:nS,CompressedTextureLoader:C7,ConeGeometry:oS,ConstantAlphaFactor:Ck,ConstantColorFactor:Tk,CubeCamera:mF,CubeReflectionMapping:$l,CubeRefractionMapping:Id,CubeTexture:Ny,CubeTextureLoader:jF,CubeUVReflectionMapping:Pg,CubicBezierCurve:ZC,CubicBezierCurve3:IF,CubicInterpolant:KF,CullFaceBack:v1,CullFaceFront:dk,CullFaceFrontBack:O4,CullFaceNone:ck,Curve:xl,CurvePath:LF,CustomBlending:hk,CustomToneMapping:Gk,CylinderGeometry:Dg,Cylindrical:nq,Data3DTexture:UC,DataArrayTexture:YA,DataTexture:Sd,DataTextureLoader:sb,DataUtils:dh,DecrementStencilOp:X4,DecrementWrapStencilOp:K4,DefaultLoadingManager:$F,DepthFormat:wd,DepthStencilFormat:Lh,DepthTexture:VC,DetachedBindMode:Vk,DirectionalLight:cb,DirectionalLightHelper:fq,DiscreteInterpolant:QF,DisplayP3ColorSpace:XA,DodecahedronGeometry:aS,DoubleSide:Ma,DstAlphaFactor:xk,DstColorFactor:Ak,DynamicCopyUsage:c5,DynamicDrawUsage:r5,DynamicReadUsage:a5,EdgesGeometry:BF,EllipseCurve:iS,EqualCompare:rF,EqualDepth:Dk,EqualStencilFunc:j4,EquirectangularReflectionMapping:Dh,EquirectangularRefractionMapping:Qv,Euler:Ly,EventDispatcher:uc,ExtrudeGeometry:uS,FileLoader:ds,Float16BufferAttribute:K5,Float32BufferAttribute:Zt,Float64BufferAttribute:Q5,FloatType:Cr,Fog:jA,FogExp2:$A,FramebufferTexture:VW,FrontSide:Zl,Frustum:ky,GLBufferAttribute:tq,GLSL1:f5,GLSL3:Q1,GreaterCompare:sF,GreaterDepth:Bk,GreaterEqualCompare:aF,GreaterEqualDepth:Lk,GreaterEqualStencilFunc:i5,GreaterStencilFunc:t5,GridHelper:cq,Group:Ku,HalfFloatType:Yr,HemisphereLight:e3,HemisphereLightHelper:uq,IcosahedronGeometry:Gy,ImageBitmapLoader:a3,ImageLoader:ly,ImageUtils:FC,IncrementStencilOp:J4,IncrementWrapStencilOp:Y4,InstancedBufferAttribute:Nh,InstancedBufferGeometry:s3,InstancedInterleavedBuffer:eq,InstancedMesh:XC,Int16BufferAttribute:X5,Int32BufferAttribute:Y5,Int8BufferAttribute:W5,IntType:qA,InterleavedBuffer:Uy,InterleavedBufferAttribute:Ld,Interpolant:Bg,InterpolateDiscrete:cg,InterpolateLinear:Bh,InterpolateSmooth:bw,InvertStencilOp:Q4,KeepStencilOp:$f,KeyframeTrack:wl,LOD:CF,LatheGeometry:Hy,Layers:xh,LessCompare:iF,LessDepth:Ik,LessEqualCompare:NC,LessEqualDepth:Kv,LessEqualStencilFunc:e5,LessStencilFunc:$4,Light:Wd,LightProbe:r3,Line:rc,Line3:rq,LineBasicMaterial:Bs,LineCurve:$C,LineCurve3:DF,LineDashedMaterial:JF,LineLoop:YC,LineSegments:_l,LinearDisplayP3ColorSpace:Dy,LinearEncoding:BC,LinearFilter:Kn,LinearInterpolant:ib,LinearMipMapLinearFilter:S1,LinearMipMapNearestFilter:V4,LinearMipmapLinearFilter:jl,LinearMipmapNearestFilter:VA,LinearSRGBColorSpace:jo,LinearToneMapping:Uk,LinearTransfer:jv,Loader:hs,LoaderUtils:Ed,LoadingManager:gS,LoopOnce:Kk,LoopPingPong:Zk,LoopRepeat:Qk,LuminanceAlphaFormat:Jk,LuminanceFormat:qk,MOUSE:Qf,Material:Fr,MaterialLoader:vS,MathUtils:ad,Matrix3:Dn,Matrix4:dn,MaxEquation:w1,Mesh:bi,MeshBasicMaterial:Ao,MeshDepthMaterial:QA,MeshDistanceMaterial:WC,MeshLambertMaterial:WF,MeshMatcapMaterial:qF,MeshNormalMaterial:VF,MeshPhongMaterial:GF,MeshPhysicalMaterial:Ps,MeshStandardMaterial:Lg,MeshToonMaterial:zF,MinEquation:x1,MirroredRepeatWrapping:ug,MixOperation:kk,MultiplyBlending:_1,MultiplyOperation:Iy,NearestFilter:$i,NearestMipMapLinearFilter:z4,NearestMipMapNearestFilter:G4,NearestMipmapLinearFilter:qm,NearestMipmapNearestFilter:Zv,NeverCompare:nF,NeverDepth:Rk,NeverStencilFunc:Z4,NoBlending:ql,NoColorSpace:Jo,NoToneMapping:Jl,NormalAnimationBlendMode:JA,NormalBlending:yh,NotEqualCompare:oF,NotEqualDepth:Nk,NotEqualStencilFunc:n5,NumberKeyframeTrack:Fh,Object3D:Jn,ObjectLoader:I7,ObjectSpaceNormalMap:tF,OctahedronGeometry:zy,OneFactor:vk,OneMinusConstantAlphaFactor:bk,OneMinusConstantColorFactor:Mk,OneMinusDstAlphaFactor:wk,OneMinusDstColorFactor:Sk,OneMinusSrcAlphaFactor:Kw,OneMinusSrcColorFactor:_k,OrthographicCamera:Xl,P3Primaries:ty,PCFShadowMap:zA,PCFSoftShadowMap:Wm,PMREMGenerator:$1,Path:ry,PerspectiveCamera:er,Plane:Wu,PlaneGeometry:zd,PlaneHelper:gq,PointLight:ub,PointLightHelper:aq,Points:KC,PointsMaterial:tS,PolarGridHelper:dq,PolyhedronGeometry:Vd,PositionalAudio:U7,PropertyBinding:qn,PropertyMixer:u3,QuadraticBezierCurve:jC,QuadraticBezierCurve3:eb,Quaternion:Kr,QuaternionKeyframeTrack:Bd,QuaternionLinearInterpolant:ZF,RED_GREEN_RGTC2_Format:X1,RED_RGTC1_Format:Yk,REVISION:Rg,RGBADepthPacking:eF,RGBAFormat:Mr,RGBAIntegerFormat:PC,RGBA_ASTC_10x10_Format:G1,RGBA_ASTC_10x5_Format:U1,RGBA_ASTC_10x6_Format:O1,RGBA_ASTC_10x8_Format:H1,RGBA_ASTC_12x10_Format:z1,RGBA_ASTC_12x12_Format:V1,RGBA_ASTC_4x4_Format:P1,RGBA_ASTC_5x4_Format:I1,RGBA_ASTC_5x5_Format:D1,RGBA_ASTC_6x5_Format:L1,RGBA_ASTC_6x6_Format:B1,RGBA_ASTC_8x5_Format:N1,RGBA_ASTC_8x6_Format:k1,RGBA_ASTC_8x8_Format:F1,RGBA_BPTC_Format:Cw,RGBA_ETC2_EAC_Format:R1,RGBA_PVRTC_2BPPV1_Format:C1,RGBA_PVRTC_4BPPV1_Format:M1,RGBA_S3TC_DXT1_Format:Ew,RGBA_S3TC_DXT3_Format:Tw,RGBA_S3TC_DXT5_Format:Mw,RGB_BPTC_SIGNED_Format:W1,RGB_BPTC_UNSIGNED_Format:q1,RGB_ETC1_Format:IC,RGB_ETC2_Format:b1,RGB_PVRTC_2BPPV1_Format:T1,RGB_PVRTC_4BPPV1_Format:E1,RGB_S3TC_DXT1_Format:Sw,RGFormat:Xk,RGIntegerFormat:RC,RawShaderMaterial:HF,Ray:qh,Raycaster:gb,Rec709Primaries:ey,RectAreaLight:n3,RedFormat:CC,RedIntegerFormat:bC,ReinhardToneMapping:Ok,RenderTarget:dF,RepeatWrapping:Dd,ReplaceStencilOp:q4,ReverseSubtractEquation:mk,RingGeometry:cS,SIGNED_RED_GREEN_RGTC2_Format:Y1,SIGNED_RED_RGTC1_Format:J1,SRGBColorSpace:Er,SRGBTransfer:Ti,Scene:Fy,ShaderChunk:Cn,ShaderLib:fl,ShaderMaterial:Ds,ShadowMaterial:OF,Shape:wh,ShapeGeometry:dS,ShapePath:_q,ShapeUtils:Yl,ShortType:EC,Skeleton:Oy,SkeletonHelper:oq,SkinnedMesh:JC,Source:ch,Sphere:Qr,SphereGeometry:Vy,Spherical:sM,SphericalHarmonics3:i3,SplineCurve:tb,SpotLight:lb,SpotLightHelper:sq,Sprite:MF,SpriteMaterial:qC,SrcAlphaFactor:Yw,SrcAlphaSaturateFactor:Ek,SrcColorFactor:yk,StaticCopyUsage:u5,StaticDrawUsage:ny,StaticReadUsage:o5,StereoCamera:B7,StreamCopyUsage:d5,StreamDrawUsage:s5,StreamReadUsage:l5,StringKeyframeTrack:Yh,SubtractEquation:pk,SubtractiveBlending:y1,TOUCH:Zf,TangentSpaceNormalMap:Gd,TetrahedronGeometry:fS,Texture:hi,TextureLoader:ob,TorusGeometry:hS,TorusKnotGeometry:pS,Triangle:xo,TriangleFanDrawMode:Qw,TriangleStripDrawMode:LC,TrianglesDrawMode:$k,TubeGeometry:mS,TwoPassDoubleSide:H4,UVMapping:Pd,Uint16BufferAttribute:OC,Uint32BufferAttribute:HC,Uint8BufferAttribute:q5,Uint8ClampedBufferAttribute:J5,Uniform:mb,UniformsGroup:j7,UniformsLib:Et,UniformsUtils:pF,UnsignedByteType:Qo,UnsignedInt248Type:xd,UnsignedIntType:zl,UnsignedShort4444Type:TC,UnsignedShort5551Type:MC,UnsignedShortType:WA,VSMShadowMap:dl,Vector2:Je,Vector3:te,Vector4:li,VectorKeyframeTrack:Uh,VideoTexture:zW,WebGL1Renderer:EF,WebGL3DRenderTarget:D5,WebGLArrayRenderTarget:I5,WebGLCoordinateSystem:pl,WebGLCubeRenderTarget:GC,WebGLMultipleRenderTargets:L5,WebGLRenderTarget:no,WebGLRenderer:ZA,WebGLUtils:AF,WebGPUCoordinateSystem:dg,WireframeGeometry:UF,WrapAroundEnding:$v,ZeroCurvatureEnding:lh,ZeroFactor:gk,ZeroSlopeEnding:uh,ZeroStencilOp:W4,_SRGBAFormat:Zw,createCanvasElement:cF,sRGBEncoding:Ad},Symbol.toStringTag,{value:"Module"}));var hT={exports:{}},$c={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M2;function xq(){return M2||(M2=1,$c.ConcurrentRoot=1,$c.ContinuousEventPriority=4,$c.DefaultEventPriority=16,$c.DiscreteEventPriority=1,$c.IdleEventPriority=536870912,$c.LegacyRoot=0),$c}var C2;function wq(){return C2||(C2=1,hT.exports=xq()),hT.exports}var Nm=wq();function Aq(n){let e;const t=new Set,i=(u,d)=>{const h=typeof u=="function"?u(e):u;if(h!==e){const p=e;e=d?h:Object.assign({},e,h),t.forEach(v=>v(e,p))}},r=()=>e,s=(u,d=r,h=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let p=d(e);function v(){const _=d(e);if(!h(p,_)){const w=p;u(p=_,w)}}return t.add(v),()=>t.delete(v)},l={setState:i,getState:r,subscribe:(u,d,h)=>d||h?s(u,d,h):(t.add(u),()=>t.delete(u)),destroy:()=>t.clear()};return e=n(i,r,l),l}const Sq=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),b2=Sq?ie.useEffect:ie.useLayoutEffect;function h3(n){const e=typeof n=="function"?Aq(n):n,t=(i=e.getState,r=Object.is)=>{const[,s]=ie.useReducer(S=>S+1,0),o=e.getState(),a=ie.useRef(o),l=ie.useRef(i),u=ie.useRef(r),d=ie.useRef(!1),h=ie.useRef();h.current===void 0&&(h.current=i(o));let p,v=!1;(a.current!==o||l.current!==i||u.current!==r||d.current)&&(p=i(o),v=!r(h.current,p)),b2(()=>{v&&(h.current=p),a.current=o,l.current=i,u.current=r,d.current=!1});const _=ie.useRef(o);b2(()=>{const S=()=>{try{const b=e.getState(),C=l.current(b);u.current(h.current,C)||(a.current=b,h.current=C,s())}catch{d.current=!0,s()}},A=e.subscribe(S);return e.getState()!==_.current&&S(),A},[]);const w=v?p:h.current;return ie.useDebugValue(w),w};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const i=[t,e];return{next(){const r=i.length<=0;return{value:i.shift(),done:r}}}},t}const Eq=n=>typeof n=="object"&&typeof n.then=="function",hh=[];function p3(n,e,t=(i,r)=>i===r){if(n===e)return!0;if(!n||!e)return!1;const i=n.length;if(e.length!==i)return!1;for(let r=0;r<i;r++)if(!t(n[r],e[r]))return!1;return!0}function m3(n,e=null,t=!1,i={}){e===null&&(e=[n]);for(const s of hh)if(p3(e,s.keys,s.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return i.lifespan&&i.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,i.lifespan)),s.response;if(!t)throw s.promise}const r={keys:e,equal:i.equal,remove:()=>{const s=hh.indexOf(r);s!==-1&&hh.splice(s,1)},promise:(Eq(n)?n:n(...e)).then(s=>{r.response=s,i.lifespan&&i.lifespan>0&&(r.timeout=setTimeout(r.remove,i.lifespan))}).catch(s=>r.error=s)};if(hh.push(r),!t)throw r.promise}const Tq=(n,e,t)=>m3(n,e,!1,t),Mq=(n,e,t)=>void m3(n,e,!0,t),Cq=n=>{if(n===void 0||n.length===0)hh.splice(0,hh.length);else{const e=hh.find(t=>p3(n,t.keys,t.equal));e&&e.remove()}};var pT={exports:{}},mT={exports:{}},gT={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var R2;function bq(){return R2||(R2=1,(function(n){function e($,oe){var W=$.length;$.push(oe);e:for(;0<W;){var J=W-1>>>1,se=$[J];if(0<r(se,oe))$[J]=oe,$[W]=se,W=J;else break e}}function t($){return $.length===0?null:$[0]}function i($){if($.length===0)return null;var oe=$[0],W=$.pop();if(W!==oe){$[0]=W;e:for(var J=0,se=$.length,me=se>>>1;J<me;){var Se=2*(J+1)-1,ke=$[Se],Ie=Se+1,ze=$[Ie];if(0>r(ke,W))Ie<se&&0>r(ze,ke)?($[J]=ze,$[Ie]=W,J=Ie):($[J]=ke,$[Se]=W,J=Se);else if(Ie<se&&0>r(ze,W))$[J]=ze,$[Ie]=W,J=Ie;else break e}}return oe}function r($,oe){var W=$.sortIndex-oe.sortIndex;return W!==0?W:$.id-oe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],u=[],d=1,h=null,p=3,v=!1,_=!1,w=!1,S=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C($){for(var oe=t(u);oe!==null;){if(oe.callback===null)i(u);else if(oe.startTime<=$)i(u),oe.sortIndex=oe.expirationTime,e(l,oe);else break;oe=t(u)}}function P($){if(w=!1,C($),!_)if(t(l)!==null)_=!0,re(k);else{var oe=t(u);oe!==null&&ye(P,oe.startTime-$)}}function k($,oe){_=!1,w&&(w=!1,A(O),O=-1),v=!0;var W=p;try{for(C(oe),h=t(l);h!==null&&(!(h.expirationTime>oe)||$&&!X());){var J=h.callback;if(typeof J=="function"){h.callback=null,p=h.priorityLevel;var se=J(h.expirationTime<=oe);oe=n.unstable_now(),typeof se=="function"?h.callback=se:h===t(l)&&i(l),C(oe)}else i(l);h=t(l)}if(h!==null)var me=!0;else{var Se=t(u);Se!==null&&ye(P,Se.startTime-oe),me=!1}return me}finally{h=null,p=W,v=!1}}var L=!1,N=null,O=-1,D=5,U=-1;function X(){return!(n.unstable_now()-U<D)}function Z(){if(N!==null){var $=n.unstable_now();U=$;var oe=!0;try{oe=N(!0,$)}finally{oe?he():(L=!1,N=null)}}else L=!1}var he;if(typeof b=="function")he=function(){b(Z)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,ue=Q.port2;Q.port1.onmessage=Z,he=function(){ue.postMessage(null)}}else he=function(){S(Z,0)};function re($){N=$,L||(L=!0,he())}function ye($,oe){O=S(function(){$(n.unstable_now())},oe)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function($){$.callback=null},n.unstable_continueExecution=function(){_||v||(_=!0,re(k))},n.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<$?Math.floor(1e3/$):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function($){switch(p){case 1:case 2:case 3:var oe=3;break;default:oe=p}var W=p;p=oe;try{return $()}finally{p=W}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function($,oe){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var W=p;p=$;try{return oe()}finally{p=W}},n.unstable_scheduleCallback=function($,oe,W){var J=n.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?J+W:J):W=J,$){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=W+se,$={id:d++,callback:oe,priorityLevel:$,startTime:W,expirationTime:se,sortIndex:-1},W>J?($.sortIndex=W,e(u,$),t(l)===null&&$===t(u)&&(w?(A(O),O=-1):w=!0,ye(P,W-J))):($.sortIndex=se,e(l,$),_||v||(_=!0,re(k))),$},n.unstable_shouldYield=X,n.unstable_wrapCallback=function($){var oe=p;return function(){var W=p;p=oe;try{return $.apply(this,arguments)}finally{p=W}}}})(gT)),gT}var P2;function g3(){return P2||(P2=1,mT.exports=bq()),mT.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vT,I2;function Rq(){return I2||(I2=1,vT=function(e){var t={},i=GA(),r=g3(),s=Object.assign;function o(m){for(var g="https://reactjs.org/docs/error-decoder.html?invariant="+m,T=1;T<arguments.length;T++)g+="&args[]="+encodeURIComponent(arguments[T]);return"Minified React error #"+m+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),u=Symbol.for("react.portal"),d=Symbol.for("react.fragment"),h=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),v=Symbol.for("react.provider"),_=Symbol.for("react.context"),w=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),b=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),P=Symbol.for("react.offscreen"),k=Symbol.iterator;function L(m){return m===null||typeof m!="object"?null:(m=k&&m[k]||m["@@iterator"],typeof m=="function"?m:null)}function N(m){if(m==null)return null;if(typeof m=="function")return m.displayName||m.name||null;if(typeof m=="string")return m;switch(m){case d:return"Fragment";case u:return"Portal";case p:return"Profiler";case h:return"StrictMode";case S:return"Suspense";case A:return"SuspenseList"}if(typeof m=="object")switch(m.$$typeof){case _:return(m.displayName||"Context")+".Consumer";case v:return(m._context.displayName||"Context")+".Provider";case w:var g=m.render;return m=m.displayName,m||(m=g.displayName||g.name||"",m=m!==""?"ForwardRef("+m+")":"ForwardRef"),m;case b:return g=m.displayName||null,g!==null?g:N(m.type)||"Memo";case C:g=m._payload,m=m._init;try{return N(m(g))}catch{}}return null}function O(m){var g=m.type;switch(m.tag){case 24:return"Cache";case 9:return(g.displayName||"Context")+".Consumer";case 10:return(g._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return m=g.render,m=m.displayName||m.name||"",g.displayName||(m!==""?"ForwardRef("+m+")":"ForwardRef");case 7:return"Fragment";case 5:return g;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return N(g);case 8:return g===h?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof g=="function")return g.displayName||g.name||null;if(typeof g=="string")return g}return null}function D(m){var g=m,T=m;if(m.alternate)for(;g.return;)g=g.return;else{m=g;do g=m,(g.flags&4098)!==0&&(T=g.return),m=g.return;while(m)}return g.tag===3?T:null}function U(m){if(D(m)!==m)throw Error(o(188))}function X(m){var g=m.alternate;if(!g){if(g=D(m),g===null)throw Error(o(188));return g!==m?null:m}for(var T=m,R=g;;){var B=T.return;if(B===null)break;var H=B.alternate;if(H===null){if(R=B.return,R!==null){T=R;continue}break}if(B.child===H.child){for(H=B.child;H;){if(H===T)return U(B),m;if(H===R)return U(B),g;H=H.sibling}throw Error(o(188))}if(T.return!==R.return)T=B,R=H;else{for(var ae=!1,Ee=B.child;Ee;){if(Ee===T){ae=!0,T=B,R=H;break}if(Ee===R){ae=!0,R=B,T=H;break}Ee=Ee.sibling}if(!ae){for(Ee=H.child;Ee;){if(Ee===T){ae=!0,T=H,R=B;break}if(Ee===R){ae=!0,R=H,T=B;break}Ee=Ee.sibling}if(!ae)throw Error(o(189))}}if(T.alternate!==R)throw Error(o(190))}if(T.tag!==3)throw Error(o(188));return T.stateNode.current===T?m:g}function Z(m){return m=X(m),m!==null?he(m):null}function he(m){if(m.tag===5||m.tag===6)return m;for(m=m.child;m!==null;){var g=he(m);if(g!==null)return g;m=m.sibling}return null}function Q(m){if(m.tag===5||m.tag===6)return m;for(m=m.child;m!==null;){if(m.tag!==4){var g=Q(m);if(g!==null)return g}m=m.sibling}return null}var ue=Array.isArray,re=e.getPublicInstance,ye=e.getRootHostContext,$=e.getChildHostContext,oe=e.prepareForCommit,W=e.resetAfterCommit,J=e.createInstance,se=e.appendInitialChild,me=e.finalizeInitialChildren,Se=e.prepareUpdate,ke=e.shouldSetTextContent,Ie=e.createTextInstance,ze=e.scheduleTimeout,je=e.cancelTimeout,at=e.noTimeout,ut=e.isPrimaryRenderer,gt=e.supportsMutation,fe=e.supportsPersistence,Fe=e.supportsHydration,Be=e.getInstanceFromNode,$e=e.preparePortalMount,Oe=e.getCurrentEventPriority,xe=e.detachDeletedInstance,ct=e.supportsMicrotasks,j=e.scheduleMicrotask,Y=e.supportsTestSelectors,we=e.findFiberRoot,Qe=e.getBoundingRect,Ye=e.getTextContent,qe=e.isHiddenSubtree,yt=e.matchAccessibilityRole,ft=e.setFocusIfFocusable,st=e.setupIntersectionObserver,Rt=e.appendChild,Ot=e.appendChildToContainer,Xe=e.commitTextUpdate,fn=e.commitMount,Ht=e.commitUpdate,Kt=e.insertBefore,xt=e.insertInContainerBefore,Tt=e.removeChild,ge=e.removeChildFromContainer,He=e.resetTextContent,rt=e.hideInstance,Ze=e.hideTextInstance,Me=e.unhideInstance,pe=e.unhideTextInstance,tt=e.clearContainer,dt=e.cloneInstance,zt=e.createContainerChildSet,Pt=e.appendChildToContainerChildSet,rn=e.finalizeContainerChildren,gn=e.replaceContainerChildren,Ct=e.cloneHiddenInstance,Mt=e.cloneHiddenTextInstance,Dt=e.canHydrateInstance,ot=e.canHydrateTextInstance,qt=e.canHydrateSuspenseInstance,Vt=e.isSuspenseInstancePending,jt=e.isSuspenseInstanceFallback,On=e.registerSuspenseInstanceRetry,tn=e.getNextHydratableSibling,kt=e.getFirstHydratableChild,Ai=e.getFirstHydratableChildWithinContainer,jn=e.getFirstHydratableChildWithinSuspenseInstance,z=e.hydrateInstance,K=e.hydrateTextInstance,ve=e.hydrateSuspenseInstance,G=e.getNextHydratableInstanceAfterSuspenseInstance,ee=e.commitHydratedContainer,ne=e.commitHydratedSuspenseInstance,de=e.clearSuspenseBoundary,le=e.clearSuspenseBoundaryFromContainer,be=e.shouldDeleteUnhydratedTailInstances,Le=e.didNotMatchHydratedContainerTextInstance,Ge=e.didNotMatchHydratedTextInstance,Ce;function pt(m){if(Ce===void 0)try{throw Error()}catch(T){var g=T.stack.trim().match(/\n( *(at )?)/);Ce=g&&g[1]||""}return`
`+Ce+m}var Ke=!1;function et(m,g){if(!m||Ke)return"";Ke=!0;var T=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(g)if(g=function(){throw Error()},Object.defineProperty(g.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(g,[])}catch(mt){var R=mt}Reflect.construct(m,[],g)}else{try{g.call()}catch(mt){R=mt}m.call(g.prototype)}else{try{throw Error()}catch(mt){R=mt}m()}}catch(mt){if(mt&&R&&typeof mt.stack=="string"){for(var B=mt.stack.split(`
`),H=R.stack.split(`
`),ae=B.length-1,Ee=H.length-1;1<=ae&&0<=Ee&&B[ae]!==H[Ee];)Ee--;for(;1<=ae&&0<=Ee;ae--,Ee--)if(B[ae]!==H[Ee]){if(ae!==1||Ee!==1)do if(ae--,Ee--,0>Ee||B[ae]!==H[Ee]){var Ve=`
`+B[ae].replace(" at new "," at ");return m.displayName&&Ve.includes("<anonymous>")&&(Ve=Ve.replace("<anonymous>",m.displayName)),Ve}while(1<=ae&&0<=Ee);break}}}finally{Ke=!1,Error.prepareStackTrace=T}return(m=m?m.displayName||m.name:"")?pt(m):""}var It=Object.prototype.hasOwnProperty,Jt=[],Ut=-1;function en(m){return{current:m}}function _t(m){0>Ut||(m.current=Jt[Ut],Jt[Ut]=null,Ut--)}function ht(m,g){Ut++,Jt[Ut]=m.current,m.current=g}var cn={},sn=en(cn),hn=en(!1),ei=cn;function vi(m,g){var T=m.type.contextTypes;if(!T)return cn;var R=m.stateNode;if(R&&R.__reactInternalMemoizedUnmaskedChildContext===g)return R.__reactInternalMemoizedMaskedChildContext;var B={},H;for(H in T)B[H]=g[H];return R&&(m=m.stateNode,m.__reactInternalMemoizedUnmaskedChildContext=g,m.__reactInternalMemoizedMaskedChildContext=B),B}function ui(m){return m=m.childContextTypes,m!=null}function Pn(){_t(hn),_t(sn)}function An(m,g,T){if(sn.current!==cn)throw Error(o(168));ht(sn,g),ht(hn,T)}function Pi(m,g,T){var R=m.stateNode;if(g=g.childContextTypes,typeof R.getChildContext!="function")return T;R=R.getChildContext();for(var B in R)if(!(B in g))throw Error(o(108,O(m)||"Unknown",B));return s({},T,R)}function _n(m){return m=(m=m.stateNode)&&m.__reactInternalMemoizedMergedChildContext||cn,ei=sn.current,ht(sn,m),ht(hn,hn.current),!0}function In(m,g,T){var R=m.stateNode;if(!R)throw Error(o(169));T?(m=Pi(m,g,ei),R.__reactInternalMemoizedMergedChildContext=m,_t(hn),_t(sn),ht(sn,m)):_t(hn),ht(hn,T)}var ci=Math.clz32?Math.clz32:oa,ps=Math.log,ir=Math.LN2;function oa(m){return m>>>=0,m===0?32:31-(ps(m)/ir|0)|0}var hc=64,Vn=4194304;function pc(m){switch(m&-m){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return m&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return m}}function Yd(m,g){var T=m.pendingLanes;if(T===0)return 0;var R=0,B=m.suspendedLanes,H=m.pingedLanes,ae=T&268435455;if(ae!==0){var Ee=ae&~B;Ee!==0?R=pc(Ee):(H&=ae,H!==0&&(R=pc(H)))}else ae=T&~B,ae!==0?R=pc(ae):H!==0&&(R=pc(H));if(R===0)return 0;if(g!==0&&g!==R&&(g&B)===0&&(B=R&-R,H=g&-g,B>=H||B===16&&(H&4194240)!==0))return g;if((R&4)!==0&&(R|=T&16),g=m.entangledLanes,g!==0)for(m=m.entanglements,g&=R;0<g;)T=31-ci(g),B=1<<T,R|=m[T],g&=~B;return R}function zg(m,g){switch(m){case 1:case 2:case 4:return g+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return g+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function d_(m,g){for(var T=m.suspendedLanes,R=m.pingedLanes,B=m.expirationTimes,H=m.pendingLanes;0<H;){var ae=31-ci(H),Ee=1<<ae,Ve=B[ae];Ve===-1?((Ee&T)===0||(Ee&R)!==0)&&(B[ae]=zg(Ee,g)):Ve<=g&&(m.expiredLanes|=Ee),H&=~Ee}}function np(m){return m=m.pendingLanes&-1073741825,m!==0?m:m&1073741824?1073741824:0}function ip(m){for(var g=[],T=0;31>T;T++)g.push(m);return g}function iu(m,g,T){m.pendingLanes|=g,g!==536870912&&(m.suspendedLanes=0,m.pingedLanes=0),m=m.eventTimes,g=31-ci(g),m[g]=T}function rp(m,g){var T=m.pendingLanes&~g;m.pendingLanes=g,m.suspendedLanes=0,m.pingedLanes=0,m.expiredLanes&=g,m.mutableReadLanes&=g,m.entangledLanes&=g,g=m.entanglements;var R=m.eventTimes;for(m=m.expirationTimes;0<T;){var B=31-ci(T),H=1<<B;g[B]=0,R[B]=-1,m[B]=-1,T&=~H}}function aa(m,g){var T=m.entangledLanes|=g;for(m=m.entanglements;T;){var R=31-ci(T),B=1<<R;B&g|m[R]&g&&(m[R]|=g),T&=~B}}var Mn=0;function Fa(m){return m&=-m,1<m?4<m?(m&268435455)!==0?16:536870912:4:1}var ru=r.unstable_scheduleCallback,mc=r.unstable_cancelCallback,Sl=r.unstable_shouldYield,QS=r.unstable_requestPaint,rr=r.unstable_now,su=r.unstable_ImmediatePriority,ZS=r.unstable_UserBlockingPriority,sp=r.unstable_NormalPriority,op=r.unstable_IdlePriority,Kd=null,la=null;function Qd(m){if(la&&typeof la.onCommitFiberRoot=="function")try{la.onCommitFiberRoot(Kd,m,void 0,(m.current.flags&128)===128)}catch{}}function Zd(m,g){return m===g&&(m!==0||1/m===1/g)||m!==m&&g!==g}var jr=typeof Object.is=="function"?Object.is:Zd,so=null,ap=!1,Vg=!1;function lp(m){so===null?so=[m]:so.push(m)}function up(m){ap=!0,lp(m)}function oo(){if(!Vg&&so!==null){Vg=!0;var m=0,g=Mn;try{var T=so;for(Mn=1;m<T.length;m++){var R=T[m];do R=R(!0);while(R!==null)}so=null,ap=!1}catch(B){throw so!==null&&(so=so.slice(m+1)),ru(su,oo),B}finally{Mn=g,Vg=!1}}return null}var f_=a.ReactCurrentBatchConfig;function Po(m,g){if(jr(m,g))return!0;if(typeof m!="object"||m===null||typeof g!="object"||g===null)return!1;var T=Object.keys(m),R=Object.keys(g);if(T.length!==R.length)return!1;for(R=0;R<T.length;R++){var B=T[R];if(!It.call(g,B)||!jr(m[B],g[B]))return!1}return!0}function Wg(m){switch(m.tag){case 5:return pt(m.type);case 16:return pt("Lazy");case 13:return pt("Suspense");case 19:return pt("SuspenseList");case 0:case 2:case 15:return m=et(m.type,!1),m;case 11:return m=et(m.type.render,!1),m;case 1:return m=et(m.type,!0),m;default:return""}}function ms(m,g){if(m&&m.defaultProps){g=s({},g),m=m.defaultProps;for(var T in m)g[T]===void 0&&(g[T]=m[T]);return g}return g}var $d=en(null),ou=null,Ua=null,cp=null;function es(){cp=Ua=ou=null}function au(m,g,T){ut?(ht($d,g._currentValue),g._currentValue=T):(ht($d,g._currentValue2),g._currentValue2=T)}function jd(m){var g=$d.current;_t($d),ut?m._currentValue=g:m._currentValue2=g}function lu(m,g,T){for(;m!==null;){var R=m.alternate;if((m.childLanes&g)!==g?(m.childLanes|=g,R!==null&&(R.childLanes|=g)):R!==null&&(R.childLanes&g)!==g&&(R.childLanes|=g),m===T)break;m=m.return}}function gc(m,g){ou=m,cp=Ua=null,m=m.dependencies,m!==null&&m.firstContext!==null&&((m.lanes&g)!==0&&(mr=!0),m.firstContext=null)}function gs(m){var g=ut?m._currentValue:m._currentValue2;if(cp!==m)if(m={context:m,memoizedValue:g,next:null},Ua===null){if(ou===null)throw Error(o(308));Ua=m,ou.dependencies={lanes:0,firstContext:m}}else Ua=Ua.next=m;return g}var ao=null,lo=!1;function vc(m){m.updateQueue={baseState:m.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function qg(m,g){m=m.updateQueue,g.updateQueue===m&&(g.updateQueue={baseState:m.baseState,firstBaseUpdate:m.firstBaseUpdate,lastBaseUpdate:m.lastBaseUpdate,shared:m.shared,effects:m.effects})}function Oa(m,g){return{eventTime:m,lane:g,tag:0,payload:null,callback:null,next:null}}function El(m,g){var T=m.updateQueue;T!==null&&(T=T.shared,zi!==null&&(m.mode&1)!==0&&(Sn&2)===0?(m=T.interleaved,m===null?(g.next=g,ao===null?ao=[T]:ao.push(T)):(g.next=m.next,m.next=g),T.interleaved=g):(m=T.pending,m===null?g.next=g:(g.next=m.next,m.next=g),T.pending=g))}function dp(m,g,T){if(g=g.updateQueue,g!==null&&(g=g.shared,(T&4194240)!==0)){var R=g.lanes;R&=m.pendingLanes,T|=R,g.lanes=T,aa(m,T)}}function fp(m,g){var T=m.updateQueue,R=m.alternate;if(R!==null&&(R=R.updateQueue,T===R)){var B=null,H=null;if(T=T.firstBaseUpdate,T!==null){do{var ae={eventTime:T.eventTime,lane:T.lane,tag:T.tag,payload:T.payload,callback:T.callback,next:null};H===null?B=H=ae:H=H.next=ae,T=T.next}while(T!==null);H===null?B=H=g:H=H.next=g}else B=H=g;T={baseState:R.baseState,firstBaseUpdate:B,lastBaseUpdate:H,shared:R.shared,effects:R.effects},m.updateQueue=T;return}m=T.lastBaseUpdate,m===null?T.firstBaseUpdate=g:m.next=g,T.lastBaseUpdate=g}function hp(m,g,T,R){var B=m.updateQueue;lo=!1;var H=B.firstBaseUpdate,ae=B.lastBaseUpdate,Ee=B.shared.pending;if(Ee!==null){B.shared.pending=null;var Ve=Ee,mt=Ve.next;Ve.next=null,ae===null?H=mt:ae.next=mt,ae=Ve;var Ft=m.alternate;Ft!==null&&(Ft=Ft.updateQueue,Ee=Ft.lastBaseUpdate,Ee!==ae&&(Ee===null?Ft.firstBaseUpdate=mt:Ee.next=mt,Ft.lastBaseUpdate=Ve))}if(H!==null){var vn=B.baseState;ae=0,Ft=mt=Ve=null,Ee=H;do{var nn=Ee.lane,En=Ee.eventTime;if((R&nn)===nn){Ft!==null&&(Ft=Ft.next={eventTime:En,lane:0,tag:Ee.tag,payload:Ee.payload,callback:Ee.callback,next:null});e:{var Lt=m,Lr=Ee;switch(nn=g,En=T,Lr.tag){case 1:if(Lt=Lr.payload,typeof Lt=="function"){vn=Lt.call(En,vn,nn);break e}vn=Lt;break e;case 3:Lt.flags=Lt.flags&-65537|128;case 0:if(Lt=Lr.payload,nn=typeof Lt=="function"?Lt.call(En,vn,nn):Lt,nn==null)break e;vn=s({},vn,nn);break e;case 2:lo=!0}}Ee.callback!==null&&Ee.lane!==0&&(m.flags|=64,nn=B.effects,nn===null?B.effects=[Ee]:nn.push(Ee))}else En={eventTime:En,lane:nn,tag:Ee.tag,payload:Ee.payload,callback:Ee.callback,next:null},Ft===null?(mt=Ft=En,Ve=vn):Ft=Ft.next=En,ae|=nn;if(Ee=Ee.next,Ee===null){if(Ee=B.shared.pending,Ee===null)break;nn=Ee,Ee=nn.next,nn.next=null,B.lastBaseUpdate=nn,B.shared.pending=null}}while(!0);if(Ft===null&&(Ve=vn),B.baseState=Ve,B.firstBaseUpdate=mt,B.lastBaseUpdate=Ft,g=B.shared.interleaved,g!==null){B=g;do ae|=B.lane,B=B.next;while(B!==g)}else H===null&&(B.shared.lanes=0);fa|=ae,m.lanes=ae,m.memoizedState=vn}}function h_(m,g,T){if(m=g.effects,g.effects=null,m!==null)for(g=0;g<m.length;g++){var R=m[g],B=R.callback;if(B!==null){if(R.callback=null,R=T,typeof B!="function")throw Error(o(191,B));B.call(R)}}}var p_=new i.Component().refs;function Jg(m,g,T,R){g=m.memoizedState,T=T(R,g),T=T==null?g:s({},g,T),m.memoizedState=T,m.lanes===0&&(m.updateQueue.baseState=T)}var pp={isMounted:function(m){return(m=m._reactInternals)?D(m)===m:!1},enqueueSetState:function(m,g,T){m=m._reactInternals;var R=Wn(),B=Fo(m),H=Oa(R,B);H.payload=g,T!=null&&(H.callback=T),El(m,H),g=zr(m,B,R),g!==null&&dp(g,m,B)},enqueueReplaceState:function(m,g,T){m=m._reactInternals;var R=Wn(),B=Fo(m),H=Oa(R,B);H.tag=1,H.payload=g,T!=null&&(H.callback=T),El(m,H),g=zr(m,B,R),g!==null&&dp(g,m,B)},enqueueForceUpdate:function(m,g){m=m._reactInternals;var T=Wn(),R=Fo(m),B=Oa(T,R);B.tag=2,g!=null&&(B.callback=g),El(m,B),g=zr(m,R,T),g!==null&&dp(g,m,R)}};function Xg(m,g,T,R,B,H,ae){return m=m.stateNode,typeof m.shouldComponentUpdate=="function"?m.shouldComponentUpdate(R,H,ae):g.prototype&&g.prototype.isPureReactComponent?!Po(T,R)||!Po(B,H):!0}function m_(m,g,T){var R=!1,B=cn,H=g.contextType;return typeof H=="object"&&H!==null?H=gs(H):(B=ui(g)?ei:sn.current,R=g.contextTypes,H=(R=R!=null)?vi(m,B):cn),g=new g(T,H),m.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=pp,m.stateNode=g,g._reactInternals=m,R&&(m=m.stateNode,m.__reactInternalMemoizedUnmaskedChildContext=B,m.__reactInternalMemoizedMaskedChildContext=H),g}function g_(m,g,T,R){m=g.state,typeof g.componentWillReceiveProps=="function"&&g.componentWillReceiveProps(T,R),typeof g.UNSAFE_componentWillReceiveProps=="function"&&g.UNSAFE_componentWillReceiveProps(T,R),g.state!==m&&pp.enqueueReplaceState(g,g.state,null)}function Yg(m,g,T,R){var B=m.stateNode;B.props=T,B.state=m.memoizedState,B.refs=p_,vc(m);var H=g.contextType;typeof H=="object"&&H!==null?B.context=gs(H):(H=ui(g)?ei:sn.current,B.context=vi(m,H)),B.state=m.memoizedState,H=g.getDerivedStateFromProps,typeof H=="function"&&(Jg(m,g,H,T),B.state=m.memoizedState),typeof g.getDerivedStateFromProps=="function"||typeof B.getSnapshotBeforeUpdate=="function"||typeof B.UNSAFE_componentWillMount!="function"&&typeof B.componentWillMount!="function"||(g=B.state,typeof B.componentWillMount=="function"&&B.componentWillMount(),typeof B.UNSAFE_componentWillMount=="function"&&B.UNSAFE_componentWillMount(),g!==B.state&&pp.enqueueReplaceState(B,B.state,null),hp(m,T,B,R),B.state=m.memoizedState),typeof B.componentDidMount=="function"&&(m.flags|=4194308)}var yc=[],Tl=0,mp=null,gp=0,uo=[],Ns=0,uu=null,Ha=1,Ga="";function cu(m,g){yc[Tl++]=gp,yc[Tl++]=mp,mp=m,gp=g}function v_(m,g,T){uo[Ns++]=Ha,uo[Ns++]=Ga,uo[Ns++]=uu,uu=m;var R=Ha;m=Ga;var B=32-ci(R)-1;R&=~(1<<B),T+=1;var H=32-ci(g)+B;if(30<H){var ae=B-B%5;H=(R&(1<<ae)-1).toString(32),R>>=ae,B-=ae,Ha=1<<32-ci(g)+B|T<<B|R,Ga=H+m}else Ha=1<<H|T<<B|R,Ga=m}function Kg(m){m.return!==null&&(cu(m,1),v_(m,1,0))}function Qg(m){for(;m===mp;)mp=yc[--Tl],yc[Tl]=null,gp=yc[--Tl],yc[Tl]=null;for(;m===uu;)uu=uo[--Ns],uo[Ns]=null,Ga=uo[--Ns],uo[Ns]=null,Ha=uo[--Ns],uo[Ns]=null}var ts=null,br=null,Si=!1,_c=!1,co=null;function Zg(m,g){var T=zs(5,null,null,0);T.elementType="DELETED",T.stateNode=g,T.return=m,g=m.deletions,g===null?(m.deletions=[T],m.flags|=16):g.push(T)}function $g(m,g){switch(m.tag){case 5:return g=Dt(g,m.type,m.pendingProps),g!==null?(m.stateNode=g,ts=m,br=kt(g),!0):!1;case 6:return g=ot(g,m.pendingProps),g!==null?(m.stateNode=g,ts=m,br=null,!0):!1;case 13:if(g=qt(g),g!==null){var T=uu!==null?{id:Ha,overflow:Ga}:null;return m.memoizedState={dehydrated:g,treeContext:T,retryLane:1073741824},T=zs(18,null,null,0),T.stateNode=g,T.return=m,m.child=T,ts=m,br=null,!0}return!1;default:return!1}}function vp(m){return(m.mode&1)!==0&&(m.flags&128)===0}function Ml(m){if(Si){var g=br;if(g){var T=g;if(!$g(m,g)){if(vp(m))throw Error(o(418));g=tn(T);var R=ts;g&&$g(m,g)?Zg(R,T):(m.flags=m.flags&-4097|2,Si=!1,ts=m)}}else{if(vp(m))throw Error(o(418));m.flags=m.flags&-4097|2,Si=!1,ts=m}}}function y_(m){for(m=m.return;m!==null&&m.tag!==5&&m.tag!==3&&m.tag!==13;)m=m.return;ts=m}function ef(m){if(!Fe||m!==ts)return!1;if(!Si)return y_(m),Si=!0,!1;if(m.tag!==3&&(m.tag!==5||be(m.type)&&!ke(m.type,m.memoizedProps))){var g=br;if(g){if(vp(m)){for(m=br;m;)m=tn(m);throw Error(o(418))}for(;g;)Zg(m,g),g=tn(g)}}if(y_(m),m.tag===13){if(!Fe)throw Error(o(316));if(m=m.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(o(317));br=G(m)}else br=ts?tn(m.stateNode):null;return!0}function xc(){Fe&&(br=ts=null,_c=Si=!1)}function yp(m){co===null?co=[m]:co.push(m)}function wc(m,g,T){if(m=T.ref,m!==null&&typeof m!="function"&&typeof m!="object"){if(T._owner){if(T=T._owner,T){if(T.tag!==1)throw Error(o(309));var R=T.stateNode}if(!R)throw Error(o(147,m));var B=R,H=""+m;return g!==null&&g.ref!==null&&typeof g.ref=="function"&&g.ref._stringRef===H?g.ref:(g=function(ae){var Ee=B.refs;Ee===p_&&(Ee=B.refs={}),ae===null?delete Ee[H]:Ee[H]=ae},g._stringRef=H,g)}if(typeof m!="string")throw Error(o(284));if(!T._owner)throw Error(o(290,m))}return m}function Cl(m,g){throw m=Object.prototype.toString.call(g),Error(o(31,m==="[object Object]"?"object with keys {"+Object.keys(g).join(", ")+"}":m))}function Ac(m){var g=m._init;return g(m._payload)}function __(m){function g(De,Te){if(m){var Ue=De.deletions;Ue===null?(De.deletions=[Te],De.flags|=16):Ue.push(Te)}}function T(De,Te){if(!m)return null;for(;Te!==null;)g(De,Te),Te=Te.sibling;return null}function R(De,Te){for(De=new Map;Te!==null;)Te.key!==null?De.set(Te.key,Te):De.set(Te.index,Te),Te=Te.sibling;return De}function B(De,Te){return De=tl(De,Te),De.index=0,De.sibling=null,De}function H(De,Te,Ue){return De.index=Ue,m?(Ue=De.alternate,Ue!==null?(Ue=Ue.index,Ue<Te?(De.flags|=2,Te):Ue):(De.flags|=2,Te)):(De.flags|=1048576,Te)}function ae(De){return m&&De.alternate===null&&(De.flags|=2),De}function Ee(De,Te,Ue,bt){return Te===null||Te.tag!==6?(Te=qp(Ue,De.mode,bt),Te.return=De,Te):(Te=B(Te,Ue),Te.return=De,Te)}function Ve(De,Te,Ue,bt){var Qt=Ue.type;return Qt===d?Ft(De,Te,Ue.props.children,bt,Ue.key):Te!==null&&(Te.elementType===Qt||typeof Qt=="object"&&Qt!==null&&Qt.$$typeof===C&&Ac(Qt)===Te.type)?(bt=B(Te,Ue.props),bt.ref=wc(De,Te,Ue),bt.return=De,bt):(bt=Wp(Ue.type,Ue.key,Ue.props,null,De.mode,bt),bt.ref=wc(De,Te,Ue),bt.return=De,bt)}function mt(De,Te,Ue,bt){return Te===null||Te.tag!==4||Te.stateNode.containerInfo!==Ue.containerInfo||Te.stateNode.implementation!==Ue.implementation?(Te=Jp(Ue,De.mode,bt),Te.return=De,Te):(Te=B(Te,Ue.children||[]),Te.return=De,Te)}function Ft(De,Te,Ue,bt,Qt){return Te===null||Te.tag!==7?(Te=Du(Ue,De.mode,bt,Qt),Te.return=De,Te):(Te=B(Te,Ue),Te.return=De,Te)}function vn(De,Te,Ue){if(typeof Te=="string"&&Te!==""||typeof Te=="number")return Te=qp(""+Te,De.mode,Ue),Te.return=De,Te;if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case l:return Ue=Wp(Te.type,Te.key,Te.props,null,De.mode,Ue),Ue.ref=wc(De,null,Te),Ue.return=De,Ue;case u:return Te=Jp(Te,De.mode,Ue),Te.return=De,Te;case C:var bt=Te._init;return vn(De,bt(Te._payload),Ue)}if(ue(Te)||L(Te))return Te=Du(Te,De.mode,Ue,null),Te.return=De,Te;Cl(De,Te)}return null}function nn(De,Te,Ue,bt){var Qt=Te!==null?Te.key:null;if(typeof Ue=="string"&&Ue!==""||typeof Ue=="number")return Qt!==null?null:Ee(De,Te,""+Ue,bt);if(typeof Ue=="object"&&Ue!==null){switch(Ue.$$typeof){case l:return Ue.key===Qt?Ve(De,Te,Ue,bt):null;case u:return Ue.key===Qt?mt(De,Te,Ue,bt):null;case C:return Qt=Ue._init,nn(De,Te,Qt(Ue._payload),bt)}if(ue(Ue)||L(Ue))return Qt!==null?null:Ft(De,Te,Ue,bt,null);Cl(De,Ue)}return null}function En(De,Te,Ue,bt,Qt){if(typeof bt=="string"&&bt!==""||typeof bt=="number")return De=De.get(Ue)||null,Ee(Te,De,""+bt,Qt);if(typeof bt=="object"&&bt!==null){switch(bt.$$typeof){case l:return De=De.get(bt.key===null?Ue:bt.key)||null,Ve(Te,De,bt,Qt);case u:return De=De.get(bt.key===null?Ue:bt.key)||null,mt(Te,De,bt,Qt);case C:var xn=bt._init;return En(De,Te,Ue,xn(bt._payload),Qt)}if(ue(bt)||L(bt))return De=De.get(Ue)||null,Ft(Te,De,bt,Qt,null);Cl(Te,bt)}return null}function Lt(De,Te,Ue,bt){for(var Qt=null,xn=null,yn=Te,Gn=Te=0,Ki=null;yn!==null&&Gn<Ue.length;Gn++){yn.index>Gn?(Ki=yn,yn=null):Ki=yn.sibling;var Hn=nn(De,yn,Ue[Gn],bt);if(Hn===null){yn===null&&(yn=Ki);break}m&&yn&&Hn.alternate===null&&g(De,yn),Te=H(Hn,Te,Gn),xn===null?Qt=Hn:xn.sibling=Hn,xn=Hn,yn=Ki}if(Gn===Ue.length)return T(De,yn),Si&&cu(De,Gn),Qt;if(yn===null){for(;Gn<Ue.length;Gn++)yn=vn(De,Ue[Gn],bt),yn!==null&&(Te=H(yn,Te,Gn),xn===null?Qt=yn:xn.sibling=yn,xn=yn);return Si&&cu(De,Gn),Qt}for(yn=R(De,yn);Gn<Ue.length;Gn++)Ki=En(yn,De,Gn,Ue[Gn],bt),Ki!==null&&(m&&Ki.alternate!==null&&yn.delete(Ki.key===null?Gn:Ki.key),Te=H(Ki,Te,Gn),xn===null?Qt=Ki:xn.sibling=Ki,xn=Ki);return m&&yn.forEach(function(nl){return g(De,nl)}),Si&&cu(De,Gn),Qt}function Lr(De,Te,Ue,bt){var Qt=L(Ue);if(typeof Qt!="function")throw Error(o(150));if(Ue=Qt.call(Ue),Ue==null)throw Error(o(151));for(var xn=Qt=null,yn=Te,Gn=Te=0,Ki=null,Hn=Ue.next();yn!==null&&!Hn.done;Gn++,Hn=Ue.next()){yn.index>Gn?(Ki=yn,yn=null):Ki=yn.sibling;var nl=nn(De,yn,Hn.value,bt);if(nl===null){yn===null&&(yn=Ki);break}m&&yn&&nl.alternate===null&&g(De,yn),Te=H(nl,Te,Gn),xn===null?Qt=nl:xn.sibling=nl,xn=nl,yn=Ki}if(Hn.done)return T(De,yn),Si&&cu(De,Gn),Qt;if(yn===null){for(;!Hn.done;Gn++,Hn=Ue.next())Hn=vn(De,Hn.value,bt),Hn!==null&&(Te=H(Hn,Te,Gn),xn===null?Qt=Hn:xn.sibling=Hn,xn=Hn);return Si&&cu(De,Gn),Qt}for(yn=R(De,yn);!Hn.done;Gn++,Hn=Ue.next())Hn=En(yn,De,Gn,Hn.value,bt),Hn!==null&&(m&&Hn.alternate!==null&&yn.delete(Hn.key===null?Gn:Hn.key),Te=H(Hn,Te,Gn),xn===null?Qt=Hn:xn.sibling=Hn,xn=Hn);return m&&yn.forEach(function(R0){return g(De,R0)}),Si&&cu(De,Gn),Qt}function Vs(De,Te,Ue,bt){if(typeof Ue=="object"&&Ue!==null&&Ue.type===d&&Ue.key===null&&(Ue=Ue.props.children),typeof Ue=="object"&&Ue!==null){switch(Ue.$$typeof){case l:e:{for(var Qt=Ue.key,xn=Te;xn!==null;){if(xn.key===Qt){if(Qt=Ue.type,Qt===d){if(xn.tag===7){T(De,xn.sibling),Te=B(xn,Ue.props.children),Te.return=De,De=Te;break e}}else if(xn.elementType===Qt||typeof Qt=="object"&&Qt!==null&&Qt.$$typeof===C&&Ac(Qt)===xn.type){T(De,xn.sibling),Te=B(xn,Ue.props),Te.ref=wc(De,xn,Ue),Te.return=De,De=Te;break e}T(De,xn);break}else g(De,xn);xn=xn.sibling}Ue.type===d?(Te=Du(Ue.props.children,De.mode,bt,Ue.key),Te.return=De,De=Te):(bt=Wp(Ue.type,Ue.key,Ue.props,null,De.mode,bt),bt.ref=wc(De,Te,Ue),bt.return=De,De=bt)}return ae(De);case u:e:{for(xn=Ue.key;Te!==null;){if(Te.key===xn)if(Te.tag===4&&Te.stateNode.containerInfo===Ue.containerInfo&&Te.stateNode.implementation===Ue.implementation){T(De,Te.sibling),Te=B(Te,Ue.children||[]),Te.return=De,De=Te;break e}else{T(De,Te);break}else g(De,Te);Te=Te.sibling}Te=Jp(Ue,De.mode,bt),Te.return=De,De=Te}return ae(De);case C:return xn=Ue._init,Vs(De,Te,xn(Ue._payload),bt)}if(ue(Ue))return Lt(De,Te,Ue,bt);if(L(Ue))return Lr(De,Te,Ue,bt);Cl(De,Ue)}return typeof Ue=="string"&&Ue!==""||typeof Ue=="number"?(Ue=""+Ue,Te!==null&&Te.tag===6?(T(De,Te.sibling),Te=B(Te,Ue),Te.return=De,De=Te):(T(De,Te),Te=qp(Ue,De.mode,bt),Te.return=De,De=Te),ae(De)):T(De,Te)}return Vs}var za=__(!0),x_=__(!1),Sc={},vs=en(Sc),du=en(Sc),fu=en(Sc);function Io(m){if(m===Sc)throw Error(o(174));return m}function _p(m,g){ht(fu,g),ht(du,m),ht(vs,Sc),m=ye(g),_t(vs),ht(vs,m)}function Ec(){_t(vs),_t(du),_t(fu)}function w_(m){var g=Io(fu.current),T=Io(vs.current);g=$(T,m.type,g),T!==g&&(ht(du,m),ht(vs,g))}function jg(m){du.current===m&&(_t(vs),_t(du))}var Ii=en(0);function xp(m){for(var g=m;g!==null;){if(g.tag===13){var T=g.memoizedState;if(T!==null&&(T=T.dehydrated,T===null||Vt(T)||jt(T)))return g}else if(g.tag===19&&g.memoizedProps.revealOrder!==void 0){if((g.flags&128)!==0)return g}else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===m)break;for(;g.sibling===null;){if(g.return===null||g.return===m)return null;g=g.return}g.sibling.return=g.return,g=g.sibling}return null}var ks=[];function hu(){for(var m=0;m<ks.length;m++){var g=ks[m];ut?g._workInProgressVersionPrimary=null:g._workInProgressVersionSecondary=null}ks.length=0}var tf=a.ReactCurrentDispatcher,Fs=a.ReactCurrentBatchConfig,pu=0,Di=null,fr=null,hr=null,wp=!1,ua=!1,mu=0,nf=0;function pr(){throw Error(o(321))}function Ap(m,g){if(g===null)return!1;for(var T=0;T<g.length&&T<m.length;T++)if(!jr(m[T],g[T]))return!1;return!0}function Tc(m,g,T,R,B,H){if(pu=H,Di=g,g.memoizedState=null,g.updateQueue=null,g.lanes=0,tf.current=m===null||m.memoizedState===null?s0:o0,m=T(R,B),ua){H=0;do{if(ua=!1,mu=0,25<=H)throw Error(o(301));H+=1,hr=fr=null,g.updateQueue=null,tf.current=a0,m=T(R,B)}while(ua)}if(tf.current=Rc,g=fr!==null&&fr.next!==null,pu=0,hr=fr=Di=null,wp=!1,g)throw Error(o(300));return m}function bl(){var m=mu!==0;return mu=0,m}function Do(){var m={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return hr===null?Di.memoizedState=hr=m:hr=hr.next=m,hr}function Lo(){if(fr===null){var m=Di.alternate;m=m!==null?m.memoizedState:null}else m=fr.next;var g=hr===null?Di.memoizedState:hr.next;if(g!==null)hr=g,fr=m;else{if(m===null)throw Error(o(310));fr=m,m={memoizedState:fr.memoizedState,baseState:fr.baseState,baseQueue:fr.baseQueue,queue:fr.queue,next:null},hr===null?Di.memoizedState=hr=m:hr=hr.next=m}return hr}function ca(m,g){return typeof g=="function"?g(m):g}function rf(m){var g=Lo(),T=g.queue;if(T===null)throw Error(o(311));T.lastRenderedReducer=m;var R=fr,B=R.baseQueue,H=T.pending;if(H!==null){if(B!==null){var ae=B.next;B.next=H.next,H.next=ae}R.baseQueue=B=H,T.pending=null}if(B!==null){H=B.next,R=R.baseState;var Ee=ae=null,Ve=null,mt=H;do{var Ft=mt.lane;if((pu&Ft)===Ft)Ve!==null&&(Ve=Ve.next={lane:0,action:mt.action,hasEagerState:mt.hasEagerState,eagerState:mt.eagerState,next:null}),R=mt.hasEagerState?mt.eagerState:m(R,mt.action);else{var vn={lane:Ft,action:mt.action,hasEagerState:mt.hasEagerState,eagerState:mt.eagerState,next:null};Ve===null?(Ee=Ve=vn,ae=R):Ve=Ve.next=vn,Di.lanes|=Ft,fa|=Ft}mt=mt.next}while(mt!==null&&mt!==H);Ve===null?ae=R:Ve.next=Ee,jr(R,g.memoizedState)||(mr=!0),g.memoizedState=R,g.baseState=ae,g.baseQueue=Ve,T.lastRenderedState=R}if(m=T.interleaved,m!==null){B=m;do H=B.lane,Di.lanes|=H,fa|=H,B=B.next;while(B!==m)}else B===null&&(T.lanes=0);return[g.memoizedState,T.dispatch]}function sf(m){var g=Lo(),T=g.queue;if(T===null)throw Error(o(311));T.lastRenderedReducer=m;var R=T.dispatch,B=T.pending,H=g.memoizedState;if(B!==null){T.pending=null;var ae=B=B.next;do H=m(H,ae.action),ae=ae.next;while(ae!==B);jr(H,g.memoizedState)||(mr=!0),g.memoizedState=H,g.baseQueue===null&&(g.baseState=H),T.lastRenderedState=H}return[H,R]}function e0(){}function t0(m,g){var T=Di,R=Lo(),B=g(),H=!jr(R.memoizedState,B);if(H&&(R.memoizedState=B,mr=!0),R=R.queue,Mc(Va.bind(null,T,R,m),[m]),R.getSnapshot!==g||H||hr!==null&&hr.memoizedState.tag&1){if(T.flags|=2048,af(9,i0.bind(null,T,R,B,g),void 0,null),zi===null)throw Error(o(349));(pu&30)!==0||n0(T,g,B)}return B}function n0(m,g,T){m.flags|=16384,m={getSnapshot:g,value:T},g=Di.updateQueue,g===null?(g={lastEffect:null,stores:null},Di.updateQueue=g,g.stores=[m]):(T=g.stores,T===null?g.stores=[m]:T.push(m))}function i0(m,g,T,R){g.value=T,g.getSnapshot=R,Sp(g)&&zr(m,1,-1)}function Va(m,g,T){return T(function(){Sp(g)&&zr(m,1,-1)})}function Sp(m){var g=m.getSnapshot;m=m.value;try{var T=g();return!jr(m,T)}catch{return!0}}function of(m){var g=Do();return typeof m=="function"&&(m=m()),g.memoizedState=g.baseState=m,m={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ca,lastRenderedState:m},g.queue=m,m=m.dispatch=$S.bind(null,Di,m),[g.memoizedState,m]}function af(m,g,T,R){return m={tag:m,create:g,destroy:T,deps:R,next:null},g=Di.updateQueue,g===null?(g={lastEffect:null,stores:null},Di.updateQueue=g,g.lastEffect=m.next=m):(T=g.lastEffect,T===null?g.lastEffect=m.next=m:(R=T.next,T.next=m,m.next=R,g.lastEffect=m)),m}function A_(){return Lo().memoizedState}function Rl(m,g,T,R){var B=Do();Di.flags|=m,B.memoizedState=af(1|g,T,void 0,R===void 0?null:R)}function Ep(m,g,T,R){var B=Lo();R=R===void 0?null:R;var H=void 0;if(fr!==null){var ae=fr.memoizedState;if(H=ae.destroy,R!==null&&Ap(R,ae.deps)){B.memoizedState=af(g,T,H,R);return}}Di.flags|=m,B.memoizedState=af(1|g,T,H,R)}function Tp(m,g){return Rl(8390656,8,m,g)}function Mc(m,g){return Ep(2048,8,m,g)}function pi(m,g){return Ep(4,2,m,g)}function Mp(m,g){return Ep(4,4,m,g)}function lf(m,g){if(typeof g=="function")return m=m(),g(m),function(){g(null)};if(g!=null)return m=m(),g.current=m,function(){g.current=null}}function Cc(m,g,T){return T=T!=null?T.concat([m]):null,Ep(4,4,lf.bind(null,g,m),T)}function Cp(){}function bp(m,g){var T=Lo();g=g===void 0?null:g;var R=T.memoizedState;return R!==null&&g!==null&&Ap(g,R[1])?R[0]:(T.memoizedState=[m,g],m)}function bc(m,g){var T=Lo();g=g===void 0?null:g;var R=T.memoizedState;return R!==null&&g!==null&&Ap(g,R[1])?R[0]:(m=m(),T.memoizedState=[m,g],m)}function Rp(m,g){var T=Mn;Mn=T!==0&&4>T?T:4,m(!0);var R=Fs.transition;Fs.transition={};try{m(!1),g()}finally{Mn=T,Fs.transition=R}}function gu(){return Lo().memoizedState}function S_(m,g,T){var R=Fo(m);T={lane:R,action:T,hasEagerState:!1,eagerState:null,next:null},E_(m)?r0(g,T):(uf(m,g,T),T=Wn(),m=zr(m,R,T),m!==null&&cf(m,g,R))}function $S(m,g,T){var R=Fo(m),B={lane:R,action:T,hasEagerState:!1,eagerState:null,next:null};if(E_(m))r0(g,B);else{uf(m,g,B);var H=m.alternate;if(m.lanes===0&&(H===null||H.lanes===0)&&(H=g.lastRenderedReducer,H!==null))try{var ae=g.lastRenderedState,Ee=H(ae,T);if(B.hasEagerState=!0,B.eagerState=Ee,jr(Ee,ae))return}catch{}finally{}T=Wn(),m=zr(m,R,T),m!==null&&cf(m,g,R)}}function E_(m){var g=m.alternate;return m===Di||g!==null&&g===Di}function r0(m,g){ua=wp=!0;var T=m.pending;T===null?g.next=g:(g.next=T.next,T.next=g),m.pending=g}function uf(m,g,T){zi!==null&&(m.mode&1)!==0&&(Sn&2)===0?(m=g.interleaved,m===null?(T.next=T,ao===null?ao=[g]:ao.push(g)):(T.next=m.next,m.next=T),g.interleaved=T):(m=g.pending,m===null?T.next=T:(T.next=m.next,m.next=T),g.pending=T)}function cf(m,g,T){if((T&4194240)!==0){var R=g.lanes;R&=m.pendingLanes,T|=R,g.lanes=T,aa(m,T)}}var Rc={readContext:gs,useCallback:pr,useContext:pr,useEffect:pr,useImperativeHandle:pr,useInsertionEffect:pr,useLayoutEffect:pr,useMemo:pr,useReducer:pr,useRef:pr,useState:pr,useDebugValue:pr,useDeferredValue:pr,useTransition:pr,useMutableSource:pr,useSyncExternalStore:pr,useId:pr,unstable_isNewReconciler:!1},s0={readContext:gs,useCallback:function(m,g){return Do().memoizedState=[m,g===void 0?null:g],m},useContext:gs,useEffect:Tp,useImperativeHandle:function(m,g,T){return T=T!=null?T.concat([m]):null,Rl(4194308,4,lf.bind(null,g,m),T)},useLayoutEffect:function(m,g){return Rl(4194308,4,m,g)},useInsertionEffect:function(m,g){return Rl(4,2,m,g)},useMemo:function(m,g){var T=Do();return g=g===void 0?null:g,m=m(),T.memoizedState=[m,g],m},useReducer:function(m,g,T){var R=Do();return g=T!==void 0?T(g):g,R.memoizedState=R.baseState=g,m={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:m,lastRenderedState:g},R.queue=m,m=m.dispatch=S_.bind(null,Di,m),[R.memoizedState,m]},useRef:function(m){var g=Do();return m={current:m},g.memoizedState=m},useState:of,useDebugValue:Cp,useDeferredValue:function(m){var g=of(m),T=g[0],R=g[1];return Tp(function(){var B=Fs.transition;Fs.transition={};try{R(m)}finally{Fs.transition=B}},[m]),T},useTransition:function(){var m=of(!1),g=m[0];return m=Rp.bind(null,m[1]),Do().memoizedState=m,[g,m]},useMutableSource:function(){},useSyncExternalStore:function(m,g,T){var R=Di,B=Do();if(Si){if(T===void 0)throw Error(o(407));T=T()}else{if(T=g(),zi===null)throw Error(o(349));(pu&30)!==0||n0(R,g,T)}B.memoizedState=T;var H={value:T,getSnapshot:g};return B.queue=H,Tp(Va.bind(null,R,H,m),[m]),R.flags|=2048,af(9,i0.bind(null,R,H,T,g),void 0,null),T},useId:function(){var m=Do(),g=zi.identifierPrefix;if(Si){var T=Ga,R=Ha;T=(R&~(1<<32-ci(R)-1)).toString(32)+T,g=":"+g+"R"+T,T=mu++,0<T&&(g+="H"+T.toString(32)),g+=":"}else T=nf++,g=":"+g+"r"+T.toString(32)+":";return m.memoizedState=g},unstable_isNewReconciler:!1},o0={readContext:gs,useCallback:bp,useContext:gs,useEffect:Mc,useImperativeHandle:Cc,useInsertionEffect:pi,useLayoutEffect:Mp,useMemo:bc,useReducer:rf,useRef:A_,useState:function(){return rf(ca)},useDebugValue:Cp,useDeferredValue:function(m){var g=rf(ca),T=g[0],R=g[1];return Mc(function(){var B=Fs.transition;Fs.transition={};try{R(m)}finally{Fs.transition=B}},[m]),T},useTransition:function(){var m=rf(ca)[0],g=Lo().memoizedState;return[m,g]},useMutableSource:e0,useSyncExternalStore:t0,useId:gu,unstable_isNewReconciler:!1},a0={readContext:gs,useCallback:bp,useContext:gs,useEffect:Mc,useImperativeHandle:Cc,useInsertionEffect:pi,useLayoutEffect:Mp,useMemo:bc,useReducer:sf,useRef:A_,useState:function(){return sf(ca)},useDebugValue:Cp,useDeferredValue:function(m){var g=sf(ca),T=g[0],R=g[1];return Mc(function(){var B=Fs.transition;Fs.transition={};try{R(m)}finally{Fs.transition=B}},[m]),T},useTransition:function(){var m=sf(ca)[0],g=Lo().memoizedState;return[m,g]},useMutableSource:e0,useSyncExternalStore:t0,useId:gu,unstable_isNewReconciler:!1};function l0(m,g){try{var T="",R=g;do T+=Wg(R),R=R.return;while(R);var B=T}catch(H){B=`
Error generating stack: `+H.message+`
`+H.stack}return{value:m,source:g,stack:B}}function Pp(m,g){try{console.error(g.value)}catch(T){setTimeout(function(){throw T})}}var jS=typeof WeakMap=="function"?WeakMap:Map;function T_(m,g,T){T=Oa(-1,T),T.tag=3,T.payload={element:null};var R=g.value;return T.callback=function(){Nc||(Nc=!0,_i=R),Pp(m,g)},T}function Ip(m,g,T){T=Oa(-1,T),T.tag=3;var R=m.type.getDerivedStateFromError;if(typeof R=="function"){var B=g.value;T.payload=function(){return R(B)},T.callback=function(){Pp(m,g)}}var H=m.stateNode;return H!==null&&typeof H.componentDidCatch=="function"&&(T.callback=function(){Pp(m,g),typeof R!="function"&&(ko===null?ko=new Set([this]):ko.add(this));var ae=g.stack;this.componentDidCatch(g.value,{componentStack:ae!==null?ae:""})}),T}function Wa(m,g,T){var R=m.pingCache;if(R===null){R=m.pingCache=new jS;var B=new Set;R.set(g,B)}else B=R.get(g),B===void 0&&(B=new Set,R.set(g,B));B.has(T)||(B.add(T),m=M0.bind(null,m,g,T),g.then(m,m))}function u0(m){do{var g;if((g=m.tag===13)&&(g=m.memoizedState,g=g!==null?g.dehydrated!==null:!0),g)return m;m=m.return}while(m!==null);return null}function vu(m,g,T,R,B){return(m.mode&1)===0?(m===g?m.flags|=65536:(m.flags|=128,T.flags|=131072,T.flags&=-52805,T.tag===1&&(T.alternate===null?T.tag=17:(g=Oa(-1,1),g.tag=2,El(T,g))),T.lanes|=1),m):(m.flags|=65536,m.lanes=B,m)}function sr(m){m.flags|=4}function Pc(m,g){if(m!==null&&m.child===g.child)return!0;if((g.flags&16)!==0)return!1;for(m=g.child;m!==null;){if((m.flags&12854)!==0||(m.subtreeFlags&12854)!==0)return!1;m=m.sibling}return!0}var Us,yu,Dp,Lp;if(gt)Us=function(m,g){for(var T=g.child;T!==null;){if(T.tag===5||T.tag===6)se(m,T.stateNode);else if(T.tag!==4&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===g)break;for(;T.sibling===null;){if(T.return===null||T.return===g)return;T=T.return}T.sibling.return=T.return,T=T.sibling}},yu=function(){},Dp=function(m,g,T,R,B){if(m=m.memoizedProps,m!==R){var H=g.stateNode,ae=Io(vs.current);T=Se(H,T,m,R,B,ae),(g.updateQueue=T)&&sr(g)}},Lp=function(m,g,T,R){T!==R&&sr(g)};else if(fe){Us=function(m,g,T,R){for(var B=g.child;B!==null;){if(B.tag===5){var H=B.stateNode;T&&R&&(H=Ct(H,B.type,B.memoizedProps,B)),se(m,H)}else if(B.tag===6)H=B.stateNode,T&&R&&(H=Mt(H,B.memoizedProps,B)),se(m,H);else if(B.tag!==4){if(B.tag===22&&B.memoizedState!==null)H=B.child,H!==null&&(H.return=B),Us(m,B,!0,!0);else if(B.child!==null){B.child.return=B,B=B.child;continue}}if(B===g)break;for(;B.sibling===null;){if(B.return===null||B.return===g)return;B=B.return}B.sibling.return=B.return,B=B.sibling}};var Pl=function(m,g,T,R){for(var B=g.child;B!==null;){if(B.tag===5){var H=B.stateNode;T&&R&&(H=Ct(H,B.type,B.memoizedProps,B)),Pt(m,H)}else if(B.tag===6)H=B.stateNode,T&&R&&(H=Mt(H,B.memoizedProps,B)),Pt(m,H);else if(B.tag!==4){if(B.tag===22&&B.memoizedState!==null)H=B.child,H!==null&&(H.return=B),Pl(m,B,!0,!0);else if(B.child!==null){B.child.return=B,B=B.child;continue}}if(B===g)break;for(;B.sibling===null;){if(B.return===null||B.return===g)return;B=B.return}B.sibling.return=B.return,B=B.sibling}};yu=function(m,g){var T=g.stateNode;if(!Pc(m,g)){m=T.containerInfo;var R=zt(m);Pl(R,g,!1,!1),T.pendingChildren=R,sr(g),rn(m,R)}},Dp=function(m,g,T,R,B){var H=m.stateNode,ae=m.memoizedProps;if((m=Pc(m,g))&&ae===R)g.stateNode=H;else{var Ee=g.stateNode,Ve=Io(vs.current),mt=null;ae!==R&&(mt=Se(Ee,T,ae,R,B,Ve)),m&&mt===null?g.stateNode=H:(H=dt(H,mt,T,ae,R,g,m,Ee),me(H,T,R,B,Ve)&&sr(g),g.stateNode=H,m?sr(g):Us(H,g,!1,!1))}},Lp=function(m,g,T,R){T!==R?(m=Io(fu.current),T=Io(vs.current),g.stateNode=Ie(R,m,T,g),sr(g)):g.stateNode=m.stateNode}}else yu=function(){},Dp=function(){},Lp=function(){};function qa(m,g){if(!Si)switch(m.tailMode){case"hidden":g=m.tail;for(var T=null;g!==null;)g.alternate!==null&&(T=g),g=g.sibling;T===null?m.tail=null:T.sibling=null;break;case"collapsed":T=m.tail;for(var R=null;T!==null;)T.alternate!==null&&(R=T),T=T.sibling;R===null?g||m.tail===null?m.tail=null:m.tail.sibling=null:R.sibling=null}}function Gi(m){var g=m.alternate!==null&&m.alternate.child===m.child,T=0,R=0;if(g)for(var B=m.child;B!==null;)T|=B.lanes|B.childLanes,R|=B.subtreeFlags&14680064,R|=B.flags&14680064,B.return=m,B=B.sibling;else for(B=m.child;B!==null;)T|=B.lanes|B.childLanes,R|=B.subtreeFlags,R|=B.flags,B.return=m,B=B.sibling;return m.subtreeFlags|=R,m.childLanes=T,g}function Bp(m,g,T){var R=g.pendingProps;switch(Qg(g),g.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gi(g),null;case 1:return ui(g.type)&&Pn(),Gi(g),null;case 3:return R=g.stateNode,Ec(),_t(hn),_t(sn),hu(),R.pendingContext&&(R.context=R.pendingContext,R.pendingContext=null),(m===null||m.child===null)&&(ef(g)?sr(g):m===null||m.memoizedState.isDehydrated&&(g.flags&256)===0||(g.flags|=1024,co!==null&&(Sf(co),co=null))),yu(m,g),Gi(g),null;case 5:jg(g),T=Io(fu.current);var B=g.type;if(m!==null&&g.stateNode!=null)Dp(m,g,B,R,T),m.ref!==g.ref&&(g.flags|=512,g.flags|=2097152);else{if(!R){if(g.stateNode===null)throw Error(o(166));return Gi(g),null}if(m=Io(vs.current),ef(g)){if(!Fe)throw Error(o(175));m=z(g.stateNode,g.type,g.memoizedProps,T,m,g,!_c),g.updateQueue=m,m!==null&&sr(g)}else{var H=J(B,R,T,m,g);Us(H,g,!1,!1),g.stateNode=H,me(H,B,R,T,m)&&sr(g)}g.ref!==null&&(g.flags|=512,g.flags|=2097152)}return Gi(g),null;case 6:if(m&&g.stateNode!=null)Lp(m,g,m.memoizedProps,R);else{if(typeof R!="string"&&g.stateNode===null)throw Error(o(166));if(m=Io(fu.current),T=Io(vs.current),ef(g)){if(!Fe)throw Error(o(176));if(m=g.stateNode,R=g.memoizedProps,(T=K(m,R,g,!_c))&&(B=ts,B!==null))switch(H=(B.mode&1)!==0,B.tag){case 3:Le(B.stateNode.containerInfo,m,R,H);break;case 5:Ge(B.type,B.memoizedProps,B.stateNode,m,R,H)}T&&sr(g)}else g.stateNode=Ie(R,m,T,g)}return Gi(g),null;case 13:if(_t(Ii),R=g.memoizedState,Si&&br!==null&&(g.mode&1)!==0&&(g.flags&128)===0){for(m=br;m;)m=tn(m);return xc(),g.flags|=98560,g}if(R!==null&&R.dehydrated!==null){if(R=ef(g),m===null){if(!R)throw Error(o(318));if(!Fe)throw Error(o(344));if(m=g.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(o(317));ve(m,g)}else xc(),(g.flags&128)===0&&(g.memoizedState=null),g.flags|=4;return Gi(g),null}return co!==null&&(Sf(co),co=null),(g.flags&128)!==0?(g.lanes=T,g):(R=R!==null,T=!1,m===null?ef(g):T=m.memoizedState!==null,R&&!T&&(g.child.flags|=8192,(g.mode&1)!==0&&(m===null||(Ii.current&1)!==0?Ui===0&&(Ui=3):Gp())),g.updateQueue!==null&&(g.flags|=4),Gi(g),null);case 4:return Ec(),yu(m,g),m===null&&$e(g.stateNode.containerInfo),Gi(g),null;case 10:return jd(g.type._context),Gi(g),null;case 17:return ui(g.type)&&Pn(),Gi(g),null;case 19:if(_t(Ii),B=g.memoizedState,B===null)return Gi(g),null;if(R=(g.flags&128)!==0,H=B.rendering,H===null)if(R)qa(B,!1);else{if(Ui!==0||m!==null&&(m.flags&128)!==0)for(m=g.child;m!==null;){if(H=xp(m),H!==null){for(g.flags|=128,qa(B,!1),m=H.updateQueue,m!==null&&(g.updateQueue=m,g.flags|=4),g.subtreeFlags=0,m=T,R=g.child;R!==null;)T=R,B=m,T.flags&=14680066,H=T.alternate,H===null?(T.childLanes=0,T.lanes=B,T.child=null,T.subtreeFlags=0,T.memoizedProps=null,T.memoizedState=null,T.updateQueue=null,T.dependencies=null,T.stateNode=null):(T.childLanes=H.childLanes,T.lanes=H.lanes,T.child=H.child,T.subtreeFlags=0,T.deletions=null,T.memoizedProps=H.memoizedProps,T.memoizedState=H.memoizedState,T.updateQueue=H.updateQueue,T.type=H.type,B=H.dependencies,T.dependencies=B===null?null:{lanes:B.lanes,firstContext:B.firstContext}),R=R.sibling;return ht(Ii,Ii.current&1|2),g.child}m=m.sibling}B.tail!==null&&rr()>Ll&&(g.flags|=128,R=!0,qa(B,!1),g.lanes=4194304)}else{if(!R)if(m=xp(H),m!==null){if(g.flags|=128,R=!0,m=m.updateQueue,m!==null&&(g.updateQueue=m,g.flags|=4),qa(B,!0),B.tail===null&&B.tailMode==="hidden"&&!H.alternate&&!Si)return Gi(g),null}else 2*rr()-B.renderingStartTime>Ll&&T!==1073741824&&(g.flags|=128,R=!0,qa(B,!1),g.lanes=4194304);B.isBackwards?(H.sibling=g.child,g.child=H):(m=B.last,m!==null?m.sibling=H:g.child=H,B.last=H)}return B.tail!==null?(g=B.tail,B.rendering=g,B.tail=g.sibling,B.renderingStartTime=rr(),g.sibling=null,m=Ii.current,ht(Ii,R?m&1|2:m&1),g):(Gi(g),null);case 22:case 23:return Ef(),R=g.memoizedState!==null,m!==null&&m.memoizedState!==null!==R&&(g.flags|=8192),R&&(g.mode&1)!==0?(Gr&1073741824)!==0&&(Gi(g),gt&&g.subtreeFlags&6&&(g.flags|=8192)):Gi(g),null;case 24:return null;case 25:return null}throw Error(o(156,g.tag))}var c0=a.ReactCurrentOwner,mr=!1;function Fi(m,g,T,R){g.child=m===null?x_(g,null,T,R):za(g,m.child,T,R)}function mi(m,g,T,R,B){T=T.render;var H=g.ref;return gc(g,B),R=Tc(m,g,T,R,H,B),T=bl(),m!==null&&!mr?(g.updateQueue=m.updateQueue,g.flags&=-2053,m.lanes&=~B,ys(m,g,B)):(Si&&T&&Kg(g),g.flags|=1,Fi(m,g,R,B),g.child)}function di(m,g,T,R,B){if(m===null){var H=T.type;return typeof H=="function"&&!Vp(H)&&H.defaultProps===void 0&&T.compare===null&&T.defaultProps===void 0?(g.tag=15,g.type=H,Ja(m,g,H,R,B)):(m=Wp(T.type,null,R,g,g.mode,B),m.ref=g.ref,m.return=g,g.child=m)}if(H=m.child,(m.lanes&B)===0){var ae=H.memoizedProps;if(T=T.compare,T=T!==null?T:Po,T(ae,R)&&m.ref===g.ref)return ys(m,g,B)}return g.flags|=1,m=tl(H,R),m.ref=g.ref,m.return=g,g.child=m}function Ja(m,g,T,R,B){if(m!==null&&Po(m.memoizedProps,R)&&m.ref===g.ref)if(mr=!1,(m.lanes&B)!==0)(m.flags&131072)!==0&&(mr=!0);else return g.lanes=m.lanes,ys(m,g,B);return Xa(m,g,T,R,B)}function Rr(m,g,T){var R=g.pendingProps,B=R.children,H=m!==null?m.memoizedState:null;if(R.mode==="hidden")if((g.mode&1)===0)g.memoizedState={baseLanes:0,cachePool:null},ht(Cu,Gr),Gr|=T;else if((T&1073741824)!==0)g.memoizedState={baseLanes:0,cachePool:null},R=H!==null?H.baseLanes:T,ht(Cu,Gr),Gr|=R;else return m=H!==null?H.baseLanes|T:T,g.lanes=g.childLanes=1073741824,g.memoizedState={baseLanes:m,cachePool:null},g.updateQueue=null,ht(Cu,Gr),Gr|=m,null;else H!==null?(R=H.baseLanes|T,g.memoizedState=null):R=T,ht(Cu,Gr),Gr|=R;return Fi(m,g,B,T),g.child}function ns(m,g){var T=g.ref;(m===null&&T!==null||m!==null&&m.ref!==T)&&(g.flags|=512,g.flags|=2097152)}function Xa(m,g,T,R,B){var H=ui(T)?ei:sn.current;return H=vi(g,H),gc(g,B),T=Tc(m,g,T,R,H,B),R=bl(),m!==null&&!mr?(g.updateQueue=m.updateQueue,g.flags&=-2053,m.lanes&=~B,ys(m,g,B)):(Si&&R&&Kg(g),g.flags|=1,Fi(m,g,T,B),g.child)}function _u(m,g,T,R,B){if(ui(T)){var H=!0;_n(g)}else H=!1;if(gc(g,B),g.stateNode===null)m!==null&&(m.alternate=null,g.alternate=null,g.flags|=2),m_(g,T,R),Yg(g,T,R,B),R=!0;else if(m===null){var ae=g.stateNode,Ee=g.memoizedProps;ae.props=Ee;var Ve=ae.context,mt=T.contextType;typeof mt=="object"&&mt!==null?mt=gs(mt):(mt=ui(T)?ei:sn.current,mt=vi(g,mt));var Ft=T.getDerivedStateFromProps,vn=typeof Ft=="function"||typeof ae.getSnapshotBeforeUpdate=="function";vn||typeof ae.UNSAFE_componentWillReceiveProps!="function"&&typeof ae.componentWillReceiveProps!="function"||(Ee!==R||Ve!==mt)&&g_(g,ae,R,mt),lo=!1;var nn=g.memoizedState;ae.state=nn,hp(g,R,ae,B),Ve=g.memoizedState,Ee!==R||nn!==Ve||hn.current||lo?(typeof Ft=="function"&&(Jg(g,T,Ft,R),Ve=g.memoizedState),(Ee=lo||Xg(g,T,Ee,R,nn,Ve,mt))?(vn||typeof ae.UNSAFE_componentWillMount!="function"&&typeof ae.componentWillMount!="function"||(typeof ae.componentWillMount=="function"&&ae.componentWillMount(),typeof ae.UNSAFE_componentWillMount=="function"&&ae.UNSAFE_componentWillMount()),typeof ae.componentDidMount=="function"&&(g.flags|=4194308)):(typeof ae.componentDidMount=="function"&&(g.flags|=4194308),g.memoizedProps=R,g.memoizedState=Ve),ae.props=R,ae.state=Ve,ae.context=mt,R=Ee):(typeof ae.componentDidMount=="function"&&(g.flags|=4194308),R=!1)}else{ae=g.stateNode,qg(m,g),Ee=g.memoizedProps,mt=g.type===g.elementType?Ee:ms(g.type,Ee),ae.props=mt,vn=g.pendingProps,nn=ae.context,Ve=T.contextType,typeof Ve=="object"&&Ve!==null?Ve=gs(Ve):(Ve=ui(T)?ei:sn.current,Ve=vi(g,Ve));var En=T.getDerivedStateFromProps;(Ft=typeof En=="function"||typeof ae.getSnapshotBeforeUpdate=="function")||typeof ae.UNSAFE_componentWillReceiveProps!="function"&&typeof ae.componentWillReceiveProps!="function"||(Ee!==vn||nn!==Ve)&&g_(g,ae,R,Ve),lo=!1,nn=g.memoizedState,ae.state=nn,hp(g,R,ae,B);var Lt=g.memoizedState;Ee!==vn||nn!==Lt||hn.current||lo?(typeof En=="function"&&(Jg(g,T,En,R),Lt=g.memoizedState),(mt=lo||Xg(g,T,mt,R,nn,Lt,Ve)||!1)?(Ft||typeof ae.UNSAFE_componentWillUpdate!="function"&&typeof ae.componentWillUpdate!="function"||(typeof ae.componentWillUpdate=="function"&&ae.componentWillUpdate(R,Lt,Ve),typeof ae.UNSAFE_componentWillUpdate=="function"&&ae.UNSAFE_componentWillUpdate(R,Lt,Ve)),typeof ae.componentDidUpdate=="function"&&(g.flags|=4),typeof ae.getSnapshotBeforeUpdate=="function"&&(g.flags|=1024)):(typeof ae.componentDidUpdate!="function"||Ee===m.memoizedProps&&nn===m.memoizedState||(g.flags|=4),typeof ae.getSnapshotBeforeUpdate!="function"||Ee===m.memoizedProps&&nn===m.memoizedState||(g.flags|=1024),g.memoizedProps=R,g.memoizedState=Lt),ae.props=R,ae.state=Lt,ae.context=Ve,R=mt):(typeof ae.componentDidUpdate!="function"||Ee===m.memoizedProps&&nn===m.memoizedState||(g.flags|=4),typeof ae.getSnapshotBeforeUpdate!="function"||Ee===m.memoizedProps&&nn===m.memoizedState||(g.flags|=1024),R=!1)}return Hr(m,g,T,R,H,B)}function Hr(m,g,T,R,B,H){ns(m,g);var ae=(g.flags&128)!==0;if(!R&&!ae)return B&&In(g,T,!1),ys(m,g,H);R=g.stateNode,c0.current=g;var Ee=ae&&typeof T.getDerivedStateFromError!="function"?null:R.render();return g.flags|=1,m!==null&&ae?(g.child=za(g,m.child,null,H),g.child=za(g,null,Ee,H)):Fi(m,g,Ee,H),g.memoizedState=R.state,B&&In(g,T,!0),g.child}function df(m){var g=m.stateNode;g.pendingContext?An(m,g.pendingContext,g.pendingContext!==g.context):g.context&&An(m,g.context,!1),_p(m,g.containerInfo)}function d0(m,g,T,R,B){return xc(),yp(B),g.flags|=256,Fi(m,g,T,R),g.child}var ff={dehydrated:null,treeContext:null,retryLane:0};function xu(m){return{baseLanes:m,cachePool:null}}function f0(m,g,T){var R=g.pendingProps,B=Ii.current,H=!1,ae=(g.flags&128)!==0,Ee;if((Ee=ae)||(Ee=m!==null&&m.memoizedState===null?!1:(B&2)!==0),Ee?(H=!0,g.flags&=-129):(m===null||m.memoizedState!==null)&&(B|=1),ht(Ii,B&1),m===null)return Ml(g),m=g.memoizedState,m!==null&&(m=m.dehydrated,m!==null)?((g.mode&1)===0?g.lanes=1:jt(m)?g.lanes=8:g.lanes=1073741824,null):(B=R.children,m=R.fallback,H?(R=g.mode,H=g.child,B={mode:"hidden",children:B},(R&1)===0&&H!==null?(H.childLanes=0,H.pendingProps=B):H=Cf(B,R,0,null),m=Du(m,R,T,null),H.return=g,m.return=g,H.sibling=m,g.child=H,g.child.memoizedState=xu(T),g.memoizedState=ff,m):Bo(g,B));if(B=m.memoizedState,B!==null){if(Ee=B.dehydrated,Ee!==null){if(ae)return g.flags&256?(g.flags&=-257,pf(m,g,T,Error(o(422)))):g.memoizedState!==null?(g.child=m.child,g.flags|=128,null):(H=R.fallback,B=g.mode,R=Cf({mode:"visible",children:R.children},B,0,null),H=Du(H,B,T,null),H.flags|=2,R.return=g,H.return=g,R.sibling=H,g.child=R,(g.mode&1)!==0&&za(g,m.child,null,T),g.child.memoizedState=xu(T),g.memoizedState=ff,H);if((g.mode&1)===0)g=pf(m,g,T,null);else if(jt(Ee))g=pf(m,g,T,Error(o(419)));else if(R=(T&m.childLanes)!==0,mr||R){if(R=zi,R!==null){switch(T&-T){case 4:H=2;break;case 16:H=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:H=32;break;case 536870912:H=268435456;break;default:H=0}R=(H&(R.suspendedLanes|T))!==0?0:H,R!==0&&R!==B.retryLane&&(B.retryLane=R,zr(m,R,-1))}Gp(),g=pf(m,g,T,Error(o(421)))}else Vt(Ee)?(g.flags|=128,g.child=m.child,g=P_.bind(null,m),On(Ee,g),g=null):(T=B.treeContext,Fe&&(br=jn(Ee),ts=g,Si=!0,co=null,_c=!1,T!==null&&(uo[Ns++]=Ha,uo[Ns++]=Ga,uo[Ns++]=uu,Ha=T.id,Ga=T.overflow,uu=g)),g=Bo(g,g.pendingProps.children),g.flags|=4096);return g}return H?(R=Np(m,g,R.children,R.fallback,T),H=g.child,B=m.child.memoizedState,H.memoizedState=B===null?xu(T):{baseLanes:B.baseLanes|T,cachePool:null},H.childLanes=m.childLanes&~T,g.memoizedState=ff,R):(T=hf(m,g,R.children,T),g.memoizedState=null,T)}return H?(R=Np(m,g,R.children,R.fallback,T),H=g.child,B=m.child.memoizedState,H.memoizedState=B===null?xu(T):{baseLanes:B.baseLanes|T,cachePool:null},H.childLanes=m.childLanes&~T,g.memoizedState=ff,R):(T=hf(m,g,R.children,T),g.memoizedState=null,T)}function Bo(m,g){return g=Cf({mode:"visible",children:g},m.mode,0,null),g.return=m,m.child=g}function hf(m,g,T,R){var B=m.child;return m=B.sibling,T=tl(B,{mode:"visible",children:T}),(g.mode&1)===0&&(T.lanes=R),T.return=g,T.sibling=null,m!==null&&(R=g.deletions,R===null?(g.deletions=[m],g.flags|=16):R.push(m)),g.child=T}function Np(m,g,T,R,B){var H=g.mode;m=m.child;var ae=m.sibling,Ee={mode:"hidden",children:T};return(H&1)===0&&g.child!==m?(T=g.child,T.childLanes=0,T.pendingProps=Ee,g.deletions=null):(T=tl(m,Ee),T.subtreeFlags=m.subtreeFlags&14680064),ae!==null?R=tl(ae,R):(R=Du(R,H,B,null),R.flags|=2),R.return=g,T.return=g,T.sibling=R,g.child=T,R}function pf(m,g,T,R){return R!==null&&yp(R),za(g,m.child,null,T),m=Bo(g,g.pendingProps.children),m.flags|=2,g.memoizedState=null,m}function M_(m,g,T){m.lanes|=g;var R=m.alternate;R!==null&&(R.lanes|=g),lu(m.return,g,T)}function da(m,g,T,R,B){var H=m.memoizedState;H===null?m.memoizedState={isBackwards:g,rendering:null,renderingStartTime:0,last:R,tail:T,tailMode:B}:(H.isBackwards=g,H.rendering=null,H.renderingStartTime=0,H.last=R,H.tail=T,H.tailMode=B)}function wu(m,g,T){var R=g.pendingProps,B=R.revealOrder,H=R.tail;if(Fi(m,g,R.children,T),R=Ii.current,(R&2)!==0)R=R&1|2,g.flags|=128;else{if(m!==null&&(m.flags&128)!==0)e:for(m=g.child;m!==null;){if(m.tag===13)m.memoizedState!==null&&M_(m,T,g);else if(m.tag===19)M_(m,T,g);else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===g)break e;for(;m.sibling===null;){if(m.return===null||m.return===g)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}R&=1}if(ht(Ii,R),(g.mode&1)===0)g.memoizedState=null;else switch(B){case"forwards":for(T=g.child,B=null;T!==null;)m=T.alternate,m!==null&&xp(m)===null&&(B=T),T=T.sibling;T=B,T===null?(B=g.child,g.child=null):(B=T.sibling,T.sibling=null),da(g,!1,B,T,H);break;case"backwards":for(T=null,B=g.child,g.child=null;B!==null;){if(m=B.alternate,m!==null&&xp(m)===null){g.child=B;break}m=B.sibling,B.sibling=T,T=B,B=m}da(g,!0,T,null,H);break;case"together":da(g,!1,null,null,void 0);break;default:g.memoizedState=null}return g.child}function ys(m,g,T){if(m!==null&&(g.dependencies=m.dependencies),fa|=g.lanes,(T&g.childLanes)===0)return null;if(m!==null&&g.child!==m.child)throw Error(o(153));if(g.child!==null){for(m=g.child,T=tl(m,m.pendingProps),g.child=T,T.return=g;m.sibling!==null;)m=m.sibling,T=T.sibling=tl(m,m.pendingProps),T.return=g;T.sibling=null}return g.child}function kp(m,g,T){switch(g.tag){case 3:df(g),xc();break;case 5:w_(g);break;case 1:ui(g.type)&&_n(g);break;case 4:_p(g,g.stateNode.containerInfo);break;case 10:au(g,g.type._context,g.memoizedProps.value);break;case 13:var R=g.memoizedState;if(R!==null)return R.dehydrated!==null?(ht(Ii,Ii.current&1),g.flags|=128,null):(T&g.child.childLanes)!==0?f0(m,g,T):(ht(Ii,Ii.current&1),m=ys(m,g,T),m!==null?m.sibling:null);ht(Ii,Ii.current&1);break;case 19:if(R=(T&g.childLanes)!==0,(m.flags&128)!==0){if(R)return wu(m,g,T);g.flags|=128}var B=g.memoizedState;if(B!==null&&(B.rendering=null,B.tail=null,B.lastEffect=null),ht(Ii,Ii.current),R)break;return null;case 22:case 23:return g.lanes=0,Rr(m,g,T)}return ys(m,g,T)}function Fp(m,g){switch(Qg(g),g.tag){case 1:return ui(g.type)&&Pn(),m=g.flags,m&65536?(g.flags=m&-65537|128,g):null;case 3:return Ec(),_t(hn),_t(sn),hu(),m=g.flags,(m&65536)!==0&&(m&128)===0?(g.flags=m&-65537|128,g):null;case 5:return jg(g),null;case 13:if(_t(Ii),m=g.memoizedState,m!==null&&m.dehydrated!==null){if(g.alternate===null)throw Error(o(340));xc()}return m=g.flags,m&65536?(g.flags=m&-65537|128,g):null;case 19:return _t(Ii),null;case 4:return Ec(),null;case 10:return jd(g.type._context),null;case 22:case 23:return Ef(),null;case 24:return null;default:return null}}var is=!1,gr=!1,Au=typeof WeakSet=="function"?WeakSet:Set,wt=null;function fo(m,g){var T=m.ref;if(T!==null)if(typeof T=="function")try{T(null)}catch(R){ss(m,g,R)}else T.current=null}function Ya(m,g,T){try{T()}catch(R){ss(m,g,R)}}var h0=!1;function p0(m,g){for(oe(m.containerInfo),wt=g;wt!==null;)if(m=wt,g=m.child,(m.subtreeFlags&1028)!==0&&g!==null)g.return=m,wt=g;else for(;wt!==null;){m=wt;try{var T=m.alternate;if((m.flags&1024)!==0)switch(m.tag){case 0:case 11:case 15:break;case 1:if(T!==null){var R=T.memoizedProps,B=T.memoizedState,H=m.stateNode,ae=H.getSnapshotBeforeUpdate(m.elementType===m.type?R:ms(m.type,R),B);H.__reactInternalSnapshotBeforeUpdate=ae}break;case 3:gt&&tt(m.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(Ee){ss(m,m.return,Ee)}if(g=m.sibling,g!==null){g.return=m.return,wt=g;break}wt=m.return}return T=h0,h0=!1,T}function Ka(m,g,T){var R=g.updateQueue;if(R=R!==null?R.lastEffect:null,R!==null){var B=R=R.next;do{if((B.tag&m)===m){var H=B.destroy;B.destroy=void 0,H!==void 0&&Ya(g,T,H)}B=B.next}while(B!==R)}}function Pr(m,g){if(g=g.updateQueue,g=g!==null?g.lastEffect:null,g!==null){var T=g=g.next;do{if((T.tag&m)===m){var R=T.create;T.destroy=R()}T=T.next}while(T!==g)}}function rs(m){var g=m.ref;if(g!==null){var T=m.stateNode;switch(m.tag){case 5:m=re(T);break;default:m=T}typeof g=="function"?g(m):g.current=m}}function yi(m,g,T){if(la&&typeof la.onCommitFiberUnmount=="function")try{la.onCommitFiberUnmount(Kd,g)}catch{}switch(g.tag){case 0:case 11:case 14:case 15:if(m=g.updateQueue,m!==null&&(m=m.lastEffect,m!==null)){var R=m=m.next;do{var B=R,H=B.destroy;B=B.tag,H!==void 0&&((B&2)!==0||(B&4)!==0)&&Ya(g,T,H),R=R.next}while(R!==m)}break;case 1:if(fo(g,T),m=g.stateNode,typeof m.componentWillUnmount=="function")try{m.props=g.memoizedProps,m.state=g.memoizedState,m.componentWillUnmount()}catch(ae){ss(g,T,ae)}break;case 5:fo(g,T);break;case 4:gt?v0(m,g,T):fe&&fe&&(g=g.stateNode.containerInfo,T=zt(g),gn(g,T))}}function ho(m,g,T){for(var R=g;;)if(yi(m,R,T),R.child===null||gt&&R.tag===4){if(R===g)break;for(;R.sibling===null;){if(R.return===null||R.return===g)return;R=R.return}R.sibling.return=R.return,R=R.sibling}else R.child.return=R,R=R.child}function m0(m){var g=m.alternate;g!==null&&(m.alternate=null,m0(g)),m.child=null,m.deletions=null,m.sibling=null,m.tag===5&&(g=m.stateNode,g!==null&&xe(g)),m.stateNode=null,m.return=null,m.dependencies=null,m.memoizedProps=null,m.memoizedState=null,m.pendingProps=null,m.stateNode=null,m.updateQueue=null}function g0(m){return m.tag===5||m.tag===3||m.tag===4}function Up(m){e:for(;;){for(;m.sibling===null;){if(m.return===null||g0(m.return))return null;m=m.return}for(m.sibling.return=m.return,m=m.sibling;m.tag!==5&&m.tag!==6&&m.tag!==18;){if(m.flags&2||m.child===null||m.tag===4)continue e;m.child.return=m,m=m.child}if(!(m.flags&2))return m.stateNode}}function Op(m){if(gt){e:{for(var g=m.return;g!==null;){if(g0(g))break e;g=g.return}throw Error(o(160))}var T=g;switch(T.tag){case 5:g=T.stateNode,T.flags&32&&(He(g),T.flags&=-33),T=Up(m),Ic(m,T,g);break;case 3:case 4:g=T.stateNode.containerInfo,T=Up(m),Hp(m,T,g);break;default:throw Error(o(161))}}}function Hp(m,g,T){var R=m.tag;if(R===5||R===6)m=m.stateNode,g?xt(T,m,g):Ot(T,m);else if(R!==4&&(m=m.child,m!==null))for(Hp(m,g,T),m=m.sibling;m!==null;)Hp(m,g,T),m=m.sibling}function Ic(m,g,T){var R=m.tag;if(R===5||R===6)m=m.stateNode,g?Kt(T,m,g):Rt(T,m);else if(R!==4&&(m=m.child,m!==null))for(Ic(m,g,T),m=m.sibling;m!==null;)Ic(m,g,T),m=m.sibling}function v0(m,g,T){for(var R=g,B=!1,H,ae;;){if(!B){B=R.return;e:for(;;){if(B===null)throw Error(o(160));switch(H=B.stateNode,B.tag){case 5:ae=!1;break e;case 3:H=H.containerInfo,ae=!0;break e;case 4:H=H.containerInfo,ae=!0;break e}B=B.return}B=!0}if(R.tag===5||R.tag===6)ho(m,R,T),ae?ge(H,R.stateNode):Tt(H,R.stateNode);else if(R.tag===18)ae?le(H,R.stateNode):de(H,R.stateNode);else if(R.tag===4){if(R.child!==null){H=R.stateNode.containerInfo,ae=!0,R.child.return=R,R=R.child;continue}}else if(yi(m,R,T),R.child!==null){R.child.return=R,R=R.child;continue}if(R===g)break;for(;R.sibling===null;){if(R.return===null||R.return===g)return;R=R.return,R.tag===4&&(B=!1)}R.sibling.return=R.return,R=R.sibling}}function Il(m,g){if(gt){switch(g.tag){case 0:case 11:case 14:case 15:Ka(3,g,g.return),Pr(3,g),Ka(5,g,g.return);return;case 1:return;case 5:var T=g.stateNode;if(T!=null){var R=g.memoizedProps;m=m!==null?m.memoizedProps:R;var B=g.type,H=g.updateQueue;g.updateQueue=null,H!==null&&Ht(T,H,B,m,R,g)}return;case 6:if(g.stateNode===null)throw Error(o(162));T=g.memoizedProps,Xe(g.stateNode,m!==null?m.memoizedProps:T,T);return;case 3:Fe&&m!==null&&m.memoizedState.isDehydrated&&ee(g.stateNode.containerInfo);return;case 12:return;case 13:Dc(g);return;case 19:Dc(g);return;case 17:return}throw Error(o(163))}switch(g.tag){case 0:case 11:case 14:case 15:Ka(3,g,g.return),Pr(3,g),Ka(5,g,g.return);return;case 12:return;case 13:Dc(g);return;case 19:Dc(g);return;case 3:Fe&&m!==null&&m.memoizedState.isDehydrated&&ee(g.stateNode.containerInfo);break;case 22:case 23:return}e:if(fe){switch(g.tag){case 1:case 5:case 6:break e;case 3:case 4:g=g.stateNode,gn(g.containerInfo,g.pendingChildren);break e}throw Error(o(163))}}function Dc(m){var g=m.updateQueue;if(g!==null){m.updateQueue=null;var T=m.stateNode;T===null&&(T=m.stateNode=new Au),g.forEach(function(R){var B=I_.bind(null,m,R);T.has(R)||(T.add(R),R.then(B,B))})}}function eE(m,g){for(wt=g;wt!==null;){g=wt;var T=g.deletions;if(T!==null)for(var R=0;R<T.length;R++){var B=T[R];try{var H=m;gt?v0(H,B,g):ho(H,B,g);var ae=B.alternate;ae!==null&&(ae.return=null),B.return=null}catch(Qt){ss(B,g,Qt)}}if(T=g.child,(g.subtreeFlags&12854)!==0&&T!==null)T.return=g,wt=T;else for(;wt!==null;){g=wt;try{var Ee=g.flags;if(Ee&32&&gt&&He(g.stateNode),Ee&512){var Ve=g.alternate;if(Ve!==null){var mt=Ve.ref;mt!==null&&(typeof mt=="function"?mt(null):mt.current=null)}}if(Ee&8192)switch(g.tag){case 13:if(g.memoizedState!==null){var Ft=g.alternate;(Ft===null||Ft.memoizedState===null)&&(wf=rr())}break;case 22:var vn=g.memoizedState!==null,nn=g.alternate,En=nn!==null&&nn.memoizedState!==null;if(T=g,gt){e:if(R=T,B=vn,H=null,gt)for(var Lt=R;;){if(Lt.tag===5){if(H===null){H=Lt;var Lr=Lt.stateNode;B?rt(Lr):Me(Lt.stateNode,Lt.memoizedProps)}}else if(Lt.tag===6){if(H===null){var Vs=Lt.stateNode;B?Ze(Vs):pe(Vs,Lt.memoizedProps)}}else if((Lt.tag!==22&&Lt.tag!==23||Lt.memoizedState===null||Lt===R)&&Lt.child!==null){Lt.child.return=Lt,Lt=Lt.child;continue}if(Lt===R)break;for(;Lt.sibling===null;){if(Lt.return===null||Lt.return===R)break e;H===Lt&&(H=null),Lt=Lt.return}H===Lt&&(H=null),Lt.sibling.return=Lt.return,Lt=Lt.sibling}}if(vn&&!En&&(T.mode&1)!==0){wt=T;for(var De=T.child;De!==null;){for(T=wt=De;wt!==null;){R=wt;var Te=R.child;switch(R.tag){case 0:case 11:case 14:case 15:Ka(4,R,R.return);break;case 1:fo(R,R.return);var Ue=R.stateNode;if(typeof Ue.componentWillUnmount=="function"){var bt=R.return;try{Ue.props=R.memoizedProps,Ue.state=R.memoizedState,Ue.componentWillUnmount()}catch(Qt){ss(R,bt,Qt)}}break;case 5:fo(R,R.return);break;case 22:if(R.memoizedState!==null){_0(T);continue}}Te!==null?(Te.return=R,wt=Te):_0(T)}De=De.sibling}}}switch(Ee&4102){case 2:Op(g),g.flags&=-3;break;case 6:Op(g),g.flags&=-3,Il(g.alternate,g);break;case 4096:g.flags&=-4097;break;case 4100:g.flags&=-4097,Il(g.alternate,g);break;case 4:Il(g.alternate,g)}}catch(Qt){ss(g,g.return,Qt)}if(T=g.sibling,T!==null){T.return=g.return,wt=T;break}wt=g.return}}}function mf(m,g,T){wt=m,gf(m)}function gf(m,g,T){for(var R=(m.mode&1)!==0;wt!==null;){var B=wt,H=B.child;if(B.tag===22&&R){var ae=B.memoizedState!==null||is;if(!ae){var Ee=B.alternate,Ve=Ee!==null&&Ee.memoizedState!==null||gr;Ee=is;var mt=gr;if(is=ae,(gr=Ve)&&!mt)for(wt=B;wt!==null;)ae=wt,Ve=ae.child,ae.tag===22&&ae.memoizedState!==null?Su(B):Ve!==null?(Ve.return=ae,wt=Ve):Su(B);for(;H!==null;)wt=H,gf(H),H=H.sibling;wt=B,is=Ee,gr=mt}y0(m)}else(B.subtreeFlags&8772)!==0&&H!==null?(H.return=B,wt=H):y0(m)}}function y0(m){for(;wt!==null;){var g=wt;if((g.flags&8772)!==0){var T=g.alternate;try{if((g.flags&8772)!==0)switch(g.tag){case 0:case 11:case 15:gr||Pr(5,g);break;case 1:var R=g.stateNode;if(g.flags&4&&!gr)if(T===null)R.componentDidMount();else{var B=g.elementType===g.type?T.memoizedProps:ms(g.type,T.memoizedProps);R.componentDidUpdate(B,T.memoizedState,R.__reactInternalSnapshotBeforeUpdate)}var H=g.updateQueue;H!==null&&h_(g,H,R);break;case 3:var ae=g.updateQueue;if(ae!==null){if(T=null,g.child!==null)switch(g.child.tag){case 5:T=re(g.child.stateNode);break;case 1:T=g.child.stateNode}h_(g,ae,T)}break;case 5:var Ee=g.stateNode;T===null&&g.flags&4&&fn(Ee,g.type,g.memoizedProps,g);break;case 6:break;case 4:break;case 12:break;case 13:if(Fe&&g.memoizedState===null){var Ve=g.alternate;if(Ve!==null){var mt=Ve.memoizedState;if(mt!==null){var Ft=mt.dehydrated;Ft!==null&&ne(Ft)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}gr||g.flags&512&&rs(g)}catch(vn){ss(g,g.return,vn)}}if(g===m){wt=null;break}if(T=g.sibling,T!==null){T.return=g.return,wt=T;break}wt=g.return}}function _0(m){for(;wt!==null;){var g=wt;if(g===m){wt=null;break}var T=g.sibling;if(T!==null){T.return=g.return,wt=T;break}wt=g.return}}function Su(m){for(;wt!==null;){var g=wt;try{switch(g.tag){case 0:case 11:case 15:var T=g.return;try{Pr(4,g)}catch(Ve){ss(g,T,Ve)}break;case 1:var R=g.stateNode;if(typeof R.componentDidMount=="function"){var B=g.return;try{R.componentDidMount()}catch(Ve){ss(g,B,Ve)}}var H=g.return;try{rs(g)}catch(Ve){ss(g,H,Ve)}break;case 5:var ae=g.return;try{rs(g)}catch(Ve){ss(g,ae,Ve)}}}catch(Ve){ss(g,g.return,Ve)}if(g===m){wt=null;break}var Ee=g.sibling;if(Ee!==null){Ee.return=g.return,wt=Ee;break}wt=g.return}}var vf=0,Eu=1,Tu=2,Qa=3,Lc=4;if(typeof Symbol=="function"&&Symbol.for){var Mu=Symbol.for;vf=Mu("selector.component"),Eu=Mu("selector.has_pseudo_class"),Tu=Mu("selector.role"),Qa=Mu("selector.test_id"),Lc=Mu("selector.text")}function yf(m){var g=Be(m);if(g!=null){if(typeof g.memoizedProps["data-testname"]!="string")throw Error(o(364));return g}if(m=we(m),m===null)throw Error(o(362));return m.stateNode.current}function _f(m,g){switch(g.$$typeof){case vf:if(m.type===g.value)return!0;break;case Eu:e:{g=g.value,m=[m,0];for(var T=0;T<m.length;){var R=m[T++],B=m[T++],H=g[B];if(R.tag!==5||!qe(R)){for(;H!=null&&_f(R,H);)B++,H=g[B];if(B===g.length){g=!0;break e}else for(R=R.child;R!==null;)m.push(R,B),R=R.sibling}}g=!1}return g;case Tu:if(m.tag===5&&yt(m.stateNode,g.value))return!0;break;case Lc:if((m.tag===5||m.tag===6)&&(m=Ye(m),m!==null&&0<=m.indexOf(g.value)))return!0;break;case Qa:if(m.tag===5&&(m=m.memoizedProps["data-testname"],typeof m=="string"&&m.toLowerCase()===g.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function Dl(m){switch(m.$$typeof){case vf:return"<"+(N(m.value)||"Unknown")+">";case Eu:return":has("+(Dl(m)||"")+")";case Tu:return'[role="'+m.value+'"]';case Lc:return'"'+m.value+'"';case Qa:return'[data-testname="'+m.value+'"]';default:throw Error(o(365))}}function Os(m,g){var T=[];m=[m,0];for(var R=0;R<m.length;){var B=m[R++],H=m[R++],ae=g[H];if(B.tag!==5||!qe(B)){for(;ae!=null&&_f(B,ae);)H++,ae=g[H];if(H===g.length)T.push(B);else for(B=B.child;B!==null;)m.push(B,H),B=B.sibling}}return T}function Za(m,g){if(!Y)throw Error(o(363));m=yf(m),m=Os(m,g),g=[],m=Array.from(m);for(var T=0;T<m.length;){var R=m[T++];if(R.tag===5)qe(R)||g.push(R.stateNode);else for(R=R.child;R!==null;)m.push(R),R=R.sibling}return g}var x0=Math.ceil,xf=a.ReactCurrentDispatcher,No=a.ReactCurrentOwner,ii=a.ReactCurrentBatchConfig,Sn=0,zi=null,ri=null,Ei=0,Gr=0,Cu=en(0),Ui=0,Bc=null,fa=0,Hs=0,bu=0,$a=null,Yi=null,wf=0,Ll=1/0;function Ru(){Ll=rr()+500}var Nc=!1,_i=null,ko=null,kc=!1,ha=null,Pu=0,Iu=0,ja=null,gi=-1,Oi=0;function Wn(){return(Sn&6)!==0?rr():gi!==-1?gi:gi=rr()}function Fo(m){return(m.mode&1)===0?1:(Sn&2)!==0&&Ei!==0?Ei&-Ei:f_.transition!==null?(Oi===0&&(m=hc,hc<<=1,(hc&4194240)===0&&(hc=64),Oi=m),Oi):(m=Mn,m!==0?m:Oe())}function zr(m,g,T){if(50<Iu)throw Iu=0,ja=null,Error(o(185));var R=Bl(m,g);return R===null?null:(iu(R,g,T),((Sn&2)===0||R!==zi)&&(R===zi&&((Sn&2)===0&&(Hs|=g),Ui===4&&Dr(R,Ei)),_s(R,T),g===1&&Sn===0&&(m.mode&1)===0&&(Ru(),ap&&oo())),R)}function Bl(m,g){m.lanes|=g;var T=m.alternate;for(T!==null&&(T.lanes|=g),T=m,m=m.return;m!==null;)m.childLanes|=g,T=m.alternate,T!==null&&(T.childLanes|=g),T=m,m=m.return;return T.tag===3?T.stateNode:null}function _s(m,g){var T=m.callbackNode;d_(m,g);var R=Yd(m,m===zi?Ei:0);if(R===0)T!==null&&mc(T),m.callbackNode=null,m.callbackPriority=0;else if(g=R&-R,m.callbackPriority!==g){if(T!=null&&mc(T),g===1)m.tag===0?up(Gs.bind(null,m)):lp(Gs.bind(null,m)),ct?j(function(){Sn===0&&oo()}):ru(su,oo),T=null;else{switch(Fa(R)){case 1:T=su;break;case 4:T=ZS;break;case 16:T=sp;break;case 536870912:T=op;break;default:T=sp}T=zp(T,Ir.bind(null,m))}m.callbackPriority=g,m.callbackNode=T}}function Ir(m,g){if(gi=-1,Oi=0,(Sn&6)!==0)throw Error(o(327));var T=m.callbackNode;if(pa()&&m.callbackNode!==T)return null;var R=Yd(m,m===zi?Ei:0);if(R===0)return null;if((R&30)!==0||(R&m.expiredLanes)!==0||g)g=Tf(m,R);else{g=R;var B=Sn;Sn|=2;var H=S0();(zi!==m||Ei!==g)&&(Ru(),el(m,g));do try{b_();break}catch(Ee){A0(m,Ee)}while(!0);es(),xf.current=H,Sn=B,ri!==null?g=0:(zi=null,Ei=0,g=Ui)}if(g!==0){if(g===2&&(B=np(m),B!==0&&(R=B,g=Af(m,B))),g===1)throw T=Bc,el(m,0),Dr(m,R),_s(m,rr()),T;if(g===6)Dr(m,R);else{if(B=m.current.alternate,(R&30)===0&&!w0(B)&&(g=Tf(m,R),g===2&&(H=np(m),H!==0&&(R=H,g=Af(m,H))),g===1))throw T=Bc,el(m,0),Dr(m,R),_s(m,rr()),T;switch(m.finishedWork=B,m.finishedLanes=R,g){case 0:case 1:throw Error(o(345));case 2:Uo(m,Yi);break;case 3:if(Dr(m,R),(R&130023424)===R&&(g=wf+500-rr(),10<g)){if(Yd(m,0)!==0)break;if(B=m.suspendedLanes,(B&R)!==R){Wn(),m.pingedLanes|=m.suspendedLanes&B;break}m.timeoutHandle=ze(Uo.bind(null,m,Yi),g);break}Uo(m,Yi);break;case 4:if(Dr(m,R),(R&4194240)===R)break;for(g=m.eventTimes,B=-1;0<R;){var ae=31-ci(R);H=1<<ae,ae=g[ae],ae>B&&(B=ae),R&=~H}if(R=B,R=rr()-R,R=(120>R?120:480>R?480:1080>R?1080:1920>R?1920:3e3>R?3e3:4320>R?4320:1960*x0(R/1960))-R,10<R){m.timeoutHandle=ze(Uo.bind(null,m,Yi),R);break}Uo(m,Yi);break;case 5:Uo(m,Yi);break;default:throw Error(o(329))}}}return _s(m,rr()),m.callbackNode===T?Ir.bind(null,m):null}function Af(m,g){var T=$a;return m.current.memoizedState.isDehydrated&&(el(m,g).flags|=256),m=Tf(m,g),m!==2&&(g=Yi,Yi=T,g!==null&&Sf(g)),m}function Sf(m){Yi===null?Yi=m:Yi.push.apply(Yi,m)}function w0(m){for(var g=m;;){if(g.flags&16384){var T=g.updateQueue;if(T!==null&&(T=T.stores,T!==null))for(var R=0;R<T.length;R++){var B=T[R],H=B.getSnapshot;B=B.value;try{if(!jr(H(),B))return!1}catch{return!1}}}if(T=g.child,g.subtreeFlags&16384&&T!==null)T.return=g,g=T;else{if(g===m)break;for(;g.sibling===null;){if(g.return===null||g.return===m)return!0;g=g.return}g.sibling.return=g.return,g=g.sibling}}return!0}function Dr(m,g){for(g&=~bu,g&=~Hs,m.suspendedLanes|=g,m.pingedLanes&=~g,m=m.expirationTimes;0<g;){var T=31-ci(g),R=1<<T;m[T]=-1,g&=~R}}function Gs(m){if((Sn&6)!==0)throw Error(o(327));pa();var g=Yd(m,0);if((g&1)===0)return _s(m,rr()),null;var T=Tf(m,g);if(m.tag!==0&&T===2){var R=np(m);R!==0&&(g=R,T=Af(m,R))}if(T===1)throw T=Bc,el(m,0),Dr(m,g),_s(m,rr()),T;if(T===6)throw Error(o(345));return m.finishedWork=m.current.alternate,m.finishedLanes=g,Uo(m,Yi),_s(m,rr()),null}function Fc(m){ha!==null&&ha.tag===0&&(Sn&6)===0&&pa();var g=Sn;Sn|=1;var T=ii.transition,R=Mn;try{if(ii.transition=null,Mn=1,m)return m()}finally{Mn=R,ii.transition=T,Sn=g,(Sn&6)===0&&oo()}}function Ef(){Gr=Cu.current,_t(Cu)}function el(m,g){m.finishedWork=null,m.finishedLanes=0;var T=m.timeoutHandle;if(T!==at&&(m.timeoutHandle=at,je(T)),ri!==null)for(T=ri.return;T!==null;){var R=T;switch(Qg(R),R.tag){case 1:R=R.type.childContextTypes,R!=null&&Pn();break;case 3:Ec(),_t(hn),_t(sn),hu();break;case 5:jg(R);break;case 4:Ec();break;case 13:_t(Ii);break;case 19:_t(Ii);break;case 10:jd(R.type._context);break;case 22:case 23:Ef()}T=T.return}if(zi=m,ri=m=tl(m.current,null),Ei=Gr=g,Ui=0,Bc=null,bu=Hs=fa=0,Yi=$a=null,ao!==null){for(g=0;g<ao.length;g++)if(T=ao[g],R=T.interleaved,R!==null){T.interleaved=null;var B=R.next,H=T.pending;if(H!==null){var ae=H.next;H.next=B,R.next=ae}T.pending=R}ao=null}return m}function A0(m,g){do{var T=ri;try{if(es(),tf.current=Rc,wp){for(var R=Di.memoizedState;R!==null;){var B=R.queue;B!==null&&(B.pending=null),R=R.next}wp=!1}if(pu=0,hr=fr=Di=null,ua=!1,mu=0,No.current=null,T===null||T.return===null){Ui=1,Bc=g,ri=null;break}e:{var H=m,ae=T.return,Ee=T,Ve=g;if(g=Ei,Ee.flags|=32768,Ve!==null&&typeof Ve=="object"&&typeof Ve.then=="function"){var mt=Ve,Ft=Ee,vn=Ft.tag;if((Ft.mode&1)===0&&(vn===0||vn===11||vn===15)){var nn=Ft.alternate;nn?(Ft.updateQueue=nn.updateQueue,Ft.memoizedState=nn.memoizedState,Ft.lanes=nn.lanes):(Ft.updateQueue=null,Ft.memoizedState=null)}var En=u0(ae);if(En!==null){En.flags&=-257,vu(En,ae,Ee,H,g),En.mode&1&&Wa(H,mt,g),g=En,Ve=mt;var Lt=g.updateQueue;if(Lt===null){var Lr=new Set;Lr.add(Ve),g.updateQueue=Lr}else Lt.add(Ve);break e}else{if((g&1)===0){Wa(H,mt,g),Gp();break e}Ve=Error(o(426))}}else if(Si&&Ee.mode&1){var Vs=u0(ae);if(Vs!==null){(Vs.flags&65536)===0&&(Vs.flags|=256),vu(Vs,ae,Ee,H,g),yp(Ve);break e}}H=Ve,Ui!==4&&(Ui=2),$a===null?$a=[H]:$a.push(H),Ve=l0(Ve,Ee),Ee=ae;do{switch(Ee.tag){case 3:Ee.flags|=65536,g&=-g,Ee.lanes|=g;var De=T_(Ee,Ve,g);fp(Ee,De);break e;case 1:H=Ve;var Te=Ee.type,Ue=Ee.stateNode;if((Ee.flags&128)===0&&(typeof Te.getDerivedStateFromError=="function"||Ue!==null&&typeof Ue.componentDidCatch=="function"&&(ko===null||!ko.has(Ue)))){Ee.flags|=65536,g&=-g,Ee.lanes|=g;var bt=Ip(Ee,H,g);fp(Ee,bt);break e}}Ee=Ee.return}while(Ee!==null)}T0(T)}catch(Qt){g=Qt,ri===T&&T!==null&&(ri=T=T.return);continue}break}while(!0)}function S0(){var m=xf.current;return xf.current=Rc,m===null?Rc:m}function Gp(){(Ui===0||Ui===3||Ui===2)&&(Ui=4),zi===null||(fa&268435455)===0&&(Hs&268435455)===0||Dr(zi,Ei)}function Tf(m,g){var T=Sn;Sn|=2;var R=S0();zi===m&&Ei===g||el(m,g);do try{C_();break}catch(B){A0(m,B)}while(!0);if(es(),Sn=T,xf.current=R,ri!==null)throw Error(o(261));return zi=null,Ei=0,Ui}function C_(){for(;ri!==null;)E0(ri)}function b_(){for(;ri!==null&&!Sl();)E0(ri)}function E0(m){var g=b0(m.alternate,m,Gr);m.memoizedProps=m.pendingProps,g===null?T0(m):ri=g,No.current=null}function T0(m){var g=m;do{var T=g.alternate;if(m=g.return,(g.flags&32768)===0){if(T=Bp(T,g,Gr),T!==null){ri=T;return}}else{if(T=Fp(T,g),T!==null){T.flags&=32767,ri=T;return}if(m!==null)m.flags|=32768,m.subtreeFlags=0,m.deletions=null;else{Ui=6,ri=null;return}}if(g=g.sibling,g!==null){ri=g;return}ri=g=m}while(g!==null);Ui===0&&(Ui=5)}function Uo(m,g){var T=Mn,R=ii.transition;try{ii.transition=null,Mn=1,R_(m,g,T)}finally{ii.transition=R,Mn=T}return null}function R_(m,g,T){do pa();while(ha!==null);if((Sn&6)!==0)throw Error(o(327));var R=m.finishedWork,B=m.finishedLanes;if(R===null)return null;if(m.finishedWork=null,m.finishedLanes=0,R===m.current)throw Error(o(177));m.callbackNode=null,m.callbackPriority=0;var H=R.lanes|R.childLanes;if(rp(m,H),m===zi&&(ri=zi=null,Ei=0),(R.subtreeFlags&2064)===0&&(R.flags&2064)===0||kc||(kc=!0,zp(sp,function(){return pa(),null})),H=(R.flags&15990)!==0,(R.subtreeFlags&15990)!==0||H){H=ii.transition,ii.transition=null;var ae=Mn;Mn=1;var Ee=Sn;Sn|=4,No.current=null,p0(m,R),eE(m,R),W(m.containerInfo),m.current=R,mf(R),QS(),Sn=Ee,Mn=ae,ii.transition=H}else m.current=R;if(kc&&(kc=!1,ha=m,Pu=B),H=m.pendingLanes,H===0&&(ko=null),Qd(R.stateNode),_s(m,rr()),g!==null)for(T=m.onRecoverableError,R=0;R<g.length;R++)T(g[R]);if(Nc)throw Nc=!1,m=_i,_i=null,m;return(Pu&1)!==0&&m.tag!==0&&pa(),H=m.pendingLanes,(H&1)!==0?m===ja?Iu++:(Iu=0,ja=m):Iu=0,oo(),null}function pa(){if(ha!==null){var m=Fa(Pu),g=ii.transition,T=Mn;try{if(ii.transition=null,Mn=16>m?16:m,ha===null)var R=!1;else{if(m=ha,ha=null,Pu=0,(Sn&6)!==0)throw Error(o(331));var B=Sn;for(Sn|=4,wt=m.current;wt!==null;){var H=wt,ae=H.child;if((wt.flags&16)!==0){var Ee=H.deletions;if(Ee!==null){for(var Ve=0;Ve<Ee.length;Ve++){var mt=Ee[Ve];for(wt=mt;wt!==null;){var Ft=wt;switch(Ft.tag){case 0:case 11:case 15:Ka(8,Ft,H)}var vn=Ft.child;if(vn!==null)vn.return=Ft,wt=vn;else for(;wt!==null;){Ft=wt;var nn=Ft.sibling,En=Ft.return;if(m0(Ft),Ft===mt){wt=null;break}if(nn!==null){nn.return=En,wt=nn;break}wt=En}}}var Lt=H.alternate;if(Lt!==null){var Lr=Lt.child;if(Lr!==null){Lt.child=null;do{var Vs=Lr.sibling;Lr.sibling=null,Lr=Vs}while(Lr!==null)}}wt=H}}if((H.subtreeFlags&2064)!==0&&ae!==null)ae.return=H,wt=ae;else e:for(;wt!==null;){if(H=wt,(H.flags&2048)!==0)switch(H.tag){case 0:case 11:case 15:Ka(9,H,H.return)}var De=H.sibling;if(De!==null){De.return=H.return,wt=De;break e}wt=H.return}}var Te=m.current;for(wt=Te;wt!==null;){ae=wt;var Ue=ae.child;if((ae.subtreeFlags&2064)!==0&&Ue!==null)Ue.return=ae,wt=Ue;else e:for(ae=Te;wt!==null;){if(Ee=wt,(Ee.flags&2048)!==0)try{switch(Ee.tag){case 0:case 11:case 15:Pr(9,Ee)}}catch(Qt){ss(Ee,Ee.return,Qt)}if(Ee===ae){wt=null;break e}var bt=Ee.sibling;if(bt!==null){bt.return=Ee.return,wt=bt;break e}wt=Ee.return}}if(Sn=B,oo(),la&&typeof la.onPostCommitFiberRoot=="function")try{la.onPostCommitFiberRoot(Kd,m)}catch{}R=!0}return R}finally{Mn=T,ii.transition=g}}return!1}function Mf(m,g,T){g=l0(T,g),g=T_(m,g,1),El(m,g),g=Wn(),m=Bl(m,1),m!==null&&(iu(m,1,g),_s(m,g))}function ss(m,g,T){if(m.tag===3)Mf(m,m,T);else for(;g!==null;){if(g.tag===3){Mf(g,m,T);break}else if(g.tag===1){var R=g.stateNode;if(typeof g.type.getDerivedStateFromError=="function"||typeof R.componentDidCatch=="function"&&(ko===null||!ko.has(R))){m=l0(T,m),m=Ip(g,m,1),El(g,m),m=Wn(),g=Bl(g,1),g!==null&&(iu(g,1,m),_s(g,m));break}}g=g.return}}function M0(m,g,T){var R=m.pingCache;R!==null&&R.delete(g),g=Wn(),m.pingedLanes|=m.suspendedLanes&T,zi===m&&(Ei&T)===T&&(Ui===4||Ui===3&&(Ei&130023424)===Ei&&500>rr()-wf?el(m,0):bu|=T),_s(m,g)}function C0(m,g){g===0&&((m.mode&1)===0?g=1:(g=Vn,Vn<<=1,(Vn&130023424)===0&&(Vn=4194304)));var T=Wn();m=Bl(m,g),m!==null&&(iu(m,g,T),_s(m,T))}function P_(m){var g=m.memoizedState,T=0;g!==null&&(T=g.retryLane),C0(m,T)}function I_(m,g){var T=0;switch(m.tag){case 13:var R=m.stateNode,B=m.memoizedState;B!==null&&(T=B.retryLane);break;case 19:R=m.stateNode;break;default:throw Error(o(314))}R!==null&&R.delete(g),C0(m,T)}var b0;b0=function(m,g,T){if(m!==null)if(m.memoizedProps!==g.pendingProps||hn.current)mr=!0;else{if((m.lanes&T)===0&&(g.flags&128)===0)return mr=!1,kp(m,g,T);mr=(m.flags&131072)!==0}else mr=!1,Si&&(g.flags&1048576)!==0&&v_(g,gp,g.index);switch(g.lanes=0,g.tag){case 2:var R=g.type;m!==null&&(m.alternate=null,g.alternate=null,g.flags|=2),m=g.pendingProps;var B=vi(g,sn.current);gc(g,T),B=Tc(null,g,R,m,B,T);var H=bl();return g.flags|=1,typeof B=="object"&&B!==null&&typeof B.render=="function"&&B.$$typeof===void 0?(g.tag=1,g.memoizedState=null,g.updateQueue=null,ui(R)?(H=!0,_n(g)):H=!1,g.memoizedState=B.state!==null&&B.state!==void 0?B.state:null,vc(g),B.updater=pp,g.stateNode=B,B._reactInternals=g,Yg(g,R,m,T),g=Hr(null,g,R,!0,H,T)):(g.tag=0,Si&&H&&Kg(g),Fi(null,g,B,T),g=g.child),g;case 16:R=g.elementType;e:{switch(m!==null&&(m.alternate=null,g.alternate=null,g.flags|=2),m=g.pendingProps,B=R._init,R=B(R._payload),g.type=R,B=g.tag=tE(R),m=ms(R,m),B){case 0:g=Xa(null,g,R,m,T);break e;case 1:g=_u(null,g,R,m,T);break e;case 11:g=mi(null,g,R,m,T);break e;case 14:g=di(null,g,R,ms(R.type,m),T);break e}throw Error(o(306,R,""))}return g;case 0:return R=g.type,B=g.pendingProps,B=g.elementType===R?B:ms(R,B),Xa(m,g,R,B,T);case 1:return R=g.type,B=g.pendingProps,B=g.elementType===R?B:ms(R,B),_u(m,g,R,B,T);case 3:e:{if(df(g),m===null)throw Error(o(387));R=g.pendingProps,H=g.memoizedState,B=H.element,qg(m,g),hp(g,R,null,T);var ae=g.memoizedState;if(R=ae.element,Fe&&H.isDehydrated)if(H={element:R,isDehydrated:!1,cache:ae.cache,transitions:ae.transitions},g.updateQueue.baseState=H,g.memoizedState=H,g.flags&256){B=Error(o(423)),g=d0(m,g,R,T,B);break e}else if(R!==B){B=Error(o(424)),g=d0(m,g,R,T,B);break e}else for(Fe&&(br=Ai(g.stateNode.containerInfo),ts=g,Si=!0,co=null,_c=!1),T=x_(g,null,R,T),g.child=T;T;)T.flags=T.flags&-3|4096,T=T.sibling;else{if(xc(),R===B){g=ys(m,g,T);break e}Fi(m,g,R,T)}g=g.child}return g;case 5:return w_(g),m===null&&Ml(g),R=g.type,B=g.pendingProps,H=m!==null?m.memoizedProps:null,ae=B.children,ke(R,B)?ae=null:H!==null&&ke(R,H)&&(g.flags|=32),ns(m,g),Fi(m,g,ae,T),g.child;case 6:return m===null&&Ml(g),null;case 13:return f0(m,g,T);case 4:return _p(g,g.stateNode.containerInfo),R=g.pendingProps,m===null?g.child=za(g,null,R,T):Fi(m,g,R,T),g.child;case 11:return R=g.type,B=g.pendingProps,B=g.elementType===R?B:ms(R,B),mi(m,g,R,B,T);case 7:return Fi(m,g,g.pendingProps,T),g.child;case 8:return Fi(m,g,g.pendingProps.children,T),g.child;case 12:return Fi(m,g,g.pendingProps.children,T),g.child;case 10:e:{if(R=g.type._context,B=g.pendingProps,H=g.memoizedProps,ae=B.value,au(g,R,ae),H!==null)if(jr(H.value,ae)){if(H.children===B.children&&!hn.current){g=ys(m,g,T);break e}}else for(H=g.child,H!==null&&(H.return=g);H!==null;){var Ee=H.dependencies;if(Ee!==null){ae=H.child;for(var Ve=Ee.firstContext;Ve!==null;){if(Ve.context===R){if(H.tag===1){Ve=Oa(-1,T&-T),Ve.tag=2;var mt=H.updateQueue;if(mt!==null){mt=mt.shared;var Ft=mt.pending;Ft===null?Ve.next=Ve:(Ve.next=Ft.next,Ft.next=Ve),mt.pending=Ve}}H.lanes|=T,Ve=H.alternate,Ve!==null&&(Ve.lanes|=T),lu(H.return,T,g),Ee.lanes|=T;break}Ve=Ve.next}}else if(H.tag===10)ae=H.type===g.type?null:H.child;else if(H.tag===18){if(ae=H.return,ae===null)throw Error(o(341));ae.lanes|=T,Ee=ae.alternate,Ee!==null&&(Ee.lanes|=T),lu(ae,T,g),ae=H.sibling}else ae=H.child;if(ae!==null)ae.return=H;else for(ae=H;ae!==null;){if(ae===g){ae=null;break}if(H=ae.sibling,H!==null){H.return=ae.return,ae=H;break}ae=ae.return}H=ae}Fi(m,g,B.children,T),g=g.child}return g;case 9:return B=g.type,R=g.pendingProps.children,gc(g,T),B=gs(B),R=R(B),g.flags|=1,Fi(m,g,R,T),g.child;case 14:return R=g.type,B=ms(R,g.pendingProps),B=ms(R.type,B),di(m,g,R,B,T);case 15:return Ja(m,g,g.type,g.pendingProps,T);case 17:return R=g.type,B=g.pendingProps,B=g.elementType===R?B:ms(R,B),m!==null&&(m.alternate=null,g.alternate=null,g.flags|=2),g.tag=1,ui(R)?(m=!0,_n(g)):m=!1,gc(g,T),m_(g,R,B),Yg(g,R,B,T),Hr(null,g,R,!0,m,T);case 19:return wu(m,g,T);case 22:return Rr(m,g,T)}throw Error(o(156,g.tag))};function zp(m,g){return ru(m,g)}function D_(m,g,T,R){this.tag=m,this.key=T,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=g,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=R,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zs(m,g,T,R){return new D_(m,g,T,R)}function Vp(m){return m=m.prototype,!(!m||!m.isReactComponent)}function tE(m){if(typeof m=="function")return Vp(m)?1:0;if(m!=null){if(m=m.$$typeof,m===w)return 11;if(m===b)return 14}return 2}function tl(m,g){var T=m.alternate;return T===null?(T=zs(m.tag,g,m.key,m.mode),T.elementType=m.elementType,T.type=m.type,T.stateNode=m.stateNode,T.alternate=m,m.alternate=T):(T.pendingProps=g,T.type=m.type,T.flags=0,T.subtreeFlags=0,T.deletions=null),T.flags=m.flags&14680064,T.childLanes=m.childLanes,T.lanes=m.lanes,T.child=m.child,T.memoizedProps=m.memoizedProps,T.memoizedState=m.memoizedState,T.updateQueue=m.updateQueue,g=m.dependencies,T.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext},T.sibling=m.sibling,T.index=m.index,T.ref=m.ref,T}function Wp(m,g,T,R,B,H){var ae=2;if(R=m,typeof m=="function")Vp(m)&&(ae=1);else if(typeof m=="string")ae=5;else e:switch(m){case d:return Du(T.children,B,H,g);case h:ae=8,B|=8;break;case p:return m=zs(12,T,g,B|2),m.elementType=p,m.lanes=H,m;case S:return m=zs(13,T,g,B),m.elementType=S,m.lanes=H,m;case A:return m=zs(19,T,g,B),m.elementType=A,m.lanes=H,m;case P:return Cf(T,B,H,g);default:if(typeof m=="object"&&m!==null)switch(m.$$typeof){case v:ae=10;break e;case _:ae=9;break e;case w:ae=11;break e;case b:ae=14;break e;case C:ae=16,R=null;break e}throw Error(o(130,m==null?m:typeof m,""))}return g=zs(ae,T,g,B),g.elementType=m,g.type=R,g.lanes=H,g}function Du(m,g,T,R){return m=zs(7,m,R,g),m.lanes=T,m}function Cf(m,g,T,R){return m=zs(22,m,R,g),m.elementType=P,m.lanes=T,m.stateNode={},m}function qp(m,g,T){return m=zs(6,m,null,g),m.lanes=T,m}function Jp(m,g,T){return g=zs(4,m.children!==null?m.children:[],m.key,g),g.lanes=T,g.stateNode={containerInfo:m.containerInfo,pendingChildren:null,implementation:m.implementation},g}function Xp(m,g,T,R,B){this.tag=g,this.containerInfo=m,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=at,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ip(0),this.expirationTimes=ip(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ip(0),this.identifierPrefix=R,this.onRecoverableError=B,Fe&&(this.mutableSourceEagerHydrationData=null)}function L_(m,g,T,R,B,H,ae,Ee,Ve){return m=new Xp(m,g,T,Ee,Ve),g===1?(g=1,H===!0&&(g|=8)):g=0,H=zs(3,null,null,g),m.current=H,H.stateNode=m,H.memoizedState={element:R,isDehydrated:T,cache:null,transitions:null},vc(H),m}function B_(m){if(!m)return cn;m=m._reactInternals;e:{if(D(m)!==m||m.tag!==1)throw Error(o(170));var g=m;do{switch(g.tag){case 3:g=g.stateNode.context;break e;case 1:if(ui(g.type)){g=g.stateNode.__reactInternalMemoizedMergedChildContext;break e}}g=g.return}while(g!==null);throw Error(o(171))}if(m.tag===1){var T=m.type;if(ui(T))return Pi(m,T,g)}return g}function N_(m){var g=m._reactInternals;if(g===void 0)throw typeof m.render=="function"?Error(o(188)):(m=Object.keys(m).join(","),Error(o(268,m)));return m=Z(g),m===null?null:m.stateNode}function po(m,g){if(m=m.memoizedState,m!==null&&m.dehydrated!==null){var T=m.retryLane;m.retryLane=T!==0&&T<g?T:g}}function bf(m,g){po(m,g),(m=m.alternate)&&po(m,g)}function Yp(m){return m=Z(m),m===null?null:m.stateNode}function k_(){return null}return t.attemptContinuousHydration=function(m){if(m.tag===13){var g=Wn();zr(m,134217728,g),bf(m,134217728)}},t.attemptHydrationAtCurrentPriority=function(m){if(m.tag===13){var g=Wn(),T=Fo(m);zr(m,T,g),bf(m,T)}},t.attemptSynchronousHydration=function(m){switch(m.tag){case 3:var g=m.stateNode;if(g.current.memoizedState.isDehydrated){var T=pc(g.pendingLanes);T!==0&&(aa(g,T|1),_s(g,rr()),(Sn&6)===0&&(Ru(),oo()))}break;case 13:var R=Wn();Fc(function(){return zr(m,1,R)}),bf(m,1)}},t.batchedUpdates=function(m,g){var T=Sn;Sn|=1;try{return m(g)}finally{Sn=T,Sn===0&&(Ru(),ap&&oo())}},t.createComponentSelector=function(m){return{$$typeof:vf,value:m}},t.createContainer=function(m,g,T,R,B,H,ae){return L_(m,g,!1,null,T,R,B,H,ae)},t.createHasPseudoClassSelector=function(m){return{$$typeof:Eu,value:m}},t.createHydrationContainer=function(m,g,T,R,B,H,ae,Ee,Ve){return m=L_(T,R,!0,m,B,H,ae,Ee,Ve),m.context=B_(null),T=m.current,R=Wn(),B=Fo(T),H=Oa(R,B),H.callback=g??null,El(T,H),m.current.lanes=B,iu(m,B,R),_s(m,R),m},t.createPortal=function(m,g,T){var R=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:R==null?null:""+R,children:m,containerInfo:g,implementation:T}},t.createRoleSelector=function(m){return{$$typeof:Tu,value:m}},t.createTestNameSelector=function(m){return{$$typeof:Qa,value:m}},t.createTextSelector=function(m){return{$$typeof:Lc,value:m}},t.deferredUpdates=function(m){var g=Mn,T=ii.transition;try{return ii.transition=null,Mn=16,m()}finally{Mn=g,ii.transition=T}},t.discreteUpdates=function(m,g,T,R,B){var H=Mn,ae=ii.transition;try{return ii.transition=null,Mn=1,m(g,T,R,B)}finally{Mn=H,ii.transition=ae,Sn===0&&Ru()}},t.findAllNodes=Za,t.findBoundingRects=function(m,g){if(!Y)throw Error(o(363));g=Za(m,g),m=[];for(var T=0;T<g.length;T++)m.push(Qe(g[T]));for(g=m.length-1;0<g;g--){T=m[g];for(var R=T.x,B=R+T.width,H=T.y,ae=H+T.height,Ee=g-1;0<=Ee;Ee--)if(g!==Ee){var Ve=m[Ee],mt=Ve.x,Ft=mt+Ve.width,vn=Ve.y,nn=vn+Ve.height;if(R>=mt&&H>=vn&&B<=Ft&&ae<=nn){m.splice(g,1);break}else if(R!==mt||T.width!==Ve.width||nn<H||vn>ae){if(!(H!==vn||T.height!==Ve.height||Ft<R||mt>B)){mt>R&&(Ve.width+=mt-R,Ve.x=R),Ft<B&&(Ve.width=B-mt),m.splice(g,1);break}}else{vn>H&&(Ve.height+=vn-H,Ve.y=H),nn<ae&&(Ve.height=ae-vn),m.splice(g,1);break}}}return m},t.findHostInstance=N_,t.findHostInstanceWithNoPortals=function(m){return m=X(m),m=m!==null?Q(m):null,m===null?null:m.stateNode},t.findHostInstanceWithWarning=function(m){return N_(m)},t.flushControlled=function(m){var g=Sn;Sn|=1;var T=ii.transition,R=Mn;try{ii.transition=null,Mn=1,m()}finally{Mn=R,ii.transition=T,Sn=g,Sn===0&&(Ru(),oo())}},t.flushPassiveEffects=pa,t.flushSync=Fc,t.focusWithin=function(m,g){if(!Y)throw Error(o(363));for(m=yf(m),g=Os(m,g),g=Array.from(g),m=0;m<g.length;){var T=g[m++];if(!qe(T)){if(T.tag===5&&ft(T.stateNode))return!0;for(T=T.child;T!==null;)g.push(T),T=T.sibling}}return!1},t.getCurrentUpdatePriority=function(){return Mn},t.getFindAllNodesFailureDescription=function(m,g){if(!Y)throw Error(o(363));var T=0,R=[];m=[yf(m),0];for(var B=0;B<m.length;){var H=m[B++],ae=m[B++],Ee=g[ae];if((H.tag!==5||!qe(H))&&(_f(H,Ee)&&(R.push(Dl(Ee)),ae++,ae>T&&(T=ae)),ae<g.length))for(H=H.child;H!==null;)m.push(H,ae),H=H.sibling}if(T<g.length){for(m=[];T<g.length;T++)m.push(Dl(g[T]));return`findAllNodes was able to match part of the selector:
  `+(R.join(" > ")+`

No matching component was found for:
  `)+m.join(" > ")}return null},t.getPublicRootInstance=function(m){if(m=m.current,!m.child)return null;switch(m.child.tag){case 5:return re(m.child.stateNode);default:return m.child.stateNode}},t.injectIntoDevTools=function(m){if(m={bundleType:m.bundleType,version:m.version,rendererPackageName:m.rendererPackageName,rendererConfig:m.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:Yp,findFiberByHostInstance:m.findFiberByHostInstance||k_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")m=!1;else{var g=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(g.isDisabled||!g.supportsFiber)m=!0;else{try{Kd=g.inject(m),la=g}catch{}m=!!g.checkDCE}}return m},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(m,g,T,R){if(!Y)throw Error(o(363));m=Za(m,g);var B=st(m,T,R).disconnect;return{disconnect:function(){B()}}},t.registerMutableSourceForHydration=function(m,g){var T=g._getVersion;T=T(g._source),m.mutableSourceEagerHydrationData==null?m.mutableSourceEagerHydrationData=[g,T]:m.mutableSourceEagerHydrationData.push(g,T)},t.runWithPriority=function(m,g){var T=Mn;try{return Mn=m,g()}finally{Mn=T}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(m,g,T,R){var B=g.current,H=Wn(),ae=Fo(B);return T=B_(T),g.context===null?g.context=T:g.pendingContext=T,g=Oa(H,ae),g.payload={element:m},R=R===void 0?null:R,R!==null&&(g.callback=R),El(B,g),m=zr(B,ae,H),m!==null&&dp(m,B,ae),ae},t}),vT}var D2;function Pq(){return D2||(D2=1,pT.exports=Rq()),pT.exports}var Iq=Pq();const Dq=wC(Iq);var L2=g3();const vb={},yb=n=>void Object.assign(vb,n);function Lq(n,e){function t(d,{args:h=[],attach:p,...v},_){let w=`${d[0].toUpperCase()}${d.slice(1)}`,S;if(d==="primitive"){if(v.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const A=v.object;S=Cm(A,{type:d,root:_,attach:p,primitive:!0})}else{const A=vb[w];if(!A)throw new Error(`R3F: ${w} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(h))throw new Error("R3F: The args prop must be an array!");S=Cm(new A(...h),{type:d,root:_,attach:p,memoizedProps:{args:h}})}return S.__r3f.attach===void 0&&(S.isBufferGeometry?S.__r3f.attach="geometry":S.isMaterial&&(S.__r3f.attach="material")),w!=="inject"&&xT(S,v),S}function i(d,h){let p=!1;if(h){var v,_;(v=h.__r3f)!=null&&v.attach?_T(d,h,h.__r3f.attach):h.isObject3D&&d.isObject3D&&(d.add(h),p=!0),p||(_=d.__r3f)==null||_.objects.push(h),h.__r3f||Cm(h,{}),h.__r3f.parent=d,aM(h),bm(h)}}function r(d,h,p){let v=!1;if(h){var _,w;if((_=h.__r3f)!=null&&_.attach)_T(d,h,h.__r3f.attach);else if(h.isObject3D&&d.isObject3D){h.parent=d,h.dispatchEvent({type:"added"}),d.dispatchEvent({type:"childadded",child:h});const S=d.children.filter(b=>b!==h),A=S.indexOf(p);d.children=[...S.slice(0,A),h,...S.slice(A)],v=!0}v||(w=d.__r3f)==null||w.objects.push(h),h.__r3f||Cm(h,{}),h.__r3f.parent=d,aM(h),bm(h)}}function s(d,h,p=!1){d&&[...d].forEach(v=>o(h,v,p))}function o(d,h,p){if(h){var v,_,w;if(h.__r3f&&(h.__r3f.parent=null),(v=d.__r3f)!=null&&v.objects&&(d.__r3f.objects=d.__r3f.objects.filter(P=>P!==h)),(_=h.__r3f)!=null&&_.attach)U2(d,h,h.__r3f.attach);else if(h.isObject3D&&d.isObject3D){var S;d.remove(h),(S=h.__r3f)!=null&&S.root&&Hq(Pw(h),h)}const b=(w=h.__r3f)==null?void 0:w.primitive,C=!b&&(p===void 0?h.dispose!==null:p);if(!b){var A;s((A=h.__r3f)==null?void 0:A.objects,h,C),s(h.children,h,C)}if(delete h.__r3f,C&&h.dispose&&h.type!=="Scene"){const P=()=>{try{h.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?L2.unstable_scheduleCallback(L2.unstable_IdlePriority,P):P()}bm(d)}}function a(d,h,p,v){var _;const w=(_=d.__r3f)==null?void 0:_.parent;if(!w)return;const S=t(h,p,d.__r3f.root);if(d.children){for(const A of d.children)A.__r3f&&i(S,A);d.children=d.children.filter(A=>!A.__r3f)}d.__r3f.objects.forEach(A=>i(S,A)),d.__r3f.objects=[],d.__r3f.autoRemovedBeforeAppend||o(w,d),S.parent&&(S.__r3f.autoRemovedBeforeAppend=!0),i(w,S),S.raycast&&S.__r3f.eventCount&&Pw(S).getState().internal.interaction.push(S),[v,v.alternate].forEach(A=>{A!==null&&(A.stateNode=S,A.ref&&(typeof A.ref=="function"?A.ref(S):A.ref.current=S))})}const l=()=>{};return{reconciler:Dq({createInstance:t,removeChild:o,appendChild:i,appendInitialChild:i,insertBefore:r,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(d,h)=>{if(!h)return;const p=d.getState().scene;p.__r3f&&(p.__r3f.root=d,i(p,h))},removeChildFromContainer:(d,h)=>{h&&o(d.getState().scene,h)},insertInContainerBefore:(d,h,p)=>{if(!h||!p)return;const v=d.getState().scene;v.__r3f&&r(v,h,p)},getRootHostContext:()=>null,getChildHostContext:d=>d,finalizeInitialChildren(d){var h;return!!((h=d==null?void 0:d.__r3f)!=null?h:{}).handlers},prepareUpdate(d,h,p,v){var _;if(((_=d==null?void 0:d.__r3f)!=null?_:{}).primitive&&v.object&&v.object!==d)return[!0];{const{args:S=[],children:A,...b}=v,{args:C=[],children:P,...k}=p;if(!Array.isArray(S))throw new Error("R3F: the args prop must be an array!");if(S.some((N,O)=>N!==C[O]))return[!0];const L=S3(d,b,k,!0);return L.changes.length?[!1,L]:null}},commitUpdate(d,[h,p],v,_,w,S){h?a(d,v,w,S):xT(d,p)},commitMount(d,h,p,v){var _;const w=(_=d.__r3f)!=null?_:{};d.raycast&&w.handlers&&w.eventCount&&Pw(d).getState().internal.interaction.push(d)},getPublicInstance:d=>d,prepareForCommit:()=>null,preparePortalMount:d=>Cm(d.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(d){var h;const{attach:p,parent:v}=(h=d.__r3f)!=null?h:{};p&&v&&U2(v,d,p),d.isObject3D&&(d.visible=!1),bm(d)},unhideInstance(d,h){var p;const{attach:v,parent:_}=(p=d.__r3f)!=null?p:{};v&&_&&_T(_,d,v),(d.isObject3D&&h.visible==null||h.visible)&&(d.visible=!0),bm(d)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():Nm.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&Ci.fun(performance.now)?performance.now:Ci.fun(Date.now)?Date.now:()=>0,scheduleTimeout:Ci.fun(setTimeout)?setTimeout:void 0,cancelTimeout:Ci.fun(clearTimeout)?clearTimeout:void 0}),applyProps:xT}}var B2,N2;const yT=n=>"colorSpace"in n||"outputColorSpace"in n,v3=()=>{var n;return(n=vb.ColorManagement)!=null?n:null},y3=n=>n&&n.isOrthographicCamera,Bq=n=>n&&n.hasOwnProperty("current"),Wy=typeof window<"u"&&((B2=window.document)!=null&&B2.createElement||((N2=window.navigator)==null?void 0:N2.product)==="ReactNative")?ie.useLayoutEffect:ie.useEffect;function _3(n){const e=ie.useRef(n);return Wy(()=>void(e.current=n),[n]),e}function Nq({set:n}){return Wy(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}class x3 extends ie.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}x3.getDerivedStateFromError=()=>({error:!0});const w3="__default",k2=new Map,kq=n=>n&&!!n.memoized&&!!n.changes;function A3(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}const Y0=n=>{var e;return(e=n.__r3f)==null?void 0:e.root.getState()};function Pw(n){let e=n.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const Ci={obj:n=>n===Object(n)&&!Ci.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:i="reference",strict:r=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(Ci.str(n)||Ci.num(n)||Ci.boo(n))return n===e;const s=Ci.obj(n);if(s&&i==="reference")return n===e;const o=Ci.arr(n);if(o&&t==="reference")return n===e;if((o||s)&&n===e)return!0;let a;for(a in n)if(!(a in e))return!1;if(s&&t==="shallow"&&i==="shallow"){for(a in r?e:n)if(!Ci.equ(n[a],e[a],{strict:r,objects:"reference"}))return!1}else for(a in r?e:n)if(n[a]!==e[a])return!1;if(Ci.und(a)){if(o&&n.length===0&&e.length===0||s&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function Fq(n){const e={nodes:{},materials:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}function Uq(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const e in n)e.dispose==null||e.dispose(),delete n[e]}function Cm(n,e){const t=n;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},n}function oM(n,e){let t=n;if(e.includes("-")){const i=e.split("-"),r=i.pop();return t=i.reduce((s,o)=>s[o],n),{target:t,key:r}}else return{target:t,key:e}}const F2=/-\d+$/;function _T(n,e,t){if(Ci.str(t)){if(F2.test(t)){const s=t.replace(F2,""),{target:o,key:a}=oM(n,s);Array.isArray(o[a])||(o[a]=[])}const{target:i,key:r}=oM(n,t);e.__r3f.previousAttach=i[r],i[r]=e}else e.__r3f.previousAttach=t(n,e)}function U2(n,e,t){var i,r;if(Ci.str(t)){const{target:s,key:o}=oM(n,t),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(i=e.__r3f)==null||i.previousAttach==null||i.previousAttach(n,e);(r=e.__r3f)==null||delete r.previousAttach}function S3(n,{children:e,key:t,ref:i,...r},{children:s,key:o,ref:a,...l}={},u=!1){const d=n.__r3f,h=Object.entries(r),p=[];if(u){const _=Object.keys(l);for(let w=0;w<_.length;w++)r.hasOwnProperty(_[w])||h.unshift([_[w],w3+"remove"])}h.forEach(([_,w])=>{var S;if((S=n.__r3f)!=null&&S.primitive&&_==="object"||Ci.equ(w,l[_]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(_))return p.push([_,w,!0,[]]);let A=[];_.includes("-")&&(A=_.split("-")),p.push([_,w,!1,A]);for(const b in r){const C=r[b];b.startsWith(`${_}-`)&&p.push([b,C,!1,b.split("-")])}});const v={...r};return d!=null&&d.memoizedProps&&d!=null&&d.memoizedProps.args&&(v.args=d.memoizedProps.args),d!=null&&d.memoizedProps&&d!=null&&d.memoizedProps.attach&&(v.attach=d.memoizedProps.attach),{memoized:v,changes:p}}function xT(n,e){var t;const i=n.__r3f,r=i==null?void 0:i.root,s=r==null||r.getState==null?void 0:r.getState(),{memoized:o,changes:a}=kq(e)?e:S3(n,e),l=i==null?void 0:i.eventCount;n.__r3f&&(n.__r3f.memoizedProps=o);for(let p=0;p<a.length;p++){let[v,_,w,S]=a[p];if(yT(n)){const P="srgb",k="srgb-linear";v==="encoding"?(v="colorSpace",_=_===3001?P:k):v==="outputEncoding"&&(v="outputColorSpace",_=_===3001?P:k)}let A=n,b=A[v];if(S.length&&(b=S.reduce((C,P)=>C[P],n),!(b&&b.set))){const[C,...P]=S.reverse();A=P.reverse().reduce((k,L)=>k[L],n),v=C}if(_===w3+"remove")if(A.constructor){let C=k2.get(A.constructor);C||(C=new A.constructor,k2.set(A.constructor,C)),_=C[v]}else _=0;if(w&&i)_?i.handlers[v]=_:delete i.handlers[v],i.eventCount=Object.keys(i.handlers).length;else if(b&&b.set&&(b.copy||b instanceof xh)){if(Array.isArray(_))b.fromArray?b.fromArray(_):b.set(..._);else if(b.copy&&_&&_.constructor&&b.constructor===_.constructor)b.copy(_);else if(_!==void 0){var u;const C=(u=b)==null?void 0:u.isColor;!C&&b.setScalar?b.setScalar(_):b instanceof xh&&_ instanceof xh?b.mask=_.mask:b.set(_),!v3()&&s&&!s.linear&&C&&b.convertSRGBToLinear()}}else{var d;if(A[v]=_,(d=A[v])!=null&&d.isTexture&&A[v].format===Mr&&A[v].type===Qo&&s){const C=A[v];yT(C)&&yT(s.gl)?C.colorSpace=s.gl.outputColorSpace:C.encoding=s.gl.outputEncoding}}bm(n)}if(i&&i.parent&&n.raycast&&l!==i.eventCount){const p=Pw(n).getState().internal,v=p.interaction.indexOf(n);v>-1&&p.interaction.splice(v,1),i.eventCount&&p.interaction.push(n)}return!(a.length===1&&a[0][0]==="onUpdate")&&a.length&&(t=n.__r3f)!=null&&t.parent&&aM(n),n}function bm(n){var e,t;const i=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();i&&i.internal.frames===0&&i.invalidate()}function aM(n){n.onUpdate==null||n.onUpdate(n)}function E3(n,e){n.manual||(y3(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix(),n.updateMatrixWorld())}function Zx(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function Oq(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return Nm.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Nm.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Nm.ContinuousEventPriority;default:return Nm.DefaultEventPriority}}function T3(n,e,t,i){const r=t.get(e);r&&(t.delete(e),t.size===0&&(n.delete(i),r.target.releasePointerCapture(i)))}function Hq(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(i=>i!==e),t.initialHits=t.initialHits.filter(i=>i!==e),t.hovered.forEach((i,r)=>{(i.eventObject===e||i.object===e)&&t.hovered.delete(r)}),t.capturedMap.forEach((i,r)=>{T3(t.capturedMap,e,i,r)})}function Gq(n){function e(l){const{internal:u}=n.getState(),d=l.offsetX-u.initialClick[0],h=l.offsetY-u.initialClick[1];return Math.round(Math.sqrt(d*d+h*h))}function t(l){return l.filter(u=>["Move","Over","Enter","Out","Leave"].some(d=>{var h;return(h=u.__r3f)==null?void 0:h.handlers["onPointer"+d]}))}function i(l,u){const d=n.getState(),h=new Set,p=[],v=u?u(d.internal.interaction):d.internal.interaction;for(let A=0;A<v.length;A++){const b=Y0(v[A]);b&&(b.raycaster.camera=void 0)}d.previousRoot||d.events.compute==null||d.events.compute(l,d);function _(A){const b=Y0(A);if(!b||!b.events.enabled||b.raycaster.camera===null)return[];if(b.raycaster.camera===void 0){var C;b.events.compute==null||b.events.compute(l,b,(C=b.previousRoot)==null?void 0:C.getState()),b.raycaster.camera===void 0&&(b.raycaster.camera=null)}return b.raycaster.camera?b.raycaster.intersectObject(A,!0):[]}let w=v.flatMap(_).sort((A,b)=>{const C=Y0(A.object),P=Y0(b.object);return!C||!P?A.distance-b.distance:P.events.priority-C.events.priority||A.distance-b.distance}).filter(A=>{const b=Zx(A);return h.has(b)?!1:(h.add(b),!0)});d.events.filter&&(w=d.events.filter(w,d));for(const A of w){let b=A.object;for(;b;){var S;(S=b.__r3f)!=null&&S.eventCount&&p.push({...A,eventObject:b}),b=b.parent}}if("pointerId"in l&&d.internal.capturedMap.has(l.pointerId))for(let A of d.internal.capturedMap.get(l.pointerId).values())h.has(Zx(A.intersection))||p.push(A.intersection);return p}function r(l,u,d,h){const p=n.getState();if(l.length){const v={stopped:!1};for(const _ of l){const w=Y0(_.object)||p,{raycaster:S,pointer:A,camera:b,internal:C}=w,P=new te(A.x,A.y,0).unproject(b),k=U=>{var X,Z;return(X=(Z=C.capturedMap.get(U))==null?void 0:Z.has(_.eventObject))!=null?X:!1},L=U=>{const X={intersection:_,target:u.target};C.capturedMap.has(U)?C.capturedMap.get(U).set(_.eventObject,X):C.capturedMap.set(U,new Map([[_.eventObject,X]])),u.target.setPointerCapture(U)},N=U=>{const X=C.capturedMap.get(U);X&&T3(C.capturedMap,_.eventObject,X,U)};let O={};for(let U in u){let X=u[U];typeof X!="function"&&(O[U]=X)}let D={..._,...O,pointer:A,intersections:l,stopped:v.stopped,delta:d,unprojectedPoint:P,ray:S.ray,camera:b,stopPropagation(){const U="pointerId"in u&&C.capturedMap.get(u.pointerId);if((!U||U.has(_.eventObject))&&(D.stopped=v.stopped=!0,C.hovered.size&&Array.from(C.hovered.values()).find(X=>X.eventObject===_.eventObject))){const X=l.slice(0,l.indexOf(_));s([...X,_])}},target:{hasPointerCapture:k,setPointerCapture:L,releasePointerCapture:N},currentTarget:{hasPointerCapture:k,setPointerCapture:L,releasePointerCapture:N},nativeEvent:u};if(h(D),v.stopped===!0)break}}return l}function s(l){const{internal:u}=n.getState();for(const d of u.hovered.values())if(!l.length||!l.find(h=>h.object===d.object&&h.index===d.index&&h.instanceId===d.instanceId)){const p=d.eventObject.__r3f,v=p==null?void 0:p.handlers;if(u.hovered.delete(Zx(d)),p!=null&&p.eventCount){const _={...d,intersections:l};v.onPointerOut==null||v.onPointerOut(_),v.onPointerLeave==null||v.onPointerLeave(_)}}}function o(l,u){for(let d=0;d<u.length;d++){const h=u[d].__r3f;h==null||h.handlers.onPointerMissed==null||h.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return u=>{const{internal:d}=n.getState();"pointerId"in u&&d.capturedMap.has(u.pointerId)&&requestAnimationFrame(()=>{d.capturedMap.has(u.pointerId)&&(d.capturedMap.delete(u.pointerId),s([]))})}}return function(d){const{onPointerMissed:h,internal:p}=n.getState();p.lastEvent.current=d;const v=l==="onPointerMove",_=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",S=i(d,v?t:void 0),A=_?e(d):0;l==="onPointerDown"&&(p.initialClick=[d.offsetX,d.offsetY],p.initialHits=S.map(C=>C.eventObject)),_&&!S.length&&A<=2&&(o(d,p.interaction),h&&h(d)),v&&s(S);function b(C){const P=C.eventObject,k=P.__r3f,L=k==null?void 0:k.handlers;if(k!=null&&k.eventCount)if(v){if(L.onPointerOver||L.onPointerEnter||L.onPointerOut||L.onPointerLeave){const N=Zx(C),O=p.hovered.get(N);O?O.stopped&&C.stopPropagation():(p.hovered.set(N,C),L.onPointerOver==null||L.onPointerOver(C),L.onPointerEnter==null||L.onPointerEnter(C))}L.onPointerMove==null||L.onPointerMove(C)}else{const N=L[l];N?(!_||p.initialHits.includes(P))&&(o(d,p.interaction.filter(O=>!p.initialHits.includes(O))),N(C)):_&&p.initialHits.includes(P)&&o(d,p.interaction.filter(O=>!p.initialHits.includes(O)))}}r(S,d,A,b)}}return{handlePointer:a}}const zq=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],M3=n=>!!(n!=null&&n.render),_b=ie.createContext(null),Vq=(n,e)=>{const t=h3((a,l)=>{const u=new te,d=new te,h=new te;function p(A=l().camera,b=d,C=l().size){const{width:P,height:k,top:L,left:N}=C,O=P/k;b.isVector3?h.copy(b):h.set(...b);const D=A.getWorldPosition(u).distanceTo(h);if(y3(A))return{width:P/A.zoom,height:k/A.zoom,top:L,left:N,factor:1,distance:D,aspect:O};{const U=A.fov*Math.PI/180,X=2*Math.tan(U/2)*D,Z=X*(P/k);return{width:Z,height:X,top:L,left:N,factor:P/Z,distance:D,aspect:O}}}let v;const _=A=>a(b=>({performance:{...b.performance,current:A}})),w=new Je;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(A=1)=>n(l(),A),advance:(A,b)=>e(A,b,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new fb,pointer:w,mouse:w,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const A=l();v&&clearTimeout(v),A.performance.current!==A.performance.min&&_(A.performance.min),v=setTimeout(()=>_(l().performance.max),A.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:p},setEvents:A=>a(b=>({...b,events:{...b.events,...A}})),setSize:(A,b,C,P,k)=>{const L=l().camera,N={width:A,height:b,top:P||0,left:k||0,updateStyle:C};a(O=>({size:N,viewport:{...O.viewport,...p(L,d,N)}}))},setDpr:A=>a(b=>{const C=A3(A);return{viewport:{...b.viewport,dpr:C,initialDpr:b.viewport.initialDpr||C}}}),setFrameloop:(A="always")=>{const b=l().clock;b.stop(),b.elapsedTime=0,A!=="never"&&(b.start(),b.elapsedTime=0),a(()=>({frameloop:A}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:ie.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(A,b,C)=>{const P=l().internal;return P.priority=P.priority+(b>0?1:0),P.subscribers.push({ref:A,priority:b,store:C}),P.subscribers=P.subscribers.sort((k,L)=>k.priority-L.priority),()=>{const k=l().internal;k!=null&&k.subscribers&&(k.priority=k.priority-(b>0?1:0),k.subscribers=k.subscribers.filter(L=>L.ref!==A))}}}}}),i=t.getState();let r=i.size,s=i.viewport.dpr,o=i.camera;return t.subscribe(()=>{const{camera:a,size:l,viewport:u,gl:d,set:h}=t.getState();if(l.width!==r.width||l.height!==r.height||u.dpr!==s){var p;r=l,s=u.dpr,E3(a,l),d.setPixelRatio(u.dpr);const v=(p=l.updateStyle)!=null?p:typeof HTMLCanvasElement<"u"&&d.domElement instanceof HTMLCanvasElement;d.setSize(l.width,l.height,v)}a!==o&&(o=a,h(v=>({viewport:{...v.viewport,...v.viewport.getCurrentViewport(a)}})))}),t.subscribe(a=>n(a)),t};function Wq(n,e){const t={callback:n};return e.add(t),()=>void e.delete(t)}let $x,C3=new Set,qq=new Set,Jq=new Set;const Xq=n=>Wq(n,C3);function wT(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function K0(n,e){switch(n){case"before":return wT(C3,e);case"after":return wT(qq,e);case"tail":return wT(Jq,e)}}let AT,ST;function ET(n,e,t){let i=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(i=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),AT=e.internal.subscribers,$x=0;$x<AT.length;$x++)ST=AT[$x],ST.ref.current(ST.store.getState(),i,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function Yq(n){let e=!1,t=!1,i,r,s;function o(u){r=requestAnimationFrame(o),e=!0,i=0,K0("before",u),t=!0;for(const h of n.values()){var d;s=h.store.getState(),s.internal.active&&(s.frameloop==="always"||s.internal.frames>0)&&!((d=s.gl.xr)!=null&&d.isPresenting)&&(i+=ET(u,s))}if(t=!1,K0("after",u),i===0)return K0("tail",u),e=!1,cancelAnimationFrame(r)}function a(u,d=1){var h;if(!u)return n.forEach(p=>a(p.store.getState(),d));(h=u.gl.xr)!=null&&h.isPresenting||!u.internal.active||u.frameloop==="never"||(d>1?u.internal.frames=Math.min(60,u.internal.frames+d):t?u.internal.frames=2:u.internal.frames=1,e||(e=!0,requestAnimationFrame(o)))}function l(u,d=!0,h,p){if(d&&K0("before",u),h)ET(u,h,p);else for(const v of n.values())ET(u,v.store.getState());d&&K0("after",u)}return{loop:o,invalidate:a,advance:l}}function xb(){const n=ie.useContext(_b);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function Ar(n=t=>t,e){return xb()(n,e)}function cc(n,e=0){const t=xb(),i=t.getState().internal.subscribe,r=_3(n);return Wy(()=>i(r,e,t),[e,i,t]),null}const O2=new WeakMap;function b3(n,e){return function(t,...i){let r=O2.get(t);return r||(r=new t,O2.set(t,r)),n&&n(r),Promise.all(i.map(s=>new Promise((o,a)=>r.load(s,l=>{l.scene&&Object.assign(l,Fq(l.scene)),o(l)},e,l=>a(new Error(`Could not load ${s}: ${l==null?void 0:l.message}`))))))}}function eu(n,e,t,i){const r=Array.isArray(e)?e:[e],s=Tq(b3(t,i),[n,...r],{equal:Ci.equ});return Array.isArray(e)?s:s[0]}eu.preload=function(n,e,t){const i=Array.isArray(e)?e:[e];return Mq(b3(t),[n,...i])};eu.clear=function(n,e){const t=Array.isArray(e)?e:[e];return Cq([n,...t])};const mg=new Map,{invalidate:H2,advance:G2}=Yq(mg),{reconciler:uy,applyProps:qu}=Lq(mg,Oq),xm={objects:"shallow",strict:!1},Kq=(n,e)=>{const t=typeof n=="function"?n(e):n;return M3(t)?t:new ZA({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})};function Qq(n,e){const t=typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement;if(e){const{width:i,height:r,top:s,left:o,updateStyle:a=t}=e;return{width:i,height:r,top:s,left:o,updateStyle:a}}else if(typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:i,height:r,top:s,left:o}=n.parentElement.getBoundingClientRect();return{width:i,height:r,top:s,left:o,updateStyle:t}}else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0,updateStyle:t};return{width:0,height:0,top:0,left:0}}function Zq(n){const e=mg.get(n),t=e==null?void 0:e.fiber,i=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const r=typeof reportError=="function"?reportError:console.error,s=i||Vq(H2,G2),o=t||uy.createContainer(s,Nm.ConcurrentRoot,null,!1,null,"",r,null);e||mg.set(n,{fiber:o,store:s});let a,l=!1,u;return{configure(d={}){let{gl:h,size:p,scene:v,events:_,onCreated:w,shadows:S=!1,linear:A=!1,flat:b=!1,legacy:C=!1,orthographic:P=!1,frameloop:k="always",dpr:L=[1,2],performance:N,raycaster:O,camera:D,onPointerMissed:U}=d,X=s.getState(),Z=X.gl;X.gl||X.set({gl:Z=Kq(h,n)});let he=X.raycaster;he||X.set({raycaster:he=new gb});const{params:Q,...ue}=O||{};if(Ci.equ(ue,he,xm)||qu(he,{...ue}),Ci.equ(Q,he.params,xm)||qu(he,{params:{...he.params,...Q}}),!X.camera||X.camera===u&&!Ci.equ(u,D,xm)){u=D;const W=D instanceof By,J=W?D:P?new Xl(0,0,0,0,.1,1e3):new er(75,0,.1,1e3);W||(J.position.z=5,D&&(qu(J,D),("aspect"in D||"left"in D||"right"in D||"bottom"in D||"top"in D)&&(J.manual=!0,J.updateProjectionMatrix())),!X.camera&&!(D!=null&&D.rotation)&&J.lookAt(0,0,0)),X.set({camera:J}),he.camera=J}if(!X.scene){let W;v!=null&&v.isScene?W=v:(W=new Fy,v&&qu(W,v)),X.set({scene:Cm(W)})}if(!X.xr){var re;const W=(me,Se)=>{const ke=s.getState();ke.frameloop!=="never"&&G2(me,!0,ke,Se)},J=()=>{const me=s.getState();me.gl.xr.enabled=me.gl.xr.isPresenting,me.gl.xr.setAnimationLoop(me.gl.xr.isPresenting?W:null),me.gl.xr.isPresenting||H2(me)},se={connect(){const me=s.getState().gl;me.xr.addEventListener("sessionstart",J),me.xr.addEventListener("sessionend",J)},disconnect(){const me=s.getState().gl;me.xr.removeEventListener("sessionstart",J),me.xr.removeEventListener("sessionend",J)}};typeof((re=Z.xr)==null?void 0:re.addEventListener)=="function"&&se.connect(),X.set({xr:se})}if(Z.shadowMap){const W=Z.shadowMap.enabled,J=Z.shadowMap.type;if(Z.shadowMap.enabled=!!S,Ci.boo(S))Z.shadowMap.type=Wm;else if(Ci.str(S)){var ye;const se={basic:fk,percentage:zA,soft:Wm,variance:dl};Z.shadowMap.type=(ye=se[S])!=null?ye:Wm}else Ci.obj(S)&&Object.assign(Z.shadowMap,S);(W!==Z.shadowMap.enabled||J!==Z.shadowMap.type)&&(Z.shadowMap.needsUpdate=!0)}const $=v3();$&&("enabled"in $?$.enabled=!C:"legacyMode"in $&&($.legacyMode=C)),l||qu(Z,{outputEncoding:A?3e3:3001,toneMapping:b?Jl:AC}),X.legacy!==C&&X.set(()=>({legacy:C})),X.linear!==A&&X.set(()=>({linear:A})),X.flat!==b&&X.set(()=>({flat:b})),h&&!Ci.fun(h)&&!M3(h)&&!Ci.equ(h,Z,xm)&&qu(Z,h),_&&!X.events.handlers&&X.set({events:_(s)});const oe=Qq(n,p);return Ci.equ(oe,X.size,xm)||X.setSize(oe.width,oe.height,oe.updateStyle,oe.top,oe.left),L&&X.viewport.dpr!==A3(L)&&X.setDpr(L),X.frameloop!==k&&X.setFrameloop(k),X.onPointerMissed||X.set({onPointerMissed:U}),N&&!Ci.equ(N,X.performance,xm)&&X.set(W=>({performance:{...W.performance,...N}})),a=w,l=!0,this},render(d){return l||this.configure(),uy.updateContainer(V.jsx($q,{store:s,children:d,onCreated:a,rootElement:n}),o,null,()=>{}),s},unmount(){R3(n)}}}function $q({store:n,children:e,onCreated:t,rootElement:i}){return Wy(()=>{const r=n.getState();r.set(s=>({internal:{...s.internal,active:!0}})),t&&t(r),n.getState().events.connected||r.events.connect==null||r.events.connect(i)},[]),V.jsx(_b.Provider,{value:n,children:e})}function R3(n,e){const t=mg.get(n),i=t==null?void 0:t.fiber;if(i){const r=t==null?void 0:t.store.getState();r&&(r.internal.active=!1),uy.updateContainer(null,i,null,()=>{r&&setTimeout(()=>{try{var s,o,a,l;r.events.disconnect==null||r.events.disconnect(),(s=r.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=r.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=r.gl)!=null&&l.xr&&r.xr.disconnect(),Uq(r),mg.delete(n)}catch{}},500)})}}function jq(n,e,t){return V.jsx(eJ,{children:n,container:e,state:t},e.uuid)}function eJ({state:n={},children:e,container:t}){const{events:i,size:r,...s}=n,o=xb(),[a]=ie.useState(()=>new gb),[l]=ie.useState(()=>new Je),u=ie.useCallback((h,p)=>{const v={...h};Object.keys(h).forEach(w=>{(zq.includes(w)||h[w]!==p[w]&&p[w])&&delete v[w]});let _;if(p&&r){const w=p.camera;_=h.viewport.getCurrentViewport(w,new te,r),w!==h.camera&&E3(w,r)}return{...v,scene:t,raycaster:a,pointer:l,mouse:l,previousRoot:o,events:{...h.events,...p==null?void 0:p.events,...i},size:{...h.size,...r},viewport:{...h.viewport,..._},...s}},[n]),[d]=ie.useState(()=>{const h=o.getState();return h3((v,_)=>({...h,scene:t,raycaster:a,pointer:l,mouse:l,previousRoot:o,events:{...h.events,...i},size:{...h.size,...r},...s,set:v,get:_,setEvents:w=>v(S=>({...S,events:{...S.events,...w}}))}))});return ie.useEffect(()=>{const h=o.subscribe(p=>d.setState(v=>u(p,v)));return()=>{h()}},[u]),ie.useEffect(()=>{d.setState(h=>u(o.getState(),h))},[u]),ie.useEffect(()=>()=>{d.destroy()},[]),V.jsx(V.Fragment,{children:uy.createPortal(V.jsx(_b.Provider,{value:d,children:e}),d,null)})}uy.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:ie.version});const TT={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function tJ(n){const{handlePointer:e}=Gq(n);return{priority:1,enabled:!0,compute(t,i,r){i.pointer.set(t.offsetX/i.size.width*2-1,-(t.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(TT).reduce((t,i)=>({...t,[i]:e(i)}),{}),update:()=>{var t;const{events:i,internal:r}=n.getState();(t=r.lastEvent)!=null&&t.current&&i.handlers&&i.handlers.onPointerMove(r.lastEvent.current)},connect:t=>{var i;const{set:r,events:s}=n.getState();s.disconnect==null||s.disconnect(),r(o=>({events:{...o.events,connected:t}})),Object.entries((i=s.handlers)!=null?i:[]).forEach(([o,a])=>{const[l,u]=TT[o];t.addEventListener(l,a,{passive:u})})},disconnect:()=>{const{set:t,events:i}=n.getState();if(i.connected){var r;Object.entries((r=i.handlers)!=null?r:[]).forEach(([s,o])=>{if(i&&i.connected instanceof HTMLElement){const[a]=TT[s];i.connected.removeEventListener(a,o)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}function z2(n,e){let t;return(...i)=>{window.clearTimeout(t),t=window.setTimeout(()=>n(...i),e)}}function nJ({debounce:n,scroll:e,polyfill:t,offsetSize:i}={debounce:0,scroll:!1,offsetSize:!1}){const r=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!r)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,o]=ie.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),a=ie.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s,orientationHandler:null}),l=n?typeof n=="number"?n:n.scroll:null,u=n?typeof n=="number"?n:n.resize:null,d=ie.useRef(!1);ie.useEffect(()=>(d.current=!0,()=>void(d.current=!1)));const[h,p,v]=ie.useMemo(()=>{const A=()=>{if(!a.current.element)return;const{left:b,top:C,width:P,height:k,bottom:L,right:N,x:O,y:D}=a.current.element.getBoundingClientRect(),U={left:b,top:C,width:P,height:k,bottom:L,right:N,x:O,y:D};a.current.element instanceof HTMLElement&&i&&(U.height=a.current.element.offsetHeight,U.width=a.current.element.offsetWidth),Object.freeze(U),d.current&&!oJ(a.current.lastBounds,U)&&o(a.current.lastBounds=U)};return[A,u?z2(A,u):A,l?z2(A,l):A]},[o,i,l,u]);function _(){a.current.scrollContainers&&(a.current.scrollContainers.forEach(A=>A.removeEventListener("scroll",v,!0)),a.current.scrollContainers=null),a.current.resizeObserver&&(a.current.resizeObserver.disconnect(),a.current.resizeObserver=null),a.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",a.current.orientationHandler))}function w(){a.current.element&&(a.current.resizeObserver=new r(v),a.current.resizeObserver.observe(a.current.element),e&&a.current.scrollContainers&&a.current.scrollContainers.forEach(A=>A.addEventListener("scroll",v,{capture:!0,passive:!0})),a.current.orientationHandler=()=>{v()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",a.current.orientationHandler))}const S=A=>{!A||A===a.current.element||(_(),a.current.element=A,a.current.scrollContainers=P3(A),w())};return rJ(v,!!e),iJ(p),ie.useEffect(()=>{_(),w()},[e,v,p]),ie.useEffect(()=>_,[]),[S,s,h]}function iJ(n){ie.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function rJ(n,e){ie.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function P3(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:i,overflowY:r}=window.getComputedStyle(n);return[t,i,r].some(s=>s==="auto"||s==="scroll")&&e.push(n),[...e,...P3(n.parentElement)]}const sJ=["x","y","top","bottom","left","right","width","height"],oJ=(n,e)=>sJ.every(t=>n[t]===e[t]);var aJ=Object.defineProperty,lJ=Object.defineProperties,uJ=Object.getOwnPropertyDescriptors,V2=Object.getOwnPropertySymbols,cJ=Object.prototype.hasOwnProperty,dJ=Object.prototype.propertyIsEnumerable,W2=(n,e,t)=>e in n?aJ(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,q2=(n,e)=>{for(var t in e||(e={}))cJ.call(e,t)&&W2(n,t,e[t]);if(V2)for(var t of V2(e))dJ.call(e,t)&&W2(n,t,e[t]);return n},fJ=(n,e)=>lJ(n,uJ(e)),J2,X2;typeof window<"u"&&((J2=window.document)!=null&&J2.createElement||((X2=window.navigator)==null?void 0:X2.product)==="ReactNative")?ie.useLayoutEffect:ie.useEffect;function I3(n,e,t){if(!n)return;if(t(n)===!0)return n;let i=n.child;for(;i;){const r=I3(i,e,t);if(r)return r;i=i.sibling}}function D3(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const Y2=console.error;console.error=function(){const n=[...arguments].join("");if(n!=null&&n.startsWith("Warning:")&&n.includes("useContext")){console.error=Y2;return}return Y2.apply(this,arguments)};const wb=D3(ie.createContext(null));class L3 extends ie.Component{render(){return ie.createElement(wb.Provider,{value:this._reactInternals},this.props.children)}}function hJ(){const n=ie.useContext(wb);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=ie.useId();return ie.useMemo(()=>{for(const i of[n,n==null?void 0:n.alternate]){if(!i)continue;const r=I3(i,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(r)return r}},[n,e])}function pJ(){const n=hJ(),[e]=ie.useState(()=>new Map);e.clear();let t=n;for(;t;){if(t.type&&typeof t.type=="object"){const r=t.type._context===void 0&&t.type.Provider===t.type?t.type:t.type._context;r&&r!==wb&&!e.has(r)&&e.set(r,ie.useContext(D3(r)))}t=t.return}return e}function mJ(){const n=pJ();return ie.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>i=>ie.createElement(e,null,ie.createElement(t.Provider,fJ(q2({},i),{value:n.get(t)}))),e=>ie.createElement(L3,q2({},e))),[n])}const gJ=ie.forwardRef(function({children:e,fallback:t,resize:i,style:r,gl:s,events:o=tJ,eventSource:a,eventPrefix:l,shadows:u,linear:d,flat:h,legacy:p,orthographic:v,frameloop:_,dpr:w,performance:S,raycaster:A,camera:b,scene:C,onPointerMissed:P,onCreated:k,...L},N){ie.useMemo(()=>yb(f3),[]);const O=mJ(),[D,U]=nJ({scroll:!0,debounce:{scroll:50,resize:0},...i}),X=ie.useRef(null),Z=ie.useRef(null);ie.useImperativeHandle(N,()=>X.current);const he=_3(P),[Q,ue]=ie.useState(!1),[re,ye]=ie.useState(!1);if(Q)throw Q;if(re)throw re;const $=ie.useRef(null);Wy(()=>{const W=X.current;U.width>0&&U.height>0&&W&&($.current||($.current=Zq(W)),$.current.configure({gl:s,events:o,shadows:u,linear:d,flat:h,legacy:p,orthographic:v,frameloop:_,dpr:w,performance:S,raycaster:A,camera:b,scene:C,size:U,onPointerMissed:(...J)=>he.current==null?void 0:he.current(...J),onCreated:J=>{J.events.connect==null||J.events.connect(a?Bq(a)?a.current:a:Z.current),l&&J.setEvents({compute:(se,me)=>{const Se=se[l+"X"],ke=se[l+"Y"];me.pointer.set(Se/me.size.width*2-1,-(ke/me.size.height)*2+1),me.raycaster.setFromCamera(me.pointer,me.camera)}}),k==null||k(J)}}),$.current.render(V.jsx(O,{children:V.jsx(x3,{set:ye,children:V.jsx(ie.Suspense,{fallback:V.jsx(Nq,{set:ue}),children:e??null})})})))}),ie.useEffect(()=>{const W=X.current;if(W)return()=>R3(W)},[]);const oe=a?"none":"auto";return V.jsx("div",{ref:Z,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:oe,...r},...L,children:V.jsx("div",{ref:D,style:{width:"100%",height:"100%"},children:V.jsx("canvas",{ref:X,style:{display:"block"},children:t})})})}),yS=ie.forwardRef(function(e,t){return V.jsx(L3,{children:V.jsx(gJ,{...e,ref:t})})});function Nd(){return Nd=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Nd.apply(null,arguments)}function vJ(n,e,t){return Math.max(e,Math.min(n,t))}const ki={toVector(n,e){return n===void 0&&(n=e),Array.isArray(n)?n:[n,n]},add(n,e){return[n[0]+e[0],n[1]+e[1]]},sub(n,e){return[n[0]-e[0],n[1]-e[1]]},addTo(n,e){n[0]+=e[0],n[1]+=e[1]},subTo(n,e){n[0]-=e[0],n[1]-=e[1]}};function K2(n,e,t){return e===0||Math.abs(e)===1/0?Math.pow(n,t*5):n*e*t/(e+t*n)}function Q2(n,e,t,i=.15){return i===0?vJ(n,e,t):n<e?-K2(e-n,t-e,i)+e:n>t?+K2(n-t,t-e,i)+t:n}function yJ(n,[e,t],[i,r]){const[[s,o],[a,l]]=n;return[Q2(e,s,o,i),Q2(t,a,l,r)]}function _J(n,e){if(typeof n!="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function xJ(n){var e=_J(n,"string");return typeof e=="symbol"?e:String(e)}function wr(n,e,t){return e=xJ(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Z2(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function Xi(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Z2(Object(t),!0).forEach(function(i){wr(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Z2(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}const B3={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function $2(n){return n?n[0].toUpperCase()+n.slice(1):""}const wJ=["enter","leave"];function AJ(n=!1,e){return n&&!wJ.includes(e)}function SJ(n,e="",t=!1){const i=B3[n],r=i&&i[e]||e;return"on"+$2(n)+$2(r)+(AJ(t,r)?"Capture":"")}const EJ=["gotpointercapture","lostpointercapture"];function TJ(n){let e=n.substring(2).toLowerCase();const t=!!~e.indexOf("passive");t&&(e=e.replace("passive",""));const i=EJ.includes(e)?"capturecapture":"capture",r=!!~e.indexOf(i);return r&&(e=e.replace("capture","")),{device:e,capture:r,passive:t}}function MJ(n,e=""){const t=B3[n],i=t&&t[e]||e;return n+i}function _S(n){return"touches"in n}function N3(n){return _S(n)?"touch":"pointerType"in n?n.pointerType:"mouse"}function CJ(n){return Array.from(n.touches).filter(e=>{var t,i;return e.target===n.currentTarget||((t=n.currentTarget)===null||t===void 0||(i=t.contains)===null||i===void 0?void 0:i.call(t,e.target))})}function bJ(n){return n.type==="touchend"||n.type==="touchcancel"?n.changedTouches:n.targetTouches}function k3(n){return _S(n)?bJ(n)[0]:n}function lM(n,e){try{const t=e.clientX-n.clientX,i=e.clientY-n.clientY,r=(e.clientX+n.clientX)/2,s=(e.clientY+n.clientY)/2,o=Math.hypot(t,i);return{angle:-(Math.atan2(t,i)*180)/Math.PI,distance:o,origin:[r,s]}}catch{}return null}function RJ(n){return CJ(n).map(e=>e.identifier)}function j2(n,e){const[t,i]=Array.from(n.touches).filter(r=>e.includes(r.identifier));return lM(t,i)}function MT(n){const e=k3(n);return _S(n)?e.identifier:e.pointerId}function gg(n){const e=k3(n);return[e.clientX,e.clientY]}const eD=40,tD=800;function F3(n){let{deltaX:e,deltaY:t,deltaMode:i}=n;return i===1?(e*=eD,t*=eD):i===2&&(e*=tD,t*=tD),[e,t]}function PJ(n){var e,t;const{scrollX:i,scrollY:r,scrollLeft:s,scrollTop:o}=n.currentTarget;return[(e=i??s)!==null&&e!==void 0?e:0,(t=r??o)!==null&&t!==void 0?t:0]}function IJ(n){const e={};if("buttons"in n&&(e.buttons=n.buttons),"shiftKey"in n){const{shiftKey:t,altKey:i,metaKey:r,ctrlKey:s}=n;Object.assign(e,{shiftKey:t,altKey:i,metaKey:r,ctrlKey:s})}return e}function eA(n,...e){return typeof n=="function"?n(...e):n}function DJ(){}function LJ(...n){return n.length===0?DJ:n.length===1?n[0]:function(){let e;for(const t of n)e=t.apply(this,arguments)||e;return e}}function nD(n,e){return Object.assign({},e,n||{})}const BJ=32;class U3{constructor(e,t,i){this.ctrl=e,this.args=t,this.key=i,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:t,ingKey:i,args:r}=this;t[i]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=r,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const t=this.state,i=this.config;t._active||(this.reset(),this.computeInitial(),t._active=!0,t.target=e.target,t.currentTarget=e.currentTarget,t.lastOffset=i.from?eA(i.from,t):t.offset,t.offset=t.lastOffset,t.startTime=t.timeStamp=e.timeStamp)}computeValues(e){const t=this.state;t._values=e,t.values=this.config.transform(e)}computeInitial(){const e=this.state;e._initial=e._values,e.initial=e.values}compute(e){const{state:t,config:i,shared:r}=this;t.args=this.args;let s=0;if(e&&(t.event=e,i.preventDefault&&e.cancelable&&t.event.preventDefault(),t.type=e.type,r.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,r.locked=!!document.pointerLockElement,Object.assign(r,IJ(e)),r.down=r.pressed=r.buttons%2===1||r.touches>0,s=e.timeStamp-t.timeStamp,t.timeStamp=e.timeStamp,t.elapsedTime=t.timeStamp-t.startTime),t._active){const L=t._delta.map(Math.abs);ki.addTo(t._distance,L)}this.axisIntent&&this.axisIntent(e);const[o,a]=t._movement,[l,u]=i.threshold,{_step:d,values:h}=t;if(i.hasCustomTransform?(d[0]===!1&&(d[0]=Math.abs(o)>=l&&h[0]),d[1]===!1&&(d[1]=Math.abs(a)>=u&&h[1])):(d[0]===!1&&(d[0]=Math.abs(o)>=l&&Math.sign(o)*l),d[1]===!1&&(d[1]=Math.abs(a)>=u&&Math.sign(a)*u)),t.intentional=d[0]!==!1||d[1]!==!1,!t.intentional)return;const p=[0,0];if(i.hasCustomTransform){const[L,N]=h;p[0]=d[0]!==!1?L-d[0]:0,p[1]=d[1]!==!1?N-d[1]:0}else p[0]=d[0]!==!1?o-d[0]:0,p[1]=d[1]!==!1?a-d[1]:0;this.restrictToAxis&&!t._blocked&&this.restrictToAxis(p);const v=t.offset,_=t._active&&!t._blocked||t.active;_&&(t.first=t._active&&!t.active,t.last=!t._active&&t.active,t.active=r[this.ingKey]=t._active,e&&(t.first&&("bounds"in i&&(t._bounds=eA(i.bounds,t)),this.setup&&this.setup()),t.movement=p,this.computeOffset()));const[w,S]=t.offset,[[A,b],[C,P]]=t._bounds;t.overflow=[w<A?-1:w>b?1:0,S<C?-1:S>P?1:0],t._movementBound[0]=t.overflow[0]?t._movementBound[0]===!1?t._movement[0]:t._movementBound[0]:!1,t._movementBound[1]=t.overflow[1]?t._movementBound[1]===!1?t._movement[1]:t._movementBound[1]:!1;const k=t._active?i.rubberband||[0,0]:[0,0];if(t.offset=yJ(t._bounds,t.offset,k),t.delta=ki.sub(t.offset,v),this.computeMovement(),_&&(!t.last||s>BJ)){t.delta=ki.sub(t.offset,v);const L=t.delta.map(Math.abs);ki.addTo(t.distance,L),t.direction=t.delta.map(Math.sign),t._direction=t._delta.map(Math.sign),!t.first&&s>0&&(t.velocity=[L[0]/s,L[1]/s],t.timeDelta=s)}}emit(){const e=this.state,t=this.shared,i=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!i.triggerAllEvents)return;const r=this.handler(Xi(Xi(Xi({},t),e),{},{[this.aliasKey]:e.values}));r!==void 0&&(e.memo=r)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function NJ([n,e],t){const i=Math.abs(n),r=Math.abs(e);if(i>r&&i>t)return"x";if(r>i&&r>t)return"y"}class qy extends U3{constructor(...e){super(...e),wr(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=ki.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=ki.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){const t=this.state,i=this.config;if(!t.axis&&e){const r=typeof i.axisThreshold=="object"?i.axisThreshold[N3(e)]:i.axisThreshold;t.axis=NJ(t._movement,r)}t._blocked=(i.lockDirection||!!i.axis)&&!t.axis||!!i.axis&&i.axis!==t.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0;break}}}const kJ=n=>n,iD=.15,O3={enabled(n=!0){return n},eventOptions(n,e,t){return Xi(Xi({},t.shared.eventOptions),n)},preventDefault(n=!1){return n},triggerAllEvents(n=!1){return n},rubberband(n=0){switch(n){case!0:return[iD,iD];case!1:return[0,0];default:return ki.toVector(n)}},from(n){if(typeof n=="function")return n;if(n!=null)return ki.toVector(n)},transform(n,e,t){const i=n||t.shared.transform;return this.hasCustomTransform=!!i,i||kJ},threshold(n){return ki.toVector(n,0)}},FJ=0,Kh=Xi(Xi({},O3),{},{axis(n,e,{axis:t}){if(this.lockDirection=t==="lock",!this.lockDirection)return t},axisThreshold(n=FJ){return n},bounds(n={}){if(typeof n=="function")return s=>Kh.bounds(n(s));if("current"in n)return()=>n.current;if(typeof HTMLElement=="function"&&n instanceof HTMLElement)return n;const{left:e=-1/0,right:t=1/0,top:i=-1/0,bottom:r=1/0}=n;return[[e,t],[i,r]]}}),rD={ArrowRight:(n,e=1)=>[n*e,0],ArrowLeft:(n,e=1)=>[-1*n*e,0],ArrowUp:(n,e=1)=>[0,-1*n*e],ArrowDown:(n,e=1)=>[0,n*e]};class UJ extends qy{constructor(...e){super(...e),wr(this,"ingKey","dragging")}reset(){super.reset();const e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){const e=this.state;if(e._bounds instanceof HTMLElement){const t=e._bounds.getBoundingClientRect(),i=e.currentTarget.getBoundingClientRect(),r={left:t.left-i.left+e.offset[0],right:t.right-i.right+e.offset[0],top:t.top-i.top+e.offset[1],bottom:t.bottom-i.bottom+e.offset[1]};e._bounds=Kh.bounds(r)}}cancel(){const e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){const t=this.config,i=this.state;if(e.buttons!=null&&(Array.isArray(t.pointerButtons)?!t.pointerButtons.includes(e.buttons):t.pointerButtons!==-1&&t.pointerButtons!==e.buttons))return;const r=this.ctrl.setEventIds(e);t.pointerCapture&&e.target.setPointerCapture(e.pointerId),!(r&&r.size>1&&i._pointerActive)&&(this.start(e),this.setupPointer(e),i._pointerId=MT(e),i._pointerActive=!0,this.computeValues(gg(e)),this.computeInitial(),t.preventScrollAxis&&N3(e)!=="mouse"?(i._active=!1,this.setupScrollPrevention(e)):t.delay>0?(this.setupDelayTrigger(e),t.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}startPointerDrag(e){const t=this.state;t._active=!0,t._preventScroll=!0,t._delayed=!1,this.compute(e),this.emit()}pointerMove(e){const t=this.state,i=this.config;if(!t._pointerActive)return;const r=MT(e);if(t._pointerId!==void 0&&r!==t._pointerId)return;const s=gg(e);if(document.pointerLockElement===e.target?t._delta=[e.movementX,e.movementY]:(t._delta=ki.sub(s,t._values),this.computeValues(s)),ki.addTo(t._movement,t._delta),this.compute(e),t._delayed&&t.intentional){this.timeoutStore.remove("dragDelay"),t.active=!1,this.startPointerDrag(e);return}if(i.preventScrollAxis&&!t._preventScroll)if(t.axis)if(t.axis===i.preventScrollAxis||i.preventScrollAxis==="xy"){t._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(e);return}else return;this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch{}const t=this.state,i=this.config;if(!t._active||!t._pointerActive)return;const r=MT(e);if(t._pointerId!==void 0&&r!==t._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);const[s,o]=t._distance;if(t.tap=s<=i.tapsThreshold&&o<=i.tapsThreshold,t.tap&&i.filterTaps)t._force=!0;else{const[a,l]=t._delta,[u,d]=t._movement,[h,p]=i.swipe.velocity,[v,_]=i.swipe.distance,w=i.swipe.duration;if(t.elapsedTime<w){const S=Math.abs(a/t.timeDelta),A=Math.abs(l/t.timeDelta);S>h&&Math.abs(u)>v&&(t.swipe[0]=Math.sign(a)),A>p&&Math.abs(d)>_&&(t.swipe[1]=Math.sign(l))}}this.emit()}pointerClick(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}setupPointer(e){const t=this.config,i=t.device;t.pointerLock&&e.currentTarget.requestPointerLock(),t.pointerCapture||(this.eventStore.add(this.sharedConfig.window,i,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,i,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,i,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){this.state._preventScroll=!1,OJ(e);const t=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",t),this.eventStore.add(this.sharedConfig.window,"touch","cancel",t),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(e)},this.config.delay)}keyDown(e){const t=rD[e.key];if(t){const i=this.state,r=e.shiftKey?10:e.altKey?.1:1;this.start(e),i._delta=t(this.config.keyboardDisplacement,r),i._keyboardActive=!0,ki.addTo(i._movement,i._delta),this.compute(e),this.emit()}}keyUp(e){e.key in rD&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){const t=this.config.device;e(t,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(t,"change",this.pointerMove.bind(this)),e(t,"end",this.pointerUp.bind(this)),e(t,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function OJ(n){"persist"in n&&typeof n.persist=="function"&&n.persist()}const Jy=typeof window<"u"&&window.document&&window.document.createElement;function H3(){return Jy&&"ontouchstart"in window}function HJ(){return H3()||Jy&&window.navigator.maxTouchPoints>1}function GJ(){return Jy&&"onpointerdown"in window}function zJ(){return Jy&&"exitPointerLock"in window.document}function VJ(){try{return"constructor"in GestureEvent}catch{return!1}}const Sa={isBrowser:Jy,gesture:VJ(),touch:H3(),touchscreen:HJ(),pointer:GJ(),pointerLock:zJ()},WJ=250,qJ=180,JJ=.5,XJ=50,YJ=250,KJ=10,sD={mouse:0,touch:0,pen:8},QJ=Xi(Xi({},Kh),{},{device(n,e,{pointer:{touch:t=!1,lock:i=!1,mouse:r=!1}={}}){return this.pointerLock=i&&Sa.pointerLock,Sa.touch&&t?"touch":this.pointerLock?"mouse":Sa.pointer&&!r?"pointer":Sa.touch?"touch":"mouse"},preventScrollAxis(n,e,{preventScroll:t}){if(this.preventScrollDelay=typeof t=="number"?t:t||t===void 0&&n?WJ:void 0,!(!Sa.touchscreen||t===!1))return n||(t!==void 0?"y":void 0)},pointerCapture(n,e,{pointer:{capture:t=!0,buttons:i=1,keys:r=!0}={}}){return this.pointerButtons=i,this.keys=r,!this.pointerLock&&this.device==="pointer"&&t},threshold(n,e,{filterTaps:t=!1,tapsThreshold:i=3,axis:r=void 0}){const s=ki.toVector(n,t?i:r?1:0);return this.filterTaps=t,this.tapsThreshold=i,s},swipe({velocity:n=JJ,distance:e=XJ,duration:t=YJ}={}){return{velocity:this.transform(ki.toVector(n)),distance:this.transform(ki.toVector(e)),duration:t}},delay(n=0){switch(n){case!0:return qJ;case!1:return 0;default:return n}},axisThreshold(n){return n?Xi(Xi({},sD),n):sD},keyboardDisplacement(n=KJ){return n}});function G3(n){const[e,t]=n.overflow,[i,r]=n._delta,[s,o]=n._direction;(e<0&&i>0&&s<0||e>0&&i<0&&s>0)&&(n._movement[0]=n._movementBound[0]),(t<0&&r>0&&o<0||t>0&&r<0&&o>0)&&(n._movement[1]=n._movementBound[1])}const ZJ=30,$J=100;class jJ extends U3{constructor(...e){super(...e),wr(this,"ingKey","pinching"),wr(this,"aliasKey","da")}init(){this.state.offset=[1,0],this.state.lastOffset=[1,0],this.state._pointerEvents=new Map}reset(){super.reset();const e=this.state;e._touchIds=[],e.canceled=!1,e.cancel=this.cancel.bind(this),e.turns=0}computeOffset(){const{type:e,movement:t,lastOffset:i}=this.state;e==="wheel"?this.state.offset=ki.add(t,i):this.state.offset=[(1+t[0])*i[0],t[1]+i[1]]}computeMovement(){const{offset:e,lastOffset:t}=this.state;this.state.movement=[e[0]/t[0],e[1]-t[1]]}axisIntent(){const e=this.state,[t,i]=e._movement;if(!e.axis){const r=Math.abs(t)*ZJ-Math.abs(i);r<0?e.axis="angle":r>0&&(e.axis="scale")}}restrictToAxis(e){this.config.lockDirection&&(this.state.axis==="scale"?e[1]=0:this.state.axis==="angle"&&(e[0]=0))}cancel(){const e=this.state;e.canceled||setTimeout(()=>{e.canceled=!0,e._active=!1,this.compute(),this.emit()},0)}touchStart(e){this.ctrl.setEventIds(e);const t=this.state,i=this.ctrl.touchIds;if(t._active&&t._touchIds.every(s=>i.has(s))||i.size<2)return;this.start(e),t._touchIds=Array.from(i).slice(0,2);const r=j2(e,t._touchIds);r&&this.pinchStart(e,r)}pointerStart(e){if(e.buttons!=null&&e.buttons%2!==1)return;this.ctrl.setEventIds(e),e.target.setPointerCapture(e.pointerId);const t=this.state,i=t._pointerEvents,r=this.ctrl.pointerIds;if(t._active&&Array.from(i.keys()).every(o=>r.has(o))||(i.size<2&&i.set(e.pointerId,e),t._pointerEvents.size<2))return;this.start(e);const s=lM(...Array.from(i.values()));s&&this.pinchStart(e,s)}pinchStart(e,t){const i=this.state;i.origin=t.origin,this.computeValues([t.distance,t.angle]),this.computeInitial(),this.compute(e),this.emit()}touchMove(e){if(!this.state._active)return;const t=j2(e,this.state._touchIds);t&&this.pinchMove(e,t)}pointerMove(e){const t=this.state._pointerEvents;if(t.has(e.pointerId)&&t.set(e.pointerId,e),!this.state._active)return;const i=lM(...Array.from(t.values()));i&&this.pinchMove(e,i)}pinchMove(e,t){const i=this.state,r=i._values[1],s=t.angle-r;let o=0;Math.abs(s)>270&&(o+=Math.sign(s)),this.computeValues([t.distance,t.angle-360*o]),i.origin=t.origin,i.turns=o,i._movement=[i._values[0]/i._initial[0]-1,i._values[1]-i._initial[1]],this.compute(e),this.emit()}touchEnd(e){this.ctrl.setEventIds(e),this.state._active&&this.state._touchIds.some(t=>!this.ctrl.touchIds.has(t))&&(this.state._active=!1,this.compute(e),this.emit())}pointerEnd(e){const t=this.state;this.ctrl.setEventIds(e);try{e.target.releasePointerCapture(e.pointerId)}catch{}t._pointerEvents.has(e.pointerId)&&t._pointerEvents.delete(e.pointerId),t._active&&t._pointerEvents.size<2&&(t._active=!1,this.compute(e),this.emit())}gestureStart(e){e.cancelable&&e.preventDefault();const t=this.state;t._active||(this.start(e),this.computeValues([e.scale,e.rotation]),t.origin=[e.clientX,e.clientY],this.compute(e),this.emit())}gestureMove(e){if(e.cancelable&&e.preventDefault(),!this.state._active)return;const t=this.state;this.computeValues([e.scale,e.rotation]),t.origin=[e.clientX,e.clientY];const i=t._movement;t._movement=[e.scale-1,e.rotation],t._delta=ki.sub(t._movement,i),this.compute(e),this.emit()}gestureEnd(e){this.state._active&&(this.state._active=!1,this.compute(e),this.emit())}wheel(e){const t=this.config.modifierKey;t&&(Array.isArray(t)?!t.find(i=>e[i]):!e[t])||(this.state._active?this.wheelChange(e):this.wheelStart(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this)))}wheelStart(e){this.start(e),this.wheelChange(e)}wheelChange(e){"uv"in e||e.cancelable&&e.preventDefault();const i=this.state;i._delta=[-F3(e)[1]/$J*i.offset[0],0],ki.addTo(i._movement,i._delta),G3(i),this.state.origin=[e.clientX,e.clientY],this.compute(e),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){const t=this.config.device;t&&(e(t,"start",this[t+"Start"].bind(this)),e(t,"change",this[t+"Move"].bind(this)),e(t,"end",this[t+"End"].bind(this)),e(t,"cancel",this[t+"End"].bind(this)),e("lostPointerCapture","",this[t+"End"].bind(this))),this.config.pinchOnWheel&&e("wheel","",this.wheel.bind(this),{passive:!1})}}const eX=Xi(Xi({},O3),{},{device(n,e,{shared:t,pointer:{touch:i=!1}={}}){if(t.target&&!Sa.touch&&Sa.gesture)return"gesture";if(Sa.touch&&i)return"touch";if(Sa.touchscreen){if(Sa.pointer)return"pointer";if(Sa.touch)return"touch"}},bounds(n,e,{scaleBounds:t={},angleBounds:i={}}){const r=o=>{const a=nD(eA(t,o),{min:-1/0,max:1/0});return[a.min,a.max]},s=o=>{const a=nD(eA(i,o),{min:-1/0,max:1/0});return[a.min,a.max]};return typeof t!="function"&&typeof i!="function"?[r(),s()]:o=>[r(o),s(o)]},threshold(n,e,t){return this.lockDirection=t.axis==="lock",ki.toVector(n,this.lockDirection?[.1,3]:0)},modifierKey(n){return n===void 0?"ctrlKey":n},pinchOnWheel(n=!0){return n}});class tX extends qy{constructor(...e){super(...e),wr(this,"ingKey","moving")}move(e){this.config.mouseOnly&&e.pointerType!=="mouse"||(this.state._active?this.moveChange(e):this.moveStart(e),this.timeoutStore.add("moveEnd",this.moveEnd.bind(this)))}moveStart(e){this.start(e),this.computeValues(gg(e)),this.compute(e),this.computeInitial(),this.emit()}moveChange(e){if(!this.state._active)return;const t=gg(e),i=this.state;i._delta=ki.sub(t,i._values),ki.addTo(i._movement,i._delta),this.computeValues(t),this.compute(e),this.emit()}moveEnd(e){this.state._active&&(this.state._active=!1,this.compute(e),this.emit())}bind(e){e("pointer","change",this.move.bind(this)),e("pointer","leave",this.moveEnd.bind(this))}}const nX=Xi(Xi({},Kh),{},{mouseOnly:(n=!0)=>n});class iX extends qy{constructor(...e){super(...e),wr(this,"ingKey","scrolling")}scroll(e){this.state._active||this.start(e),this.scrollChange(e),this.timeoutStore.add("scrollEnd",this.scrollEnd.bind(this))}scrollChange(e){e.cancelable&&e.preventDefault();const t=this.state,i=PJ(e);t._delta=ki.sub(i,t._values),ki.addTo(t._movement,t._delta),this.computeValues(i),this.compute(e),this.emit()}scrollEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){e("scroll","",this.scroll.bind(this))}}const rX=Kh;class sX extends qy{constructor(...e){super(...e),wr(this,"ingKey","wheeling")}wheel(e){this.state._active||this.start(e),this.wheelChange(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(e){const t=this.state;t._delta=F3(e),ki.addTo(t._movement,t._delta),G3(t),this.compute(e),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){e("wheel","",this.wheel.bind(this))}}const oX=Kh;class aX extends qy{constructor(...e){super(...e),wr(this,"ingKey","hovering")}enter(e){this.config.mouseOnly&&e.pointerType!=="mouse"||(this.start(e),this.computeValues(gg(e)),this.compute(e),this.emit())}leave(e){if(this.config.mouseOnly&&e.pointerType!=="mouse")return;const t=this.state;if(!t._active)return;t._active=!1;const i=gg(e);t._movement=t._delta=ki.sub(i,t._values),this.computeValues(i),this.compute(e),t.delta=t.movement,this.emit()}bind(e){e("pointer","enter",this.enter.bind(this)),e("pointer","leave",this.leave.bind(this))}}const lX=Xi(Xi({},Kh),{},{mouseOnly:(n=!0)=>n}),Ab=new Map,uM=new Map;function uX(n){Ab.set(n.key,n.engine),uM.set(n.key,n.resolver)}const cX={key:"drag",engine:UJ,resolver:QJ},dX={key:"hover",engine:aX,resolver:lX},fX={key:"move",engine:tX,resolver:nX},hX={key:"pinch",engine:jJ,resolver:eX},pX={key:"scroll",engine:iX,resolver:rX},mX={key:"wheel",engine:sX,resolver:oX};function gX(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}function vX(n,e){if(n==null)return{};var t=gX(n,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}const yX={target(n){if(n)return()=>"current"in n?n.current:n},enabled(n=!0){return n},window(n=Sa.isBrowser?window:void 0){return n},eventOptions({passive:n=!0,capture:e=!1}={}){return{passive:n,capture:e}},transform(n){return n}},_X=["target","eventOptions","window","enabled","transform"];function Iw(n={},e){const t={};for(const[i,r]of Object.entries(e))switch(typeof r){case"function":t[i]=r.call(t,n[i],i,n);break;case"object":t[i]=Iw(n[i],r);break;case"boolean":r&&(t[i]=n[i]);break}return t}function xX(n,e,t={}){const i=n,{target:r,eventOptions:s,window:o,enabled:a,transform:l}=i,u=vX(i,_X);if(t.shared=Iw({target:r,eventOptions:s,window:o,enabled:a,transform:l},yX),e){const d=uM.get(e);t[e]=Iw(Xi({shared:t.shared},u),d)}else for(const d in u){const h=uM.get(d);h&&(t[d]=Iw(Xi({shared:t.shared},u[d]),h))}return t}class z3{constructor(e,t){wr(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=t}add(e,t,i,r,s){const o=this._listeners,a=MJ(t,i),l=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},u=Xi(Xi({},l),s);e.addEventListener(a,r,u);const d=()=>{e.removeEventListener(a,r,u),o.delete(d)};return o.add(d),d}clean(){this._listeners.forEach(e=>e()),this._listeners.clear()}}class wX{constructor(){wr(this,"_timeouts",new Map)}add(e,t,i=140,...r){this.remove(e),this._timeouts.set(e,window.setTimeout(t,i,...r))}remove(e){const t=this._timeouts.get(e);t&&window.clearTimeout(t)}clean(){this._timeouts.forEach(e=>void window.clearTimeout(e)),this._timeouts.clear()}}let AX=class{constructor(e){wr(this,"gestures",new Set),wr(this,"_targetEventStore",new z3(this)),wr(this,"gestureEventStores",{}),wr(this,"gestureTimeoutStores",{}),wr(this,"handlers",{}),wr(this,"config",{}),wr(this,"pointerIds",new Set),wr(this,"touchIds",new Set),wr(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),SX(this,e)}setEventIds(e){if(_S(e))return this.touchIds=new Set(RJ(e)),this.touchIds;if("pointerId"in e)return e.type==="pointerup"||e.type==="pointercancel"?this.pointerIds.delete(e.pointerId):e.type==="pointerdown"&&this.pointerIds.add(e.pointerId),this.pointerIds}applyHandlers(e,t){this.handlers=e,this.nativeHandlers=t}applyConfig(e,t){this.config=xX(e,t,this.config)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){const t=this.config.shared,i={};let r;if(!(t.target&&(r=t.target(),!r))){if(t.enabled){for(const o of this.gestures){const a=this.config[o],l=oD(i,a.eventOptions,!!r);if(a.enabled){const u=Ab.get(o);new u(this,e,o).bind(l)}}const s=oD(i,t.eventOptions,!!r);for(const o in this.nativeHandlers)s(o,"",a=>this.nativeHandlers[o](Xi(Xi({},this.state.shared),{},{event:a,args:e})),void 0,!0)}for(const s in i)i[s]=LJ(...i[s]);if(!r)return i;for(const s in i){const{device:o,capture:a,passive:l}=TJ(s);this._targetEventStore.add(r,o,"",i[s],{capture:a,passive:l})}}}};function wm(n,e){n.gestures.add(e),n.gestureEventStores[e]=new z3(n,e),n.gestureTimeoutStores[e]=new wX}function SX(n,e){e.drag&&wm(n,"drag"),e.wheel&&wm(n,"wheel"),e.scroll&&wm(n,"scroll"),e.move&&wm(n,"move"),e.pinch&&wm(n,"pinch"),e.hover&&wm(n,"hover")}const oD=(n,e,t)=>(i,r,s,o={},a=!1)=>{var l,u;const d=(l=o.capture)!==null&&l!==void 0?l:e.capture,h=(u=o.passive)!==null&&u!==void 0?u:e.passive;let p=a?i:SJ(i,r,d);t&&h&&(p+="Passive"),n[p]=n[p]||[],n[p].push(s)},EX=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function TX(n){const e={},t={},i=new Set;for(let r in n)EX.test(r)?(i.add(RegExp.lastMatch),t[r]=n[r]):e[r]=n[r];return[t,e,i]}function Am(n,e,t,i,r,s){if(!n.has(t)||!Ab.has(i))return;const o=t+"Start",a=t+"End",l=u=>{let d;return u.first&&o in e&&e[o](u),t in e&&(d=e[t](u)),u.last&&a in e&&e[a](u),d};r[i]=l,s[i]=s[i]||{}}function MX(n,e){const[t,i,r]=TX(n),s={};return Am(r,t,"onDrag","drag",s,e),Am(r,t,"onWheel","wheel",s,e),Am(r,t,"onScroll","scroll",s,e),Am(r,t,"onPinch","pinch",s,e),Am(r,t,"onMove","move",s,e),Am(r,t,"onHover","hover",s,e),{handlers:s,config:e,nativeHandlers:i}}function CX(n,e={},t,i){const r=_d.useMemo(()=>new AX(n),[]);if(r.applyHandlers(n,i),r.applyConfig(e,t),_d.useEffect(r.effect.bind(r)),_d.useEffect(()=>r.clean.bind(r),[]),e.target===void 0)return r.bind.bind(r)}function bX(n){return n.forEach(uX),function(t,i){const{handlers:r,nativeHandlers:s,config:o}=MX(t,i||{});return CX(r,o,void 0,s)}}function RX(n,e){return bX([cX,hX,pX,mX,fX,dX])(n,e||{})}var Sb=Yy(),wn=n=>Xy(n,Sb),Eb=Yy();wn.write=n=>Xy(n,Eb);var xS=Yy();wn.onStart=n=>Xy(n,xS);var Tb=Yy();wn.onFrame=n=>Xy(n,Tb);var Mb=Yy();wn.onFinish=n=>Xy(n,Mb);var Xm=[];wn.setTimeout=(n,e)=>{const t=wn.now()+e,i=()=>{const s=Xm.findIndex(o=>o.cancel==i);~s&&Xm.splice(s,1),ud-=~s?1:0},r={time:t,handler:n,cancel:i};return Xm.splice(V3(t),0,r),ud+=1,W3(),r};var V3=n=>~(~Xm.findIndex(e=>e.time>n)||~Xm.length);wn.cancel=n=>{xS.delete(n),Tb.delete(n),Mb.delete(n),Sb.delete(n),Eb.delete(n)};wn.sync=n=>{cM=!0,wn.batchedUpdates(n),cM=!1};wn.throttle=n=>{let e;function t(){try{n(...e)}finally{e=null}}function i(...r){e=r,wn.onStart(t)}return i.handler=n,i.cancel=()=>{xS.delete(t),e=null},i};var Cb=typeof window<"u"?window.requestAnimationFrame:(()=>{});wn.use=n=>Cb=n;wn.now=typeof performance<"u"?()=>performance.now():Date.now;wn.batchedUpdates=n=>n();wn.catch=console.error;wn.frameLoop="always";wn.advance=()=>{wn.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):J3()};var ld=-1,ud=0,cM=!1;function Xy(n,e){cM?(e.delete(n),n(0)):(e.add(n),W3())}function W3(){ld<0&&(ld=0,wn.frameLoop!=="demand"&&Cb(q3))}function PX(){ld=-1}function q3(){~ld&&(Cb(q3),wn.batchedUpdates(J3))}function J3(){const n=ld;ld=wn.now();const e=V3(ld);if(e&&(X3(Xm.splice(0,e),t=>t.handler()),ud-=e),!ud){PX();return}xS.flush(),Sb.flush(n?Math.min(64,ld-n):16.667),Tb.flush(),Eb.flush(),Mb.flush()}function Yy(){let n=new Set,e=n;return{add(t){ud+=e==n&&!n.has(t)?1:0,n.add(t)},delete(t){return ud-=e==n&&n.has(t)?1:0,n.delete(t)},flush(t){e.size&&(n=new Set,ud-=e.size,X3(e,i=>i(t)&&n.add(i)),ud+=n.size,e=n)}}}function X3(n,e){n.forEach(t=>{try{e(t)}catch(i){wn.catch(i)}})}var IX=Object.defineProperty,DX=(n,e)=>{for(var t in e)IX(n,t,{get:e[t],enumerable:!0})},vl={};DX(vl,{assign:()=>BX,colors:()=>Td,createStringInterpolator:()=>Rb,skipAnimation:()=>K3,to:()=>Y3,willAdvance:()=>Pb});function dM(){}var LX=(n,e,t)=>Object.defineProperty(n,e,{value:t,writable:!0,configurable:!0}),At={arr:Array.isArray,obj:n=>!!n&&n.constructor.name==="Object",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",und:n=>n===void 0};function Gu(n,e){if(At.arr(n)){if(!At.arr(e)||n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}return n===e}var ai=(n,e)=>n.forEach(e);function sc(n,e,t){if(At.arr(n)){for(let i=0;i<n.length;i++)e.call(t,n[i],`${i}`);return}for(const i in n)n.hasOwnProperty(i)&&e.call(t,n[i],i)}var Ra=n=>At.und(n)?[]:At.arr(n)?n:[n];function Tv(n,e){if(n.size){const t=Array.from(n);n.clear(),ai(t,e)}}var fv=(n,...e)=>Tv(n,t=>t(...e)),bb=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),Rb,Y3,Td=null,K3=!1,Pb=dM,BX=n=>{n.to&&(Y3=n.to),n.now&&(wn.now=n.now),n.colors!==void 0&&(Td=n.colors),n.skipAnimation!=null&&(K3=n.skipAnimation),n.createStringInterpolator&&(Rb=n.createStringInterpolator),n.requestAnimationFrame&&wn.use(n.requestAnimationFrame),n.batchedUpdates&&(wn.batchedUpdates=n.batchedUpdates),n.willAdvance&&(Pb=n.willAdvance),n.frameLoop&&(wn.frameLoop=n.frameLoop)},Mv=new Set,Ca=[],CT=[],tA=0,wS={get idle(){return!Mv.size&&!Ca.length},start(n){tA>n.priority?(Mv.add(n),wn.onStart(NX)):(Q3(n),wn(fM))},advance:fM,sort(n){if(tA)wn.onFrame(()=>wS.sort(n));else{const e=Ca.indexOf(n);~e&&(Ca.splice(e,1),Z3(n))}},clear(){Ca=[],Mv.clear()}};function NX(){Mv.forEach(Q3),Mv.clear(),wn(fM)}function Q3(n){Ca.includes(n)||Z3(n)}function Z3(n){Ca.splice(kX(Ca,e=>e.priority>n.priority),0,n)}function fM(n){const e=CT;for(let t=0;t<Ca.length;t++){const i=Ca[t];tA=i.priority,i.idle||(Pb(i),i.advance(n),i.idle||e.push(i))}return tA=0,CT=Ca,CT.length=0,Ca=e,Ca.length>0}function kX(n,e){const t=n.findIndex(e);return t<0?n.length:t}var FX={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},ml="[-+]?\\d*\\.?\\d+",nA=ml+"%";function AS(...n){return"\\(\\s*("+n.join(")\\s*,\\s*(")+")\\s*\\)"}var UX=new RegExp("rgb"+AS(ml,ml,ml)),OX=new RegExp("rgba"+AS(ml,ml,ml,ml)),HX=new RegExp("hsl"+AS(ml,nA,nA)),GX=new RegExp("hsla"+AS(ml,nA,nA,ml)),zX=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,VX=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,WX=/^#([0-9a-fA-F]{6})$/,qX=/^#([0-9a-fA-F]{8})$/;function JX(n){let e;return typeof n=="number"?n>>>0===n&&n>=0&&n<=4294967295?n:null:(e=WX.exec(n))?parseInt(e[1]+"ff",16)>>>0:Td&&Td[n]!==void 0?Td[n]:(e=UX.exec(n))?(Sm(e[1])<<24|Sm(e[2])<<16|Sm(e[3])<<8|255)>>>0:(e=OX.exec(n))?(Sm(e[1])<<24|Sm(e[2])<<16|Sm(e[3])<<8|uD(e[4]))>>>0:(e=zX.exec(n))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=qX.exec(n))?parseInt(e[1],16)>>>0:(e=VX.exec(n))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=HX.exec(n))?(aD(lD(e[1]),jx(e[2]),jx(e[3]))|255)>>>0:(e=GX.exec(n))?(aD(lD(e[1]),jx(e[2]),jx(e[3]))|uD(e[4]))>>>0:null}function bT(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function aD(n,e,t){const i=t<.5?t*(1+e):t+e-t*e,r=2*t-i,s=bT(r,i,n+1/3),o=bT(r,i,n),a=bT(r,i,n-1/3);return Math.round(s*255)<<24|Math.round(o*255)<<16|Math.round(a*255)<<8}function Sm(n){const e=parseInt(n,10);return e<0?0:e>255?255:e}function lD(n){return(parseFloat(n)%360+360)%360/360}function uD(n){const e=parseFloat(n);return e<0?0:e>1?255:Math.round(e*255)}function jx(n){const e=parseFloat(n);return e<0?0:e>100?1:e/100}function cD(n){let e=JX(n);if(e===null)return n;e=e||0;const t=(e&4278190080)>>>24,i=(e&16711680)>>>16,r=(e&65280)>>>8,s=(e&255)/255;return`rgba(${t}, ${i}, ${r}, ${s})`}var cy=(n,e,t)=>{if(At.fun(n))return n;if(At.arr(n))return cy({range:n,output:e,extrapolate:t});if(At.str(n.output[0]))return Rb(n);const i=n,r=i.output,s=i.range||[0,1],o=i.extrapolateLeft||i.extrapolate||"extend",a=i.extrapolateRight||i.extrapolate||"extend",l=i.easing||(u=>u);return u=>{const d=YX(u,s);return XX(u,s[d],s[d+1],r[d],r[d+1],l,o,a,i.map)}};function XX(n,e,t,i,r,s,o,a,l){let u=l?l(n):n;if(u<e){if(o==="identity")return u;o==="clamp"&&(u=e)}if(u>t){if(a==="identity")return u;a==="clamp"&&(u=t)}return i===r?i:e===t?n<=e?i:r:(e===-1/0?u=-u:t===1/0?u=u-e:u=(u-e)/(t-e),u=s(u),i===-1/0?u=-u:r===1/0?u=u+i:u=u*(r-i)+i,u)}function YX(n,e){for(var t=1;t<e.length-1&&!(e[t]>=n);++t);return t-1}var KX={linear:n=>n},dy=Symbol.for("FluidValue.get"),vg=Symbol.for("FluidValue.observers"),Hl=n=>!!(n&&n[dy]),Aa=n=>n&&n[dy]?n[dy]():n,dD=n=>n[vg]||null;function QX(n,e){n.eventObserved?n.eventObserved(e):n(e)}function iA(n,e){const t=n[vg];t&&t.forEach(i=>{QX(i,e)})}var ZX=class{constructor(n){if(!n&&!(n=this.get))throw Error("Unknown getter");$X(this,n)}},$X=(n,e)=>$3(n,dy,e);function Ky(n,e){if(n[dy]){let t=n[vg];t||$3(n,vg,t=new Set),t.has(e)||(t.add(e),n.observerAdded&&n.observerAdded(t.size,e))}return e}function rA(n,e){const t=n[vg];if(t&&t.has(e)){const i=t.size-1;i?t.delete(e):n[vg]=null,n.observerRemoved&&n.observerRemoved(i,e)}}var $3=(n,e,t)=>Object.defineProperty(n,e,{value:t,writable:!0,configurable:!0}),Dw=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,jX=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,fD=new RegExp(`(${Dw.source})(%|[a-z]+)`,"i"),eY=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,SS=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,j3=n=>{const[e,t]=tY(n);if(!e||bb())return n;const i=window.getComputedStyle(document.documentElement).getPropertyValue(e);if(i)return i.trim();if(t&&t.startsWith("--")){const r=window.getComputedStyle(document.documentElement).getPropertyValue(t);return r||n}else{if(t&&SS.test(t))return j3(t);if(t)return t}return n},tY=n=>{const e=SS.exec(n);if(!e)return[,];const[,t,i]=e;return[t,i]},RT,nY=(n,e,t,i,r)=>`rgba(${Math.round(e)}, ${Math.round(t)}, ${Math.round(i)}, ${r})`,eU=n=>{RT||(RT=Td?new RegExp(`(${Object.keys(Td).join("|")})(?!\\w)`,"g"):/^\b$/);const e=n.output.map(s=>Aa(s).replace(SS,j3).replace(jX,cD).replace(RT,cD)),t=e.map(s=>s.match(Dw).map(Number)),r=t[0].map((s,o)=>t.map(a=>{if(!(o in a))throw Error('The arity of each "output" value must be equal');return a[o]})).map(s=>cy({...n,output:s}));return s=>{var l;const o=!fD.test(e[0])&&((l=e.find(u=>fD.test(u)))==null?void 0:l.replace(Dw,""));let a=0;return e[0].replace(Dw,()=>`${r[a++](s)}${o||""}`).replace(eY,nY)}},Ib="react-spring: ",tU=n=>{const e=n;let t=!1;if(typeof e!="function")throw new TypeError(`${Ib}once requires a function parameter`);return(...i)=>{t||(e(...i),t=!0)}},iY=tU(console.warn);function rY(){iY(`${Ib}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var sY=tU(console.warn);function oY(){sY(`${Ib}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function ES(n){return At.str(n)&&(n[0]=="#"||/\d/.test(n)||!bb()&&SS.test(n)||n in(Td||{}))}var Db=bb()?ie.useEffect:ie.useLayoutEffect,aY=()=>{const n=ie.useRef(!1);return Db(()=>(n.current=!0,()=>{n.current=!1}),[]),n};function nU(){const n=ie.useState()[1],e=aY();return()=>{e.current&&n(Math.random())}}function lY(n,e){const[t]=ie.useState(()=>({inputs:e,result:n()})),i=ie.useRef(),r=i.current;let s=r;return s?e&&s.inputs&&uY(e,s.inputs)||(s={inputs:e,result:n()}):s=t,ie.useEffect(()=>{i.current=s,r==t&&(t.inputs=t.result=void 0)},[s]),s.result}function uY(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}var iU=n=>ie.useEffect(n,cY),cY=[];function hD(n){const e=ie.useRef();return ie.useEffect(()=>{e.current=n}),e.current}var fy=Symbol.for("Animated:node"),dY=n=>!!n&&n[fy]===n,kl=n=>n&&n[fy],Lb=(n,e)=>LX(n,fy,e),TS=n=>n&&n[fy]&&n[fy].getPayload(),rU=class{constructor(){Lb(this,this)}getPayload(){return this.payload||[]}},Qy=class extends rU{constructor(n){super(),this._value=n,this.done=!0,this.durationProgress=0,At.num(this._value)&&(this.lastPosition=this._value)}static create(n){return new Qy(n)}getPayload(){return[this]}getValue(){return this._value}setValue(n,e){return At.num(n)&&(this.lastPosition=n,e&&(n=Math.round(n/e)*e,this.done&&(this.lastPosition=n))),this._value===n?!1:(this._value=n,!0)}reset(){const{done:n}=this;this.done=!1,At.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,n&&(this.lastVelocity=null),this.v0=null)}},hy=class extends Qy{constructor(n){super(0),this._string=null,this._toString=cy({output:[n,n]})}static create(n){return new hy(n)}getValue(){const n=this._string;return n??(this._string=this._toString(this._value))}setValue(n){if(At.str(n)){if(n==this._string)return!1;this._string=n,this._value=1}else if(super.setValue(n))this._string=null;else return!1;return!0}reset(n){n&&(this._toString=cy({output:[this.getValue(),n]})),this._value=0,super.reset()}},sA={dependencies:null},Bb=class extends rU{constructor(n){super(),this.source=n,this.setValue(n)}getValue(n){const e={};return sc(this.source,(t,i)=>{dY(t)?e[i]=t.getValue(n):Hl(t)?e[i]=Aa(t):n||(e[i]=t)}),e}setValue(n){this.source=n,this.payload=this._makePayload(n)}reset(){this.payload&&ai(this.payload,n=>n.reset())}_makePayload(n){if(n){const e=new Set;return sc(n,this._addToPayload,e),Array.from(e)}}_addToPayload(n){sA.dependencies&&Hl(n)&&sA.dependencies.add(n);const e=TS(n);e&&ai(e,t=>this.add(t))}},sU=class extends Bb{constructor(n){super(n)}static create(n){return new sU(n)}getValue(){return this.source.map(n=>n.getValue())}setValue(n){const e=this.getPayload();return n.length==e.length?e.map((t,i)=>t.setValue(n[i])).some(Boolean):(super.setValue(n.map(fY)),!0)}};function fY(n){return(ES(n)?hy:Qy).create(n)}function hM(n){const e=kl(n);return e?e.constructor:At.arr(n)?sU:ES(n)?hy:Qy}var pD=(n,e)=>{const t=!At.fun(n)||n.prototype&&n.prototype.isReactComponent;return ie.forwardRef((i,r)=>{const s=ie.useRef(null),o=t&&ie.useCallback(_=>{s.current=mY(r,_)},[r]),[a,l]=pY(i,e),u=nU(),d=()=>{const _=s.current;if(t&&!_)return;(_?e.applyAnimatedValues(_,a.getValue(!0)):!1)===!1&&u()},h=new hY(d,l),p=ie.useRef();Db(()=>(p.current=h,ai(l,_=>Ky(_,h)),()=>{p.current&&(ai(p.current.deps,_=>rA(_,p.current)),wn.cancel(p.current.update))})),ie.useEffect(d,[]),iU(()=>()=>{const _=p.current;ai(_.deps,w=>rA(w,_))});const v=e.getComponentProps(a.getValue());return ie.createElement(n,{...v,ref:o})})},hY=class{constructor(n,e){this.update=n,this.deps=e}eventObserved(n){n.type=="change"&&wn.write(this.update)}};function pY(n,e){const t=new Set;return sA.dependencies=t,n.style&&(n={...n,style:e.createAnimatedStyle(n.style)}),n=new Bb(n),sA.dependencies=null,[n,t]}function mY(n,e){return n&&(At.fun(n)?n(e):n.current=e),e}var mD=Symbol.for("AnimatedComponent"),gY=(n,{applyAnimatedValues:e=()=>!1,createAnimatedStyle:t=r=>new Bb(r),getComponentProps:i=r=>r}={})=>{const r={applyAnimatedValues:e,createAnimatedStyle:t,getComponentProps:i},s=o=>{const a=gD(o)||"Anonymous";return At.str(o)?o=s[o]||(s[o]=pD(o,r)):o=o[mD]||(o[mD]=pD(o,r)),o.displayName=`Animated(${a})`,o};return sc(n,(o,a)=>{At.arr(n)&&(a=gD(o)),s[a]=s(o)}),{animated:s}},gD=n=>At.str(n)?n:n&&At.str(n.displayName)?n.displayName:At.fun(n)&&n.name||null;function ah(n,...e){return At.fun(n)?n(...e):n}var Cv=(n,e)=>n===!0||!!(e&&n&&(At.fun(n)?n(e):Ra(n).includes(e))),oU=(n,e)=>At.obj(n)?e&&n[e]:n,aU=(n,e)=>n.default===!0?n[e]:n.default?n.default[e]:void 0,vY=n=>n,Nb=(n,e=vY)=>{let t=yY;n.default&&n.default!==!0&&(n=n.default,t=Object.keys(n));const i={};for(const r of t){const s=e(n[r],r);At.und(s)||(i[r]=s)}return i},yY=["config","onProps","onStart","onChange","onPause","onResume","onRest"],_Y={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function xY(n){const e={};let t=0;if(sc(n,(i,r)=>{_Y[r]||(e[r]=i,t++)}),t)return e}function lU(n){const e=xY(n);if(e){const t={to:e};return sc(n,(i,r)=>r in e||(t[r]=i)),t}return{...n}}function py(n){return n=Aa(n),At.arr(n)?n.map(py):ES(n)?vl.createStringInterpolator({range:[0,1],output:[n,n]})(1):n}function wY(n){for(const e in n)return!0;return!1}function pM(n){return At.fun(n)||At.arr(n)&&At.obj(n[0])}function AY(n,e){var t;(t=n.ref)==null||t.delete(n),e==null||e.delete(n)}function SY(n,e){var t;e&&n.ref!==e&&((t=n.ref)==null||t.delete(n),e.add(n),n.ref=e)}var EY={default:{tension:170,friction:26}},mM={...EY.default,mass:1,damping:1,easing:KX.linear,clamp:!1},TY=class{constructor(){this.velocity=0,Object.assign(this,mM)}};function MY(n,e,t){t&&(t={...t},vD(t,e),e={...t,...e}),vD(n,e),Object.assign(n,e);for(const o in mM)n[o]==null&&(n[o]=mM[o]);let{frequency:i,damping:r}=n;const{mass:s}=n;return At.und(i)||(i<.01&&(i=.01),r<0&&(r=0),n.tension=Math.pow(2*Math.PI/i,2)*s,n.friction=4*Math.PI*r*s/i),n}function vD(n,e){if(!At.und(e.decay))n.duration=void 0;else{const t=!At.und(e.tension)||!At.und(e.friction);(t||!At.und(e.frequency)||!At.und(e.damping)||!At.und(e.mass))&&(n.duration=void 0,n.decay=void 0),t&&(n.frequency=void 0)}}var yD=[],CY=class{constructor(){this.changed=!1,this.values=yD,this.toValues=null,this.fromValues=yD,this.config=new TY,this.immediate=!1}};function uU(n,{key:e,props:t,defaultProps:i,state:r,actions:s}){return new Promise((o,a)=>{let l,u,d=Cv(t.cancel??(i==null?void 0:i.cancel),e);if(d)v();else{At.und(t.pause)||(r.paused=Cv(t.pause,e));let _=i==null?void 0:i.pause;_!==!0&&(_=r.paused||Cv(_,e)),l=ah(t.delay||0,e),_?(r.resumeQueue.add(p),s.pause()):(s.resume(),p())}function h(){r.resumeQueue.add(p),r.timeouts.delete(u),u.cancel(),l=u.time-wn.now()}function p(){l>0&&!vl.skipAnimation?(r.delayed=!0,u=wn.setTimeout(v,l),r.pauseQueue.add(h),r.timeouts.add(u)):v()}function v(){r.delayed&&(r.delayed=!1),r.pauseQueue.delete(h),r.timeouts.delete(u),n<=(r.cancelId||0)&&(d=!0);try{s.start({...t,callId:n,cancel:d},o)}catch(_){a(_)}}})}var kb=(n,e)=>e.length==1?e[0]:e.some(t=>t.cancelled)?Ym(n.get()):e.every(t=>t.noop)?cU(n.get()):hl(n.get(),e.every(t=>t.finished)),cU=n=>({value:n,noop:!0,finished:!0,cancelled:!1}),hl=(n,e,t=!1)=>({value:n,finished:e,cancelled:t}),Ym=n=>({value:n,cancelled:!0,finished:!1});function dU(n,e,t,i){const{callId:r,parentId:s,onRest:o}=e,{asyncTo:a,promise:l}=t;return!s&&n===a&&!e.reset?l:t.promise=(async()=>{t.asyncId=r,t.asyncTo=n;const u=Nb(e,(S,A)=>A==="onRest"?void 0:S);let d,h;const p=new Promise((S,A)=>(d=S,h=A)),v=S=>{const A=r<=(t.cancelId||0)&&Ym(i)||r!==t.asyncId&&hl(i,!1);if(A)throw S.result=A,h(S),S},_=(S,A)=>{const b=new _D,C=new xD;return(async()=>{if(vl.skipAnimation)throw my(t),C.result=hl(i,!1),h(C),C;v(b);const P=At.obj(S)?{...S}:{...A,to:S};P.parentId=r,sc(u,(L,N)=>{At.und(P[N])&&(P[N]=L)});const k=await i.start(P);return v(b),t.paused&&await new Promise(L=>{t.resumeQueue.add(L)}),k})()};let w;if(vl.skipAnimation)return my(t),hl(i,!1);try{let S;At.arr(n)?S=(async A=>{for(const b of A)await _(b)})(n):S=Promise.resolve(n(_,i.stop.bind(i))),await Promise.all([S.then(d),p]),w=hl(i.get(),!0,!1)}catch(S){if(S instanceof _D)w=S.result;else if(S instanceof xD)w=S.result;else throw S}finally{r==t.asyncId&&(t.asyncId=s,t.asyncTo=s?a:void 0,t.promise=s?l:void 0)}return At.fun(o)&&wn.batchedUpdates(()=>{o(w,i,i.item)}),w})()}function my(n,e){Tv(n.timeouts,t=>t.cancel()),n.pauseQueue.clear(),n.resumeQueue.clear(),n.asyncId=n.asyncTo=n.promise=void 0,e&&(n.cancelId=e)}var _D=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},xD=class extends Error{constructor(){super("SkipAnimationSignal")}},gM=n=>n instanceof Fb,bY=1,Fb=class extends ZX{constructor(){super(...arguments),this.id=bY++,this._priority=0}get priority(){return this._priority}set priority(n){this._priority!=n&&(this._priority=n,this._onPriorityChange(n))}get(){const n=kl(this);return n&&n.getValue()}to(...n){return vl.to(this,n)}interpolate(...n){return rY(),vl.to(this,n)}toJSON(){return this.get()}observerAdded(n){n==1&&this._attach()}observerRemoved(n){n==0&&this._detach()}_attach(){}_detach(){}_onChange(n,e=!1){iA(this,{type:"change",parent:this,value:n,idle:e})}_onPriorityChange(n){this.idle||wS.sort(this),iA(this,{type:"priority",parent:this,priority:n})}},Oh=Symbol.for("SpringPhase"),fU=1,vM=2,yM=4,PT=n=>(n[Oh]&fU)>0,jc=n=>(n[Oh]&vM)>0,Q0=n=>(n[Oh]&yM)>0,wD=(n,e)=>e?n[Oh]|=vM|fU:n[Oh]&=~vM,AD=(n,e)=>e?n[Oh]|=yM:n[Oh]&=~yM,RY=class extends Fb{constructor(n,e){if(super(),this.animation=new CY,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!At.und(n)||!At.und(e)){const t=At.obj(n)?{...n}:{...e,from:n};At.und(t.default)&&(t.default=!0),this.start(t)}}get idle(){return!(jc(this)||this._state.asyncTo)||Q0(this)}get goal(){return Aa(this.animation.to)}get velocity(){const n=kl(this);return n instanceof Qy?n.lastVelocity||0:n.getPayload().map(e=>e.lastVelocity||0)}get hasAnimated(){return PT(this)}get isAnimating(){return jc(this)}get isPaused(){return Q0(this)}get isDelayed(){return this._state.delayed}advance(n){let e=!0,t=!1;const i=this.animation;let{toValues:r}=i;const{config:s}=i,o=TS(i.to);!o&&Hl(i.to)&&(r=Ra(Aa(i.to))),i.values.forEach((u,d)=>{if(u.done)return;const h=u.constructor==hy?1:o?o[d].lastPosition:r[d];let p=i.immediate,v=h;if(!p){if(v=u.lastPosition,s.tension<=0){u.done=!0;return}let _=u.elapsedTime+=n;const w=i.fromValues[d],S=u.v0!=null?u.v0:u.v0=At.arr(s.velocity)?s.velocity[d]:s.velocity;let A;const b=s.precision||(w==h?.005:Math.min(1,Math.abs(h-w)*.001));if(At.und(s.duration))if(s.decay){const C=s.decay===!0?.998:s.decay,P=Math.exp(-(1-C)*_);v=w+S/(1-C)*(1-P),p=Math.abs(u.lastPosition-v)<=b,A=S*P}else{A=u.lastVelocity==null?S:u.lastVelocity;const C=s.restVelocity||b/10,P=s.clamp?0:s.bounce,k=!At.und(P),L=w==h?u.v0>0:w<h;let N,O=!1;const D=1,U=Math.ceil(n/D);for(let X=0;X<U&&(N=Math.abs(A)>C,!(!N&&(p=Math.abs(h-v)<=b,p)));++X){k&&(O=v==h||v>h==L,O&&(A=-A*P,v=h));const Z=-s.tension*1e-6*(v-h),he=-s.friction*.001*A,Q=(Z+he)/s.mass;A=A+Q*D,v=v+A*D}}else{let C=1;s.duration>0&&(this._memoizedDuration!==s.duration&&(this._memoizedDuration=s.duration,u.durationProgress>0&&(u.elapsedTime=s.duration*u.durationProgress,_=u.elapsedTime+=n)),C=(s.progress||0)+_/this._memoizedDuration,C=C>1?1:C<0?0:C,u.durationProgress=C),v=w+s.easing(C)*(h-w),A=(v-u.lastPosition)/n,p=C==1}u.lastVelocity=A,Number.isNaN(v)&&(console.warn("Got NaN while animating:",this),p=!0)}o&&!o[d].done&&(p=!1),p?u.done=!0:e=!1,u.setValue(v,s.round)&&(t=!0)});const a=kl(this),l=a.getValue();if(e){const u=Aa(i.to);(l!==u||t)&&!s.decay?(a.setValue(u),this._onChange(u)):t&&s.decay&&this._onChange(l),this._stop()}else t&&this._onChange(l)}set(n){return wn.batchedUpdates(()=>{this._stop(),this._focus(n),this._set(n)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(jc(this)){const{to:n,config:e}=this.animation;wn.batchedUpdates(()=>{this._onStart(),e.decay||this._set(n,!1),this._stop()})}return this}update(n){return(this.queue||(this.queue=[])).push(n),this}start(n,e){let t;return At.und(n)?(t=this.queue||[],this.queue=[]):t=[At.obj(n)?n:{...e,to:n}],Promise.all(t.map(i=>this._update(i))).then(i=>kb(this,i))}stop(n){const{to:e}=this.animation;return this._focus(this.get()),my(this._state,n&&this._lastCallId),wn.batchedUpdates(()=>this._stop(e,n)),this}reset(){this._update({reset:!0})}eventObserved(n){n.type=="change"?this._start():n.type=="priority"&&(this.priority=n.priority+1)}_prepareNode(n){const e=this.key||"";let{to:t,from:i}=n;t=At.obj(t)?t[e]:t,(t==null||pM(t))&&(t=void 0),i=At.obj(i)?i[e]:i,i==null&&(i=void 0);const r={to:t,from:i};return PT(this)||(n.reverse&&([t,i]=[i,t]),i=Aa(i),At.und(i)?kl(this)||this._set(t):this._set(i)),r}_update({...n},e){const{key:t,defaultProps:i}=this;n.default&&Object.assign(i,Nb(n,(o,a)=>/^on/.test(a)?oU(o,t):o)),ED(this,n,"onProps"),$0(this,"onProps",n,this);const r=this._prepareNode(n);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const s=this._state;return uU(++this._lastCallId,{key:t,props:n,defaultProps:i,state:s,actions:{pause:()=>{Q0(this)||(AD(this,!0),fv(s.pauseQueue),$0(this,"onPause",hl(this,Z0(this,this.animation.to)),this))},resume:()=>{Q0(this)&&(AD(this,!1),jc(this)&&this._resume(),fv(s.resumeQueue),$0(this,"onResume",hl(this,Z0(this,this.animation.to)),this))},start:this._merge.bind(this,r)}}).then(o=>{if(n.loop&&o.finished&&!(e&&o.noop)){const a=hU(n);if(a)return this._update(a,!0)}return o})}_merge(n,e,t){if(e.cancel)return this.stop(!0),t(Ym(this));const i=!At.und(n.to),r=!At.und(n.from);if(i||r)if(e.callId>this._lastToId)this._lastToId=e.callId;else return t(Ym(this));const{key:s,defaultProps:o,animation:a}=this,{to:l,from:u}=a;let{to:d=l,from:h=u}=n;r&&!i&&(!e.default||At.und(d))&&(d=h),e.reverse&&([d,h]=[h,d]);const p=!Gu(h,u);p&&(a.from=h),h=Aa(h);const v=!Gu(d,l);v&&this._focus(d);const _=pM(e.to),{config:w}=a,{decay:S,velocity:A}=w;(i||r)&&(w.velocity=0),e.config&&!_&&MY(w,ah(e.config,s),e.config!==o.config?ah(o.config,s):void 0);let b=kl(this);if(!b||At.und(d))return t(hl(this,!0));const C=At.und(e.reset)?r&&!e.default:!At.und(h)&&Cv(e.reset,s),P=C?h:this.get(),k=py(d),L=At.num(k)||At.arr(k)||ES(k),N=!_&&(!L||Cv(o.immediate||e.immediate,s));if(v){const X=hM(d);if(X!==b.constructor)if(N)b=this._set(k);else throw Error(`Cannot animate between ${b.constructor.name} and ${X.name}, as the "to" prop suggests`)}const O=b.constructor;let D=Hl(d),U=!1;if(!D){const X=C||!PT(this)&&p;(v||X)&&(U=Gu(py(P),k),D=!U),(!Gu(a.immediate,N)&&!N||!Gu(w.decay,S)||!Gu(w.velocity,A))&&(D=!0)}if(U&&jc(this)&&(a.changed&&!C?D=!0:D||this._stop(l)),!_&&((D||Hl(l))&&(a.values=b.getPayload(),a.toValues=Hl(d)?null:O==hy?[1]:Ra(k)),a.immediate!=N&&(a.immediate=N,!N&&!C&&this._set(l)),D)){const{onRest:X}=a;ai(IY,he=>ED(this,e,he));const Z=hl(this,Z0(this,l));fv(this._pendingCalls,Z),this._pendingCalls.add(t),a.changed&&wn.batchedUpdates(()=>{var he;a.changed=!C,X==null||X(Z,this),C?ah(o.onRest,Z):(he=a.onStart)==null||he.call(a,Z,this)})}C&&this._set(P),_?t(dU(e.to,e,this._state,this)):D?this._start():jc(this)&&!v?this._pendingCalls.add(t):t(cU(P))}_focus(n){const e=this.animation;n!==e.to&&(dD(this)&&this._detach(),e.to=n,dD(this)&&this._attach())}_attach(){let n=0;const{to:e}=this.animation;Hl(e)&&(Ky(e,this),gM(e)&&(n=e.priority+1)),this.priority=n}_detach(){const{to:n}=this.animation;Hl(n)&&rA(n,this)}_set(n,e=!0){const t=Aa(n);if(!At.und(t)){const i=kl(this);if(!i||!Gu(t,i.getValue())){const r=hM(t);!i||i.constructor!=r?Lb(this,r.create(t)):i.setValue(t),i&&wn.batchedUpdates(()=>{this._onChange(t,e)})}}return kl(this)}_onStart(){const n=this.animation;n.changed||(n.changed=!0,$0(this,"onStart",hl(this,Z0(this,n.to)),this))}_onChange(n,e){e||(this._onStart(),ah(this.animation.onChange,n,this)),ah(this.defaultProps.onChange,n,this),super._onChange(n,e)}_start(){const n=this.animation;kl(this).reset(Aa(n.to)),n.immediate||(n.fromValues=n.values.map(e=>e.lastPosition)),jc(this)||(wD(this,!0),Q0(this)||this._resume())}_resume(){vl.skipAnimation?this.finish():wS.start(this)}_stop(n,e){if(jc(this)){wD(this,!1);const t=this.animation;ai(t.values,r=>{r.done=!0}),t.toValues&&(t.onChange=t.onPause=t.onResume=void 0),iA(this,{type:"idle",parent:this});const i=e?Ym(this.get()):hl(this.get(),Z0(this,n??t.to));fv(this._pendingCalls,i),t.changed&&(t.changed=!1,$0(this,"onRest",i,this))}}};function Z0(n,e){const t=py(e),i=py(n.get());return Gu(i,t)}function hU(n,e=n.loop,t=n.to){const i=ah(e);if(i){const r=i!==!0&&lU(i),s=(r||n).reverse,o=!r||r.reset;return gy({...n,loop:e,default:!1,pause:void 0,to:!s||pM(t)?t:void 0,from:o?n.from:void 0,reset:o,...r})}}function gy(n){const{to:e,from:t}=n=lU(n),i=new Set;return At.obj(e)&&SD(e,i),At.obj(t)&&SD(t,i),n.keys=i.size?Array.from(i):null,n}function PY(n){const e=gy(n);return At.und(e.default)&&(e.default=Nb(e)),e}function SD(n,e){sc(n,(t,i)=>t!=null&&e.add(i))}var IY=["onStart","onRest","onChange","onPause","onResume"];function ED(n,e,t){n.animation[t]=e[t]!==aU(e,t)?oU(e[t],n.key):void 0}function $0(n,e,...t){var i,r,s,o;(r=(i=n.animation)[e])==null||r.call(i,...t),(o=(s=n.defaultProps)[e])==null||o.call(s,...t)}var DY=["onStart","onChange","onRest"],LY=1,BY=class{constructor(n,e){this.id=LY++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),e&&(this._flush=e),n&&this.start({default:!0,...n})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(n=>n.idle&&!n.isDelayed&&!n.isPaused)}get item(){return this._item}set item(n){this._item=n}get(){const n={};return this.each((e,t)=>n[t]=e.get()),n}set(n){for(const e in n){const t=n[e];At.und(t)||this.springs[e].set(t)}}update(n){return n&&this.queue.push(gy(n)),this}start(n){let{queue:e}=this;return n?e=Ra(n).map(gy):this.queue=[],this._flush?this._flush(this,e):(yU(this,e),_M(this,e))}stop(n,e){if(n!==!!n&&(e=n),e){const t=this.springs;ai(Ra(e),i=>t[i].stop(!!n))}else my(this._state,this._lastAsyncId),this.each(t=>t.stop(!!n));return this}pause(n){if(At.und(n))this.start({pause:!0});else{const e=this.springs;ai(Ra(n),t=>e[t].pause())}return this}resume(n){if(At.und(n))this.start({pause:!1});else{const e=this.springs;ai(Ra(n),t=>e[t].resume())}return this}each(n){sc(this.springs,n)}_onFrame(){const{onStart:n,onChange:e,onRest:t}=this._events,i=this._active.size>0,r=this._changed.size>0;(i&&!this._started||r&&!this._started)&&(this._started=!0,Tv(n,([a,l])=>{l.value=this.get(),a(l,this,this._item)}));const s=!i&&this._started,o=r||s&&t.size?this.get():null;r&&e.size&&Tv(e,([a,l])=>{l.value=o,a(l,this,this._item)}),s&&(this._started=!1,Tv(t,([a,l])=>{l.value=o,a(l,this,this._item)}))}eventObserved(n){if(n.type=="change")this._changed.add(n.parent),n.idle||this._active.add(n.parent);else if(n.type=="idle")this._active.delete(n.parent);else return;wn.onFrame(this._onFrame)}};function _M(n,e){return Promise.all(e.map(t=>pU(n,t))).then(t=>kb(n,t))}async function pU(n,e,t){const{keys:i,to:r,from:s,loop:o,onRest:a,onResolve:l}=e,u=At.obj(e.default)&&e.default;o&&(e.loop=!1),r===!1&&(e.to=null),s===!1&&(e.from=null);const d=At.arr(r)||At.fun(r)?r:void 0;d?(e.to=void 0,e.onRest=void 0,u&&(u.onRest=void 0)):ai(DY,w=>{const S=e[w];if(At.fun(S)){const A=n._events[w];e[w]=({finished:b,cancelled:C})=>{const P=A.get(S);P?(b||(P.finished=!1),C&&(P.cancelled=!0)):A.set(S,{value:null,finished:b||!1,cancelled:C||!1})},u&&(u[w]=e[w])}});const h=n._state;e.pause===!h.paused?(h.paused=e.pause,fv(e.pause?h.pauseQueue:h.resumeQueue)):h.paused&&(e.pause=!0);const p=(i||Object.keys(n.springs)).map(w=>n.springs[w].start(e)),v=e.cancel===!0||aU(e,"cancel")===!0;(d||v&&h.asyncId)&&p.push(uU(++n._lastAsyncId,{props:e,state:h,actions:{pause:dM,resume:dM,start(w,S){v?(my(h,n._lastAsyncId),S(Ym(n))):(w.onRest=a,S(dU(d,w,h,n)))}}})),h.paused&&await new Promise(w=>{h.resumeQueue.add(w)});const _=kb(n,await Promise.all(p));if(o&&_.finished&&!(t&&_.noop)){const w=hU(e,o,r);if(w)return yU(n,[w]),pU(n,w,!0)}return l&&wn.batchedUpdates(()=>l(_,n,n.item)),_}function TD(n,e){const t={...n.springs};return e&&ai(Ra(e),i=>{At.und(i.keys)&&(i=gy(i)),At.obj(i.to)||(i={...i,to:void 0}),vU(t,i,r=>gU(r))}),mU(n,t),t}function mU(n,e){sc(e,(t,i)=>{n.springs[i]||(n.springs[i]=t,Ky(t,n))})}function gU(n,e){const t=new RY;return t.key=n,e&&Ky(t,e),t}function vU(n,e,t){e.keys&&ai(e.keys,i=>{(n[i]||(n[i]=t(i)))._prepareNode(e)})}function yU(n,e){ai(e,t=>{vU(n.springs,t,i=>gU(i,n))})}var MS=({children:n,...e})=>{const t=ie.useContext(oA),i=e.pause||!!t.pause,r=e.immediate||!!t.immediate;e=lY(()=>({pause:i,immediate:r}),[i,r]);const{Provider:s}=oA;return ie.createElement(s,{value:e},n)},oA=NY(MS,{});MS.Provider=oA.Provider;MS.Consumer=oA.Consumer;function NY(n,e){return Object.assign(n,ie.createContext(e)),n.Provider._context=n,n.Consumer._context=n,n}var kY=()=>{const n=[],e=function(i){oY();const r=[];return ai(n,(s,o)=>{if(At.und(i))r.push(s.start());else{const a=t(i,s,o);a&&r.push(s.start(a))}}),r};e.current=n,e.add=function(i){n.includes(i)||n.push(i)},e.delete=function(i){const r=n.indexOf(i);~r&&n.splice(r,1)},e.pause=function(){return ai(n,i=>i.pause(...arguments)),this},e.resume=function(){return ai(n,i=>i.resume(...arguments)),this},e.set=function(i){ai(n,(r,s)=>{const o=At.fun(i)?i(s,r):i;o&&r.set(o)})},e.start=function(i){const r=[];return ai(n,(s,o)=>{if(At.und(i))r.push(s.start());else{const a=this._getProps(i,s,o);a&&r.push(s.start(a))}}),r},e.stop=function(){return ai(n,i=>i.stop(...arguments)),this},e.update=function(i){return ai(n,(r,s)=>r.update(this._getProps(i,r,s))),this};const t=function(i,r,s){return At.fun(i)?i(s,r):i};return e._getProps=t,e};function FY(n,e,t){const i=At.fun(e)&&e;i&&!t&&(t=[]);const r=ie.useMemo(()=>i||arguments.length==3?kY():void 0,[]),s=ie.useRef(0),o=nU(),a=ie.useMemo(()=>({ctrls:[],queue:[],flush(A,b){const C=TD(A,b);return s.current>0&&!a.queue.length&&!Object.keys(C).some(k=>!A.springs[k])?_M(A,b):new Promise(k=>{mU(A,C),a.queue.push(()=>{k(_M(A,b))}),o()})}}),[]),l=ie.useRef([...a.ctrls]),u=[],d=hD(n)||0;ie.useMemo(()=>{ai(l.current.slice(n,d),A=>{AY(A,r),A.stop(!0)}),l.current.length=n,h(d,n)},[n]),ie.useMemo(()=>{h(0,Math.min(d,n))},t);function h(A,b){for(let C=A;C<b;C++){const P=l.current[C]||(l.current[C]=new BY(null,a.flush)),k=i?i(C,P):e[C];k&&(u[C]=PY(k))}}const p=l.current.map((A,b)=>TD(A,u[b])),v=ie.useContext(MS),_=hD(v),w=v!==_&&wY(v);Db(()=>{s.current++,a.ctrls=l.current;const{queue:A}=a;A.length&&(a.queue=[],ai(A,b=>b())),ai(l.current,(b,C)=>{r==null||r.add(b),w&&b.start({default:v});const P=u[C];P&&(SY(b,P.ref),b.ref?b.queue.push(P):b.start(P))})}),iU(()=>()=>{ai(a.ctrls,A=>A.stop(!0))});const S=p.map(A=>({...A}));return r?[S,r]:S}function UY(n,e){const t=At.fun(n),[[i],r]=FY(1,t?n:[n],t?[]:e);return t||arguments.length==2?[i,r]:i}var OY=class extends Fb{constructor(n,e){super(),this.source=n,this.idle=!0,this._active=new Set,this.calc=cy(...e);const t=this._get(),i=hM(t);Lb(this,i.create(t))}advance(n){const e=this._get(),t=this.get();Gu(e,t)||(kl(this).setValue(e),this._onChange(e,this.idle)),!this.idle&&MD(this._active)&&IT(this)}_get(){const n=At.arr(this.source)?this.source.map(Aa):Ra(Aa(this.source));return this.calc(...n)}_start(){this.idle&&!MD(this._active)&&(this.idle=!1,ai(TS(this),n=>{n.done=!1}),vl.skipAnimation?(wn.batchedUpdates(()=>this.advance()),IT(this)):wS.start(this))}_attach(){let n=1;ai(Ra(this.source),e=>{Hl(e)&&Ky(e,this),gM(e)&&(e.idle||this._active.add(e),n=Math.max(n,e.priority+1))}),this.priority=n,this._start()}_detach(){ai(Ra(this.source),n=>{Hl(n)&&rA(n,this)}),this._active.clear(),IT(this)}eventObserved(n){n.type=="change"?n.idle?this.advance():(this._active.add(n.parent),this._start()):n.type=="idle"?this._active.delete(n.parent):n.type=="priority"&&(this.priority=Ra(this.source).reduce((e,t)=>Math.max(e,(gM(t)?t.priority:0)+1),0))}};function HY(n){return n.idle!==!1}function MD(n){return!n.size||Array.from(n).every(HY)}function IT(n){n.idle||(n.idle=!0,ai(TS(n),e=>{e.done=!0}),iA(n,{type:"idle",parent:n}))}vl.assign({createStringInterpolator:eU,to:(n,e)=>new OY(n,e)});var GY=["primitive"].concat(Object.keys(f3).filter(n=>/^[A-Z]/.test(n)).map(n=>n[0].toLowerCase()+n.slice(1)));vl.assign({createStringInterpolator:eU,colors:FX,frameLoop:"demand"});Xq(()=>{wn.advance()});var zY=gY(GY,{applyAnimatedValues:qu}),VY=zY.animated;function WY({enabled:n=!0,snap:e,global:t,domElement:i,cursor:r=!0,children:s,speed:o=1,rotation:a=[0,0,0],zoom:l=1,polar:u=[0,Math.PI/2],azimuth:d=[-1/0,1/0],config:h={mass:1,tension:170,friction:26}}){const p=Ar(L=>L.events),v=Ar(L=>L.gl),_=i||p.connected||v.domElement,{size:w}=Ar(),S=ie.useMemo(()=>[a[0]+u[0],a[0]+u[1]],[a[0],u[0],u[1]]),A=ie.useMemo(()=>[a[1]+d[0],a[1]+d[1]],[a[1],d[0],d[1]]),b=ie.useMemo(()=>[ad.clamp(a[0],...S),ad.clamp(a[1],...A),a[2]],[a[0],a[1],a[2],S,A]),[C,P]=UY(()=>({scale:1,rotation:b,config:h}));ie.useEffect(()=>void P.start({scale:1,rotation:b,config:h}),[b]),ie.useEffect(()=>{if(t&&r&&n)return _.style.cursor="grab",v.domElement.style.cursor="",()=>{_.style.cursor="default",v.domElement.style.cursor="default"}},[t,r,_,n]);const k=RX({onHover:({last:L})=>{r&&!t&&n&&(_.style.cursor=L?"auto":"grab")},onDrag:({down:L,delta:[N,O],memo:[D,U]=C.rotation.animation.to||b})=>{if(!n)return[O,N];r&&(_.style.cursor=L?"grabbing":"grab"),N=ad.clamp(U+N/w.width*Math.PI*o,...A),O=ad.clamp(D+O/w.height*Math.PI*o,...S);const X=e&&!L&&typeof e!="boolean"?e:h;return P.start({scale:L&&O>S[1]/2?l:1,rotation:e&&!L?b:[O,N,0],config:Z=>Z==="scale"?{...X,friction:X.friction*3}:X}),[O,N]}},{target:t?_:void 0});return ie.createElement(VY.group,Nd({},k==null?void 0:k(),C),s)}const Ub=parseInt(Rg.replace(/\D+/g,""));function CD(n,e){if(e===$k)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(e===Qw||e===LC){let t=n.getIndex();if(t===null){const o=[],a=n.getAttribute("position");if(a!==void 0){for(let l=0;l<a.count;l++)o.push(l);n.setIndex(o),t=n.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}const i=t.count-2,r=[];if(t)if(e===Qw)for(let o=1;o<=i;o++)r.push(t.getX(0)),r.push(t.getX(o)),r.push(t.getX(o+1));else for(let o=0;o<i;o++)o%2===0?(r.push(t.getX(o)),r.push(t.getX(o+1)),r.push(t.getX(o+2))):(r.push(t.getX(o+2)),r.push(t.getX(o+1)),r.push(t.getX(o)));r.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=n.clone();return s.setIndex(r),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),n}var ba=Uint8Array,cd=Uint16Array,xM=Uint32Array,_U=new ba([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),xU=new ba([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),qY=new ba([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),wU=function(n,e){for(var t=new cd(31),i=0;i<31;++i)t[i]=e+=1<<n[i-1];for(var r=new xM(t[30]),i=1;i<30;++i)for(var s=t[i];s<t[i+1];++s)r[s]=s-t[i]<<5|i;return[t,r]},AU=wU(_U,2),SU=AU[0],JY=AU[1];SU[28]=258,JY[258]=28;var XY=wU(xU,0),YY=XY[0],wM=new cd(32768);for(var Ni=0;Ni<32768;++Ni){var ed=(Ni&43690)>>>1|(Ni&21845)<<1;ed=(ed&52428)>>>2|(ed&13107)<<2,ed=(ed&61680)>>>4|(ed&3855)<<4,wM[Ni]=((ed&65280)>>>8|(ed&255)<<8)>>>1}var bv=(function(n,e,t){for(var i=n.length,r=0,s=new cd(e);r<i;++r)++s[n[r]-1];var o=new cd(e);for(r=0;r<e;++r)o[r]=o[r-1]+s[r-1]<<1;var a;if(t){a=new cd(1<<e);var l=15-e;for(r=0;r<i;++r)if(n[r])for(var u=r<<4|n[r],d=e-n[r],h=o[n[r]-1]++<<d,p=h|(1<<d)-1;h<=p;++h)a[wM[h]>>>l]=u}else for(a=new cd(i),r=0;r<i;++r)n[r]&&(a[r]=wM[o[n[r]-1]++]>>>15-n[r]);return a}),Zy=new ba(288);for(var Ni=0;Ni<144;++Ni)Zy[Ni]=8;for(var Ni=144;Ni<256;++Ni)Zy[Ni]=9;for(var Ni=256;Ni<280;++Ni)Zy[Ni]=7;for(var Ni=280;Ni<288;++Ni)Zy[Ni]=8;var EU=new ba(32);for(var Ni=0;Ni<32;++Ni)EU[Ni]=5;var KY=bv(Zy,9,1),QY=bv(EU,5,1),DT=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},ul=function(n,e,t){var i=e/8|0;return(n[i]|n[i+1]<<8)>>(e&7)&t},LT=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},ZY=function(n){return(n/8|0)+(n&7&&1)},$Y=function(n,e,t){(t==null||t>n.length)&&(t=n.length);var i=new(n instanceof cd?cd:n instanceof xM?xM:ba)(t-e);return i.set(n.subarray(e,t)),i},jY=function(n,e,t){var i=n.length;if(!i||t&&!t.l&&i<5)return e||new ba(0);var r=!e||t,s=!t||t.i;t||(t={}),e||(e=new ba(i*3));var o=function(Ie){var ze=e.length;if(Ie>ze){var je=new ba(Math.max(ze*2,Ie));je.set(e),e=je}},a=t.f||0,l=t.p||0,u=t.b||0,d=t.l,h=t.d,p=t.m,v=t.n,_=i*8;do{if(!d){t.f=a=ul(n,l,1);var w=ul(n,l+1,3);if(l+=3,w)if(w==1)d=KY,h=QY,p=9,v=5;else if(w==2){var C=ul(n,l,31)+257,P=ul(n,l+10,15)+4,k=C+ul(n,l+5,31)+1;l+=14;for(var L=new ba(k),N=new ba(19),O=0;O<P;++O)N[qY[O]]=ul(n,l+O*3,7);l+=P*3;for(var D=DT(N),U=(1<<D)-1,X=bv(N,D,1),O=0;O<k;){var Z=X[ul(n,l,U)];l+=Z&15;var S=Z>>>4;if(S<16)L[O++]=S;else{var he=0,Q=0;for(S==16?(Q=3+ul(n,l,3),l+=2,he=L[O-1]):S==17?(Q=3+ul(n,l,7),l+=3):S==18&&(Q=11+ul(n,l,127),l+=7);Q--;)L[O++]=he}}var ue=L.subarray(0,C),re=L.subarray(C);p=DT(ue),v=DT(re),d=bv(ue,p,1),h=bv(re,v,1)}else throw"invalid block type";else{var S=ZY(l)+4,A=n[S-4]|n[S-3]<<8,b=S+A;if(b>i){if(s)throw"unexpected EOF";break}r&&o(u+A),e.set(n.subarray(S,b),u),t.b=u+=A,t.p=l=b*8;continue}if(l>_){if(s)throw"unexpected EOF";break}}r&&o(u+131072);for(var ye=(1<<p)-1,$=(1<<v)-1,oe=l;;oe=l){var he=d[LT(n,l)&ye],W=he>>>4;if(l+=he&15,l>_){if(s)throw"unexpected EOF";break}if(!he)throw"invalid length/literal";if(W<256)e[u++]=W;else if(W==256){oe=l,d=null;break}else{var J=W-254;if(W>264){var O=W-257,se=_U[O];J=ul(n,l,(1<<se)-1)+SU[O],l+=se}var me=h[LT(n,l)&$],Se=me>>>4;if(!me)throw"invalid distance";l+=me&15;var re=YY[Se];if(Se>3){var se=xU[Se];re+=LT(n,l)&(1<<se)-1,l+=se}if(l>_){if(s)throw"unexpected EOF";break}r&&o(u+131072);for(var ke=u+J;u<ke;u+=4)e[u]=e[u-re],e[u+1]=e[u+1-re],e[u+2]=e[u+2-re],e[u+3]=e[u+3-re];u=ke}}t.l=d,t.p=oe,t.b=u,d&&(a=1,t.m=p,t.d=h,t.n=v)}while(!a);return u==e.length?e:$Y(e,0,u)},eK=new ba(0),tK=function(n){if((n[0]&15)!=8||n[0]>>>4>7||(n[0]<<8|n[1])%31)throw"invalid zlib data";if(n[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function ew(n,e){return jY((tK(n),n.subarray(2,-4)),e)}var nK=typeof TextDecoder<"u"&&new TextDecoder,iK=0;try{nK.decode(eK,{stream:!0}),iK=1}catch{}const rK=n=>n&&n.isCubeTexture;class sK extends bi{constructor(e,t){var i,r;const s=rK(e),a=((r=s?(i=e.image[0])==null?void 0:i.width:e.image.width)!=null?r:1024)/4,l=Math.floor(Math.log2(a)),u=Math.pow(2,l),d=3*Math.max(u,112),h=4*u,p=[s?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/d}`,`#define CUBEUV_TEXEL_HEIGHT ${1/h}`,`#define CUBEUV_MAX_MIP ${l}.0`],v=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,_=p.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${Ub>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,w={map:{value:e},height:{value:(t==null?void 0:t.height)||15},radius:{value:(t==null?void 0:t.radius)||100}},S=new Gy(1,16),A=new Ds({uniforms:w,fragmentShader:_,vertexShader:v,side:Ma});super(S,A)}set radius(e){this.material.uniforms.radius.value=e}get radius(){return this.material.uniforms.radius.value}set height(e){this.material.uniforms.height.value=e}get height(){return this.material.uniforms.height.value}}var oK=Object.defineProperty,aK=(n,e,t)=>e in n?oK(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,lK=(n,e,t)=>(aK(n,e+"",t),t);class uK{constructor(){lK(this,"_listeners")}addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}var cK=Object.defineProperty,dK=(n,e,t)=>e in n?cK(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,ln=(n,e,t)=>(dK(n,typeof e!="symbol"?e+"":e,t),t);const tw=new qh,bD=new Wu,fK=Math.cos(70*(Math.PI/180)),RD=(n,e)=>(n%e+e)%e;let hK=class extends uK{constructor(e,t){super(),ln(this,"object"),ln(this,"domElement"),ln(this,"enabled",!0),ln(this,"target",new te),ln(this,"minDistance",0),ln(this,"maxDistance",1/0),ln(this,"minZoom",0),ln(this,"maxZoom",1/0),ln(this,"minPolarAngle",0),ln(this,"maxPolarAngle",Math.PI),ln(this,"minAzimuthAngle",-1/0),ln(this,"maxAzimuthAngle",1/0),ln(this,"enableDamping",!1),ln(this,"dampingFactor",.05),ln(this,"enableZoom",!0),ln(this,"zoomSpeed",1),ln(this,"enableRotate",!0),ln(this,"rotateSpeed",1),ln(this,"enablePan",!0),ln(this,"panSpeed",1),ln(this,"screenSpacePanning",!0),ln(this,"keyPanSpeed",7),ln(this,"zoomToCursor",!1),ln(this,"autoRotate",!1),ln(this,"autoRotateSpeed",2),ln(this,"reverseOrbit",!1),ln(this,"reverseHorizontalOrbit",!1),ln(this,"reverseVerticalOrbit",!1),ln(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),ln(this,"mouseButtons",{LEFT:Qf.ROTATE,MIDDLE:Qf.DOLLY,RIGHT:Qf.PAN}),ln(this,"touches",{ONE:Zf.ROTATE,TWO:Zf.DOLLY_PAN}),ln(this,"target0"),ln(this,"position0"),ln(this,"zoom0"),ln(this,"_domElementKeyEvents",null),ln(this,"getPolarAngle"),ln(this,"getAzimuthalAngle"),ln(this,"setPolarAngle"),ln(this,"setAzimuthalAngle"),ln(this,"getDistance"),ln(this,"getZoomScale"),ln(this,"listenToKeyEvents"),ln(this,"stopListenToKeyEvents"),ln(this,"saveState"),ln(this,"reset"),ln(this,"update"),ln(this,"connect"),ln(this,"dispose"),ln(this,"dollyIn"),ln(this,"dollyOut"),ln(this,"getScale"),ln(this,"setScale"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>d.phi,this.getAzimuthalAngle=()=>d.theta,this.setPolarAngle=ge=>{let He=RD(ge,2*Math.PI),rt=d.phi;rt<0&&(rt+=2*Math.PI),He<0&&(He+=2*Math.PI);let Ze=Math.abs(He-rt);2*Math.PI-Ze<Ze&&(He<rt?He+=2*Math.PI:rt+=2*Math.PI),h.phi=He-rt,i.update()},this.setAzimuthalAngle=ge=>{let He=RD(ge,2*Math.PI),rt=d.theta;rt<0&&(rt+=2*Math.PI),He<0&&(He+=2*Math.PI);let Ze=Math.abs(He-rt);2*Math.PI-Ze<Ze&&(He<rt?He+=2*Math.PI:rt+=2*Math.PI),h.theta=He-rt,i.update()},this.getDistance=()=>i.object.position.distanceTo(i.target),this.listenToKeyEvents=ge=>{ge.addEventListener("keydown",Rt),this._domElementKeyEvents=ge},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",Rt),this._domElementKeyEvents=null},this.saveState=()=>{i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=()=>{i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(r),i.update(),l=a.NONE},this.update=(()=>{const ge=new te,He=new te(0,1,0),rt=new Kr().setFromUnitVectors(e.up,He),Ze=rt.clone().invert(),Me=new te,pe=new Kr,tt=2*Math.PI;return function(){const zt=i.object.position;rt.setFromUnitVectors(e.up,He),Ze.copy(rt).invert(),ge.copy(zt).sub(i.target),ge.applyQuaternion(rt),d.setFromVector3(ge),i.autoRotate&&l===a.NONE&&Q(Z()),i.enableDamping?(d.theta+=h.theta*i.dampingFactor,d.phi+=h.phi*i.dampingFactor):(d.theta+=h.theta,d.phi+=h.phi);let Pt=i.minAzimuthAngle,rn=i.maxAzimuthAngle;isFinite(Pt)&&isFinite(rn)&&(Pt<-Math.PI?Pt+=tt:Pt>Math.PI&&(Pt-=tt),rn<-Math.PI?rn+=tt:rn>Math.PI&&(rn-=tt),Pt<=rn?d.theta=Math.max(Pt,Math.min(rn,d.theta)):d.theta=d.theta>(Pt+rn)/2?Math.max(Pt,d.theta):Math.min(rn,d.theta)),d.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,d.phi)),d.makeSafe(),i.enableDamping===!0?i.target.addScaledVector(v,i.dampingFactor):i.target.add(v),i.zoomToCursor&&D||i.object.isOrthographicCamera?d.radius=me(d.radius):d.radius=me(d.radius*p),ge.setFromSpherical(d),ge.applyQuaternion(Ze),zt.copy(i.target).add(ge),i.object.matrixAutoUpdate||i.object.updateMatrix(),i.object.lookAt(i.target),i.enableDamping===!0?(h.theta*=1-i.dampingFactor,h.phi*=1-i.dampingFactor,v.multiplyScalar(1-i.dampingFactor)):(h.set(0,0,0),v.set(0,0,0));let gn=!1;if(i.zoomToCursor&&D){let Ct=null;if(i.object instanceof er&&i.object.isPerspectiveCamera){const Mt=ge.length();Ct=me(Mt*p);const Dt=Mt-Ct;i.object.position.addScaledVector(N,Dt),i.object.updateMatrixWorld()}else if(i.object.isOrthographicCamera){const Mt=new te(O.x,O.y,0);Mt.unproject(i.object),i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/p)),i.object.updateProjectionMatrix(),gn=!0;const Dt=new te(O.x,O.y,0);Dt.unproject(i.object),i.object.position.sub(Dt).add(Mt),i.object.updateMatrixWorld(),Ct=ge.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),i.zoomToCursor=!1;Ct!==null&&(i.screenSpacePanning?i.target.set(0,0,-1).transformDirection(i.object.matrix).multiplyScalar(Ct).add(i.object.position):(tw.origin.copy(i.object.position),tw.direction.set(0,0,-1).transformDirection(i.object.matrix),Math.abs(i.object.up.dot(tw.direction))<fK?e.lookAt(i.target):(bD.setFromNormalAndCoplanarPoint(i.object.up,i.target),tw.intersectPlane(bD,i.target))))}else i.object instanceof Xl&&i.object.isOrthographicCamera&&(gn=p!==1,gn&&(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/p)),i.object.updateProjectionMatrix()));return p=1,D=!1,gn||Me.distanceToSquared(i.object.position)>u||8*(1-pe.dot(i.object.quaternion))>u?(i.dispatchEvent(r),Me.copy(i.object.position),pe.copy(i.object.quaternion),gn=!1,!0):!1}})(),this.connect=ge=>{i.domElement=ge,i.domElement.style.touchAction="none",i.domElement.addEventListener("contextmenu",fn),i.domElement.addEventListener("pointerdown",Qe),i.domElement.addEventListener("pointercancel",qe),i.domElement.addEventListener("wheel",st)},this.dispose=()=>{var ge,He,rt,Ze,Me,pe;i.domElement&&(i.domElement.style.touchAction="auto"),(ge=i.domElement)==null||ge.removeEventListener("contextmenu",fn),(He=i.domElement)==null||He.removeEventListener("pointerdown",Qe),(rt=i.domElement)==null||rt.removeEventListener("pointercancel",qe),(Ze=i.domElement)==null||Ze.removeEventListener("wheel",st),(Me=i.domElement)==null||Me.ownerDocument.removeEventListener("pointermove",Ye),(pe=i.domElement)==null||pe.ownerDocument.removeEventListener("pointerup",qe),i._domElementKeyEvents!==null&&i._domElementKeyEvents.removeEventListener("keydown",Rt)};const i=this,r={type:"change"},s={type:"start"},o={type:"end"},a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=a.NONE;const u=1e-6,d=new sM,h=new sM;let p=1;const v=new te,_=new Je,w=new Je,S=new Je,A=new Je,b=new Je,C=new Je,P=new Je,k=new Je,L=new Je,N=new te,O=new Je;let D=!1;const U=[],X={};function Z(){return 2*Math.PI/60/60*i.autoRotateSpeed}function he(){return Math.pow(.95,i.zoomSpeed)}function Q(ge){i.reverseOrbit||i.reverseHorizontalOrbit?h.theta+=ge:h.theta-=ge}function ue(ge){i.reverseOrbit||i.reverseVerticalOrbit?h.phi+=ge:h.phi-=ge}const re=(()=>{const ge=new te;return function(rt,Ze){ge.setFromMatrixColumn(Ze,0),ge.multiplyScalar(-rt),v.add(ge)}})(),ye=(()=>{const ge=new te;return function(rt,Ze){i.screenSpacePanning===!0?ge.setFromMatrixColumn(Ze,1):(ge.setFromMatrixColumn(Ze,0),ge.crossVectors(i.object.up,ge)),ge.multiplyScalar(rt),v.add(ge)}})(),$=(()=>{const ge=new te;return function(rt,Ze){const Me=i.domElement;if(Me&&i.object instanceof er&&i.object.isPerspectiveCamera){const pe=i.object.position;ge.copy(pe).sub(i.target);let tt=ge.length();tt*=Math.tan(i.object.fov/2*Math.PI/180),re(2*rt*tt/Me.clientHeight,i.object.matrix),ye(2*Ze*tt/Me.clientHeight,i.object.matrix)}else Me&&i.object instanceof Xl&&i.object.isOrthographicCamera?(re(rt*(i.object.right-i.object.left)/i.object.zoom/Me.clientWidth,i.object.matrix),ye(Ze*(i.object.top-i.object.bottom)/i.object.zoom/Me.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}})();function oe(ge){i.object instanceof er&&i.object.isPerspectiveCamera||i.object instanceof Xl&&i.object.isOrthographicCamera?p=ge:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function W(ge){oe(p/ge)}function J(ge){oe(p*ge)}function se(ge){if(!i.zoomToCursor||!i.domElement)return;D=!0;const He=i.domElement.getBoundingClientRect(),rt=ge.clientX-He.left,Ze=ge.clientY-He.top,Me=He.width,pe=He.height;O.x=rt/Me*2-1,O.y=-(Ze/pe)*2+1,N.set(O.x,O.y,1).unproject(i.object).sub(i.object.position).normalize()}function me(ge){return Math.max(i.minDistance,Math.min(i.maxDistance,ge))}function Se(ge){_.set(ge.clientX,ge.clientY)}function ke(ge){se(ge),P.set(ge.clientX,ge.clientY)}function Ie(ge){A.set(ge.clientX,ge.clientY)}function ze(ge){w.set(ge.clientX,ge.clientY),S.subVectors(w,_).multiplyScalar(i.rotateSpeed);const He=i.domElement;He&&(Q(2*Math.PI*S.x/He.clientHeight),ue(2*Math.PI*S.y/He.clientHeight)),_.copy(w),i.update()}function je(ge){k.set(ge.clientX,ge.clientY),L.subVectors(k,P),L.y>0?W(he()):L.y<0&&J(he()),P.copy(k),i.update()}function at(ge){b.set(ge.clientX,ge.clientY),C.subVectors(b,A).multiplyScalar(i.panSpeed),$(C.x,C.y),A.copy(b),i.update()}function ut(ge){se(ge),ge.deltaY<0?J(he()):ge.deltaY>0&&W(he()),i.update()}function gt(ge){let He=!1;switch(ge.code){case i.keys.UP:$(0,i.keyPanSpeed),He=!0;break;case i.keys.BOTTOM:$(0,-i.keyPanSpeed),He=!0;break;case i.keys.LEFT:$(i.keyPanSpeed,0),He=!0;break;case i.keys.RIGHT:$(-i.keyPanSpeed,0),He=!0;break}He&&(ge.preventDefault(),i.update())}function fe(){if(U.length==1)_.set(U[0].pageX,U[0].pageY);else{const ge=.5*(U[0].pageX+U[1].pageX),He=.5*(U[0].pageY+U[1].pageY);_.set(ge,He)}}function Fe(){if(U.length==1)A.set(U[0].pageX,U[0].pageY);else{const ge=.5*(U[0].pageX+U[1].pageX),He=.5*(U[0].pageY+U[1].pageY);A.set(ge,He)}}function Be(){const ge=U[0].pageX-U[1].pageX,He=U[0].pageY-U[1].pageY,rt=Math.sqrt(ge*ge+He*He);P.set(0,rt)}function $e(){i.enableZoom&&Be(),i.enablePan&&Fe()}function Oe(){i.enableZoom&&Be(),i.enableRotate&&fe()}function xe(ge){if(U.length==1)w.set(ge.pageX,ge.pageY);else{const rt=Tt(ge),Ze=.5*(ge.pageX+rt.x),Me=.5*(ge.pageY+rt.y);w.set(Ze,Me)}S.subVectors(w,_).multiplyScalar(i.rotateSpeed);const He=i.domElement;He&&(Q(2*Math.PI*S.x/He.clientHeight),ue(2*Math.PI*S.y/He.clientHeight)),_.copy(w)}function ct(ge){if(U.length==1)b.set(ge.pageX,ge.pageY);else{const He=Tt(ge),rt=.5*(ge.pageX+He.x),Ze=.5*(ge.pageY+He.y);b.set(rt,Ze)}C.subVectors(b,A).multiplyScalar(i.panSpeed),$(C.x,C.y),A.copy(b)}function j(ge){const He=Tt(ge),rt=ge.pageX-He.x,Ze=ge.pageY-He.y,Me=Math.sqrt(rt*rt+Ze*Ze);k.set(0,Me),L.set(0,Math.pow(k.y/P.y,i.zoomSpeed)),W(L.y),P.copy(k)}function Y(ge){i.enableZoom&&j(ge),i.enablePan&&ct(ge)}function we(ge){i.enableZoom&&j(ge),i.enableRotate&&xe(ge)}function Qe(ge){var He,rt;i.enabled!==!1&&(U.length===0&&((He=i.domElement)==null||He.ownerDocument.addEventListener("pointermove",Ye),(rt=i.domElement)==null||rt.ownerDocument.addEventListener("pointerup",qe)),Ht(ge),ge.pointerType==="touch"?Ot(ge):yt(ge))}function Ye(ge){i.enabled!==!1&&(ge.pointerType==="touch"?Xe(ge):ft(ge))}function qe(ge){var He,rt,Ze;Kt(ge),U.length===0&&((He=i.domElement)==null||He.releasePointerCapture(ge.pointerId),(rt=i.domElement)==null||rt.ownerDocument.removeEventListener("pointermove",Ye),(Ze=i.domElement)==null||Ze.ownerDocument.removeEventListener("pointerup",qe)),i.dispatchEvent(o),l=a.NONE}function yt(ge){let He;switch(ge.button){case 0:He=i.mouseButtons.LEFT;break;case 1:He=i.mouseButtons.MIDDLE;break;case 2:He=i.mouseButtons.RIGHT;break;default:He=-1}switch(He){case Qf.DOLLY:if(i.enableZoom===!1)return;ke(ge),l=a.DOLLY;break;case Qf.ROTATE:if(ge.ctrlKey||ge.metaKey||ge.shiftKey){if(i.enablePan===!1)return;Ie(ge),l=a.PAN}else{if(i.enableRotate===!1)return;Se(ge),l=a.ROTATE}break;case Qf.PAN:if(ge.ctrlKey||ge.metaKey||ge.shiftKey){if(i.enableRotate===!1)return;Se(ge),l=a.ROTATE}else{if(i.enablePan===!1)return;Ie(ge),l=a.PAN}break;default:l=a.NONE}l!==a.NONE&&i.dispatchEvent(s)}function ft(ge){if(i.enabled!==!1)switch(l){case a.ROTATE:if(i.enableRotate===!1)return;ze(ge);break;case a.DOLLY:if(i.enableZoom===!1)return;je(ge);break;case a.PAN:if(i.enablePan===!1)return;at(ge);break}}function st(ge){i.enabled===!1||i.enableZoom===!1||l!==a.NONE&&l!==a.ROTATE||(ge.preventDefault(),i.dispatchEvent(s),ut(ge),i.dispatchEvent(o))}function Rt(ge){i.enabled===!1||i.enablePan===!1||gt(ge)}function Ot(ge){switch(xt(ge),U.length){case 1:switch(i.touches.ONE){case Zf.ROTATE:if(i.enableRotate===!1)return;fe(),l=a.TOUCH_ROTATE;break;case Zf.PAN:if(i.enablePan===!1)return;Fe(),l=a.TOUCH_PAN;break;default:l=a.NONE}break;case 2:switch(i.touches.TWO){case Zf.DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;$e(),l=a.TOUCH_DOLLY_PAN;break;case Zf.DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;Oe(),l=a.TOUCH_DOLLY_ROTATE;break;default:l=a.NONE}break;default:l=a.NONE}l!==a.NONE&&i.dispatchEvent(s)}function Xe(ge){switch(xt(ge),l){case a.TOUCH_ROTATE:if(i.enableRotate===!1)return;xe(ge),i.update();break;case a.TOUCH_PAN:if(i.enablePan===!1)return;ct(ge),i.update();break;case a.TOUCH_DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;Y(ge),i.update();break;case a.TOUCH_DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;we(ge),i.update();break;default:l=a.NONE}}function fn(ge){i.enabled!==!1&&ge.preventDefault()}function Ht(ge){U.push(ge)}function Kt(ge){delete X[ge.pointerId];for(let He=0;He<U.length;He++)if(U[He].pointerId==ge.pointerId){U.splice(He,1);return}}function xt(ge){let He=X[ge.pointerId];He===void 0&&(He=new Je,X[ge.pointerId]=He),He.set(ge.pageX,ge.pageY)}function Tt(ge){const He=ge.pointerId===U[0].pointerId?U[1]:U[0];return X[He.pointerId]}this.dollyIn=(ge=he())=>{J(ge),i.update()},this.dollyOut=(ge=he())=>{W(ge),i.update()},this.getScale=()=>p,this.setScale=ge=>{oe(ge),i.update()},this.getZoomScale=()=>he(),t!==void 0&&this.connect(t),this.update()}};function aA(n){if(typeof TextDecoder<"u")return new TextDecoder().decode(n);let e="";for(let t=0,i=n.length;t<i;t++)e+=String.fromCharCode(n[t]);try{return decodeURIComponent(escape(e))}catch{return e}}const ph="srgb",ju="srgb-linear",PD=3001,pK=3e3;class Ob extends hs{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new _K(t)}),this.register(function(t){return new xK(t)}),this.register(function(t){return new RK(t)}),this.register(function(t){return new PK(t)}),this.register(function(t){return new IK(t)}),this.register(function(t){return new AK(t)}),this.register(function(t){return new SK(t)}),this.register(function(t){return new EK(t)}),this.register(function(t){return new TK(t)}),this.register(function(t){return new yK(t)}),this.register(function(t){return new MK(t)}),this.register(function(t){return new wK(t)}),this.register(function(t){return new bK(t)}),this.register(function(t){return new CK(t)}),this.register(function(t){return new gK(t)}),this.register(function(t){return new DK(t)}),this.register(function(t){return new LK(t)})}load(e,t,i,r){const s=this;let o;if(this.resourcePath!=="")o=this.resourcePath;else if(this.path!==""){const u=Ed.extractUrlBase(e);o=Ed.resolveURL(u,this.path)}else o=Ed.extractUrlBase(e);this.manager.itemStart(e);const a=function(u){r?r(u):console.error(u),s.manager.itemError(e),s.manager.itemEnd(e)},l=new ds(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(u){try{s.parse(u,o,function(d){t(d),s.manager.itemEnd(e)},a)}catch(d){a(d)}},i,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,r){let s;const o={},a={};if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(aA(new Uint8Array(e.slice(0,4)))===TU){try{o[Un.KHR_BINARY_GLTF]=new BK(e)}catch(d){r&&r(d);return}s=JSON.parse(o[Un.KHR_BINARY_GLTF].content)}else s=JSON.parse(aA(new Uint8Array(e)));else s=e;if(s.asset===void 0||s.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const l=new XK(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let u=0;u<this.pluginCallbacks.length;u++){const d=this.pluginCallbacks[u](l);d.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),a[d.name]=d,o[d.name]=!0}if(s.extensionsUsed)for(let u=0;u<s.extensionsUsed.length;++u){const d=s.extensionsUsed[u],h=s.extensionsRequired||[];switch(d){case Un.KHR_MATERIALS_UNLIT:o[d]=new vK;break;case Un.KHR_DRACO_MESH_COMPRESSION:o[d]=new NK(s,this.dracoLoader);break;case Un.KHR_TEXTURE_TRANSFORM:o[d]=new kK;break;case Un.KHR_MESH_QUANTIZATION:o[d]=new FK;break;default:h.indexOf(d)>=0&&a[d]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+d+'".')}}l.setExtensions(o),l.setPlugins(a),l.parse(i,r)}parseAsync(e,t){const i=this;return new Promise(function(r,s){i.parse(e,t,r,s)})}}function mK(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const Un={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class gK{constructor(e){this.parser=e,this.name=Un.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let i=0,r=t.length;i<r;i++){const s=t[i];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,i="light:"+e;let r=t.cache.get(i);if(r)return r;const s=t.json,l=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let u;const d=new St(16777215);l.color!==void 0&&d.setRGB(l.color[0],l.color[1],l.color[2],ju);const h=l.range!==void 0?l.range:0;switch(l.type){case"directional":u=new cb(d),u.target.position.set(0,0,-1),u.add(u.target);break;case"point":u=new ub(d),u.distance=h;break;case"spot":u=new lb(d),u.distance=h,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,u.angle=l.spot.outerConeAngle,u.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,u.target.position.set(0,0,-1),u.add(u.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return u.position.set(0,0,0),u.decay=2,zu(u,l),l.intensity!==void 0&&(u.intensity=l.intensity),u.name=t.createUniqueName(l.name||"light_"+e),r=Promise.resolve(u),t.cache.add(i,r),r}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,i=this.parser,s=i.json.nodes[e],a=(s.extensions&&s.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(l){return i._getNodeRef(t.cache,a,l)})}}class vK{constructor(){this.name=Un.KHR_MATERIALS_UNLIT}getMaterialType(){return Ao}extendParams(e,t,i){const r=[];e.color=new St(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.setRGB(o[0],o[1],o[2],ju),e.opacity=o[3]}s.baseColorTexture!==void 0&&r.push(i.assignTexture(e,"map",s.baseColorTexture,ph))}return Promise.all(r)}}class yK{constructor(e){this.parser=e,this.name=Un.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name].emissiveStrength;return s!==void 0&&(t.emissiveIntensity=s),Promise.resolve()}}class _K{constructor(e){this.parser=e,this.name=Un.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Ps}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];if(o.clearcoatFactor!==void 0&&(t.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&s.push(i.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&s.push(i.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(s.push(i.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Je(a,a)}return Promise.all(s)}}class xK{constructor(e){this.parser=e,this.name=Un.KHR_MATERIALS_DISPERSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Ps}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.dispersion=s.dispersion!==void 0?s.dispersion:0,Promise.resolve()}}class wK{constructor(e){this.parser=e,this.name=Un.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Ps}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.iridescenceFactor!==void 0&&(t.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&s.push(i.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(t.iridescenceIOR=o.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&s.push(i.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}}class AK{constructor(e){this.parser=e,this.name=Un.KHR_MATERIALS_SHEEN}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Ps}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new St(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=r.extensions[this.name];if(o.sheenColorFactor!==void 0){const a=o.sheenColorFactor;t.sheenColor.setRGB(a[0],a[1],a[2],ju)}return o.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&s.push(i.assignTexture(t,"sheenColorMap",o.sheenColorTexture,ph)),o.sheenRoughnessTexture!==void 0&&s.push(i.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class SK{constructor(e){this.parser=e,this.name=Un.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Ps}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.transmissionFactor!==void 0&&(t.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&s.push(i.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class EK{constructor(e){this.parser=e,this.name=Un.KHR_MATERIALS_VOLUME}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Ps}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&s.push(i.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=new St().setRGB(a[0],a[1],a[2],ju),Promise.all(s)}}class TK{constructor(e){this.parser=e,this.name=Un.KHR_MATERIALS_IOR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Ps}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class MK{constructor(e){this.parser=e,this.name=Un.KHR_MATERIALS_SPECULAR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Ps}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&s.push(i.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=new St().setRGB(a[0],a[1],a[2],ju),o.specularColorTexture!==void 0&&s.push(i.assignTexture(t,"specularColorMap",o.specularColorTexture,ph)),Promise.all(s)}}class CK{constructor(e){this.parser=e,this.name=Un.EXT_MATERIALS_BUMP}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Ps}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return t.bumpScale=o.bumpFactor!==void 0?o.bumpFactor:1,o.bumpTexture!==void 0&&s.push(i.assignTexture(t,"bumpMap",o.bumpTexture)),Promise.all(s)}}class bK{constructor(e){this.parser=e,this.name=Un.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Ps}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.anisotropyStrength!==void 0&&(t.anisotropy=o.anisotropyStrength),o.anisotropyRotation!==void 0&&(t.anisotropyRotation=o.anisotropyRotation),o.anisotropyTexture!==void 0&&s.push(i.assignTexture(t,"anisotropyMap",o.anisotropyTexture)),Promise.all(s)}}class RK{constructor(e){this.parser=e,this.name=Un.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,i=t.json,r=i.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const s=r.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,o)}}class PK{constructor(e){this.parser=e,this.name=Un.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=r.images[o.source];let l=i.textureLoader;if(a.uri){const u=i.options.manager.getHandler(a.uri);u!==null&&(l=u)}return this.detectSupport().then(function(u){if(u)return i.loadTextureImage(e,o.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class IK{constructor(e){this.parser=e,this.name=Un.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=r.images[o.source];let l=i.textureLoader;if(a.uri){const u=i.options.manager.getHandler(a.uri);u!==null&&(l=u)}return this.detectSupport().then(function(u){if(u)return i.loadTextureImage(e,o.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class DK{constructor(e){this.name=Un.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,i=t.bufferViews[e];if(i.extensions&&i.extensions[this.name]){const r=i.extensions[this.name],s=this.parser.getDependency("buffer",r.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(a){const l=r.byteOffset||0,u=r.byteLength||0,d=r.count,h=r.byteStride,p=new Uint8Array(a,l,u);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(d,h,p,r.mode,r.filter).then(function(v){return v.buffer}):o.ready.then(function(){const v=new ArrayBuffer(d*h);return o.decodeGltfBuffer(new Uint8Array(v),d,h,p,r.mode,r.filter),v})})}else return null}}class LK{constructor(e){this.name=Un.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,i=t.nodes[e];if(!i.extensions||!i.extensions[this.name]||i.mesh===void 0)return null;const r=t.meshes[i.mesh];for(const u of r.primitives)if(u.mode!==wa.TRIANGLES&&u.mode!==wa.TRIANGLE_STRIP&&u.mode!==wa.TRIANGLE_FAN&&u.mode!==void 0)return null;const o=i.extensions[this.name].attributes,a=[],l={};for(const u in o)a.push(this.parser.getDependency("accessor",o[u]).then(d=>(l[u]=d,l[u])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(u=>{const d=u.pop(),h=d.isGroup?d.children:[d],p=u[0].count,v=[];for(const _ of h){const w=new dn,S=new te,A=new Kr,b=new te(1,1,1),C=new XC(_.geometry,_.material,p);for(let P=0;P<p;P++)l.TRANSLATION&&S.fromBufferAttribute(l.TRANSLATION,P),l.ROTATION&&A.fromBufferAttribute(l.ROTATION,P),l.SCALE&&b.fromBufferAttribute(l.SCALE,P),C.setMatrixAt(P,w.compose(S,A,b));for(const P in l)if(P==="_COLOR_0"){const k=l[P];C.instanceColor=new Nh(k.array,k.itemSize,k.normalized)}else P!=="TRANSLATION"&&P!=="ROTATION"&&P!=="SCALE"&&_.geometry.setAttribute(P,l[P]);Jn.prototype.copy.call(C,_),this.parser.assignFinalMaterial(C),v.push(C)}return d.isGroup?(d.clear(),d.add(...v),d):v[0]}))}}const TU="glTF",j0=12,ID={JSON:1313821514,BIN:5130562};class BK{constructor(e){this.name=Un.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,j0);if(this.header={magic:aA(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==TU)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const i=this.header.length-j0,r=new DataView(e,j0);let s=0;for(;s<i;){const o=r.getUint32(s,!0);s+=4;const a=r.getUint32(s,!0);if(s+=4,a===ID.JSON){const l=new Uint8Array(e,j0+s,o);this.content=aA(l)}else if(a===ID.BIN){const l=j0+s;this.body=e.slice(l,l+o)}s+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class NK{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Un.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const i=this.json,r=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},l={},u={};for(const d in o){const h=AM[d]||d.toLowerCase();a[h]=o[d]}for(const d in e.attributes){const h=AM[d]||d.toLowerCase();if(o[d]!==void 0){const p=i.accessors[e.attributes[d]],v=Km[p.componentType];u[h]=v.name,l[h]=p.normalized===!0}}return t.getDependency("bufferView",s).then(function(d){return new Promise(function(h,p){r.decodeDracoFile(d,function(v){for(const _ in v.attributes){const w=v.attributes[_],S=l[_];S!==void 0&&(w.normalized=S)}h(v)},a,u,ju,p)})})}}class kK{constructor(){this.name=Un.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class FK{constructor(){this.name=Un.KHR_MESH_QUANTIZATION}}class MU extends Bg{constructor(e,t,i,r){super(e,t,i,r)}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r*3+r;for(let o=0;o!==r;o++)t[o]=i[s+o];return t}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=a*2,u=a*3,d=r-t,h=(i-t)/d,p=h*h,v=p*h,_=e*u,w=_-u,S=-2*v+3*p,A=v-p,b=1-S,C=A-p+h;for(let P=0;P!==a;P++){const k=o[w+P+a],L=o[w+P+l]*d,N=o[_+P+a],O=o[_+P]*d;s[P]=b*k+C*L+S*N+A*O}return s}}const UK=new Kr;class OK extends MU{interpolate_(e,t,i,r){const s=super.interpolate_(e,t,i,r);return UK.fromArray(s).normalize().toArray(s),s}}const wa={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},Km={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},DD={9728:$i,9729:Kn,9984:Zv,9985:VA,9986:qm,9987:jl},LD={33071:Bi,33648:ug,10497:Dd},BT={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},AM={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...Ub>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},td={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},HK={CUBICSPLINE:void 0,LINEAR:Bh,STEP:cg},NT={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function GK(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new Lg({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Zl})),n.DefaultMaterial}function Wf(n,e,t){for(const i in t.extensions)n[i]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=t.extensions[i])}function zu(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function zK(n,e,t){let i=!1,r=!1,s=!1;for(let u=0,d=e.length;u<d;u++){const h=e[u];if(h.POSITION!==void 0&&(i=!0),h.NORMAL!==void 0&&(r=!0),h.COLOR_0!==void 0&&(s=!0),i&&r&&s)break}if(!i&&!r&&!s)return Promise.resolve(n);const o=[],a=[],l=[];for(let u=0,d=e.length;u<d;u++){const h=e[u];if(i){const p=h.POSITION!==void 0?t.getDependency("accessor",h.POSITION):n.attributes.position;o.push(p)}if(r){const p=h.NORMAL!==void 0?t.getDependency("accessor",h.NORMAL):n.attributes.normal;a.push(p)}if(s){const p=h.COLOR_0!==void 0?t.getDependency("accessor",h.COLOR_0):n.attributes.color;l.push(p)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(u){const d=u[0],h=u[1],p=u[2];return i&&(n.morphAttributes.position=d),r&&(n.morphAttributes.normal=h),s&&(n.morphAttributes.color=p),n.morphTargetsRelative=!0,n})}function VK(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,i=e.weights.length;t<i;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let i=0,r=t.length;i<r;i++)n.morphTargetDictionary[t[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function WK(n){let e;const t=n.extensions&&n.extensions[Un.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+kT(t.attributes):e=n.indices+":"+kT(n.attributes)+":"+n.mode,n.targets!==void 0)for(let i=0,r=n.targets.length;i<r;i++)e+=":"+kT(n.targets[i]);return e}function kT(n){let e="";const t=Object.keys(n).sort();for(let i=0,r=t.length;i<r;i++)e+=t[i]+":"+n[t[i]]+";";return e}function SM(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function qK(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const JK=new dn;class XK{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new mK,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,r=!1,s=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(i=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,r=navigator.userAgent.indexOf("Firefox")>-1,s=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||i||r&&s<98?this.textureLoader=new ob(this.options.manager):this.textureLoader=new a3(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new ds(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const i=this,r=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(o){const a={scene:o[0][r.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:r.asset,parser:i,userData:{}};return Wf(s,a,r),zu(a,r),Promise.all(i._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){for(const l of a.scenes)l.updateMatrixWorld();e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let r=0,s=t.length;r<s;r++){const o=t[r].joints;for(let a=0,l=o.length;a<l;a++)e[o[a]].isBone=!0}for(let r=0,s=e.length;r<s;r++){const o=e[r];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(i[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]<=1)return i;const r=i.clone(),s=(o,a)=>{const l=this.associations.get(o);l!=null&&this.associations.set(a,l);for(const[u,d]of o.children.entries())s(d,a.children[u])};return s(i,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let i=0;i<t.length;i++){const r=e(t[i]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const i=[];for(let r=0;r<t.length;r++){const s=e(t[r]);s&&i.push(s)}return i}getDependency(e,t){const i=e+":"+t;let r=this.cache.get(i);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this._invokeOne(function(s){return s.loadNode&&s.loadNode(t)});break;case"mesh":r=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":r=this.loadCamera(t);break;default:if(r=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,t)}),!r)throw new Error("Unknown type: "+e);break}this.cache.add(i,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const i=this,r=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(r.map(function(s,o){return i.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],i=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[Un.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(s,o){i.load(Ed.resolveURL(t.uri,r.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(i){const r=t.byteLength||0,s=t.byteOffset||0;return i.slice(s,s+r)})}loadAccessor(e){const t=this,i=this.json,r=this.json.accessors[e];if(r.bufferView===void 0&&r.sparse===void 0){const o=BT[r.type],a=Km[r.componentType],l=r.normalized===!0,u=new a(r.count*o);return Promise.resolve(new Xn(u,o,l))}const s=[];return r.bufferView!==void 0?s.push(this.getDependency("bufferView",r.bufferView)):s.push(null),r.sparse!==void 0&&(s.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],l=BT[r.type],u=Km[r.componentType],d=u.BYTES_PER_ELEMENT,h=d*l,p=r.byteOffset||0,v=r.bufferView!==void 0?i.bufferViews[r.bufferView].byteStride:void 0,_=r.normalized===!0;let w,S;if(v&&v!==h){const A=Math.floor(p/v),b="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+A+":"+r.count;let C=t.cache.get(b);C||(w=new u(a,A*v,r.count*v/d),C=new Uy(w,v/d),t.cache.add(b,C)),S=new Ld(C,l,p%v/d,_)}else a===null?w=new u(r.count*l):w=new u(a,p,r.count*l),S=new Xn(w,l,_);if(r.sparse!==void 0){const A=BT.SCALAR,b=Km[r.sparse.indices.componentType],C=r.sparse.indices.byteOffset||0,P=r.sparse.values.byteOffset||0,k=new b(o[1],C,r.sparse.count*A),L=new u(o[2],P,r.sparse.count*l);a!==null&&(S=new Xn(S.array.slice(),S.itemSize,S.normalized));for(let N=0,O=k.length;N<O;N++){const D=k[N];if(S.setX(D,L[N*l]),l>=2&&S.setY(D,L[N*l+1]),l>=3&&S.setZ(D,L[N*l+2]),l>=4&&S.setW(D,L[N*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return S})}loadTexture(e){const t=this.json,i=this.options,s=t.textures[e].source,o=t.images[s];let a=this.textureLoader;if(o.uri){const l=i.manager.getHandler(o.uri);l!==null&&(a=l)}return this.loadTextureImage(e,s,a)}loadTextureImage(e,t,i){const r=this,s=this.json,o=s.textures[e],a=s.images[t],l=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const u=this.loadImageSource(t,i).then(function(d){d.flipY=!1,d.name=o.name||a.name||"",d.name===""&&typeof a.uri=="string"&&a.uri.startsWith("data:image/")===!1&&(d.name=a.uri);const p=(s.samplers||{})[o.sampler]||{};return d.magFilter=DD[p.magFilter]||Kn,d.minFilter=DD[p.minFilter]||jl,d.wrapS=LD[p.wrapS]||Dd,d.wrapT=LD[p.wrapT]||Dd,r.associations.set(d,{textures:e}),d}).catch(function(){return null});return this.textureCache[l]=u,u}loadImageSource(e,t){const i=this,r=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(h=>h.clone());const o=r.images[e],a=self.URL||self.webkitURL;let l=o.uri||"",u=!1;if(o.bufferView!==void 0)l=i.getDependency("bufferView",o.bufferView).then(function(h){u=!0;const p=new Blob([h],{type:o.mimeType});return l=a.createObjectURL(p),l});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const d=Promise.resolve(l).then(function(h){return new Promise(function(p,v){let _=p;t.isImageBitmapLoader===!0&&(_=function(w){const S=new hi(w);S.needsUpdate=!0,p(S)}),t.load(Ed.resolveURL(h,s.path),_,void 0,v)})}).then(function(h){return u===!0&&a.revokeObjectURL(l),zu(h,o),h.userData.mimeType=o.mimeType||qK(o.uri),h}).catch(function(h){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),h});return this.sourceCache[e]=d,d}assignTexture(e,t,i,r){const s=this;return this.getDependency("texture",i.index).then(function(o){if(!o)return null;if(i.texCoord!==void 0&&i.texCoord>0&&(o=o.clone(),o.channel=i.texCoord),s.extensions[Un.KHR_TEXTURE_TRANSFORM]){const a=i.extensions!==void 0?i.extensions[Un.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const l=s.associations.get(o);o=s.extensions[Un.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,l)}}return r!==void 0&&(typeof r=="number"&&(r=r===PD?ph:ju),"colorSpace"in o?o.colorSpace=r:o.encoding=r===ph?PD:pK),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let i=e.material;const r=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,o=t.attributes.normal===void 0;if(e.isPoints){const a="PointsMaterial:"+i.uuid;let l=this.cache.get(a);l||(l=new tS,Fr.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,l.sizeAttenuation=!1,this.cache.add(a,l)),i=l}else if(e.isLine){const a="LineBasicMaterial:"+i.uuid;let l=this.cache.get(a);l||(l=new Bs,Fr.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,this.cache.add(a,l)),i=l}if(r||s||o){let a="ClonedMaterial:"+i.uuid+":";r&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=i.clone(),s&&(l.vertexColors=!0),o&&(l.flatShading=!0),r&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(i))),i=l}e.material=i}getMaterialType(){return Lg}loadMaterial(e){const t=this,i=this.json,r=this.extensions,s=i.materials[e];let o;const a={},l=s.extensions||{},u=[];if(l[Un.KHR_MATERIALS_UNLIT]){const h=r[Un.KHR_MATERIALS_UNLIT];o=h.getMaterialType(),u.push(h.extendParams(a,s,t))}else{const h=s.pbrMetallicRoughness||{};if(a.color=new St(1,1,1),a.opacity=1,Array.isArray(h.baseColorFactor)){const p=h.baseColorFactor;a.color.setRGB(p[0],p[1],p[2],ju),a.opacity=p[3]}h.baseColorTexture!==void 0&&u.push(t.assignTexture(a,"map",h.baseColorTexture,ph)),a.metalness=h.metallicFactor!==void 0?h.metallicFactor:1,a.roughness=h.roughnessFactor!==void 0?h.roughnessFactor:1,h.metallicRoughnessTexture!==void 0&&(u.push(t.assignTexture(a,"metalnessMap",h.metallicRoughnessTexture)),u.push(t.assignTexture(a,"roughnessMap",h.metallicRoughnessTexture))),o=this._invokeOne(function(p){return p.getMaterialType&&p.getMaterialType(e)}),u.push(Promise.all(this._invokeAll(function(p){return p.extendMaterialParams&&p.extendMaterialParams(e,a)})))}s.doubleSided===!0&&(a.side=Ma);const d=s.alphaMode||NT.OPAQUE;if(d===NT.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,d===NT.MASK&&(a.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&o!==Ao&&(u.push(t.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new Je(1,1),s.normalTexture.scale!==void 0)){const h=s.normalTexture.scale;a.normalScale.set(h,h)}if(s.occlusionTexture!==void 0&&o!==Ao&&(u.push(t.assignTexture(a,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&o!==Ao){const h=s.emissiveFactor;a.emissive=new St().setRGB(h[0],h[1],h[2],ju)}return s.emissiveTexture!==void 0&&o!==Ao&&u.push(t.assignTexture(a,"emissiveMap",s.emissiveTexture,ph)),Promise.all(u).then(function(){const h=new o(a);return s.name&&(h.name=s.name),zu(h,s),t.associations.set(h,{materials:e}),s.extensions&&Wf(r,h,s),h})}createUniqueName(e){const t=qn.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,i=this.extensions,r=this.primitiveCache;function s(a){return i[Un.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(l){return BD(l,a,t)})}const o=[];for(let a=0,l=e.length;a<l;a++){const u=e[a],d=WK(u),h=r[d];if(h)o.push(h.promise);else{let p;u.extensions&&u.extensions[Un.KHR_DRACO_MESH_COMPRESSION]?p=s(u):p=BD(new Tn,u,t),r[d]={primitive:u,promise:p},o.push(p)}}return Promise.all(o)}loadMesh(e){const t=this,i=this.json,r=this.extensions,s=i.meshes[e],o=s.primitives,a=[];for(let l=0,u=o.length;l<u;l++){const d=o[l].material===void 0?GK(this.cache):this.getDependency("material",o[l].material);a.push(d)}return a.push(t.loadGeometries(o)),Promise.all(a).then(function(l){const u=l.slice(0,l.length-1),d=l[l.length-1],h=[];for(let v=0,_=d.length;v<_;v++){const w=d[v],S=o[v];let A;const b=u[v];if(S.mode===wa.TRIANGLES||S.mode===wa.TRIANGLE_STRIP||S.mode===wa.TRIANGLE_FAN||S.mode===void 0)A=s.isSkinnedMesh===!0?new JC(w,b):new bi(w,b),A.isSkinnedMesh===!0&&A.normalizeSkinWeights(),S.mode===wa.TRIANGLE_STRIP?A.geometry=CD(A.geometry,LC):S.mode===wa.TRIANGLE_FAN&&(A.geometry=CD(A.geometry,Qw));else if(S.mode===wa.LINES)A=new _l(w,b);else if(S.mode===wa.LINE_STRIP)A=new rc(w,b);else if(S.mode===wa.LINE_LOOP)A=new YC(w,b);else if(S.mode===wa.POINTS)A=new KC(w,b);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+S.mode);Object.keys(A.geometry.morphAttributes).length>0&&VK(A,s),A.name=t.createUniqueName(s.name||"mesh_"+e),zu(A,s),S.extensions&&Wf(r,A,S),t.assignFinalMaterial(A),h.push(A)}for(let v=0,_=h.length;v<_;v++)t.associations.set(h[v],{meshes:e,primitives:v});if(h.length===1)return s.extensions&&Wf(r,h[0],s),h[0];const p=new Ku;s.extensions&&Wf(r,p,s),t.associations.set(p,{meshes:e});for(let v=0,_=h.length;v<_;v++)p.add(h[v]);return p})}loadCamera(e){let t;const i=this.json.cameras[e],r=i[i.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return i.type==="perspective"?t=new er(ad.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):i.type==="orthographic"&&(t=new Xl(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),i.name&&(t.name=this.createUniqueName(i.name)),zu(t,i),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],i=[];for(let r=0,s=t.joints.length;r<s;r++)i.push(this._loadNodeShallow(t.joints[r]));return t.inverseBindMatrices!==void 0?i.push(this.getDependency("accessor",t.inverseBindMatrices)):i.push(null),Promise.all(i).then(function(r){const s=r.pop(),o=r,a=[],l=[];for(let u=0,d=o.length;u<d;u++){const h=o[u];if(h){a.push(h);const p=new dn;s!==null&&p.fromArray(s.array,u*16),l.push(p)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[u])}return new Oy(a,l)})}loadAnimation(e){const t=this.json,i=this,r=t.animations[e],s=r.name?r.name:"animation_"+e,o=[],a=[],l=[],u=[],d=[];for(let h=0,p=r.channels.length;h<p;h++){const v=r.channels[h],_=r.samplers[v.sampler],w=v.target,S=w.node,A=r.parameters!==void 0?r.parameters[_.input]:_.input,b=r.parameters!==void 0?r.parameters[_.output]:_.output;w.node!==void 0&&(o.push(this.getDependency("node",S)),a.push(this.getDependency("accessor",A)),l.push(this.getDependency("accessor",b)),u.push(_),d.push(w))}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l),Promise.all(u),Promise.all(d)]).then(function(h){const p=h[0],v=h[1],_=h[2],w=h[3],S=h[4],A=[];for(let b=0,C=p.length;b<C;b++){const P=p[b],k=v[b],L=_[b],N=w[b],O=S[b];if(P===void 0)continue;P.updateMatrix&&P.updateMatrix();const D=i._createAnimationTracks(P,k,L,N,O);if(D)for(let U=0;U<D.length;U++)A.push(D[U])}return new pg(s,void 0,A)})}createNodeMesh(e){const t=this.json,i=this,r=t.nodes[e];return r.mesh===void 0?null:i.getDependency("mesh",r.mesh).then(function(s){const o=i._getNodeRef(i.meshCache,r.mesh,s);return r.weights!==void 0&&o.traverse(function(a){if(a.isMesh)for(let l=0,u=r.weights.length;l<u;l++)a.morphTargetInfluences[l]=r.weights[l]}),o})}loadNode(e){const t=this.json,i=this,r=t.nodes[e],s=i._loadNodeShallow(e),o=[],a=r.children||[];for(let u=0,d=a.length;u<d;u++)o.push(i.getDependency("node",a[u]));const l=r.skin===void 0?Promise.resolve(null):i.getDependency("skin",r.skin);return Promise.all([s,Promise.all(o),l]).then(function(u){const d=u[0],h=u[1],p=u[2];p!==null&&d.traverse(function(v){v.isSkinnedMesh&&v.bind(p,JK)});for(let v=0,_=h.length;v<_;v++)d.add(h[v]);return d})}_loadNodeShallow(e){const t=this.json,i=this.extensions,r=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const s=t.nodes[e],o=s.name?r.createUniqueName(s.name):"",a=[],l=r._invokeOne(function(u){return u.createNodeMesh&&u.createNodeMesh(e)});return l&&a.push(l),s.camera!==void 0&&a.push(r.getDependency("camera",s.camera).then(function(u){return r._getNodeRef(r.cameraCache,s.camera,u)})),r._invokeAll(function(u){return u.createNodeAttachment&&u.createNodeAttachment(e)}).forEach(function(u){a.push(u)}),this.nodeCache[e]=Promise.all(a).then(function(u){let d;if(s.isBone===!0?d=new eS:u.length>1?d=new Ku:u.length===1?d=u[0]:d=new Jn,d!==u[0])for(let h=0,p=u.length;h<p;h++)d.add(u[h]);if(s.name&&(d.userData.name=s.name,d.name=o),zu(d,s),s.extensions&&Wf(i,d,s),s.matrix!==void 0){const h=new dn;h.fromArray(s.matrix),d.applyMatrix4(h)}else s.translation!==void 0&&d.position.fromArray(s.translation),s.rotation!==void 0&&d.quaternion.fromArray(s.rotation),s.scale!==void 0&&d.scale.fromArray(s.scale);return r.associations.has(d)||r.associations.set(d,{}),r.associations.get(d).nodes=e,d}),this.nodeCache[e]}loadScene(e){const t=this.extensions,i=this.json.scenes[e],r=this,s=new Ku;i.name&&(s.name=r.createUniqueName(i.name)),zu(s,i),i.extensions&&Wf(t,s,i);const o=i.nodes||[],a=[];for(let l=0,u=o.length;l<u;l++)a.push(r.getDependency("node",o[l]));return Promise.all(a).then(function(l){for(let d=0,h=l.length;d<h;d++)s.add(l[d]);const u=d=>{const h=new Map;for(const[p,v]of r.associations)(p instanceof Fr||p instanceof hi)&&h.set(p,v);return d.traverse(p=>{const v=r.associations.get(p);v!=null&&h.set(p,v)}),h};return r.associations=u(s),s})}_createAnimationTracks(e,t,i,r,s){const o=[],a=e.name?e.name:e.uuid,l=[];td[s.path]===td.weights?e.traverse(function(p){p.morphTargetInfluences&&l.push(p.name?p.name:p.uuid)}):l.push(a);let u;switch(td[s.path]){case td.weights:u=Fh;break;case td.rotation:u=Bd;break;case td.position:case td.scale:u=Uh;break;default:switch(i.itemSize){case 1:u=Fh;break;case 2:case 3:default:u=Uh;break}break}const d=r.interpolation!==void 0?HK[r.interpolation]:Bh,h=this._getArrayFromAccessor(i);for(let p=0,v=l.length;p<v;p++){const _=new u(l[p]+"."+td[s.path],t.array,h,d);r.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(_),o.push(_)}return o}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const i=SM(t.constructor),r=new Float32Array(t.length);for(let s=0,o=t.length;s<o;s++)r[s]=t[s]*i;t=r}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(i){const r=this instanceof Bd?OK:MU;return new r(this.times,this.values,this.getValueSize()/3,i)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function YK(n,e,t){const i=e.attributes,r=new cs;if(i.POSITION!==void 0){const a=t.json.accessors[i.POSITION],l=a.min,u=a.max;if(l!==void 0&&u!==void 0){if(r.set(new te(l[0],l[1],l[2]),new te(u[0],u[1],u[2])),a.normalized){const d=SM(Km[a.componentType]);r.min.multiplyScalar(d),r.max.multiplyScalar(d)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const a=new te,l=new te;for(let u=0,d=s.length;u<d;u++){const h=s[u];if(h.POSITION!==void 0){const p=t.json.accessors[h.POSITION],v=p.min,_=p.max;if(v!==void 0&&_!==void 0){if(l.setX(Math.max(Math.abs(v[0]),Math.abs(_[0]))),l.setY(Math.max(Math.abs(v[1]),Math.abs(_[1]))),l.setZ(Math.max(Math.abs(v[2]),Math.abs(_[2]))),p.normalized){const w=SM(Km[p.componentType]);l.multiplyScalar(w)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(a)}n.boundingBox=r;const o=new Qr;r.getCenter(o.center),o.radius=r.min.distanceTo(r.max)/2,n.boundingSphere=o}function BD(n,e,t){const i=e.attributes,r=[];function s(o,a){return t.getDependency("accessor",o).then(function(l){n.setAttribute(a,l)})}for(const o in i){const a=AM[o]||o.toLowerCase();a in n.attributes||r.push(s(i[o],a))}if(e.indices!==void 0&&!n.index){const o=t.getDependency("accessor",e.indices).then(function(a){n.setIndex(a)});r.push(o)}return zu(n,e),YK(n,e,t),Promise.all(r).then(function(){return e.targets!==void 0?zK(n,e.targets,t):n})}const KK={uniforms:{tDiffuse:{value:null},h:{value:1/512}},vertexShader:`
      varying vec2 vUv;

      void main() {

        vUv = uv;
        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

      }
  `,fragmentShader:`
    uniform sampler2D tDiffuse;
    uniform float h;

    varying vec2 vUv;

    void main() {

    	vec4 sum = vec4( 0.0 );

    	sum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;
    	sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;

    	gl_FragColor = sum;

    }
  `},QK={uniforms:{tDiffuse:{value:null},v:{value:1/512}},vertexShader:`
    varying vec2 vUv;

    void main() {

      vUv = uv;
      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

    }
  `,fragmentShader:`

  uniform sampler2D tDiffuse;
  uniform float v;

  varying vec2 vUv;

  void main() {

    vec4 sum = vec4( 0.0 );

    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;

    gl_FragColor = sum;

  }
  `};class ZK extends sb{constructor(e){super(e),this.type=Yr}parse(e){const o=function(O,D){switch(O){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(D||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(D||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(D||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(D||""))}},h=function(O,D,U){D=D||1024;let Z=O.pos,he=-1,Q=0,ue="",re=String.fromCharCode.apply(null,new Uint16Array(O.subarray(Z,Z+128)));for(;0>(he=re.indexOf(`
`))&&Q<D&&Z<O.byteLength;)ue+=re,Q+=re.length,Z+=128,re+=String.fromCharCode.apply(null,new Uint16Array(O.subarray(Z,Z+128)));return-1<he?(O.pos+=Q+he+1,ue+re.slice(0,he)):!1},p=function(O){const D=/^#\?(\S+)/,U=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,X=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,Z=/^\s*FORMAT=(\S+)\s*$/,he=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,Q={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let ue,re;for((O.pos>=O.byteLength||!(ue=h(O)))&&o(1,"no header found"),(re=ue.match(D))||o(3,"bad initial token"),Q.valid|=1,Q.programtype=re[1],Q.string+=ue+`
`;ue=h(O),ue!==!1;){if(Q.string+=ue+`
`,ue.charAt(0)==="#"){Q.comments+=ue+`
`;continue}if((re=ue.match(U))&&(Q.gamma=parseFloat(re[1])),(re=ue.match(X))&&(Q.exposure=parseFloat(re[1])),(re=ue.match(Z))&&(Q.valid|=2,Q.format=re[1]),(re=ue.match(he))&&(Q.valid|=4,Q.height=parseInt(re[1],10),Q.width=parseInt(re[2],10)),Q.valid&2&&Q.valid&4)break}return Q.valid&2||o(3,"missing format specifier"),Q.valid&4||o(3,"missing image size specifier"),Q},v=function(O,D,U){const X=D;if(X<8||X>32767||O[0]!==2||O[1]!==2||O[2]&128)return new Uint8Array(O);X!==(O[2]<<8|O[3])&&o(3,"wrong scanline width");const Z=new Uint8Array(4*D*U);Z.length||o(4,"unable to allocate buffer space");let he=0,Q=0;const ue=4*X,re=new Uint8Array(4),ye=new Uint8Array(ue);let $=U;for(;$>0&&Q<O.byteLength;){Q+4>O.byteLength&&o(1),re[0]=O[Q++],re[1]=O[Q++],re[2]=O[Q++],re[3]=O[Q++],(re[0]!=2||re[1]!=2||(re[2]<<8|re[3])!=X)&&o(3,"bad rgbe scanline format");let oe=0,W;for(;oe<ue&&Q<O.byteLength;){W=O[Q++];const se=W>128;if(se&&(W-=128),(W===0||oe+W>ue)&&o(3,"bad scanline data"),se){const me=O[Q++];for(let Se=0;Se<W;Se++)ye[oe++]=me}else ye.set(O.subarray(Q,Q+W),oe),oe+=W,Q+=W}const J=X;for(let se=0;se<J;se++){let me=0;Z[he]=ye[se+me],me+=X,Z[he+1]=ye[se+me],me+=X,Z[he+2]=ye[se+me],me+=X,Z[he+3]=ye[se+me],he+=4}$--}return Z},_=function(O,D,U,X){const Z=O[D+3],he=Math.pow(2,Z-128)/255;U[X+0]=O[D+0]*he,U[X+1]=O[D+1]*he,U[X+2]=O[D+2]*he,U[X+3]=1},w=function(O,D,U,X){const Z=O[D+3],he=Math.pow(2,Z-128)/255;U[X+0]=dh.toHalfFloat(Math.min(O[D+0]*he,65504)),U[X+1]=dh.toHalfFloat(Math.min(O[D+1]*he,65504)),U[X+2]=dh.toHalfFloat(Math.min(O[D+2]*he,65504)),U[X+3]=dh.toHalfFloat(1)},S=new Uint8Array(e);S.pos=0;const A=p(S),b=A.width,C=A.height,P=v(S.subarray(S.pos),b,C);let k,L,N;switch(this.type){case Cr:N=P.length/4;const O=new Float32Array(N*4);for(let U=0;U<N;U++)_(P,U*4,O,U*4);k=O,L=Cr;break;case Yr:N=P.length/4;const D=new Uint16Array(N*4);for(let U=0;U<N;U++)w(P,U*4,D,U*4);k=D,L=Yr;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:b,height:C,data:k,header:A.string,gamma:A.gamma,exposure:A.exposure,type:L}}setDataType(e){return this.type=e,this}load(e,t,i,r){function s(o,a){switch(o.type){case Cr:case Yr:"colorSpace"in o?o.colorSpace="srgb-linear":o.encoding=3e3,o.minFilter=Kn,o.magFilter=Kn,o.generateMipmaps=!1,o.flipY=!0;break}t&&t(o,a)}return super.load(e,s,i,r)}}const ev=Ub>=152;class $K extends sb{constructor(e){super(e),this.type=Yr}parse(e){const D=Math.pow(2.7182818,2.2);function U(z,K){for(var ve=0,G=0;G<65536;++G)(G==0||z[G>>3]&1<<(G&7))&&(K[ve++]=G);for(var ee=ve-1;ve<65536;)K[ve++]=0;return ee}function X(z){for(var K=0;K<16384;K++)z[K]={},z[K].len=0,z[K].lit=0,z[K].p=null}const Z={l:0,c:0,lc:0};function he(z,K,ve,G,ee){for(;ve<z;)K=K<<8|Tt(G,ee),ve+=8;ve-=z,Z.l=K>>ve&(1<<z)-1,Z.c=K,Z.lc=ve}const Q=new Array(59);function ue(z){for(var K=0;K<=58;++K)Q[K]=0;for(var K=0;K<65537;++K)Q[z[K]]+=1;for(var ve=0,K=58;K>0;--K){var G=ve+Q[K]>>1;Q[K]=ve,ve=G}for(var K=0;K<65537;++K){var ee=z[K];ee>0&&(z[K]=ee|Q[ee]++<<6)}}function re(z,K,ve,G,ee,ne,de){for(var le=ve,be=0,Le=0;ee<=ne;ee++){if(le.value-ve.value>G)return!1;he(6,be,Le,z,le);var Ge=Z.l;if(be=Z.c,Le=Z.lc,de[ee]=Ge,Ge==63){if(le.value-ve.value>G)throw"Something wrong with hufUnpackEncTable";he(8,be,Le,z,le);var Ce=Z.l+6;if(be=Z.c,Le=Z.lc,ee+Ce>ne+1)throw"Something wrong with hufUnpackEncTable";for(;Ce--;)de[ee++]=0;ee--}else if(Ge>=59){var Ce=Ge-59+2;if(ee+Ce>ne+1)throw"Something wrong with hufUnpackEncTable";for(;Ce--;)de[ee++]=0;ee--}}ue(de)}function ye(z){return z&63}function $(z){return z>>6}function oe(z,K,ve,G){for(;K<=ve;K++){var ee=$(z[K]),ne=ye(z[K]);if(ee>>ne)throw"Invalid table entry";if(ne>14){var de=G[ee>>ne-14];if(de.len)throw"Invalid table entry";if(de.lit++,de.p){var le=de.p;de.p=new Array(de.lit);for(var be=0;be<de.lit-1;++be)de.p[be]=le[be]}else de.p=new Array(1);de.p[de.lit-1]=K}else if(ne)for(var Le=0,be=1<<14-ne;be>0;be--){var de=G[(ee<<14-ne)+Le];if(de.len||de.p)throw"Invalid table entry";de.len=ne,de.lit=K,Le++}}return!0}const W={c:0,lc:0};function J(z,K,ve,G){z=z<<8|Tt(ve,G),K+=8,W.c=z,W.lc=K}const se={c:0,lc:0};function me(z,K,ve,G,ee,ne,de,le,be,Le){if(z==K){G<8&&(J(ve,G,ee,de),ve=W.c,G=W.lc),G-=8;var Ge=ve>>G,Ge=new Uint8Array([Ge])[0];if(be.value+Ge>Le)return!1;for(var Ce=le[be.value-1];Ge-- >0;)le[be.value++]=Ce}else if(be.value<Le)le[be.value++]=z;else return!1;se.c=ve,se.lc=G}function Se(z){return z&65535}function ke(z){var K=Se(z);return K>32767?K-65536:K}const Ie={a:0,b:0};function ze(z,K){var ve=ke(z),G=ke(K),ee=G,ne=ve+(ee&1)+(ee>>1),de=ne,le=ne-ee;Ie.a=de,Ie.b=le}function je(z,K){var ve=Se(z),G=Se(K),ee=ve-(G>>1)&65535,ne=G+ee-32768&65535;Ie.a=ne,Ie.b=ee}function at(z,K,ve,G,ee,ne,de){for(var le=de<16384,be=ve>ee?ee:ve,Le=1,Ge;Le<=be;)Le<<=1;for(Le>>=1,Ge=Le,Le>>=1;Le>=1;){for(var Ce=0,pt=Ce+ne*(ee-Ge),Ke=ne*Le,et=ne*Ge,It=G*Le,Jt=G*Ge,Ut,en,_t,ht;Ce<=pt;Ce+=et){for(var cn=Ce,sn=Ce+G*(ve-Ge);cn<=sn;cn+=Jt){var hn=cn+It,ei=cn+Ke,vi=ei+It;le?(ze(z[cn+K],z[ei+K]),Ut=Ie.a,_t=Ie.b,ze(z[hn+K],z[vi+K]),en=Ie.a,ht=Ie.b,ze(Ut,en),z[cn+K]=Ie.a,z[hn+K]=Ie.b,ze(_t,ht),z[ei+K]=Ie.a,z[vi+K]=Ie.b):(je(z[cn+K],z[ei+K]),Ut=Ie.a,_t=Ie.b,je(z[hn+K],z[vi+K]),en=Ie.a,ht=Ie.b,je(Ut,en),z[cn+K]=Ie.a,z[hn+K]=Ie.b,je(_t,ht),z[ei+K]=Ie.a,z[vi+K]=Ie.b)}if(ve&Le){var ei=cn+Ke;le?ze(z[cn+K],z[ei+K]):je(z[cn+K],z[ei+K]),Ut=Ie.a,z[ei+K]=Ie.b,z[cn+K]=Ut}}if(ee&Le)for(var cn=Ce,sn=Ce+G*(ve-Ge);cn<=sn;cn+=Jt){var hn=cn+It;le?ze(z[cn+K],z[hn+K]):je(z[cn+K],z[hn+K]),Ut=Ie.a,z[hn+K]=Ie.b,z[cn+K]=Ut}Ge=Le,Le>>=1}return Ce}function ut(z,K,ve,G,ee,ne,de,le,be,Le){for(var Ge=0,Ce=0,pt=le,Ke=Math.trunc(ee.value+(ne+7)/8);ee.value<Ke;)for(J(Ge,Ce,ve,ee),Ge=W.c,Ce=W.lc;Ce>=14;){var et=Ge>>Ce-14&16383,It=K[et];if(It.len)Ce-=It.len,me(It.lit,de,Ge,Ce,ve,G,ee,be,Le,pt),Ge=se.c,Ce=se.lc;else{if(!It.p)throw"hufDecode issues";var Jt;for(Jt=0;Jt<It.lit;Jt++){for(var Ut=ye(z[It.p[Jt]]);Ce<Ut&&ee.value<Ke;)J(Ge,Ce,ve,ee),Ge=W.c,Ce=W.lc;if(Ce>=Ut&&$(z[It.p[Jt]])==(Ge>>Ce-Ut&(1<<Ut)-1)){Ce-=Ut,me(It.p[Jt],de,Ge,Ce,ve,G,ee,be,Le,pt),Ge=se.c,Ce=se.lc;break}}if(Jt==It.lit)throw"hufDecode issues"}}var en=8-ne&7;for(Ge>>=en,Ce-=en;Ce>0;){var It=K[Ge<<14-Ce&16383];if(It.len)Ce-=It.len,me(It.lit,de,Ge,Ce,ve,G,ee,be,Le,pt),Ge=se.c,Ce=se.lc;else throw"hufDecode issues"}return!0}function gt(z,K,ve,G,ee,ne){var de={value:0},le=ve.value,be=xt(K,ve),Le=xt(K,ve);ve.value+=4;var Ge=xt(K,ve);if(ve.value+=4,be<0||be>=65537||Le<0||Le>=65537)throw"Something wrong with HUF_ENCSIZE";var Ce=new Array(65537),pt=new Array(16384);X(pt);var Ke=G-(ve.value-le);if(re(z,K,ve,Ke,be,Le,Ce),Ge>8*(G-(ve.value-le)))throw"Something wrong with hufUncompress";oe(Ce,be,Le,pt),ut(Ce,pt,z,K,ve,Ge,Le,ne,ee,de)}function fe(z,K,ve){for(var G=0;G<ve;++G)K[G]=z[K[G]]}function Fe(z){for(var K=1;K<z.length;K++){var ve=z[K-1]+z[K]-128;z[K]=ve}}function Be(z,K){for(var ve=0,G=Math.floor((z.length+1)/2),ee=0,ne=z.length-1;!(ee>ne||(K[ee++]=z[ve++],ee>ne));)K[ee++]=z[G++]}function $e(z){for(var K=z.byteLength,ve=new Array,G=0,ee=new DataView(z);K>0;){var ne=ee.getInt8(G++);if(ne<0){var de=-ne;K-=de+1;for(var le=0;le<de;le++)ve.push(ee.getUint8(G++))}else{var de=ne;K-=2;for(var be=ee.getUint8(G++),le=0;le<de+1;le++)ve.push(be)}}return ve}function Oe(z,K,ve,G,ee,ne){var hn=new DataView(ne.buffer),de=ve[z.idx[0]].width,le=ve[z.idx[0]].height,be=3,Le=Math.floor(de/8),Ge=Math.ceil(de/8),Ce=Math.ceil(le/8),pt=de-(Ge-1)*8,Ke=le-(Ce-1)*8,et={value:0},It=new Array(be),Jt=new Array(be),Ut=new Array(be),en=new Array(be),_t=new Array(be);for(let An=0;An<be;++An)_t[An]=K[z.idx[An]],It[An]=An<1?0:It[An-1]+Ge*Ce,Jt[An]=new Float32Array(64),Ut[An]=new Uint16Array(64),en[An]=new Uint16Array(Ge*64);for(let An=0;An<Ce;++An){var ht=8;An==Ce-1&&(ht=Ke);var cn=8;for(let _n=0;_n<Ge;++_n){_n==Ge-1&&(cn=pt);for(let In=0;In<be;++In)Ut[In].fill(0),Ut[In][0]=ee[It[In]++],xe(et,G,Ut[In]),ct(Ut[In],Jt[In]),j(Jt[In]);Y(Jt);for(let In=0;In<be;++In)we(Jt[In],en[In],_n*64)}let Pi=0;for(let _n=0;_n<be;++_n){const In=ve[z.idx[_n]].type;for(let ci=8*An;ci<8*An+ht;++ci){Pi=_t[_n][ci];for(let ps=0;ps<Le;++ps){const ir=ps*64+(ci&7)*8;hn.setUint16(Pi+0*In,en[_n][ir+0],!0),hn.setUint16(Pi+2*In,en[_n][ir+1],!0),hn.setUint16(Pi+4*In,en[_n][ir+2],!0),hn.setUint16(Pi+6*In,en[_n][ir+3],!0),hn.setUint16(Pi+8*In,en[_n][ir+4],!0),hn.setUint16(Pi+10*In,en[_n][ir+5],!0),hn.setUint16(Pi+12*In,en[_n][ir+6],!0),hn.setUint16(Pi+14*In,en[_n][ir+7],!0),Pi+=16*In}}if(Le!=Ge)for(let ci=8*An;ci<8*An+ht;++ci){const ps=_t[_n][ci]+8*Le*2*In,ir=Le*64+(ci&7)*8;for(let oa=0;oa<cn;++oa)hn.setUint16(ps+oa*2*In,en[_n][ir+oa],!0)}}}for(var sn=new Uint16Array(de),hn=new DataView(ne.buffer),ei=0;ei<be;++ei){ve[z.idx[ei]].decoded=!0;var vi=ve[z.idx[ei]].type;if(ve[ei].type==2)for(var ui=0;ui<le;++ui){const An=_t[ei][ui];for(var Pn=0;Pn<de;++Pn)sn[Pn]=hn.getUint16(An+Pn*2*vi,!0);for(var Pn=0;Pn<de;++Pn)hn.setFloat32(An+Pn*2*vi,Me(sn[Pn]),!0)}}}function xe(z,K,ve){for(var G,ee=1;ee<64;)G=K[z.value],G==65280?ee=64:G>>8==255?ee+=G&255:(ve[ee]=G,ee++),z.value++}function ct(z,K){K[0]=Me(z[0]),K[1]=Me(z[1]),K[2]=Me(z[5]),K[3]=Me(z[6]),K[4]=Me(z[14]),K[5]=Me(z[15]),K[6]=Me(z[27]),K[7]=Me(z[28]),K[8]=Me(z[2]),K[9]=Me(z[4]),K[10]=Me(z[7]),K[11]=Me(z[13]),K[12]=Me(z[16]),K[13]=Me(z[26]),K[14]=Me(z[29]),K[15]=Me(z[42]),K[16]=Me(z[3]),K[17]=Me(z[8]),K[18]=Me(z[12]),K[19]=Me(z[17]),K[20]=Me(z[25]),K[21]=Me(z[30]),K[22]=Me(z[41]),K[23]=Me(z[43]),K[24]=Me(z[9]),K[25]=Me(z[11]),K[26]=Me(z[18]),K[27]=Me(z[24]),K[28]=Me(z[31]),K[29]=Me(z[40]),K[30]=Me(z[44]),K[31]=Me(z[53]),K[32]=Me(z[10]),K[33]=Me(z[19]),K[34]=Me(z[23]),K[35]=Me(z[32]),K[36]=Me(z[39]),K[37]=Me(z[45]),K[38]=Me(z[52]),K[39]=Me(z[54]),K[40]=Me(z[20]),K[41]=Me(z[22]),K[42]=Me(z[33]),K[43]=Me(z[38]),K[44]=Me(z[46]),K[45]=Me(z[51]),K[46]=Me(z[55]),K[47]=Me(z[60]),K[48]=Me(z[21]),K[49]=Me(z[34]),K[50]=Me(z[37]),K[51]=Me(z[47]),K[52]=Me(z[50]),K[53]=Me(z[56]),K[54]=Me(z[59]),K[55]=Me(z[61]),K[56]=Me(z[35]),K[57]=Me(z[36]),K[58]=Me(z[48]),K[59]=Me(z[49]),K[60]=Me(z[57]),K[61]=Me(z[58]),K[62]=Me(z[62]),K[63]=Me(z[63])}function j(z){const K=.5*Math.cos(.7853975),ve=.5*Math.cos(3.14159/16),G=.5*Math.cos(3.14159/8),ee=.5*Math.cos(3*3.14159/16),ne=.5*Math.cos(5*3.14159/16),de=.5*Math.cos(3*3.14159/8),le=.5*Math.cos(7*3.14159/16);for(var be=new Array(4),Le=new Array(4),Ge=new Array(4),Ce=new Array(4),pt=0;pt<8;++pt){var Ke=pt*8;be[0]=G*z[Ke+2],be[1]=de*z[Ke+2],be[2]=G*z[Ke+6],be[3]=de*z[Ke+6],Le[0]=ve*z[Ke+1]+ee*z[Ke+3]+ne*z[Ke+5]+le*z[Ke+7],Le[1]=ee*z[Ke+1]-le*z[Ke+3]-ve*z[Ke+5]-ne*z[Ke+7],Le[2]=ne*z[Ke+1]-ve*z[Ke+3]+le*z[Ke+5]+ee*z[Ke+7],Le[3]=le*z[Ke+1]-ne*z[Ke+3]+ee*z[Ke+5]-ve*z[Ke+7],Ge[0]=K*(z[Ke+0]+z[Ke+4]),Ge[3]=K*(z[Ke+0]-z[Ke+4]),Ge[1]=be[0]+be[3],Ge[2]=be[1]-be[2],Ce[0]=Ge[0]+Ge[1],Ce[1]=Ge[3]+Ge[2],Ce[2]=Ge[3]-Ge[2],Ce[3]=Ge[0]-Ge[1],z[Ke+0]=Ce[0]+Le[0],z[Ke+1]=Ce[1]+Le[1],z[Ke+2]=Ce[2]+Le[2],z[Ke+3]=Ce[3]+Le[3],z[Ke+4]=Ce[3]-Le[3],z[Ke+5]=Ce[2]-Le[2],z[Ke+6]=Ce[1]-Le[1],z[Ke+7]=Ce[0]-Le[0]}for(var et=0;et<8;++et)be[0]=G*z[16+et],be[1]=de*z[16+et],be[2]=G*z[48+et],be[3]=de*z[48+et],Le[0]=ve*z[8+et]+ee*z[24+et]+ne*z[40+et]+le*z[56+et],Le[1]=ee*z[8+et]-le*z[24+et]-ve*z[40+et]-ne*z[56+et],Le[2]=ne*z[8+et]-ve*z[24+et]+le*z[40+et]+ee*z[56+et],Le[3]=le*z[8+et]-ne*z[24+et]+ee*z[40+et]-ve*z[56+et],Ge[0]=K*(z[et]+z[32+et]),Ge[3]=K*(z[et]-z[32+et]),Ge[1]=be[0]+be[3],Ge[2]=be[1]-be[2],Ce[0]=Ge[0]+Ge[1],Ce[1]=Ge[3]+Ge[2],Ce[2]=Ge[3]-Ge[2],Ce[3]=Ge[0]-Ge[1],z[0+et]=Ce[0]+Le[0],z[8+et]=Ce[1]+Le[1],z[16+et]=Ce[2]+Le[2],z[24+et]=Ce[3]+Le[3],z[32+et]=Ce[3]-Le[3],z[40+et]=Ce[2]-Le[2],z[48+et]=Ce[1]-Le[1],z[56+et]=Ce[0]-Le[0]}function Y(z){for(var K=0;K<64;++K){var ve=z[0][K],G=z[1][K],ee=z[2][K];z[0][K]=ve+1.5747*ee,z[1][K]=ve-.1873*G-.4682*ee,z[2][K]=ve+1.8556*G}}function we(z,K,ve){for(var G=0;G<64;++G)K[ve+G]=dh.toHalfFloat(Qe(z[G]))}function Qe(z){return z<=1?Math.sign(z)*Math.pow(Math.abs(z),2.2):Math.sign(z)*Math.pow(D,Math.abs(z)-1)}function Ye(z){return new DataView(z.array.buffer,z.offset.value,z.size)}function qe(z){var K=z.viewer.buffer.slice(z.offset.value,z.offset.value+z.size),ve=new Uint8Array($e(K)),G=new Uint8Array(ve.length);return Fe(ve),Be(ve,G),new DataView(G.buffer)}function yt(z){var K=z.array.slice(z.offset.value,z.offset.value+z.size),ve=ew(K),G=new Uint8Array(ve.length);return Fe(ve),Be(ve,G),new DataView(G.buffer)}function ft(z){for(var K=z.viewer,ve={value:z.offset.value},G=new Uint16Array(z.width*z.scanlineBlockSize*(z.channels*z.type)),ee=new Uint8Array(8192),ne=0,de=new Array(z.channels),le=0;le<z.channels;le++)de[le]={},de[le].start=ne,de[le].end=de[le].start,de[le].nx=z.width,de[le].ny=z.lines,de[le].size=z.type,ne+=de[le].nx*de[le].ny*de[le].size;var be=pe(K,ve),Le=pe(K,ve);if(Le>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(be<=Le)for(var le=0;le<Le-be+1;le++)ee[le+be]=ge(K,ve);var Ge=new Uint16Array(65536),Ce=U(ee,Ge),pt=xt(K,ve);gt(z.array,K,ve,pt,G,ne);for(var le=0;le<z.channels;++le)for(var Ke=de[le],et=0;et<de[le].size;++et)at(G,Ke.start+et,Ke.nx,Ke.size,Ke.ny,Ke.nx*Ke.size,Ce);fe(Ge,G,ne);for(var It=0,Jt=new Uint8Array(G.buffer.byteLength),Ut=0;Ut<z.lines;Ut++)for(var en=0;en<z.channels;en++){var Ke=de[en],_t=Ke.nx*Ke.size,ht=new Uint8Array(G.buffer,Ke.end*2,_t*2);Jt.set(ht,It),It+=_t*2,Ke.end+=_t}return new DataView(Jt.buffer)}function st(z){var K=z.array.slice(z.offset.value,z.offset.value+z.size),ve=ew(K);const G=z.lines*z.channels*z.width,ee=z.type==1?new Uint16Array(G):new Uint32Array(G);let ne=0,de=0;const le=new Array(4);for(let be=0;be<z.lines;be++)for(let Le=0;Le<z.channels;Le++){let Ge=0;switch(z.type){case 1:le[0]=ne,le[1]=le[0]+z.width,ne=le[1]+z.width;for(let Ce=0;Ce<z.width;++Ce){const pt=ve[le[0]++]<<8|ve[le[1]++];Ge+=pt,ee[de]=Ge,de++}break;case 2:le[0]=ne,le[1]=le[0]+z.width,le[2]=le[1]+z.width,ne=le[2]+z.width;for(let Ce=0;Ce<z.width;++Ce){const pt=ve[le[0]++]<<24|ve[le[1]++]<<16|ve[le[2]++]<<8;Ge+=pt,ee[de]=Ge,de++}break}}return new DataView(ee.buffer)}function Rt(z){var K=z.viewer,ve={value:z.offset.value},G=new Uint8Array(z.width*z.lines*(z.channels*z.type*2)),ee={version:He(K,ve),unknownUncompressedSize:He(K,ve),unknownCompressedSize:He(K,ve),acCompressedSize:He(K,ve),dcCompressedSize:He(K,ve),rleCompressedSize:He(K,ve),rleUncompressedSize:He(K,ve),rleRawSize:He(K,ve),totalAcUncompressedCount:He(K,ve),totalDcUncompressedCount:He(K,ve),acCompression:He(K,ve)};if(ee.version<2)throw"EXRLoader.parse: "+tn.compression+" version "+ee.version+" is unsupported";for(var ne=new Array,de=pe(K,ve)-2;de>0;){var le=Ot(K.buffer,ve),be=ge(K,ve),Le=be>>2&3,Ge=(be>>4)-1,Ce=new Int8Array([Ge])[0],pt=ge(K,ve);ne.push({name:le,index:Ce,type:pt,compression:Le}),de-=le.length+3}for(var Ke=tn.channels,et=new Array(z.channels),It=0;It<z.channels;++It){var Jt=et[It]={},Ut=Ke[It];Jt.name=Ut.name,Jt.compression=0,Jt.decoded=!1,Jt.type=Ut.pixelType,Jt.pLinear=Ut.pLinear,Jt.width=z.width,Jt.height=z.lines}for(var en={idx:new Array(3)},_t=0;_t<z.channels;++_t)for(var Jt=et[_t],It=0;It<ne.length;++It){var ht=ne[It];Jt.name==ht.name&&(Jt.compression=ht.compression,ht.index>=0&&(en.idx[ht.index]=_t),Jt.offset=_t)}if(ee.acCompressedSize>0)switch(ee.acCompression){case 0:var hn=new Uint16Array(ee.totalAcUncompressedCount);gt(z.array,K,ve,ee.acCompressedSize,hn,ee.totalAcUncompressedCount);break;case 1:var cn=z.array.slice(ve.value,ve.value+ee.totalAcUncompressedCount),sn=ew(cn),hn=new Uint16Array(sn.buffer);ve.value+=ee.totalAcUncompressedCount;break}if(ee.dcCompressedSize>0){var ei={array:z.array,offset:ve,size:ee.dcCompressedSize},vi=new Uint16Array(yt(ei).buffer);ve.value+=ee.dcCompressedSize}if(ee.rleRawSize>0){var cn=z.array.slice(ve.value,ve.value+ee.rleCompressedSize),sn=ew(cn),ui=$e(sn.buffer);ve.value+=ee.rleCompressedSize}for(var Pn=0,An=new Array(et.length),It=0;It<An.length;++It)An[It]=new Array;for(var Pi=0;Pi<z.lines;++Pi)for(var _n=0;_n<et.length;++_n)An[_n].push(Pn),Pn+=et[_n].width*z.type*2;Oe(en,An,et,hn,vi,G);for(var It=0;It<et.length;++It){var Jt=et[It];if(!Jt.decoded)switch(Jt.compression){case 2:for(var In=0,ci=0,Pi=0;Pi<z.lines;++Pi){for(var ps=An[It][In],ir=0;ir<Jt.width;++ir){for(var oa=0;oa<2*Jt.type;++oa)G[ps++]=ui[ci+oa*Jt.width*Jt.height];ci++}In++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(G.buffer)}function Ot(z,K){for(var ve=new Uint8Array(z),G=0;ve[K.value+G]!=0;)G+=1;var ee=new TextDecoder().decode(ve.slice(K.value,K.value+G));return K.value=K.value+G+1,ee}function Xe(z,K,ve){var G=new TextDecoder().decode(new Uint8Array(z).slice(K.value,K.value+ve));return K.value=K.value+ve,G}function fn(z,K){var ve=Kt(z,K),G=xt(z,K);return[ve,G]}function Ht(z,K){var ve=xt(z,K),G=xt(z,K);return[ve,G]}function Kt(z,K){var ve=z.getInt32(K.value,!0);return K.value=K.value+4,ve}function xt(z,K){var ve=z.getUint32(K.value,!0);return K.value=K.value+4,ve}function Tt(z,K){var ve=z[K.value];return K.value=K.value+1,ve}function ge(z,K){var ve=z.getUint8(K.value);return K.value=K.value+1,ve}const He=function(z,K){let ve;return"getBigInt64"in DataView.prototype?ve=Number(z.getBigInt64(K.value,!0)):ve=z.getUint32(K.value+4,!0)+Number(z.getUint32(K.value,!0)<<32),K.value+=8,ve};function rt(z,K){var ve=z.getFloat32(K.value,!0);return K.value+=4,ve}function Ze(z,K){return dh.toHalfFloat(rt(z,K))}function Me(z){var K=(z&31744)>>10,ve=z&1023;return(z>>15?-1:1)*(K?K===31?ve?NaN:1/0:Math.pow(2,K-15)*(1+ve/1024):6103515625e-14*(ve/1024))}function pe(z,K){var ve=z.getUint16(K.value,!0);return K.value+=2,ve}function tt(z,K){return Me(pe(z,K))}function dt(z,K,ve,G){for(var ee=ve.value,ne=[];ve.value<ee+G-1;){var de=Ot(K,ve),le=Kt(z,ve),be=ge(z,ve);ve.value+=3;var Le=Kt(z,ve),Ge=Kt(z,ve);ne.push({name:de,pixelType:le,pLinear:be,xSampling:Le,ySampling:Ge})}return ve.value+=1,ne}function zt(z,K){var ve=rt(z,K),G=rt(z,K),ee=rt(z,K),ne=rt(z,K),de=rt(z,K),le=rt(z,K),be=rt(z,K),Le=rt(z,K);return{redX:ve,redY:G,greenX:ee,greenY:ne,blueX:de,blueY:le,whiteX:be,whiteY:Le}}function Pt(z,K){var ve=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],G=ge(z,K);return ve[G]}function rn(z,K){var ve=xt(z,K),G=xt(z,K),ee=xt(z,K),ne=xt(z,K);return{xMin:ve,yMin:G,xMax:ee,yMax:ne}}function gn(z,K){var ve=["INCREASING_Y"],G=ge(z,K);return ve[G]}function Ct(z,K){var ve=rt(z,K),G=rt(z,K);return[ve,G]}function Mt(z,K){var ve=rt(z,K),G=rt(z,K),ee=rt(z,K);return[ve,G,ee]}function Dt(z,K,ve,G,ee){if(G==="string"||G==="stringvector"||G==="iccProfile")return Xe(K,ve,ee);if(G==="chlist")return dt(z,K,ve,ee);if(G==="chromaticities")return zt(z,ve);if(G==="compression")return Pt(z,ve);if(G==="box2i")return rn(z,ve);if(G==="lineOrder")return gn(z,ve);if(G==="float")return rt(z,ve);if(G==="v2f")return Ct(z,ve);if(G==="v3f")return Mt(z,ve);if(G==="int")return Kt(z,ve);if(G==="rational")return fn(z,ve);if(G==="timecode")return Ht(z,ve);if(G==="preview")return ve.value+=ee,"skipped";ve.value+=ee}function ot(z,K,ve){const G={};if(z.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";G.version=z.getUint8(4);const ee=z.getUint8(5);G.spec={singleTile:!!(ee&2),longName:!!(ee&4),deepFormat:!!(ee&8),multiPart:!!(ee&16)},ve.value=8;for(var ne=!0;ne;){var de=Ot(K,ve);if(de==0)ne=!1;else{var le=Ot(K,ve),be=xt(z,ve),Le=Dt(z,K,ve,le,be);Le===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${le}'.`):G[de]=Le}}if((ee&-5)!=0)throw console.error("EXRHeader:",G),"THREE.EXRLoader: provided file is currently unsupported.";return G}function qt(z,K,ve,G,ee){const ne={size:0,viewer:K,array:ve,offset:G,width:z.dataWindow.xMax-z.dataWindow.xMin+1,height:z.dataWindow.yMax-z.dataWindow.yMin+1,channels:z.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:z.channels[0].pixelType,uncompress:null,getter:null,format:null,[ev?"colorSpace":"encoding"]:null};switch(z.compression){case"NO_COMPRESSION":ne.lines=1,ne.uncompress=Ye;break;case"RLE_COMPRESSION":ne.lines=1,ne.uncompress=qe;break;case"ZIPS_COMPRESSION":ne.lines=1,ne.uncompress=yt;break;case"ZIP_COMPRESSION":ne.lines=16,ne.uncompress=yt;break;case"PIZ_COMPRESSION":ne.lines=32,ne.uncompress=ft;break;case"PXR24_COMPRESSION":ne.lines=16,ne.uncompress=st;break;case"DWAA_COMPRESSION":ne.lines=32,ne.uncompress=Rt;break;case"DWAB_COMPRESSION":ne.lines=256,ne.uncompress=Rt;break;default:throw"EXRLoader.parse: "+z.compression+" is unsupported"}if(ne.scanlineBlockSize=ne.lines,ne.type==1)switch(ee){case Cr:ne.getter=tt,ne.inputSize=2;break;case Yr:ne.getter=pe,ne.inputSize=2;break}else if(ne.type==2)switch(ee){case Cr:ne.getter=rt,ne.inputSize=4;break;case Yr:ne.getter=Ze,ne.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+ne.type+" for "+z.compression+".";ne.blockCount=(z.dataWindow.yMax+1)/ne.scanlineBlockSize;for(var de=0;de<ne.blockCount;de++)He(K,G);ne.outputChannels=ne.channels==3?4:ne.channels;const le=ne.width*ne.height*ne.outputChannels;switch(ee){case Cr:ne.byteArray=new Float32Array(le),ne.channels<ne.outputChannels&&ne.byteArray.fill(1,0,le);break;case Yr:ne.byteArray=new Uint16Array(le),ne.channels<ne.outputChannels&&ne.byteArray.fill(15360,0,le);break;default:console.error("THREE.EXRLoader: unsupported type: ",ee);break}return ne.bytesPerLine=ne.width*ne.inputSize*ne.channels,ne.outputChannels==4?ne.format=Mr:ne.format=CC,ev?ne.colorSpace="srgb-linear":ne.encoding=3e3,ne}const Vt=new DataView(e),jt=new Uint8Array(e),On={value:0},tn=ot(Vt,e,On),kt=qt(tn,Vt,jt,On,this.type),Ai={value:0},jn={R:0,G:1,B:2,A:3,Y:0};for(let z=0;z<kt.height/kt.scanlineBlockSize;z++){const K=xt(Vt,On);kt.size=xt(Vt,On),kt.lines=K+kt.scanlineBlockSize>kt.height?kt.height-K:kt.scanlineBlockSize;const G=kt.size<kt.lines*kt.bytesPerLine?kt.uncompress(kt):Ye(kt);On.value+=kt.size;for(let ee=0;ee<kt.scanlineBlockSize;ee++){const ne=ee+z*kt.scanlineBlockSize;if(ne>=kt.height)break;for(let de=0;de<kt.channels;de++){const le=jn[tn.channels[de].name];for(let be=0;be<kt.width;be++){Ai.value=(ee*(kt.channels*kt.width)+de*kt.width+be)*kt.inputSize;const Le=(kt.height-1-ne)*(kt.width*kt.outputChannels)+be*kt.outputChannels+le;kt.byteArray[Le]=kt.getter(G,Ai)}}}}return{header:tn,width:kt.width,height:kt.height,data:kt.byteArray,format:kt.format,[ev?"colorSpace":"encoding"]:kt[ev?"colorSpace":"encoding"],type:this.type}}setDataType(e){return this.type=e,this}load(e,t,i,r){function s(o,a){ev?o.colorSpace=a.colorSpace:o.encoding=a.encoding,o.minFilter=Kn,o.magFilter=Kn,o.generateMipmaps=!1,o.flipY=!1,t&&t(o,a)}return super.load(e,s,i,r)}}const FT=new WeakMap;class jK extends hs{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,i,r){const s=new ds(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,o=>{const a={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(o,a).then(t).catch(r)},i,r)}decodeDracoFile(e,t,i,r){const s={attributeIDs:i||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!i};this.decodeGeometry(e,s).then(t)}decodeGeometry(e,t){for(const l in t.attributeTypes){const u=t.attributeTypes[l];u.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[l]=u.name)}const i=JSON.stringify(t);if(FT.has(e)){const l=FT.get(e);if(l.key===i)return l.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r;const s=this.workerNextTaskID++,o=e.byteLength,a=this._getWorker(s,o).then(l=>(r=l,new Promise((u,d)=>{r._callbacks[s]={resolve:u,reject:d},r.postMessage({type:"decode",id:s,taskConfig:t,buffer:e},[e])}))).then(l=>this._createGeometry(l.geometry));return a.catch(()=>!0).then(()=>{r&&s&&this._releaseTask(r,s)}),FT.set(e,{key:i,promise:a}),a}_createGeometry(e){const t=new Tn;e.index&&t.setIndex(new Xn(e.index.array,1));for(let i=0;i<e.attributes.length;i++){const r=e.attributes[i],s=r.name,o=r.array,a=r.itemSize;t.setAttribute(s,new Xn(o,a))}return t}_loadLibrary(e,t){const i=new ds(this.manager);return i.setPath(this.decoderPath),i.setResponseType(t),i.setWithCredentials(this.withCredentials),new Promise((r,s)=>{i.load(e,r,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(i=>{const r=i[0];e||(this.decoderConfig.wasmBinary=i[1]);const s=eQ.toString(),o=["/* draco decoder */",r,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([o]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const r=new Worker(this.workerSourceURL);r._callbacks={},r._taskCosts={},r._taskLoad=0,r.postMessage({type:"init",decoderConfig:this.decoderConfig}),r.onmessage=function(s){const o=s.data;switch(o.type){case"decode":r._callbacks[o.id].resolve(o);break;case"error":r._callbacks[o.id].reject(o);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+o.type+'"')}},this.workerPool.push(r)}else this.workerPool.sort(function(r,s){return r._taskLoad>s._taskLoad?-1:1});const i=this.workerPool[this.workerPool.length-1];return i._taskCosts[e]=t,i._taskLoad+=t,i})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function eQ(){let n,e;onmessage=function(o){const a=o.data;switch(a.type){case"init":n=a.decoderConfig,e=new Promise(function(d){n.onModuleLoaded=function(h){d({draco:h})},DracoDecoderModule(n)});break;case"decode":const l=a.buffer,u=a.taskConfig;e.then(d=>{const h=d.draco,p=new h.Decoder,v=new h.DecoderBuffer;v.Init(new Int8Array(l),l.byteLength);try{const _=t(h,p,v,u),w=_.attributes.map(S=>S.array.buffer);_.index&&w.push(_.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:_},w)}catch(_){console.error(_),self.postMessage({type:"error",id:a.id,error:_.message})}finally{h.destroy(v),h.destroy(p)}});break}};function t(o,a,l,u){const d=u.attributeIDs,h=u.attributeTypes;let p,v;const _=a.GetEncodedGeometryType(l);if(_===o.TRIANGULAR_MESH)p=new o.Mesh,v=a.DecodeBufferToMesh(l,p);else if(_===o.POINT_CLOUD)p=new o.PointCloud,v=a.DecodeBufferToPointCloud(l,p);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!v.ok()||p.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+v.error_msg());const w={index:null,attributes:[]};for(const S in d){const A=self[h[S]];let b,C;if(u.useUniqueIDs)C=d[S],b=a.GetAttributeByUniqueId(p,C);else{if(C=a.GetAttributeId(p,o[d[S]]),C===-1)continue;b=a.GetAttribute(p,C)}w.attributes.push(r(o,a,p,S,A,b))}return _===o.TRIANGULAR_MESH&&(w.index=i(o,a,p)),o.destroy(p),w}function i(o,a,l){const d=l.num_faces()*3,h=d*4,p=o._malloc(h);a.GetTrianglesUInt32Array(l,h,p);const v=new Uint32Array(o.HEAPF32.buffer,p,d).slice();return o._free(p),{array:v,itemSize:1}}function r(o,a,l,u,d,h){const p=h.num_components(),_=l.num_points()*p,w=_*d.BYTES_PER_ELEMENT,S=s(o,d),A=o._malloc(w);a.GetAttributeDataArrayForAllPoints(l,h,S,w,A);const b=new d(o.HEAPF32.buffer,A,_).slice();return o._free(A),{name:u,array:b,itemSize:p}}function s(o,a){switch(a){case Float32Array:return o.DT_FLOAT32;case Int8Array:return o.DT_INT8;case Int16Array:return o.DT_INT16;case Int32Array:return o.DT_INT32;case Uint8Array:return o.DT_UINT8;case Uint16Array:return o.DT_UINT16;case Uint32Array:return o.DT_UINT32}}}let nw;const UT=()=>{if(nw)return nw;const n="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",e="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),i=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let r=n;WebAssembly.validate(t)&&(r=e);let s;const o=WebAssembly.instantiate(a(r),{}).then(h=>{s=h.instance,s.exports.__wasm_call_ctors()});function a(h){const p=new Uint8Array(h.length);for(let _=0;_<h.length;++_){const w=h.charCodeAt(_);p[_]=w>96?w-71:w>64?w-65:w>47?w+4:w>46?63:62}let v=0;for(let _=0;_<h.length;++_)p[v++]=p[_]<60?i[p[_]]:(p[_]-60)*64+p[++_];return p.buffer.slice(0,v)}function l(h,p,v,_,w,S){const A=s.exports.sbrk,b=v+3&-4,C=A(b*_),P=A(w.length),k=new Uint8Array(s.exports.memory.buffer);k.set(w,P);const L=h(C,v,_,P,w.length);if(L===0&&S&&S(C,b,_),p.set(k.subarray(C,C+v*_)),A(C-A(0)),L!==0)throw new Error(`Malformed buffer data: ${L}`)}const u={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},d={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return nw={ready:o,supported:!0,decodeVertexBuffer(h,p,v,_,w){l(s.exports.meshopt_decodeVertexBuffer,h,p,v,_,s.exports[u[w]])},decodeIndexBuffer(h,p,v,_){l(s.exports.meshopt_decodeIndexBuffer,h,p,v,_)},decodeIndexSequence(h,p,v,_){l(s.exports.meshopt_decodeIndexSequence,h,p,v,_)},decodeGltfBuffer(h,p,v,_,w,S){l(s.exports[d[w]],h,p,v,_,s.exports[u[S]])}},nw},tQ=()=>parseInt(Rg.replace(/\D+/g,"")),nQ=tQ();let iw=null,CU="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function bU(n=!0,e=!0,t){return i=>{t&&t(i),n&&(iw||(iw=new jK),iw.setDecoderPath(typeof n=="string"?n:CU),i.setDRACOLoader(iw)),e&&i.setMeshoptDecoder(typeof UT=="function"?UT():UT)}}const ka=(n,e,t,i)=>eu(Ob,n,bU(e,t,i));ka.preload=(n,e,t,i)=>eu.preload(Ob,n,bU(e,t,i));ka.clear=n=>eu.clear(Ob,n);ka.setDecoderPath=n=>{CU=n};const RU=ie.forwardRef(({makeDefault:n,camera:e,regress:t,domElement:i,enableDamping:r=!0,keyEvents:s=!1,onChange:o,onStart:a,onEnd:l,...u},d)=>{const h=Ar(L=>L.invalidate),p=Ar(L=>L.camera),v=Ar(L=>L.gl),_=Ar(L=>L.events),w=Ar(L=>L.setEvents),S=Ar(L=>L.set),A=Ar(L=>L.get),b=Ar(L=>L.performance),C=e||p,P=i||_.connected||v.domElement,k=ie.useMemo(()=>new hK(C),[C]);return cc(()=>{k.enabled&&k.update()},-1),ie.useEffect(()=>(s&&k.connect(s===!0?P:s),k.connect(P),()=>void k.dispose()),[s,P,t,k,h]),ie.useEffect(()=>{const L=D=>{h(),t&&b.regress(),o&&o(D)},N=D=>{a&&a(D)},O=D=>{l&&l(D)};return k.addEventListener("change",L),k.addEventListener("start",N),k.addEventListener("end",O),()=>{k.removeEventListener("start",N),k.removeEventListener("end",O),k.removeEventListener("change",L)}},[o,a,l,k,h,w]),ie.useEffect(()=>{if(n){const L=A().controls;return S({controls:k}),()=>S({controls:L})}},[n,k]),ie.createElement("primitive",Nd({ref:d,object:k,enableDamping:r},u))}),PU=ie.forwardRef(function({children:e,disable:t,disableX:i,disableY:r,disableZ:s,left:o,right:a,top:l,bottom:u,front:d,back:h,onCentered:p,precise:v=!0,cacheKey:_=0,...w},S){const A=ie.useRef(null),b=ie.useRef(null),C=ie.useRef(null);return ie.useLayoutEffect(()=>{b.current.matrixWorld.identity();const P=new cs().setFromObject(C.current,v),k=new te,L=new Qr,N=P.max.x-P.min.x,O=P.max.y-P.min.y,D=P.max.z-P.min.z;P.getCenter(k),P.getBoundingSphere(L);const U=l?O/2:u?-O/2:0,X=o?-N/2:a?N/2:0,Z=d?D/2:h?-D/2:0;b.current.position.set(t||i?0:-k.x+X,t||r?0:-k.y+U,t||s?0:-k.z+Z),typeof p<"u"&&p({parent:A.current.parent,container:A.current,width:N,height:O,depth:D,boundingBox:P,boundingSphere:L,center:k,verticalAlignment:U,horizontalAlignment:X,depthAlignment:Z})},[_,p,l,o,d,t,i,r,s,v,a,u,h]),ie.useImperativeHandle(S,()=>A.current,[]),ie.createElement("group",Nd({ref:A},w),ie.createElement("group",{ref:b},ie.createElement("group",{ref:C},e)))}),iQ=3e3,rQ=3001,sQ=ie.forwardRef(({children:n,enabled:e=!0,speed:t=1,rotationIntensity:i=1,floatIntensity:r=1,floatingRange:s=[-.1,.1],autoInvalidate:o=!1,...a},l)=>{const u=ie.useRef(null);ie.useImperativeHandle(l,()=>u.current,[]);const d=ie.useRef(Math.random()*1e4);return cc(h=>{var p,v;if(!e||t===0)return;o&&h.invalidate();const _=d.current+h.clock.elapsedTime;u.current.rotation.x=Math.cos(_/4*t)/8*i,u.current.rotation.y=Math.sin(_/4*t)/8*i,u.current.rotation.z=Math.sin(_/4*t)/20*i;let w=Math.sin(_/4*t)/10;w=ad.mapLinear(w,-.1,.1,(p=s==null?void 0:s[0])!==null&&p!==void 0?p:-.1,(v=s==null?void 0:s[1])!==null&&v!==void 0?v:.1),u.current.position.y=w*r,u.current.updateMatrix()}),ie.createElement("group",a,ie.createElement("group",{ref:u,matrixAutoUpdate:!1},n))}),IU=(n,e,t)=>{let i;switch(n){case Qo:i=new Uint8ClampedArray(e*t*4);break;case Yr:i=new Uint16Array(e*t*4);break;case zl:i=new Uint32Array(e*t*4);break;case SC:i=new Int8Array(e*t*4);break;case EC:i=new Int16Array(e*t*4);break;case qA:i=new Int32Array(e*t*4);break;case Cr:i=new Float32Array(e*t*4);break;default:throw new Error("Unsupported data type")}return i};let rw;const oQ=(n,e,t,i)=>{if(rw!==void 0)return rw;const r=new no(1,1,i);e.setRenderTarget(r);const s=new bi(new zd,new Ao({color:16777215}));e.render(s,t),e.setRenderTarget(null);const o=IU(n,r.width,r.height);return e.readRenderTargetPixels(r,0,0,r.width,r.height,o),r.dispose(),s.geometry.dispose(),s.material.dispose(),rw=o[0]!==0,rw};class Hb{constructor(e){si(this,"_renderer");si(this,"_rendererIsDisposable",!1);si(this,"_material");si(this,"_scene");si(this,"_camera");si(this,"_quad");si(this,"_renderTarget");si(this,"_width");si(this,"_height");si(this,"_type");si(this,"_colorSpace");si(this,"_supportsReadPixels",!0);si(this,"render",()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(e){throw this._renderer.setRenderTarget(null),e}this._renderer.setRenderTarget(null)});var i,r,s,o,a,l,u,d,h,p,v,_,w,S,A,b;this._width=e.width,this._height=e.height,this._type=e.type,this._colorSpace=e.colorSpace;const t={format:Mr,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:((i=e.renderTargetOptions)==null?void 0:i.anisotropy)!==void 0?(r=e.renderTargetOptions)==null?void 0:r.anisotropy:1,generateMipmaps:((s=e.renderTargetOptions)==null?void 0:s.generateMipmaps)!==void 0?(o=e.renderTargetOptions)==null?void 0:o.generateMipmaps:!1,magFilter:((a=e.renderTargetOptions)==null?void 0:a.magFilter)!==void 0?(l=e.renderTargetOptions)==null?void 0:l.magFilter:Kn,minFilter:((u=e.renderTargetOptions)==null?void 0:u.minFilter)!==void 0?(d=e.renderTargetOptions)==null?void 0:d.minFilter:Kn,samples:((h=e.renderTargetOptions)==null?void 0:h.samples)!==void 0?(p=e.renderTargetOptions)==null?void 0:p.samples:void 0,wrapS:((v=e.renderTargetOptions)==null?void 0:v.wrapS)!==void 0?(_=e.renderTargetOptions)==null?void 0:_.wrapS:Bi,wrapT:((w=e.renderTargetOptions)==null?void 0:w.wrapT)!==void 0?(S=e.renderTargetOptions)==null?void 0:S.wrapT:Bi};if(this._material=e.material,e.renderer?this._renderer=e.renderer:(this._renderer=Hb.instantiateRenderer(),this._rendererIsDisposable=!0),this._scene=new Fy,this._camera=new Xl,this._camera.position.set(0,0,10),this._camera.left=-.5,this._camera.right=.5,this._camera.top=.5,this._camera.bottom=-.5,this._camera.updateProjectionMatrix(),!oQ(this._type,this._renderer,this._camera,t)){let C;switch(this._type){case Yr:C=this._renderer.extensions.has("EXT_color_buffer_float")?Cr:void 0;break}C!==void 0?(console.warn(`This browser does not support reading pixels from ${this._type} RenderTargets, switching to ${Cr}`),this._type=C):(this._supportsReadPixels=!1,console.warn("This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown"))}this._quad=new bi(new zd,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new no(this.width,this.height,t),this._renderTarget.texture.mapping=((A=e.renderTargetOptions)==null?void 0:A.mapping)!==void 0?(b=e.renderTargetOptions)==null?void 0:b.mapping:Pd}static instantiateRenderer(){const e=new ZA;return e.setSize(128,128),e}toArray(){if(!this._supportsReadPixels)throw new Error("Can't read pixels in this browser");const e=IU(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,e),e}toDataTexture(e){const t=new Sd(this.toArray(),this.width,this.height,Mr,this._type,(e==null?void 0:e.mapping)||Pd,(e==null?void 0:e.wrapS)||Bi,(e==null?void 0:e.wrapT)||Bi,(e==null?void 0:e.magFilter)||Kn,(e==null?void 0:e.minFilter)||Kn,(e==null?void 0:e.anisotropy)||1,jo);return t.generateMipmaps=(e==null?void 0:e.generateMipmaps)!==void 0?e==null?void 0:e.generateMipmaps:!1,t}disposeOnDemandRenderer(){this._renderer.setRenderTarget(null),this._rendererIsDisposable&&(this._renderer.dispose(),this._renderer.forceContextLoss())}dispose(e){this.disposeOnDemandRenderer(),e&&this.renderTarget.dispose(),this.material instanceof Ds&&Object.values(this.material.uniforms).forEach(t=>{t.value instanceof hi&&t.value.dispose()}),Object.values(this.material).forEach(t=>{t instanceof hi&&t.dispose()}),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(e){this._width=e,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(e){this._height=e,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(e){this._renderTarget=e,this._width=e.width,this._height=e.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}class DU extends Error{}class LU extends Error{}const tv=(n,e,t)=>{const i=new RegExp(`${e}="([^"]*)"`,"i").exec(n);if(i)return i[1];const r=new RegExp(`<${e}[^>]*>([\\s\\S]*?)</${e}>`,"i").exec(n);if(r){const s=r[1].match(/<rdf:li>([^<]*)<\/rdf:li>/g);return s&&s.length===3?s.map(o=>o.replace(/<\/?rdf:li>/g,"")):r[1].trim()}if(t!==void 0)return t;throw new Error(`Can't find ${e} in gainmap metadata`)},aQ=n=>{let e;typeof TextDecoder<"u"?e=new TextDecoder().decode(n):e=n.toString();let t=e.indexOf("<x:xmpmeta");for(;t!==-1;){const i=e.indexOf("x:xmpmeta>",t),r=e.slice(t,i+10);try{const s=tv(r,"hdrgm:GainMapMin","0"),o=tv(r,"hdrgm:GainMapMax"),a=tv(r,"hdrgm:Gamma","1"),l=tv(r,"hdrgm:OffsetSDR","0.015625"),u=tv(r,"hdrgm:OffsetHDR","0.015625"),d=/hdrgm:HDRCapacityMin="([^"]*)"/.exec(r),h=d?d[1]:"0",p=/hdrgm:HDRCapacityMax="([^"]*)"/.exec(r);if(!p)throw new Error("Incomplete gainmap metadata");const v=p[1];return{gainMapMin:Array.isArray(s)?s.map(_=>parseFloat(_)):[parseFloat(s),parseFloat(s),parseFloat(s)],gainMapMax:Array.isArray(o)?o.map(_=>parseFloat(_)):[parseFloat(o),parseFloat(o),parseFloat(o)],gamma:Array.isArray(a)?a.map(_=>parseFloat(_)):[parseFloat(a),parseFloat(a),parseFloat(a)],offsetSdr:Array.isArray(l)?l.map(_=>parseFloat(_)):[parseFloat(l),parseFloat(l),parseFloat(l)],offsetHdr:Array.isArray(u)?u.map(_=>parseFloat(_)):[parseFloat(u),parseFloat(u),parseFloat(u)],hdrCapacityMin:parseFloat(h),hdrCapacityMax:parseFloat(v)}}catch{}t=e.indexOf("<x:xmpmeta",i)}};class lQ{constructor(e){si(this,"options");this.options={debug:e&&e.debug!==void 0?e.debug:!1,extractFII:e&&e.extractFII!==void 0?e.extractFII:!0,extractNonFII:e&&e.extractNonFII!==void 0?e.extractNonFII:!0}}extract(e){return new Promise((t,i)=>{const r=this.options.debug,s=new DataView(e.buffer);if(s.getUint16(0)!==65496){i(new Error("Not a valid jpeg"));return}const o=s.byteLength;let a=2,l=0,u;for(;a<o;){if(++l>250){i(new Error(`Found no marker after ${l} loops `));return}if(s.getUint8(a)!==255){i(new Error(`Not a valid marker at offset 0x${a.toString(16)}, found: 0x${s.getUint8(a).toString(16)}`));return}if(u=s.getUint8(a+1),r&&console.log(`Marker: ${u.toString(16)}`),u===226){r&&console.log("Found APP2 marker (0xffe2)");const d=a+4;if(s.getUint32(d)===1297106432){const h=d+4;let p;if(s.getUint16(h)===18761)p=!1;else if(s.getUint16(h)===19789)p=!0;else{i(new Error("No valid endianness marker found in TIFF header"));return}if(s.getUint16(h+2,!p)!==42){i(new Error("Not valid TIFF data! (no 0x002A marker)"));return}const v=s.getUint32(h+4,!p);if(v<8){i(new Error("Not valid TIFF data! (First offset less than 8)"));return}const _=h+v,w=s.getUint16(_,!p),S=_+2;let A=0;for(let k=S;k<S+12*w;k+=12)s.getUint16(k,!p)===45057&&(A=s.getUint32(k+8,!p));const C=_+2+w*12+4,P=[];for(let k=C;k<C+A*16;k+=16){const L={MPType:s.getUint32(k,!p),size:s.getUint32(k+4,!p),dataOffset:s.getUint32(k+8,!p),dependantImages:s.getUint32(k+12,!p),start:-1,end:-1,isFII:!1};L.dataOffset?(L.start=h+L.dataOffset,L.isFII=!1):(L.start=0,L.isFII=!0),L.end=L.start+L.size,P.push(L)}if(this.options.extractNonFII&&P.length){const k=new Blob([s]),L=[];for(const N of P){if(N.isFII&&!this.options.extractFII)continue;const O=k.slice(N.start,N.end+1,"image/jpeg");L.push(O)}t(L)}}}a+=2+s.getUint16(a+2)}})}}const uQ=async n=>{const e=aQ(n);if(!e)throw new LU("Gain map XMP metadata not found");const i=await new lQ({extractFII:!0,extractNonFII:!0}).extract(n);if(i.length!==2)throw new DU("Gain map recovery image not found");return{sdr:new Uint8Array(await i[0].arrayBuffer()),gainMap:new Uint8Array(await i[1].arrayBuffer()),metadata:e}},ND=n=>new Promise((e,t)=>{const i=document.createElement("img");i.onload=()=>{e(i)},i.onerror=r=>{t(r)},i.src=URL.createObjectURL(n)});class cQ extends hs{constructor(t,i){super(i);si(this,"_renderer");si(this,"_renderTargetOptions");si(this,"_internalLoadingManager");si(this,"_config");this._config=t,t.renderer&&(this._renderer=t.renderer),this._internalLoadingManager=new gS}setRenderer(t){return this._renderer=t,this}setRenderTargetOptions(t){return this._renderTargetOptions=t,this}prepareQuadRenderer(){this._renderer||console.warn("WARNING: A Renderer was not passed to this Loader constructor or in setRenderer, the result of this Loader will need to be converted to a Data Texture with toDataTexture() before you can use it in your renderer.");const t=this._config.createMaterial({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new hi,sdr:new hi});return this._config.createQuadRenderer({width:16,height:16,type:Yr,colorSpace:jo,material:t,renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async processImages(t,i,r){const s=i?new Blob([i],{type:"image/jpeg"}):void 0,o=new Blob([t],{type:"image/jpeg"});let a,l,u=!1;if(typeof createImageBitmap>"u"){const d=await Promise.all([s?ND(s):Promise.resolve(void 0),ND(o)]);l=d[0],a=d[1],u=r==="flipY"}else{const d=await Promise.all([s?createImageBitmap(s,{imageOrientation:r||"flipY"}):Promise.resolve(void 0),createImageBitmap(o,{imageOrientation:r||"flipY"})]);l=d[0],a=d[1]}return{sdrImage:a,gainMapImage:l,needsFlip:u}}createTextures(t,i,r){const s=new hi(i||new ImageData(2,2),Pd,Bi,Bi,Kn,S1,Mr,Qo,1,jo);s.flipY=r,s.needsUpdate=!0;const o=new hi(t,Pd,Bi,Bi,Kn,S1,Mr,Qo,1,Er);return o.flipY=r,o.needsUpdate=!0,{gainMap:s,sdr:o}}updateQuadRenderer(t,i,r,s,o){t.width=i.width,t.height=i.height,t.material.gainMap=r,t.material.sdr=s,t.material.gainMapMin=o.gainMapMin,t.material.gainMapMax=o.gainMapMax,t.material.offsetHdr=o.offsetHdr,t.material.offsetSdr=o.offsetSdr,t.material.gamma=o.gamma,t.material.hdrCapacityMin=o.hdrCapacityMin,t.material.hdrCapacityMax=o.hdrCapacityMax,t.material.maxDisplayBoost=Math.pow(2,o.hdrCapacityMax),t.material.needsUpdate=!0}}const dQ=`
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,fQ=`
// min half float value
#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )
// max half float value
#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )

uniform sampler2D sdr;
uniform sampler2D gainMap;
uniform vec3 gamma;
uniform vec3 offsetHdr;
uniform vec3 offsetSdr;
uniform vec3 gainMapMin;
uniform vec3 gainMapMax;
uniform float weightFactor;

varying vec2 vUv;

void main() {
  vec3 rgb = texture2D( sdr, vUv ).rgb;
  vec3 recovery = texture2D( gainMap, vUv ).rgb;
  vec3 logRecovery = pow( recovery, gamma );
  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;
  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;
  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));
  gl_FragColor = vec4( clampedHdrColor , 1.0 );
}
`;class hQ extends Ds{constructor({gamma:t,offsetHdr:i,offsetSdr:r,gainMapMin:s,gainMapMax:o,maxDisplayBoost:a,hdrCapacityMin:l,hdrCapacityMax:u,sdr:d,gainMap:h}){super({name:"GainMapDecoderMaterial",vertexShader:dQ,fragmentShader:fQ,uniforms:{sdr:{value:d},gainMap:{value:h},gamma:{value:new te(1/t[0],1/t[1],1/t[2])},offsetHdr:{value:new te().fromArray(i)},offsetSdr:{value:new te().fromArray(r)},gainMapMin:{value:new te().fromArray(s)},gainMapMax:{value:new te().fromArray(o)},weightFactor:{value:(Math.log2(a)-l)/(u-l)}},blending:ql,depthTest:!1,depthWrite:!1});si(this,"_maxDisplayBoost");si(this,"_hdrCapacityMin");si(this,"_hdrCapacityMax");this._maxDisplayBoost=a,this._hdrCapacityMin=l,this._hdrCapacityMax=u,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(t){this.uniforms.sdr.value=t}get gainMap(){return this.uniforms.gainMap.value}set gainMap(t){this.uniforms.gainMap.value=t}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(t){this.uniforms.offsetHdr.value.fromArray(t)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(t){this.uniforms.offsetSdr.value.fromArray(t)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(t){this.uniforms.gainMapMin.value.fromArray(t)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(t){this.uniforms.gainMapMax.value.fromArray(t)}get gamma(){const t=this.uniforms.gamma.value;return[1/t.x,1/t.y,1/t.z]}set gamma(t){const i=this.uniforms.gamma.value;i.x=1/t[0],i.y=1/t[1],i.z=1/t[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(t){this._hdrCapacityMin=t,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(t){this._hdrCapacityMax=t,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(t){this._maxDisplayBoost=Math.max(1,Math.min(65504,t)),this.calculateWeight()}calculateWeight(){const t=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,t))}}class BU extends cQ{constructor(e,t){super({renderer:e,createMaterial:i=>new hQ(i),createQuadRenderer:i=>new Hb(i)},t)}async render(e,t,i,r){const{sdrImage:s,gainMapImage:o,needsFlip:a}=await this.processImages(i,r,"flipY"),{gainMap:l,sdr:u}=this.createTextures(s,o,a);this.updateQuadRenderer(e,s,l,u,t),e.render()}}class pQ extends BU{load([e,t,i],r,s,o){const a=this.prepareQuadRenderer();let l,u,d;const h=async()=>{if(l&&u&&d){try{await this.render(a,d,l,u)}catch(D){this.manager.itemError(e),this.manager.itemError(t),this.manager.itemError(i),typeof o=="function"&&o(D),a.disposeOnDemandRenderer();return}typeof r=="function"&&r(a),this.manager.itemEnd(e),this.manager.itemEnd(t),this.manager.itemEnd(i),a.disposeOnDemandRenderer()}};let p=!0,v=0,_=0,w=!0,S=0,A=0,b=!0,C=0,P=0;const k=()=>{if(typeof s=="function"){const D=v+S+C,U=_+A+P,X=p&&w&&b;s(new ProgressEvent("progress",{lengthComputable:X,loaded:U,total:D}))}};this.manager.itemStart(e),this.manager.itemStart(t),this.manager.itemStart(i);const L=new ds(this._internalLoadingManager);L.setResponseType("arraybuffer"),L.setRequestHeader(this.requestHeader),L.setPath(this.path),L.setWithCredentials(this.withCredentials),L.load(e,async D=>{if(typeof D=="string")throw new Error("Invalid sdr buffer");l=D,await h()},D=>{p=D.lengthComputable,_=D.loaded,v=D.total,k()},D=>{this.manager.itemError(e),typeof o=="function"&&o(D)});const N=new ds(this._internalLoadingManager);N.setResponseType("arraybuffer"),N.setRequestHeader(this.requestHeader),N.setPath(this.path),N.setWithCredentials(this.withCredentials),N.load(t,async D=>{if(typeof D=="string")throw new Error("Invalid gainmap buffer");u=D,await h()},D=>{w=D.lengthComputable,A=D.loaded,S=D.total,k()},D=>{this.manager.itemError(t),typeof o=="function"&&o(D)});const O=new ds(this._internalLoadingManager);return O.setRequestHeader(this.requestHeader),O.setPath(this.path),O.setWithCredentials(this.withCredentials),O.load(i,async D=>{if(typeof D!="string")throw new Error("Invalid metadata string");d=JSON.parse(D),await h()},D=>{b=D.lengthComputable,P=D.loaded,C=D.total,k()},D=>{this.manager.itemError(i),typeof o=="function"&&o(D)}),a}}class mQ extends BU{load(e,t,i,r){const s=this.prepareQuadRenderer(),o=new ds(this._internalLoadingManager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(this.withCredentials),this.manager.itemStart(e),o.load(e,async a=>{if(typeof a=="string")throw new Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");const l=new Uint8Array(a);let u,d,h;try{const p=await uQ(l);u=p.sdr,d=p.gainMap,h=p.metadata}catch(p){if(p instanceof LU||p instanceof DU)console.warn(`Failure to reconstruct an HDR image from ${e}: Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg`),h={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},u=l;else throw p}try{await this.render(s,h,u.buffer,d==null?void 0:d.buffer)}catch(p){this.manager.itemError(e),typeof r=="function"&&r(p),s.disposeOnDemandRenderer();return}typeof t=="function"&&t(s),this.manager.itemEnd(e),s.disposeOnDemandRenderer()},i,a=>{this.manager.itemError(e),typeof r=="function"&&r(a)}),s}}const vy={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},NU="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",Qm=n=>Array.isArray(n),Gb=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"];function CS({files:n=Gb,path:e="",preset:t=void 0,encoding:i=void 0,extensions:r}={}){let s=null,o=!1;t&&(zb(t),n=vy[t],e=NU),o=Qm(n);const{extension:a,isCubemap:l}=Vb(n);if(s=Wb(a),!s)throw new Error("useEnvironment: Unrecognized file extension: "+n);const u=Ar(v=>v.gl);ie.useLayoutEffect(()=>{if(a!=="webp"&&a!=="jpg"&&a!=="jpeg")return;function v(){eu.clear(s,o?[n]:n)}u.domElement.addEventListener("webglcontextlost",v,{once:!0})},[n,u.domElement]);const d=eu(s,o?[n]:n,v=>{(a==="webp"||a==="jpg"||a==="jpeg")&&v.setRenderer(u),v.setPath==null||v.setPath(e),r&&r(v)});let h=o?d[0]:d;if(a==="jpg"||a==="jpeg"||a==="webp"){var p;h=(p=h.renderTarget)==null?void 0:p.texture}return h.mapping=l?$l:Dh,"colorSpace"in h?h.colorSpace=i??l?"srgb":"srgb-linear":h.encoding=i??l?rQ:iQ,h}const gQ={files:Gb,path:"",preset:void 0,extensions:void 0};CS.preload=n=>{const e={...gQ,...n};let{files:t,path:i=""}=e;const{preset:r,extensions:s}=e;r&&(zb(r),t=vy[r],i=NU);const{extension:o}=Vb(t);if(o==="webp"||o==="jpg"||o==="jpeg")throw new Error("useEnvironment: Preloading gainmaps is not supported");const a=Wb(o);if(!a)throw new Error("useEnvironment: Unrecognized file extension: "+t);eu.preload(a,Qm(t)?[t]:t,l=>{l.setPath==null||l.setPath(i),s&&s(l)})};const vQ={files:Gb,preset:void 0};CS.clear=n=>{const e={...vQ,...n};let{files:t}=e;const{preset:i}=e;i&&(zb(i),t=vy[i]);const{extension:r}=Vb(t),s=Wb(r);if(!s)throw new Error("useEnvironment: Unrecognized file extension: "+t);eu.clear(s,Qm(t)?[t]:t)};function zb(n){if(!(n in vy))throw new Error("Preset must be one of: "+Object.keys(vy).join(", "))}function Vb(n){var e;const t=Qm(n)&&n.length===6,i=Qm(n)&&n.length===3&&n.some(o=>o.endsWith("json")),r=Qm(n)?n[0]:n;return{extension:t?"cube":i?"webp":r.startsWith("data:application/exr")?"exr":r.startsWith("data:application/hdr")?"hdr":r.startsWith("data:image/jpeg")?"jpg":(e=r.split(".").pop())==null||(e=e.split("?"))==null||(e=e.shift())==null?void 0:e.toLowerCase(),isCubemap:t,isGainmap:i}}function Wb(n){return n==="cube"?jF:n==="hdr"?ZK:n==="exr"?$K:n==="jpg"||n==="jpeg"?mQ:n==="webp"?pQ:null}const yQ=n=>n.current&&n.current.isScene,_Q=n=>yQ(n)?n.current:n;function qb(n,e,t,i,r={}){var s,o,a,l;r={backgroundBlurriness:0,backgroundIntensity:1,backgroundRotation:[0,0,0],environmentIntensity:1,environmentRotation:[0,0,0],...r};const u=_Q(e||t),d=u.background,h=u.environment,p={backgroundBlurriness:u.backgroundBlurriness,backgroundIntensity:u.backgroundIntensity,backgroundRotation:(s=(o=u.backgroundRotation)==null||o.clone==null?void 0:o.clone())!==null&&s!==void 0?s:[0,0,0],environmentIntensity:u.environmentIntensity,environmentRotation:(a=(l=u.environmentRotation)==null||l.clone==null?void 0:l.clone())!==null&&a!==void 0?a:[0,0,0]};return n!=="only"&&(u.environment=i),n&&(u.background=i),qu(u,r),()=>{n!=="only"&&(u.environment=h),n&&(u.background=d),qu(u,p)}}function Jb({scene:n,background:e=!1,map:t,...i}){const r=Ar(s=>s.scene);return ie.useLayoutEffect(()=>{if(t)return qb(e,n,r,t,i)}),null}function kU({background:n=!1,scene:e,blur:t,backgroundBlurriness:i,backgroundIntensity:r,backgroundRotation:s,environmentIntensity:o,environmentRotation:a,...l}){const u=CS(l),d=Ar(h=>h.scene);return ie.useLayoutEffect(()=>qb(n,e,d,u,{backgroundBlurriness:t??i,backgroundIntensity:r,backgroundRotation:s,environmentIntensity:o,environmentRotation:a})),ie.useEffect(()=>()=>{u.dispose()},[u]),null}function xQ({children:n,near:e=.1,far:t=1e3,resolution:i=256,frames:r=1,map:s,background:o=!1,blur:a,backgroundBlurriness:l,backgroundIntensity:u,backgroundRotation:d,environmentIntensity:h,environmentRotation:p,scene:v,files:_,path:w,preset:S=void 0,extensions:A}){const b=Ar(O=>O.gl),C=Ar(O=>O.scene),P=ie.useRef(null),[k]=ie.useState(()=>new Fy),L=ie.useMemo(()=>{const O=new GC(i);return O.texture.type=Yr,O},[i]);ie.useEffect(()=>()=>{L.dispose()},[L]),ie.useLayoutEffect(()=>{if(r===1){const O=b.autoClear;b.autoClear=!0,P.current.update(b,k),b.autoClear=O}return qb(o,v,C,L.texture,{backgroundBlurriness:a??l,backgroundIntensity:u,backgroundRotation:d,environmentIntensity:h,environmentRotation:p})},[n,k,L.texture,v,C,o,r,b]);let N=1;return cc(()=>{if(r===1/0||N<r){const O=b.autoClear;b.autoClear=!0,P.current.update(b,k),b.autoClear=O,N++}}),ie.createElement(ie.Fragment,null,jq(ie.createElement(ie.Fragment,null,n,ie.createElement("cubeCamera",{ref:P,args:[e,t,L]}),_||S?ie.createElement(kU,{background:!0,files:_,preset:S,path:w,extensions:A}):s?ie.createElement(Jb,{background:!0,map:s,extensions:A}):null),k))}function wQ(n){var e,t,i,r;const s=CS(n),o=n.map||s;ie.useMemo(()=>yb({GroundProjectedEnvImpl:sK}),[]),ie.useEffect(()=>()=>{s.dispose()},[s]);const a=ie.useMemo(()=>[o],[o]),l=(e=n.ground)==null?void 0:e.height,u=(t=n.ground)==null?void 0:t.radius,d=(i=(r=n.ground)==null?void 0:r.scale)!==null&&i!==void 0?i:1e3;return ie.createElement(ie.Fragment,null,ie.createElement(Jb,Nd({},n,{map:o})),ie.createElement("groundProjectedEnvImpl",{args:a,scale:d,height:l,radius:u}))}function FU(n){return n.ground?ie.createElement(wQ,n):n.map?ie.createElement(Jb,n):n.children?ie.createElement(xQ,n):ie.createElement(kU,n)}const AQ=ie.forwardRef(({scale:n=10,frames:e=1/0,opacity:t=1,width:i=1,height:r=1,blur:s=1,near:o=0,far:a=10,resolution:l=512,smooth:u=!0,color:d="#000000",depthWrite:h=!1,renderOrder:p,...v},_)=>{const w=ie.useRef(null),S=Ar(Q=>Q.scene),A=Ar(Q=>Q.gl),b=ie.useRef(null);i=i*(Array.isArray(n)?n[0]:n||1),r=r*(Array.isArray(n)?n[1]:n||1);const[C,P,k,L,N,O,D]=ie.useMemo(()=>{const Q=new no(l,l),ue=new no(l,l);ue.texture.generateMipmaps=Q.texture.generateMipmaps=!1;const re=new zd(i,r).rotateX(Math.PI/2),ye=new bi(re),$=new QA;$.depthTest=$.depthWrite=!1,$.onBeforeCompile=J=>{J.uniforms={...J.uniforms,ucolor:{value:new St(d)}},J.fragmentShader=J.fragmentShader.replace("void main() {",`uniform vec3 ucolor;
           void main() {
          `),J.fragmentShader=J.fragmentShader.replace("vec4( vec3( 1.0 - fragCoordZ ), opacity );","vec4( ucolor * fragCoordZ * 2.0, ( 1.0 - fragCoordZ ) * 1.0 );")};const oe=new Ds(KK),W=new Ds(QK);return W.depthTest=oe.depthTest=!1,[Q,re,$,ye,oe,W,ue]},[l,i,r,n,d]),U=Q=>{L.visible=!0,L.material=N,N.uniforms.tDiffuse.value=C.texture,N.uniforms.h.value=Q*1/256,A.setRenderTarget(D),A.render(L,b.current),L.material=O,O.uniforms.tDiffuse.value=D.texture,O.uniforms.v.value=Q*1/256,A.setRenderTarget(C),A.render(L,b.current),L.visible=!1};let X=0,Z,he;return cc(()=>{b.current&&(e===1/0||X<e)&&(X++,Z=S.background,he=S.overrideMaterial,w.current.visible=!1,S.background=null,S.overrideMaterial=k,A.setRenderTarget(C),A.render(S,b.current),U(s),u&&U(s*.4),A.setRenderTarget(null),w.current.visible=!0,S.overrideMaterial=he,S.background=Z)}),ie.useImperativeHandle(_,()=>w.current,[]),ie.createElement("group",Nd({"rotation-x":Math.PI/2},v,{ref:w}),ie.createElement("mesh",{renderOrder:p,geometry:P,scale:[1,-1,1],rotation:[-Math.PI/2,0,0]},ie.createElement("meshBasicMaterial",{transparent:!0,map:C.texture,opacity:t,depthWrite:h})),ie.createElement("orthographicCamera",{ref:b,args:[-i/2,i/2,r/2,-r/2,o,a]}))});class SQ extends Ds{constructor(){super({uniforms:{time:{value:0},pixelRatio:{value:1}},vertexShader:`
        uniform float pixelRatio;
        uniform float time;
        attribute float size;  
        attribute float speed;  
        attribute float opacity;
        attribute vec3 noise;
        attribute vec3 color;
        varying vec3 vColor;
        varying float vOpacity;

        void main() {
          vec4 modelPosition = modelMatrix * vec4(position, 1.0);
          modelPosition.y += sin(time * speed + modelPosition.x * noise.x * 100.0) * 0.2;
          modelPosition.z += cos(time * speed + modelPosition.x * noise.y * 100.0) * 0.2;
          modelPosition.x += cos(time * speed + modelPosition.x * noise.z * 100.0) * 0.2;
          vec4 viewPosition = viewMatrix * modelPosition;
          vec4 projectionPostion = projectionMatrix * viewPosition;
          gl_Position = projectionPostion;
          gl_PointSize = size * 25. * pixelRatio;
          gl_PointSize *= (1.0 / - viewPosition.z);
          vColor = color;
          vOpacity = opacity;
        }
      `,fragmentShader:`
        varying vec3 vColor;
        varying float vOpacity;
        void main() {
          float distanceToCenter = distance(gl_PointCoord, vec2(0.5));
          float strength = 0.05 / distanceToCenter - 0.1;
          gl_FragColor = vec4(vColor, strength * vOpacity);
          #include <tonemapping_fragment>
          #include <${nQ>=154?"colorspace_fragment":"encodings_fragment"}>
        }
      `})}get time(){return this.uniforms.time.value}set time(e){this.uniforms.time.value=e}get pixelRatio(){return this.uniforms.pixelRatio.value}set pixelRatio(e){this.uniforms.pixelRatio.value=e}}const UU=n=>n&&n.constructor===Float32Array,EQ=n=>[n.r,n.g,n.b],OU=n=>n instanceof Je||n instanceof te||n instanceof li,HU=n=>Array.isArray(n)?n:OU(n)?n.toArray():[n,n,n];function nv(n,e,t){return ie.useMemo(()=>{if(e!==void 0){if(UU(e))return e;if(e instanceof St){const i=Array.from({length:n*3},()=>EQ(e)).flat();return Float32Array.from(i)}else if(OU(e)||Array.isArray(e)){const i=Array.from({length:n*3},()=>HU(e)).flat();return Float32Array.from(i)}return Float32Array.from({length:n},()=>e)}return Float32Array.from({length:n},t)},[e])}const TQ=ie.forwardRef(({noise:n=1,count:e=100,speed:t=1,opacity:i=1,scale:r=1,size:s,color:o,children:a,...l},u)=>{ie.useMemo(()=>yb({SparklesImplMaterial:SQ}),[]);const d=ie.useRef(null),h=Ar(C=>C.viewport.dpr),p=HU(r),v=ie.useMemo(()=>Float32Array.from(Array.from({length:e},()=>p.map(ad.randFloatSpread)).flat()),[e,...p]),_=nv(e,s,Math.random),w=nv(e,i),S=nv(e,t),A=nv(e*3,n),b=nv(o===void 0?e*3:e,UU(o)?o:new St(o),()=>1);return cc(C=>{d.current&&d.current.material&&(d.current.material.time=C.clock.elapsedTime)}),ie.useImperativeHandle(u,()=>d.current,[]),ie.createElement("points",Nd({key:`particle-${e}-${JSON.stringify(r)}`},l,{ref:d}),ie.createElement("bufferGeometry",null,ie.createElement("bufferAttribute",{attach:"attributes-position",args:[v,3]}),ie.createElement("bufferAttribute",{attach:"attributes-size",args:[_,1]}),ie.createElement("bufferAttribute",{attach:"attributes-opacity",args:[w,1]}),ie.createElement("bufferAttribute",{attach:"attributes-speed",args:[S,1]}),ie.createElement("bufferAttribute",{attach:"attributes-color",args:[b,3]}),ie.createElement("bufferAttribute",{attach:"attributes-noise",args:[A,3]})),a||ie.createElement("sparklesImplMaterial",{transparent:!0,pixelRatio:h,depthWrite:!1}))});function Vu(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function GU(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}/*!
 * GSAP 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var $o={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},yg={duration:.5,overwrite:!1,delay:0},Xb,fs,Hi,Pa=1e8,wi=1/Pa,EM=Math.PI*2,MQ=EM/4,CQ=0,zU=Math.sqrt,bQ=Math.cos,RQ=Math.sin,Zr=function(e){return typeof e=="string"},nr=function(e){return typeof e=="function"},oc=function(e){return typeof e=="number"},Yb=function(e){return typeof e>"u"},tu=function(e){return typeof e=="object"},So=function(e){return e!==!1},Kb=function(){return typeof window<"u"},sw=function(e){return nr(e)||Zr(e)},VU=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},Is=Array.isArray,TM=/(?:-?\.?\d|\.)+/gi,WU=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,km=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,OT=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,qU=/[+-]=-?[.\d]+/,JU=/[^,'"\[\]\s]+/gi,PQ=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,Vi,Fl,MM,Qb,ea={},lA={},XU,YU=function(e){return(lA=_g(e,ea))&&bo},Zb=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},yy=function(e,t){return!t&&console.warn(e)},KU=function(e,t){return e&&(ea[e]=t)&&lA&&(lA[e]=t)||ea},_y=function(){return 0},IQ={suppressEvents:!0,isStart:!0,kill:!1},Lw={suppressEvents:!0,kill:!1},DQ={suppressEvents:!0},$b={},Md=[],CM={},QU,Wo={},HT={},kD=30,Bw=[],jb="",eR=function(e){var t=e[0],i,r;if(tu(t)||nr(t)||(e=[e]),!(i=(t._gsap||{}).harness)){for(r=Bw.length;r--&&!Bw[r].targetTest(t););i=Bw[r]}for(r=e.length;r--;)e[r]&&(e[r]._gsap||(e[r]._gsap=new xO(e[r],i)))||e.splice(r,1);return e},Ah=function(e){return e._gsap||eR(Ia(e))[0]._gsap},ZU=function(e,t,i){return(i=e[t])&&nr(i)?e[t]():Yb(i)&&e.getAttribute&&e.getAttribute(t)||i},Eo=function(e,t){return(e=e.split(",")).forEach(t)||e},ur=function(e){return Math.round(e*1e5)/1e5||0},Tr=function(e){return Math.round(e*1e7)/1e7||0},Zm=function(e,t){var i=t.charAt(0),r=parseFloat(t.substr(2));return e=parseFloat(e),i==="+"?e+r:i==="-"?e-r:i==="*"?e*r:e/r},LQ=function(e,t){for(var i=t.length,r=0;e.indexOf(t[r])<0&&++r<i;);return r<i},uA=function(){var e=Md.length,t=Md.slice(0),i,r;for(CM={},Md.length=0,i=0;i<e;i++)r=t[i],r&&r._lazy&&(r.render(r._lazy[0],r._lazy[1],!0)._lazy=0)},tR=function(e){return!!(e._initted||e._startAt||e.add)},$U=function(e,t,i,r){Md.length&&!fs&&uA(),e.render(t,i,!!(fs&&t<0&&tR(e))),Md.length&&!fs&&uA()},jU=function(e){var t=parseFloat(e);return(t||t===0)&&(e+"").match(JU).length<2?t:Zr(e)?e.trim():e},eO=function(e){return e},ta=function(e,t){for(var i in t)i in e||(e[i]=t[i]);return e},BQ=function(e){return function(t,i){for(var r in i)r in t||r==="duration"&&e||r==="ease"||(t[r]=i[r])}},_g=function(e,t){for(var i in t)e[i]=t[i];return e},FD=function n(e,t){for(var i in t)i!=="__proto__"&&i!=="constructor"&&i!=="prototype"&&(e[i]=tu(t[i])?n(e[i]||(e[i]={}),t[i]):t[i]);return e},cA=function(e,t){var i={},r;for(r in e)r in t||(i[r]=e[r]);return i},Rv=function(e){var t=e.parent||Vi,i=e.keyframes?BQ(Is(e.keyframes)):ta;if(So(e.inherit))for(;t;)i(e,t.vars.defaults),t=t.parent||t._dp;return e},NQ=function(e,t){for(var i=e.length,r=i===t.length;r&&i--&&e[i]===t[i];);return i<0},tO=function(e,t,i,r,s){var o=e[r],a;if(s)for(a=t[s];o&&o[s]>a;)o=o._prev;return o?(t._next=o._next,o._next=t):(t._next=e[i],e[i]=t),t._next?t._next._prev=t:e[r]=t,t._prev=o,t.parent=t._dp=e,t},bS=function(e,t,i,r){i===void 0&&(i="_first"),r===void 0&&(r="_last");var s=t._prev,o=t._next;s?s._next=o:e[i]===t&&(e[i]=o),o?o._prev=s:e[r]===t&&(e[r]=s),t._next=t._prev=t.parent=null},kd=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},Sh=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var i=e;i;)i._dirty=1,i=i.parent;return e},kQ=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},bM=function(e,t,i,r){return e._startAt&&(fs?e._startAt.revert(Lw):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,r))},FQ=function n(e){return!e||e._ts&&n(e.parent)},UD=function(e){return e._repeat?xg(e._tTime,e=e.duration()+e._rDelay)*e:0},xg=function(e,t){var i=Math.floor(e=Tr(e/t));return e&&i===e?i-1:i},dA=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},RS=function(e){return e._end=Tr(e._start+(e._tDur/Math.abs(e._ts||e._rts||wi)||0))},PS=function(e,t){var i=e._dp;return i&&i.smoothChildTiming&&e._ts&&(e._start=Tr(i._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),RS(e),i._dirty||Sh(i,e)),e},nO=function(e,t){var i;if((t._time||!t._dur&&t._initted||t._start<e._time&&(t._dur||!t.add))&&(i=dA(e.rawTime(),t),(!t._dur||$y(0,t.totalDuration(),i)-t._tTime>wi)&&t.render(i,!0)),Sh(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(i=e;i._dp;)i.rawTime()>=0&&i.totalTime(i._tTime),i=i._dp;e._zTime=-wi}},Gl=function(e,t,i,r){return t.parent&&kd(t),t._start=Tr((oc(i)?i:i||e!==Vi?_a(e,i,t):e._time)+t._delay),t._end=Tr(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),tO(e,t,"_first","_last",e._sort?"_start":0),RM(t)||(e._recent=t),r||nO(e,t),e._ts<0&&PS(e,e._tTime),e},iO=function(e,t){return(ea.ScrollTrigger||Zb("scrollTrigger",t))&&ea.ScrollTrigger.create(t,e)},rO=function(e,t,i,r,s){if(iR(e,t,s),!e._initted)return 1;if(!i&&e._pt&&!fs&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&QU!==Xo.frame)return Md.push(e),e._lazy=[s,r],1},UQ=function n(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||n(t))},RM=function(e){var t=e.data;return t==="isFromStart"||t==="isStart"},OQ=function(e,t,i,r){var s=e.ratio,o=t<0||!t&&(!e._start&&UQ(e)&&!(!e._initted&&RM(e))||(e._ts<0||e._dp._ts<0)&&!RM(e))?0:1,a=e._rDelay,l=0,u,d,h;if(a&&e._repeat&&(l=$y(0,e._tDur,t),d=xg(l,a),e._yoyo&&d&1&&(o=1-o),d!==xg(e._tTime,a)&&(s=1-o,e.vars.repeatRefresh&&e._initted&&e.invalidate())),o!==s||fs||r||e._zTime===wi||!t&&e._zTime){if(!e._initted&&rO(e,t,r,i,l))return;for(h=e._zTime,e._zTime=t||(i?wi:0),i||(i=t&&!h),e.ratio=o,e._from&&(o=1-o),e._time=0,e._tTime=l,u=e._pt;u;)u.r(o,u.d),u=u._next;t<0&&bM(e,t,i,!0),e._onUpdate&&!i&&Ko(e,"onUpdate"),l&&e._repeat&&!i&&e.parent&&Ko(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===o&&(o&&kd(e,1),!i&&!fs&&(Ko(e,o?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)},HQ=function(e,t,i){var r;if(i>t)for(r=e._first;r&&r._start<=i;){if(r.data==="isPause"&&r._start>t)return r;r=r._next}else for(r=e._last;r&&r._start>=i;){if(r.data==="isPause"&&r._start<t)return r;r=r._prev}},wg=function(e,t,i,r){var s=e._repeat,o=Tr(t)||0,a=e._tTime/e._tDur;return a&&!r&&(e._time*=o/e._dur),e._dur=o,e._tDur=s?s<0?1e10:Tr(o*(s+1)+e._rDelay*s):o,a>0&&!r&&PS(e,e._tTime=e._tDur*a),e.parent&&RS(e),i||Sh(e.parent,e),e},OD=function(e){return e instanceof js?Sh(e):wg(e,e._dur)},GQ={_start:0,endTime:_y,totalDuration:_y},_a=function n(e,t,i){var r=e.labels,s=e._recent||GQ,o=e.duration()>=Pa?s.endTime(!1):e._dur,a,l,u;return Zr(t)&&(isNaN(t)||t in r)?(l=t.charAt(0),u=t.substr(-1)==="%",a=t.indexOf("="),l==="<"||l===">"?(a>=0&&(t=t.replace(/=/,"")),(l==="<"?s._start:s.endTime(s._repeat>=0))+(parseFloat(t.substr(1))||0)*(u?(a<0?s:i).totalDuration()/100:1)):a<0?(t in r||(r[t]=o),r[t]):(l=parseFloat(t.charAt(a-1)+t.substr(a+1)),u&&i&&(l=l/100*(Is(i)?i[0]:i).totalDuration()),a>1?n(e,t.substr(0,a-1),i)+l:o+l)):t==null?o:+t},Pv=function(e,t,i){var r=oc(t[1]),s=(r?2:1)+(e<2?0:1),o=t[s],a,l;if(r&&(o.duration=t[1]),o.parent=i,e){for(a=o,l=i;l&&!("immediateRender"in a);)a=l.vars.defaults||{},l=So(l.vars.inherit)&&l.parent;o.immediateRender=So(a.immediateRender),e<2?o.runBackwards=1:o.startAt=t[s-1]}return new Sr(t[0],o,t[s+1])},qd=function(e,t){return e||e===0?t(e):t},$y=function(e,t,i){return i<e?e:i>t?t:i},Cs=function(e,t){return!Zr(e)||!(t=PQ.exec(e))?"":t[1]},zQ=function(e,t,i){return qd(i,function(r){return $y(e,t,r)})},PM=[].slice,sO=function(e,t){return e&&tu(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&tu(e[0]))&&!e.nodeType&&e!==Fl},VQ=function(e,t,i){return i===void 0&&(i=[]),e.forEach(function(r){var s;return Zr(r)&&!t||sO(r,1)?(s=i).push.apply(s,Ia(r)):i.push(r)})||i},Ia=function(e,t,i){return Hi&&!t&&Hi.selector?Hi.selector(e):Zr(e)&&!i&&(MM||!Ag())?PM.call((t||Qb).querySelectorAll(e),0):Is(e)?VQ(e,i):sO(e)?PM.call(e,0):e?[e]:[]},IM=function(e){return e=Ia(e)[0]||yy("Invalid scope")||{},function(t){var i=e.current||e.nativeElement||e;return Ia(t,i.querySelectorAll?i:i===e?yy("Invalid scope")||Qb.createElement("div"):e)}},oO=function(e){return e.sort(function(){return .5-Math.random()})},aO=function(e){if(nr(e))return e;var t=tu(e)?e:{each:e},i=Eh(t.ease),r=t.from||0,s=parseFloat(t.base)||0,o={},a=r>0&&r<1,l=isNaN(r)||a,u=t.axis,d=r,h=r;return Zr(r)?d=h={center:.5,edges:.5,end:1}[r]||0:!a&&l&&(d=r[0],h=r[1]),function(p,v,_){var w=(_||t).length,S=o[w],A,b,C,P,k,L,N,O,D;if(!S){if(D=t.grid==="auto"?0:(t.grid||[1,Pa])[1],!D){for(N=-Pa;N<(N=_[D++].getBoundingClientRect().left)&&D<w;);D<w&&D--}for(S=o[w]=[],A=l?Math.min(D,w)*d-.5:r%D,b=D===Pa?0:l?w*h/D-.5:r/D|0,N=0,O=Pa,L=0;L<w;L++)C=L%D-A,P=b-(L/D|0),S[L]=k=u?Math.abs(u==="y"?P:C):zU(C*C+P*P),k>N&&(N=k),k<O&&(O=k);r==="random"&&oO(S),S.max=N-O,S.min=O,S.v=w=(parseFloat(t.amount)||parseFloat(t.each)*(D>w?w-1:u?u==="y"?w/D:D:Math.max(D,w/D))||0)*(r==="edges"?-1:1),S.b=w<0?s-w:s,S.u=Cs(t.amount||t.each)||0,i=i&&w<0?vO(i):i}return w=(S[p]-S.min)/S.max||0,Tr(S.b+(i?i(w):w)*S.v)+S.u}},DM=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(i){var r=Tr(Math.round(parseFloat(i)/e)*e*t);return(r-r%1)/t+(oc(i)?0:Cs(i))}},lO=function(e,t){var i=Is(e),r,s;return!i&&tu(e)&&(r=i=e.radius||Pa,e.values?(e=Ia(e.values),(s=!oc(e[0]))&&(r*=r)):e=DM(e.increment)),qd(t,i?nr(e)?function(o){return s=e(o),Math.abs(s-o)<=r?s:o}:function(o){for(var a=parseFloat(s?o.x:o),l=parseFloat(s?o.y:0),u=Pa,d=0,h=e.length,p,v;h--;)s?(p=e[h].x-a,v=e[h].y-l,p=p*p+v*v):p=Math.abs(e[h]-a),p<u&&(u=p,d=h);return d=!r||u<=r?e[d]:o,s||d===o||oc(o)?d:d+Cs(o)}:DM(e))},uO=function(e,t,i,r){return qd(Is(e)?!t:i===!0?!!(i=0):!r,function(){return Is(e)?e[~~(Math.random()*e.length)]:(i=i||1e-5)&&(r=i<1?Math.pow(10,(i+"").length-2):1)&&Math.floor(Math.round((e-i/2+Math.random()*(t-e+i*.99))/i)*i*r)/r})},WQ=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(r){return t.reduce(function(s,o){return o(s)},r)}},qQ=function(e,t){return function(i){return e(parseFloat(i))+(t||Cs(i))}},JQ=function(e,t,i){return dO(e,t,0,1,i)},cO=function(e,t,i){return qd(i,function(r){return e[~~t(r)]})},XQ=function n(e,t,i){var r=t-e;return Is(e)?cO(e,n(0,e.length),t):qd(i,function(s){return(r+(s-e)%r)%r+e})},YQ=function n(e,t,i){var r=t-e,s=r*2;return Is(e)?cO(e,n(0,e.length-1),t):qd(i,function(o){return o=(s+(o-e)%s)%s||0,e+(o>r?s-o:o)})},xy=function(e){for(var t=0,i="",r,s,o,a;~(r=e.indexOf("random(",t));)o=e.indexOf(")",r),a=e.charAt(r+7)==="[",s=e.substr(r+7,o-r-7).match(a?JU:TM),i+=e.substr(t,r-t)+uO(a?s:+s[0],a?0:+s[1],+s[2]||1e-5),t=o+1;return i+e.substr(t,e.length-t)},dO=function(e,t,i,r,s){var o=t-e,a=r-i;return qd(s,function(l){return i+((l-e)/o*a||0)})},KQ=function n(e,t,i,r){var s=isNaN(e+t)?0:function(v){return(1-v)*e+v*t};if(!s){var o=Zr(e),a={},l,u,d,h,p;if(i===!0&&(r=1)&&(i=null),o)e={p:e},t={p:t};else if(Is(e)&&!Is(t)){for(d=[],h=e.length,p=h-2,u=1;u<h;u++)d.push(n(e[u-1],e[u]));h--,s=function(_){_*=h;var w=Math.min(p,~~_);return d[w](_-w)},i=t}else r||(e=_g(Is(e)?[]:{},e));if(!d){for(l in t)nR.call(a,e,l,"get",t[l]);s=function(_){return oR(_,a)||(o?e.p:e)}}}return qd(i,s)},HD=function(e,t,i){var r=e.labels,s=Pa,o,a,l;for(o in r)a=r[o]-t,a<0==!!i&&a&&s>(a=Math.abs(a))&&(l=o,s=a);return l},Ko=function(e,t,i){var r=e.vars,s=r[t],o=Hi,a=e._ctx,l,u,d;if(s)return l=r[t+"Params"],u=r.callbackScope||e,i&&Md.length&&uA(),a&&(Hi=a),d=l?s.apply(u,l):s.call(u),Hi=o,d},hv=function(e){return kd(e),e.scrollTrigger&&e.scrollTrigger.kill(!!fs),e.progress()<1&&Ko(e,"onInterrupt"),e},Fm,fO=[],hO=function(e){if(e)if(e=!e.name&&e.default||e,Kb()||e.headless){var t=e.name,i=nr(e),r=t&&!i&&e.init?function(){this._props=[]}:e,s={init:_y,render:oR,add:nR,kill:dZ,modifier:cZ,rawVars:0},o={targetTest:0,get:0,getSetter:sR,aliases:{},register:0};if(Ag(),e!==r){if(Wo[t])return;ta(r,ta(cA(e,s),o)),_g(r.prototype,_g(s,cA(e,o))),Wo[r.prop=t]=r,e.targetTest&&(Bw.push(r),$b[t]=1),t=(t==="css"?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}KU(t,r),e.register&&e.register(bo,r,To)}else fO.push(e)},xi=255,pv={aqua:[0,xi,xi],lime:[0,xi,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,xi],navy:[0,0,128],white:[xi,xi,xi],olive:[128,128,0],yellow:[xi,xi,0],orange:[xi,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[xi,0,0],pink:[xi,192,203],cyan:[0,xi,xi],transparent:[xi,xi,xi,0]},GT=function(e,t,i){return e+=e<0?1:e>1?-1:0,(e*6<1?t+(i-t)*e*6:e<.5?i:e*3<2?t+(i-t)*(2/3-e)*6:t)*xi+.5|0},pO=function(e,t,i){var r=e?oc(e)?[e>>16,e>>8&xi,e&xi]:0:pv.black,s,o,a,l,u,d,h,p,v,_;if(!r){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),pv[e])r=pv[e];else if(e.charAt(0)==="#"){if(e.length<6&&(s=e.charAt(1),o=e.charAt(2),a=e.charAt(3),e="#"+s+s+o+o+a+a+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return r=parseInt(e.substr(1,6),16),[r>>16,r>>8&xi,r&xi,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),r=[e>>16,e>>8&xi,e&xi]}else if(e.substr(0,3)==="hsl"){if(r=_=e.match(TM),!t)l=+r[0]%360/360,u=+r[1]/100,d=+r[2]/100,o=d<=.5?d*(u+1):d+u-d*u,s=d*2-o,r.length>3&&(r[3]*=1),r[0]=GT(l+1/3,s,o),r[1]=GT(l,s,o),r[2]=GT(l-1/3,s,o);else if(~e.indexOf("="))return r=e.match(WU),i&&r.length<4&&(r[3]=1),r}else r=e.match(TM)||pv.transparent;r=r.map(Number)}return t&&!_&&(s=r[0]/xi,o=r[1]/xi,a=r[2]/xi,h=Math.max(s,o,a),p=Math.min(s,o,a),d=(h+p)/2,h===p?l=u=0:(v=h-p,u=d>.5?v/(2-h-p):v/(h+p),l=h===s?(o-a)/v+(o<a?6:0):h===o?(a-s)/v+2:(s-o)/v+4,l*=60),r[0]=~~(l+.5),r[1]=~~(u*100+.5),r[2]=~~(d*100+.5)),i&&r.length<4&&(r[3]=1),r},mO=function(e){var t=[],i=[],r=-1;return e.split(Cd).forEach(function(s){var o=s.match(km)||[];t.push.apply(t,o),i.push(r+=o.length+1)}),t.c=i,t},GD=function(e,t,i){var r="",s=(e+r).match(Cd),o=t?"hsla(":"rgba(",a=0,l,u,d,h;if(!s)return e;if(s=s.map(function(p){return(p=pO(p,t,1))&&o+(t?p[0]+","+p[1]+"%,"+p[2]+"%,"+p[3]:p.join(","))+")"}),i&&(d=mO(e),l=i.c,l.join(r)!==d.c.join(r)))for(u=e.replace(Cd,"1").split(km),h=u.length-1;a<h;a++)r+=u[a]+(~l.indexOf(a)?s.shift()||o+"0,0,0,0)":(d.length?d:s.length?s:i).shift());if(!u)for(u=e.split(Cd),h=u.length-1;a<h;a++)r+=u[a]+s[a];return r+u[h]},Cd=(function(){var n="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in pv)n+="|"+e+"\\b";return new RegExp(n+")","gi")})(),QQ=/hsl[a]?\(/,gO=function(e){var t=e.join(" "),i;if(Cd.lastIndex=0,Cd.test(t))return i=QQ.test(t),e[1]=GD(e[1],i),e[0]=GD(e[0],i,mO(e[1])),!0},wy,Xo=(function(){var n=Date.now,e=500,t=33,i=n(),r=i,s=1e3/240,o=s,a=[],l,u,d,h,p,v,_=function w(S){var A=n()-r,b=S===!0,C,P,k,L;if((A>e||A<0)&&(i+=A-t),r+=A,k=r-i,C=k-o,(C>0||b)&&(L=++h.frame,p=k-h.time*1e3,h.time=k=k/1e3,o+=C+(C>=s?4:s-C),P=1),b||(l=u(w)),P)for(v=0;v<a.length;v++)a[v](k,p,L,S)};return h={time:0,frame:0,tick:function(){_(!0)},deltaRatio:function(S){return p/(1e3/(S||60))},wake:function(){XU&&(!MM&&Kb()&&(Fl=MM=window,Qb=Fl.document||{},ea.gsap=bo,(Fl.gsapVersions||(Fl.gsapVersions=[])).push(bo.version),YU(lA||Fl.GreenSockGlobals||!Fl.gsap&&Fl||{}),fO.forEach(hO)),d=typeof requestAnimationFrame<"u"&&requestAnimationFrame,l&&h.sleep(),u=d||function(S){return setTimeout(S,o-h.time*1e3+1|0)},wy=1,_(2))},sleep:function(){(d?cancelAnimationFrame:clearTimeout)(l),wy=0,u=_y},lagSmoothing:function(S,A){e=S||1/0,t=Math.min(A||33,e)},fps:function(S){s=1e3/(S||240),o=h.time*1e3+s},add:function(S,A,b){var C=A?function(P,k,L,N){S(P,k,L,N),h.remove(C)}:S;return h.remove(S),a[b?"unshift":"push"](C),Ag(),C},remove:function(S,A){~(A=a.indexOf(S))&&a.splice(A,1)&&v>=A&&v--},_listeners:a},h})(),Ag=function(){return!wy&&Xo.wake()},zn={},ZQ=/^[\d.\-M][\d.\-,\s]/,$Q=/["']/g,jQ=function(e){for(var t={},i=e.substr(1,e.length-3).split(":"),r=i[0],s=1,o=i.length,a,l,u;s<o;s++)l=i[s],a=s!==o-1?l.lastIndexOf(","):l.length,u=l.substr(0,a),t[r]=isNaN(u)?u.replace($Q,"").trim():+u,r=l.substr(a+1).trim();return t},eZ=function(e){var t=e.indexOf("(")+1,i=e.indexOf(")"),r=e.indexOf("(",t);return e.substring(t,~r&&r<i?e.indexOf(")",i+1):i)},tZ=function(e){var t=(e+"").split("("),i=zn[t[0]];return i&&t.length>1&&i.config?i.config.apply(null,~e.indexOf("{")?[jQ(t[1])]:eZ(e).split(",").map(jU)):zn._CE&&ZQ.test(e)?zn._CE("",e):i},vO=function(e){return function(t){return 1-e(1-t)}},yO=function n(e,t){for(var i=e._first,r;i;)i instanceof js?n(i,t):i.vars.yoyoEase&&(!i._yoyo||!i._repeat)&&i._yoyo!==t&&(i.timeline?n(i.timeline,t):(r=i._ease,i._ease=i._yEase,i._yEase=r,i._yoyo=t)),i=i._next},Eh=function(e,t){return e&&(nr(e)?e:zn[e]||tZ(e))||t},Qh=function(e,t,i,r){i===void 0&&(i=function(l){return 1-t(1-l)}),r===void 0&&(r=function(l){return l<.5?t(l*2)/2:1-t((1-l)*2)/2});var s={easeIn:t,easeOut:i,easeInOut:r},o;return Eo(e,function(a){zn[a]=ea[a]=s,zn[o=a.toLowerCase()]=i;for(var l in s)zn[o+(l==="easeIn"?".in":l==="easeOut"?".out":".inOut")]=zn[a+"."+l]=s[l]}),s},_O=function(e){return function(t){return t<.5?(1-e(1-t*2))/2:.5+e((t-.5)*2)/2}},zT=function n(e,t,i){var r=t>=1?t:1,s=(i||(e?.3:.45))/(t<1?t:1),o=s/EM*(Math.asin(1/r)||0),a=function(d){return d===1?1:r*Math.pow(2,-10*d)*RQ((d-o)*s)+1},l=e==="out"?a:e==="in"?function(u){return 1-a(1-u)}:_O(a);return s=EM/s,l.config=function(u,d){return n(e,u,d)},l},VT=function n(e,t){t===void 0&&(t=1.70158);var i=function(o){return o?--o*o*((t+1)*o+t)+1:0},r=e==="out"?i:e==="in"?function(s){return 1-i(1-s)}:_O(i);return r.config=function(s){return n(e,s)},r};Eo("Linear,Quad,Cubic,Quart,Quint,Strong",function(n,e){var t=e<5?e+1:e;Qh(n+",Power"+(t-1),e?function(i){return Math.pow(i,t)}:function(i){return i},function(i){return 1-Math.pow(1-i,t)},function(i){return i<.5?Math.pow(i*2,t)/2:1-Math.pow((1-i)*2,t)/2})});zn.Linear.easeNone=zn.none=zn.Linear.easeIn;Qh("Elastic",zT("in"),zT("out"),zT());(function(n,e){var t=1/e,i=2*t,r=2.5*t,s=function(a){return a<t?n*a*a:a<i?n*Math.pow(a-1.5/e,2)+.75:a<r?n*(a-=2.25/e)*a+.9375:n*Math.pow(a-2.625/e,2)+.984375};Qh("Bounce",function(o){return 1-s(1-o)},s)})(7.5625,2.75);Qh("Expo",function(n){return Math.pow(2,10*(n-1))*n+n*n*n*n*n*n*(1-n)});Qh("Circ",function(n){return-(zU(1-n*n)-1)});Qh("Sine",function(n){return n===1?1:-bQ(n*MQ)+1});Qh("Back",VT("in"),VT("out"),VT());zn.SteppedEase=zn.steps=ea.SteppedEase={config:function(e,t){e===void 0&&(e=1);var i=1/e,r=e+(t?0:1),s=t?1:0,o=1-wi;return function(a){return((r*$y(0,o,a)|0)+s)*i}}};yg.ease=zn["quad.out"];Eo("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(n){return jb+=n+","+n+"Params,"});var xO=function(e,t){this.id=CQ++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:ZU,this.set=t?t.getSetter:sR},Ay=(function(){function n(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,wg(this,+t.duration,1,1),this.data=t.data,Hi&&(this._ctx=Hi,Hi.data.push(this)),wy||Xo.wake()}var e=n.prototype;return e.delay=function(i){return i||i===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+i-this._delay),this._delay=i,this):this._delay},e.duration=function(i){return arguments.length?this.totalDuration(this._repeat>0?i+(i+this._rDelay)*this._repeat:i):this.totalDuration()&&this._dur},e.totalDuration=function(i){return arguments.length?(this._dirty=0,wg(this,this._repeat<0?i:(i-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(i,r){if(Ag(),!arguments.length)return this._tTime;var s=this._dp;if(s&&s.smoothChildTiming&&this._ts){for(PS(this,i),!s._dp||s.parent||nO(s,this);s&&s.parent;)s.parent._time!==s._start+(s._ts>=0?s._tTime/s._ts:(s.totalDuration()-s._tTime)/-s._ts)&&s.totalTime(s._tTime,!0),s=s.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&i<this._tDur||this._ts<0&&i>0||!this._tDur&&!i)&&Gl(this._dp,this,this._start-this._delay)}return(this._tTime!==i||!this._dur&&!r||this._initted&&Math.abs(this._zTime)===wi||!i&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=i),$U(this,i,r)),this},e.time=function(i,r){return arguments.length?this.totalTime(Math.min(this.totalDuration(),i+UD(this))%(this._dur+this._rDelay)||(i?this._dur:0),r):this._time},e.totalProgress=function(i,r){return arguments.length?this.totalTime(this.totalDuration()*i,r):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},e.progress=function(i,r){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-i:i)+UD(this),r):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(i,r){var s=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(i-1)*s,r):this._repeat?xg(this._tTime,s)+1:1},e.timeScale=function(i,r){if(!arguments.length)return this._rts===-wi?0:this._rts;if(this._rts===i)return this;var s=this.parent&&this._ts?dA(this.parent._time,this):this._tTime;return this._rts=+i||0,this._ts=this._ps||i===-wi?0:this._rts,this.totalTime($y(-Math.abs(this._delay),this.totalDuration(),s),r!==!1),RS(this),kQ(this)},e.paused=function(i){return arguments.length?(this._ps!==i&&(this._ps=i,i?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Ag(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==wi&&(this._tTime-=wi)))),this):this._ps},e.startTime=function(i){if(arguments.length){this._start=i;var r=this.parent||this._dp;return r&&(r._sort||!this.parent)&&Gl(r,this,i-this._delay),this}return this._start},e.endTime=function(i){return this._start+(So(i)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(i){var r=this.parent||this._dp;return r?i&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?dA(r.rawTime(i),this):this._tTime:this._tTime},e.revert=function(i){i===void 0&&(i=DQ);var r=fs;return fs=i,tR(this)&&(this.timeline&&this.timeline.revert(i),this.totalTime(-.01,i.suppressEvents)),this.data!=="nested"&&i.kill!==!1&&this.kill(),fs=r,this},e.globalTime=function(i){for(var r=this,s=arguments.length?i:r.rawTime();r;)s=r._start+s/(Math.abs(r._ts)||1),r=r._dp;return!this.parent&&this._sat?this._sat.globalTime(i):s},e.repeat=function(i){return arguments.length?(this._repeat=i===1/0?-2:i,OD(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(i){if(arguments.length){var r=this._time;return this._rDelay=i,OD(this),r?this.time(r):this}return this._rDelay},e.yoyo=function(i){return arguments.length?(this._yoyo=i,this):this._yoyo},e.seek=function(i,r){return this.totalTime(_a(this,i),So(r))},e.restart=function(i,r){return this.play().totalTime(i?-this._delay:0,So(r)),this._dur||(this._zTime=-wi),this},e.play=function(i,r){return i!=null&&this.seek(i,r),this.reversed(!1).paused(!1)},e.reverse=function(i,r){return i!=null&&this.seek(i||this.totalDuration(),r),this.reversed(!0).paused(!1)},e.pause=function(i,r){return i!=null&&this.seek(i,r),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(i){return arguments.length?(!!i!==this.reversed()&&this.timeScale(-this._rts||(i?-wi:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-wi,this},e.isActive=function(){var i=this.parent||this._dp,r=this._start,s;return!!(!i||this._ts&&this._initted&&i.isActive()&&(s=i.rawTime(!0))>=r&&s<this.endTime(!0)-wi)},e.eventCallback=function(i,r,s){var o=this.vars;return arguments.length>1?(r?(o[i]=r,s&&(o[i+"Params"]=s),i==="onUpdate"&&(this._onUpdate=r)):delete o[i],this):o[i]},e.then=function(i){var r=this;return new Promise(function(s){var o=nr(i)?i:eO,a=function(){var u=r.then;r.then=null,nr(o)&&(o=o(r))&&(o.then||o===r)&&(r.then=u),s(o),r.then=u};r._initted&&r.totalProgress()===1&&r._ts>=0||!r._tTime&&r._ts<0?a():r._prom=a})},e.kill=function(){hv(this)},n})();ta(Ay.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-wi,_prom:0,_ps:!1,_rts:1});var js=(function(n){GU(e,n);function e(i,r){var s;return i===void 0&&(i={}),s=n.call(this,i)||this,s.labels={},s.smoothChildTiming=!!i.smoothChildTiming,s.autoRemoveChildren=!!i.autoRemoveChildren,s._sort=So(i.sortChildren),Vi&&Gl(i.parent||Vi,Vu(s),r),i.reversed&&s.reverse(),i.paused&&s.paused(!0),i.scrollTrigger&&iO(Vu(s),i.scrollTrigger),s}var t=e.prototype;return t.to=function(r,s,o){return Pv(0,arguments,this),this},t.from=function(r,s,o){return Pv(1,arguments,this),this},t.fromTo=function(r,s,o,a){return Pv(2,arguments,this),this},t.set=function(r,s,o){return s.duration=0,s.parent=this,Rv(s).repeatDelay||(s.repeat=0),s.immediateRender=!!s.immediateRender,new Sr(r,s,_a(this,o),1),this},t.call=function(r,s,o){return Gl(this,Sr.delayedCall(0,r,s),o)},t.staggerTo=function(r,s,o,a,l,u,d){return o.duration=s,o.stagger=o.stagger||a,o.onComplete=u,o.onCompleteParams=d,o.parent=this,new Sr(r,o,_a(this,l)),this},t.staggerFrom=function(r,s,o,a,l,u,d){return o.runBackwards=1,Rv(o).immediateRender=So(o.immediateRender),this.staggerTo(r,s,o,a,l,u,d)},t.staggerFromTo=function(r,s,o,a,l,u,d,h){return a.startAt=o,Rv(a).immediateRender=So(a.immediateRender),this.staggerTo(r,s,a,l,u,d,h)},t.render=function(r,s,o){var a=this._time,l=this._dirty?this.totalDuration():this._tDur,u=this._dur,d=r<=0?0:Tr(r),h=this._zTime<0!=r<0&&(this._initted||!u),p,v,_,w,S,A,b,C,P,k,L,N;if(this!==Vi&&d>l&&r>=0&&(d=l),d!==this._tTime||o||h){if(a!==this._time&&u&&(d+=this._time-a,r+=this._time-a),p=d,P=this._start,C=this._ts,A=!C,h&&(u||(a=this._zTime),(r||!s)&&(this._zTime=r)),this._repeat){if(L=this._yoyo,S=u+this._rDelay,this._repeat<-1&&r<0)return this.totalTime(S*100+r,s,o);if(p=Tr(d%S),d===l?(w=this._repeat,p=u):(k=Tr(d/S),w=~~k,w&&w===k&&(p=u,w--),p>u&&(p=u)),k=xg(this._tTime,S),!a&&this._tTime&&k!==w&&this._tTime-k*S-this._dur<=0&&(k=w),L&&w&1&&(p=u-p,N=1),w!==k&&!this._lock){var O=L&&k&1,D=O===(L&&w&1);if(w<k&&(O=!O),a=O?0:d%u?u:d,this._lock=1,this.render(a||(N?0:Tr(w*S)),s,!u)._lock=0,this._tTime=d,!s&&this.parent&&Ko(this,"onRepeat"),this.vars.repeatRefresh&&!N&&(this.invalidate()._lock=1),a&&a!==this._time||A!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(u=this._dur,l=this._tDur,D&&(this._lock=2,a=O?u:-1e-4,this.render(a,!0),this.vars.repeatRefresh&&!N&&this.invalidate()),this._lock=0,!this._ts&&!A)return this;yO(this,N)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(b=HQ(this,Tr(a),Tr(p)),b&&(d-=p-(p=b._start))),this._tTime=d,this._time=p,this._act=!C,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=r,a=0),!a&&d&&!s&&!k&&(Ko(this,"onStart"),this._tTime!==d))return this;if(p>=a&&r>=0)for(v=this._first;v;){if(_=v._next,(v._act||p>=v._start)&&v._ts&&b!==v){if(v.parent!==this)return this.render(r,s,o);if(v.render(v._ts>0?(p-v._start)*v._ts:(v._dirty?v.totalDuration():v._tDur)+(p-v._start)*v._ts,s,o),p!==this._time||!this._ts&&!A){b=0,_&&(d+=this._zTime=-wi);break}}v=_}else{v=this._last;for(var U=r<0?r:p;v;){if(_=v._prev,(v._act||U<=v._end)&&v._ts&&b!==v){if(v.parent!==this)return this.render(r,s,o);if(v.render(v._ts>0?(U-v._start)*v._ts:(v._dirty?v.totalDuration():v._tDur)+(U-v._start)*v._ts,s,o||fs&&tR(v)),p!==this._time||!this._ts&&!A){b=0,_&&(d+=this._zTime=U?-wi:wi);break}}v=_}}if(b&&!s&&(this.pause(),b.render(p>=a?0:-wi)._zTime=p>=a?1:-1,this._ts))return this._start=P,RS(this),this.render(r,s,o);this._onUpdate&&!s&&Ko(this,"onUpdate",!0),(d===l&&this._tTime>=this.totalDuration()||!d&&a)&&(P===this._start||Math.abs(C)!==Math.abs(this._ts))&&(this._lock||((r||!u)&&(d===l&&this._ts>0||!d&&this._ts<0)&&kd(this,1),!s&&!(r<0&&!a)&&(d||a||!l)&&(Ko(this,d===l&&r>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(d<l&&this.timeScale()>0)&&this._prom())))}return this},t.add=function(r,s){var o=this;if(oc(s)||(s=_a(this,s,r)),!(r instanceof Ay)){if(Is(r))return r.forEach(function(a){return o.add(a,s)}),this;if(Zr(r))return this.addLabel(r,s);if(nr(r))r=Sr.delayedCall(0,r);else return this}return this!==r?Gl(this,r,s):this},t.getChildren=function(r,s,o,a){r===void 0&&(r=!0),s===void 0&&(s=!0),o===void 0&&(o=!0),a===void 0&&(a=-Pa);for(var l=[],u=this._first;u;)u._start>=a&&(u instanceof Sr?s&&l.push(u):(o&&l.push(u),r&&l.push.apply(l,u.getChildren(!0,s,o)))),u=u._next;return l},t.getById=function(r){for(var s=this.getChildren(1,1,1),o=s.length;o--;)if(s[o].vars.id===r)return s[o]},t.remove=function(r){return Zr(r)?this.removeLabel(r):nr(r)?this.killTweensOf(r):(r.parent===this&&bS(this,r),r===this._recent&&(this._recent=this._last),Sh(this))},t.totalTime=function(r,s){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=Tr(Xo.time-(this._ts>0?r/this._ts:(this.totalDuration()-r)/-this._ts))),n.prototype.totalTime.call(this,r,s),this._forcing=0,this):this._tTime},t.addLabel=function(r,s){return this.labels[r]=_a(this,s),this},t.removeLabel=function(r){return delete this.labels[r],this},t.addPause=function(r,s,o){var a=Sr.delayedCall(0,s||_y,o);return a.data="isPause",this._hasPause=1,Gl(this,a,_a(this,r))},t.removePause=function(r){var s=this._first;for(r=_a(this,r);s;)s._start===r&&s.data==="isPause"&&kd(s),s=s._next},t.killTweensOf=function(r,s,o){for(var a=this.getTweensOf(r,o),l=a.length;l--;)dd!==a[l]&&a[l].kill(r,s);return this},t.getTweensOf=function(r,s){for(var o=[],a=Ia(r),l=this._first,u=oc(s),d;l;)l instanceof Sr?LQ(l._targets,a)&&(u?(!dd||l._initted&&l._ts)&&l.globalTime(0)<=s&&l.globalTime(l.totalDuration())>s:!s||l.isActive())&&o.push(l):(d=l.getTweensOf(a,s)).length&&o.push.apply(o,d),l=l._next;return o},t.tweenTo=function(r,s){s=s||{};var o=this,a=_a(o,r),l=s,u=l.startAt,d=l.onStart,h=l.onStartParams,p=l.immediateRender,v,_=Sr.to(o,ta({ease:s.ease||"none",lazy:!1,immediateRender:!1,time:a,overwrite:"auto",duration:s.duration||Math.abs((a-(u&&"time"in u?u.time:o._time))/o.timeScale())||wi,onStart:function(){if(o.pause(),!v){var S=s.duration||Math.abs((a-(u&&"time"in u?u.time:o._time))/o.timeScale());_._dur!==S&&wg(_,S,0,1).render(_._time,!0,!0),v=1}d&&d.apply(_,h||[])}},s));return p?_.render(0):_},t.tweenFromTo=function(r,s,o){return this.tweenTo(s,ta({startAt:{time:_a(this,r)}},o))},t.recent=function(){return this._recent},t.nextLabel=function(r){return r===void 0&&(r=this._time),HD(this,_a(this,r))},t.previousLabel=function(r){return r===void 0&&(r=this._time),HD(this,_a(this,r),1)},t.currentLabel=function(r){return arguments.length?this.seek(r,!0):this.previousLabel(this._time+wi)},t.shiftChildren=function(r,s,o){o===void 0&&(o=0);for(var a=this._first,l=this.labels,u;a;)a._start>=o&&(a._start+=r,a._end+=r),a=a._next;if(s)for(u in l)l[u]>=o&&(l[u]+=r);return Sh(this)},t.invalidate=function(r){var s=this._first;for(this._lock=0;s;)s.invalidate(r),s=s._next;return n.prototype.invalidate.call(this,r)},t.clear=function(r){r===void 0&&(r=!0);for(var s=this._first,o;s;)o=s._next,this.remove(s),s=o;return this._dp&&(this._time=this._tTime=this._pTime=0),r&&(this.labels={}),Sh(this)},t.totalDuration=function(r){var s=0,o=this,a=o._last,l=Pa,u,d,h;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-r:r));if(o._dirty){for(h=o.parent;a;)u=a._prev,a._dirty&&a.totalDuration(),d=a._start,d>l&&o._sort&&a._ts&&!o._lock?(o._lock=1,Gl(o,a,d-a._delay,1)._lock=0):l=d,d<0&&a._ts&&(s-=d,(!h&&!o._dp||h&&h.smoothChildTiming)&&(o._start+=d/o._ts,o._time-=d,o._tTime-=d),o.shiftChildren(-d,!1,-1/0),l=0),a._end>s&&a._ts&&(s=a._end),a=u;wg(o,o===Vi&&o._time>s?o._time:s,1,1),o._dirty=0}return o._tDur},e.updateRoot=function(r){if(Vi._ts&&($U(Vi,dA(r,Vi)),QU=Xo.frame),Xo.frame>=kD){kD+=$o.autoSleep||120;var s=Vi._first;if((!s||!s._ts)&&$o.autoSleep&&Xo._listeners.length<2){for(;s&&!s._ts;)s=s._next;s||Xo.sleep()}}},e})(Ay);ta(js.prototype,{_lock:0,_hasPause:0,_forcing:0});var nZ=function(e,t,i,r,s,o,a){var l=new To(this._pt,e,t,0,1,MO,null,s),u=0,d=0,h,p,v,_,w,S,A,b;for(l.b=i,l.e=r,i+="",r+="",(A=~r.indexOf("random("))&&(r=xy(r)),o&&(b=[i,r],o(b,e,t),i=b[0],r=b[1]),p=i.match(OT)||[];h=OT.exec(r);)_=h[0],w=r.substring(u,h.index),v?v=(v+1)%5:w.substr(-5)==="rgba("&&(v=1),_!==p[d++]&&(S=parseFloat(p[d-1])||0,l._pt={_next:l._pt,p:w||d===1?w:",",s:S,c:_.charAt(1)==="="?Zm(S,_)-S:parseFloat(_)-S,m:v&&v<4?Math.round:0},u=OT.lastIndex);return l.c=u<r.length?r.substring(u,r.length):"",l.fp=a,(qU.test(r)||A)&&(l.e=0),this._pt=l,l},nR=function(e,t,i,r,s,o,a,l,u,d){nr(r)&&(r=r(s||0,e,o));var h=e[t],p=i!=="get"?i:nr(h)?u?e[t.indexOf("set")||!nr(e["get"+t.substr(3)])?t:"get"+t.substr(3)](u):e[t]():h,v=nr(h)?u?aZ:EO:rR,_;if(Zr(r)&&(~r.indexOf("random(")&&(r=xy(r)),r.charAt(1)==="="&&(_=Zm(p,r)+(Cs(p)||0),(_||_===0)&&(r=_))),!d||p!==r||LM)return!isNaN(p*r)&&r!==""?(_=new To(this._pt,e,t,+p||0,r-(p||0),typeof h=="boolean"?uZ:TO,0,v),u&&(_.fp=u),a&&_.modifier(a,this,e),this._pt=_):(!h&&!(t in e)&&Zb(t,r),nZ.call(this,e,t,p,r,v,l||$o.stringFilter,u))},iZ=function(e,t,i,r,s){if(nr(e)&&(e=Iv(e,s,t,i,r)),!tu(e)||e.style&&e.nodeType||Is(e)||VU(e))return Zr(e)?Iv(e,s,t,i,r):e;var o={},a;for(a in e)o[a]=Iv(e[a],s,t,i,r);return o},wO=function(e,t,i,r,s,o){var a,l,u,d;if(Wo[e]&&(a=new Wo[e]).init(s,a.rawVars?t[e]:iZ(t[e],r,s,o,i),i,r,o)!==!1&&(i._pt=l=new To(i._pt,s,e,0,1,a.render,a,0,a.priority),i!==Fm))for(u=i._ptLookup[i._targets.indexOf(s)],d=a._props.length;d--;)u[a._props[d]]=l;return a},dd,LM,iR=function n(e,t,i){var r=e.vars,s=r.ease,o=r.startAt,a=r.immediateRender,l=r.lazy,u=r.onUpdate,d=r.runBackwards,h=r.yoyoEase,p=r.keyframes,v=r.autoRevert,_=e._dur,w=e._startAt,S=e._targets,A=e.parent,b=A&&A.data==="nested"?A.vars.targets:S,C=e._overwrite==="auto"&&!Xb,P=e.timeline,k,L,N,O,D,U,X,Z,he,Q,ue,re,ye;if(P&&(!p||!s)&&(s="none"),e._ease=Eh(s,yg.ease),e._yEase=h?vO(Eh(h===!0?s:h,yg.ease)):0,h&&e._yoyo&&!e._repeat&&(h=e._yEase,e._yEase=e._ease,e._ease=h),e._from=!P&&!!r.runBackwards,!P||p&&!r.stagger){if(Z=S[0]?Ah(S[0]).harness:0,re=Z&&r[Z.prop],k=cA(r,$b),w&&(w._zTime<0&&w.progress(1),t<0&&d&&a&&!v?w.render(-1,!0):w.revert(d&&_?Lw:IQ),w._lazy=0),o){if(kd(e._startAt=Sr.set(S,ta({data:"isStart",overwrite:!1,parent:A,immediateRender:!0,lazy:!w&&So(l),startAt:null,delay:0,onUpdate:u&&function(){return Ko(e,"onUpdate")},stagger:0},o))),e._startAt._dp=0,e._startAt._sat=e,t<0&&(fs||!a&&!v)&&e._startAt.revert(Lw),a&&_&&t<=0&&i<=0){t&&(e._zTime=t);return}}else if(d&&_&&!w){if(t&&(a=!1),N=ta({overwrite:!1,data:"isFromStart",lazy:a&&!w&&So(l),immediateRender:a,stagger:0,parent:A},k),re&&(N[Z.prop]=re),kd(e._startAt=Sr.set(S,N)),e._startAt._dp=0,e._startAt._sat=e,t<0&&(fs?e._startAt.revert(Lw):e._startAt.render(-1,!0)),e._zTime=t,!a)n(e._startAt,wi,wi);else if(!t)return}for(e._pt=e._ptCache=0,l=_&&So(l)||l&&!_,L=0;L<S.length;L++){if(D=S[L],X=D._gsap||eR(S)[L]._gsap,e._ptLookup[L]=Q={},CM[X.id]&&Md.length&&uA(),ue=b===S?L:b.indexOf(D),Z&&(he=new Z).init(D,re||k,e,ue,b)!==!1&&(e._pt=O=new To(e._pt,D,he.name,0,1,he.render,he,0,he.priority),he._props.forEach(function($){Q[$]=O}),he.priority&&(U=1)),!Z||re)for(N in k)Wo[N]&&(he=wO(N,k,e,ue,D,b))?he.priority&&(U=1):Q[N]=O=nR.call(e,D,N,"get",k[N],ue,b,0,r.stringFilter);e._op&&e._op[L]&&e.kill(D,e._op[L]),C&&e._pt&&(dd=e,Vi.killTweensOf(D,Q,e.globalTime(t)),ye=!e.parent,dd=0),e._pt&&l&&(CM[X.id]=1)}U&&CO(e),e._onInit&&e._onInit(e)}e._onUpdate=u,e._initted=(!e._op||e._pt)&&!ye,p&&t<=0&&P.render(Pa,!0,!0)},rZ=function(e,t,i,r,s,o,a,l){var u=(e._pt&&e._ptCache||(e._ptCache={}))[t],d,h,p,v;if(!u)for(u=e._ptCache[t]=[],p=e._ptLookup,v=e._targets.length;v--;){if(d=p[v][t],d&&d.d&&d.d._pt)for(d=d.d._pt;d&&d.p!==t&&d.fp!==t;)d=d._next;if(!d)return LM=1,e.vars[t]="+=0",iR(e,a),LM=0,l?yy(t+" not eligible for reset"):1;u.push(d)}for(v=u.length;v--;)h=u[v],d=h._pt||h,d.s=(r||r===0)&&!s?r:d.s+(r||0)+o*d.c,d.c=i-d.s,h.e&&(h.e=ur(i)+Cs(h.e)),h.b&&(h.b=d.s+Cs(h.b))},sZ=function(e,t){var i=e[0]?Ah(e[0]).harness:0,r=i&&i.aliases,s,o,a,l;if(!r)return t;s=_g({},t);for(o in r)if(o in s)for(l=r[o].split(","),a=l.length;a--;)s[l[a]]=s[o];return s},oZ=function(e,t,i,r){var s=t.ease||r||"power1.inOut",o,a;if(Is(t))a=i[e]||(i[e]=[]),t.forEach(function(l,u){return a.push({t:u/(t.length-1)*100,v:l,e:s})});else for(o in t)a=i[o]||(i[o]=[]),o==="ease"||a.push({t:parseFloat(e),v:t[o],e:s})},Iv=function(e,t,i,r,s){return nr(e)?e.call(t,i,r,s):Zr(e)&&~e.indexOf("random(")?xy(e):e},AO=jb+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",SO={};Eo(AO+",id,stagger,delay,duration,paused,scrollTrigger",function(n){return SO[n]=1});var Sr=(function(n){GU(e,n);function e(i,r,s,o){var a;typeof r=="number"&&(s.duration=r,r=s,s=null),a=n.call(this,o?r:Rv(r))||this;var l=a.vars,u=l.duration,d=l.delay,h=l.immediateRender,p=l.stagger,v=l.overwrite,_=l.keyframes,w=l.defaults,S=l.scrollTrigger,A=l.yoyoEase,b=r.parent||Vi,C=(Is(i)||VU(i)?oc(i[0]):"length"in r)?[i]:Ia(i),P,k,L,N,O,D,U,X;if(a._targets=C.length?eR(C):yy("GSAP target "+i+" not found. https://gsap.com",!$o.nullTargetWarn)||[],a._ptLookup=[],a._overwrite=v,_||p||sw(u)||sw(d)){if(r=a.vars,P=a.timeline=new js({data:"nested",defaults:w||{},targets:b&&b.data==="nested"?b.vars.targets:C}),P.kill(),P.parent=P._dp=Vu(a),P._start=0,p||sw(u)||sw(d)){if(N=C.length,U=p&&aO(p),tu(p))for(O in p)~AO.indexOf(O)&&(X||(X={}),X[O]=p[O]);for(k=0;k<N;k++)L=cA(r,SO),L.stagger=0,A&&(L.yoyoEase=A),X&&_g(L,X),D=C[k],L.duration=+Iv(u,Vu(a),k,D,C),L.delay=(+Iv(d,Vu(a),k,D,C)||0)-a._delay,!p&&N===1&&L.delay&&(a._delay=d=L.delay,a._start+=d,L.delay=0),P.to(D,L,U?U(k,D,C):0),P._ease=zn.none;P.duration()?u=d=0:a.timeline=0}else if(_){Rv(ta(P.vars.defaults,{ease:"none"})),P._ease=Eh(_.ease||r.ease||"none");var Z=0,he,Q,ue;if(Is(_))_.forEach(function(re){return P.to(C,re,">")}),P.duration();else{L={};for(O in _)O==="ease"||O==="easeEach"||oZ(O,_[O],L,_.easeEach);for(O in L)for(he=L[O].sort(function(re,ye){return re.t-ye.t}),Z=0,k=0;k<he.length;k++)Q=he[k],ue={ease:Q.e,duration:(Q.t-(k?he[k-1].t:0))/100*u},ue[O]=Q.v,P.to(C,ue,Z),Z+=ue.duration;P.duration()<u&&P.to({},{duration:u-P.duration()})}}u||a.duration(u=P.duration())}else a.timeline=0;return v===!0&&!Xb&&(dd=Vu(a),Vi.killTweensOf(C),dd=0),Gl(b,Vu(a),s),r.reversed&&a.reverse(),r.paused&&a.paused(!0),(h||!u&&!_&&a._start===Tr(b._time)&&So(h)&&FQ(Vu(a))&&b.data!=="nested")&&(a._tTime=-wi,a.render(Math.max(0,-d)||0)),S&&iO(Vu(a),S),a}var t=e.prototype;return t.render=function(r,s,o){var a=this._time,l=this._tDur,u=this._dur,d=r<0,h=r>l-wi&&!d?l:r<wi?0:r,p,v,_,w,S,A,b,C,P;if(!u)OQ(this,r,s,o);else if(h!==this._tTime||!r||o||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==d||this._lazy){if(p=h,C=this.timeline,this._repeat){if(w=u+this._rDelay,this._repeat<-1&&d)return this.totalTime(w*100+r,s,o);if(p=Tr(h%w),h===l?(_=this._repeat,p=u):(S=Tr(h/w),_=~~S,_&&_===S?(p=u,_--):p>u&&(p=u)),A=this._yoyo&&_&1,A&&(P=this._yEase,p=u-p),S=xg(this._tTime,w),p===a&&!o&&this._initted&&_===S)return this._tTime=h,this;_!==S&&(C&&this._yEase&&yO(C,A),this.vars.repeatRefresh&&!A&&!this._lock&&p!==w&&this._initted&&(this._lock=o=1,this.render(Tr(w*_),!0).invalidate()._lock=0))}if(!this._initted){if(rO(this,d?r:p,o,s,h))return this._tTime=0,this;if(a!==this._time&&!(o&&this.vars.repeatRefresh&&_!==S))return this;if(u!==this._dur)return this.render(r,s,o)}if(this._tTime=h,this._time=p,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=b=(P||this._ease)(p/u),this._from&&(this.ratio=b=1-b),!a&&h&&!s&&!S&&(Ko(this,"onStart"),this._tTime!==h))return this;for(v=this._pt;v;)v.r(b,v.d),v=v._next;C&&C.render(r<0?r:C._dur*C._ease(p/this._dur),s,o)||this._startAt&&(this._zTime=r),this._onUpdate&&!s&&(d&&bM(this,r,s,o),Ko(this,"onUpdate")),this._repeat&&_!==S&&this.vars.onRepeat&&!s&&this.parent&&Ko(this,"onRepeat"),(h===this._tDur||!h)&&this._tTime===h&&(d&&!this._onUpdate&&bM(this,r,!0,!0),(r||!u)&&(h===this._tDur&&this._ts>0||!h&&this._ts<0)&&kd(this,1),!s&&!(d&&!a)&&(h||a||A)&&(Ko(this,h===l?"onComplete":"onReverseComplete",!0),this._prom&&!(h<l&&this.timeScale()>0)&&this._prom()))}return this},t.targets=function(){return this._targets},t.invalidate=function(r){return(!r||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(r),n.prototype.invalidate.call(this,r)},t.resetTo=function(r,s,o,a,l){wy||Xo.wake(),this._ts||this.play();var u=Math.min(this._dur,(this._dp._time-this._start)*this._ts),d;return this._initted||iR(this,u),d=this._ease(u/this._dur),rZ(this,r,s,o,a,d,u,l)?this.resetTo(r,s,o,a,1):(PS(this,0),this.parent||tO(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(r,s){if(s===void 0&&(s="all"),!r&&(!s||s==="all"))return this._lazy=this._pt=0,this.parent?hv(this):this.scrollTrigger&&this.scrollTrigger.kill(!!fs),this;if(this.timeline){var o=this.timeline.totalDuration();return this.timeline.killTweensOf(r,s,dd&&dd.vars.overwrite!==!0)._first||hv(this),this.parent&&o!==this.timeline.totalDuration()&&wg(this,this._dur*this.timeline._tDur/o,0,1),this}var a=this._targets,l=r?Ia(r):a,u=this._ptLookup,d=this._pt,h,p,v,_,w,S,A;if((!s||s==="all")&&NQ(a,l))return s==="all"&&(this._pt=0),hv(this);for(h=this._op=this._op||[],s!=="all"&&(Zr(s)&&(w={},Eo(s,function(b){return w[b]=1}),s=w),s=sZ(a,s)),A=a.length;A--;)if(~l.indexOf(a[A])){p=u[A],s==="all"?(h[A]=s,_=p,v={}):(v=h[A]=h[A]||{},_=s);for(w in _)S=p&&p[w],S&&((!("kill"in S.d)||S.d.kill(w)===!0)&&bS(this,S,"_pt"),delete p[w]),v!=="all"&&(v[w]=1)}return this._initted&&!this._pt&&d&&hv(this),this},e.to=function(r,s){return new e(r,s,arguments[2])},e.from=function(r,s){return Pv(1,arguments)},e.delayedCall=function(r,s,o,a){return new e(s,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:r,onComplete:s,onReverseComplete:s,onCompleteParams:o,onReverseCompleteParams:o,callbackScope:a})},e.fromTo=function(r,s,o){return Pv(2,arguments)},e.set=function(r,s){return s.duration=0,s.repeatDelay||(s.repeat=0),new e(r,s)},e.killTweensOf=function(r,s,o){return Vi.killTweensOf(r,s,o)},e})(Ay);ta(Sr.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});Eo("staggerTo,staggerFrom,staggerFromTo",function(n){Sr[n]=function(){var e=new js,t=PM.call(arguments,0);return t.splice(n==="staggerFromTo"?5:4,0,0),e[n].apply(e,t)}});var rR=function(e,t,i){return e[t]=i},EO=function(e,t,i){return e[t](i)},aZ=function(e,t,i,r){return e[t](r.fp,i)},lZ=function(e,t,i){return e.setAttribute(t,i)},sR=function(e,t){return nr(e[t])?EO:Yb(e[t])&&e.setAttribute?lZ:rR},TO=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e6)/1e6,t)},uZ=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},MO=function(e,t){var i=t._pt,r="";if(!e&&t.b)r=t.b;else if(e===1&&t.e)r=t.e;else{for(;i;)r=i.p+(i.m?i.m(i.s+i.c*e):Math.round((i.s+i.c*e)*1e4)/1e4)+r,i=i._next;r+=t.c}t.set(t.t,t.p,r,t)},oR=function(e,t){for(var i=t._pt;i;)i.r(e,i.d),i=i._next},cZ=function(e,t,i,r){for(var s=this._pt,o;s;)o=s._next,s.p===r&&s.modifier(e,t,i),s=o},dZ=function(e){for(var t=this._pt,i,r;t;)r=t._next,t.p===e&&!t.op||t.op===e?bS(this,t,"_pt"):t.dep||(i=1),t=r;return!i},fZ=function(e,t,i,r){r.mSet(e,t,r.m.call(r.tween,i,r.mt),r)},CO=function(e){for(var t=e._pt,i,r,s,o;t;){for(i=t._next,r=s;r&&r.pr>t.pr;)r=r._next;(t._prev=r?r._prev:o)?t._prev._next=t:s=t,(t._next=r)?r._prev=t:o=t,t=i}e._pt=s},To=(function(){function n(t,i,r,s,o,a,l,u,d){this.t=i,this.s=s,this.c=o,this.p=r,this.r=a||TO,this.d=l||this,this.set=u||rR,this.pr=d||0,this._next=t,t&&(t._prev=this)}var e=n.prototype;return e.modifier=function(i,r,s){this.mSet=this.mSet||this.set,this.set=fZ,this.m=i,this.mt=s,this.tween=r},n})();Eo(jb+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(n){return $b[n]=1});ea.TweenMax=ea.TweenLite=Sr;ea.TimelineLite=ea.TimelineMax=js;Vi=new js({sortChildren:!1,defaults:yg,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});$o.stringFilter=gO;var Th=[],Nw={},hZ=[],zD=0,pZ=0,WT=function(e){return(Nw[e]||hZ).map(function(t){return t()})},BM=function(){var e=Date.now(),t=[];e-zD>2&&(WT("matchMediaInit"),Th.forEach(function(i){var r=i.queries,s=i.conditions,o,a,l,u;for(a in r)o=Fl.matchMedia(r[a]).matches,o&&(l=1),o!==s[a]&&(s[a]=o,u=1);u&&(i.revert(),l&&t.push(i))}),WT("matchMediaRevert"),t.forEach(function(i){return i.onMatch(i,function(r){return i.add(null,r)})}),zD=e,WT("matchMedia"))},bO=(function(){function n(t,i){this.selector=i&&IM(i),this.data=[],this._r=[],this.isReverted=!1,this.id=pZ++,t&&this.add(t)}var e=n.prototype;return e.add=function(i,r,s){nr(i)&&(s=r,r=i,i=nr);var o=this,a=function(){var u=Hi,d=o.selector,h;return u&&u!==o&&u.data.push(o),s&&(o.selector=IM(s)),Hi=o,h=r.apply(o,arguments),nr(h)&&o._r.push(h),Hi=u,o.selector=d,o.isReverted=!1,h};return o.last=a,i===nr?a(o,function(l){return o.add(null,l)}):i?o[i]=a:a},e.ignore=function(i){var r=Hi;Hi=null,i(this),Hi=r},e.getTweens=function(){var i=[];return this.data.forEach(function(r){return r instanceof n?i.push.apply(i,r.getTweens()):r instanceof Sr&&!(r.parent&&r.parent.data==="nested")&&i.push(r)}),i},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(i,r){var s=this;if(i?(function(){for(var a=s.getTweens(),l=s.data.length,u;l--;)u=s.data[l],u.data==="isFlip"&&(u.revert(),u.getChildren(!0,!0,!1).forEach(function(d){return a.splice(a.indexOf(d),1)}));for(a.map(function(d){return{g:d._dur||d._delay||d._sat&&!d._sat.vars.immediateRender?d.globalTime(0):-1/0,t:d}}).sort(function(d,h){return h.g-d.g||-1/0}).forEach(function(d){return d.t.revert(i)}),l=s.data.length;l--;)u=s.data[l],u instanceof js?u.data!=="nested"&&(u.scrollTrigger&&u.scrollTrigger.revert(),u.kill()):!(u instanceof Sr)&&u.revert&&u.revert(i);s._r.forEach(function(d){return d(i,s)}),s.isReverted=!0})():this.data.forEach(function(a){return a.kill&&a.kill()}),this.clear(),r)for(var o=Th.length;o--;)Th[o].id===this.id&&Th.splice(o,1)},e.revert=function(i){this.kill(i||{})},n})(),mZ=(function(){function n(t){this.contexts=[],this.scope=t,Hi&&Hi.data.push(this)}var e=n.prototype;return e.add=function(i,r,s){tu(i)||(i={matches:i});var o=new bO(0,s||this.scope),a=o.conditions={},l,u,d;Hi&&!o.selector&&(o.selector=Hi.selector),this.contexts.push(o),r=o.add("onMatch",r),o.queries=i;for(u in i)u==="all"?d=1:(l=Fl.matchMedia(i[u]),l&&(Th.indexOf(o)<0&&Th.push(o),(a[u]=l.matches)&&(d=1),l.addListener?l.addListener(BM):l.addEventListener("change",BM)));return d&&r(o,function(h){return o.add(null,h)}),this},e.revert=function(i){this.kill(i||{})},e.kill=function(i){this.contexts.forEach(function(r){return r.kill(i,!0)})},n})(),fA={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];t.forEach(function(r){return hO(r)})},timeline:function(e){return new js(e)},getTweensOf:function(e,t){return Vi.getTweensOf(e,t)},getProperty:function(e,t,i,r){Zr(e)&&(e=Ia(e)[0]);var s=Ah(e||{}).get,o=i?eO:jU;return i==="native"&&(i=""),e&&(t?o((Wo[t]&&Wo[t].get||s)(e,t,i,r)):function(a,l,u){return o((Wo[a]&&Wo[a].get||s)(e,a,l,u))})},quickSetter:function(e,t,i){if(e=Ia(e),e.length>1){var r=e.map(function(d){return bo.quickSetter(d,t,i)}),s=r.length;return function(d){for(var h=s;h--;)r[h](d)}}e=e[0]||{};var o=Wo[t],a=Ah(e),l=a.harness&&(a.harness.aliases||{})[t]||t,u=o?function(d){var h=new o;Fm._pt=0,h.init(e,i?d+i:d,Fm,0,[e]),h.render(1,h),Fm._pt&&oR(1,Fm)}:a.set(e,l);return o?u:function(d){return u(e,l,i?d+i:d,a,1)}},quickTo:function(e,t,i){var r,s=bo.to(e,ta((r={},r[t]="+=0.1",r.paused=!0,r.stagger=0,r),i||{})),o=function(l,u,d){return s.resetTo(t,l,u,d)};return o.tween=s,o},isTweening:function(e){return Vi.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=Eh(e.ease,yg.ease)),FD(yg,e||{})},config:function(e){return FD($o,e||{})},registerEffect:function(e){var t=e.name,i=e.effect,r=e.plugins,s=e.defaults,o=e.extendTimeline;(r||"").split(",").forEach(function(a){return a&&!Wo[a]&&!ea[a]&&yy(t+" effect requires "+a+" plugin.")}),HT[t]=function(a,l,u){return i(Ia(a),ta(l||{},s),u)},o&&(js.prototype[t]=function(a,l,u){return this.add(HT[t](a,tu(l)?l:(u=l)&&{},this),u)})},registerEase:function(e,t){zn[e]=Eh(t)},parseEase:function(e,t){return arguments.length?Eh(e,t):zn},getById:function(e){return Vi.getById(e)},exportRoot:function(e,t){e===void 0&&(e={});var i=new js(e),r,s;for(i.smoothChildTiming=So(e.smoothChildTiming),Vi.remove(i),i._dp=0,i._time=i._tTime=Vi._time,r=Vi._first;r;)s=r._next,(t||!(!r._dur&&r instanceof Sr&&r.vars.onComplete===r._targets[0]))&&Gl(i,r,r._start-r._delay),r=s;return Gl(Vi,i,0),i},context:function(e,t){return e?new bO(e,t):Hi},matchMedia:function(e){return new mZ(e)},matchMediaRefresh:function(){return Th.forEach(function(e){var t=e.conditions,i,r;for(r in t)t[r]&&(t[r]=!1,i=1);i&&e.revert()})||BM()},addEventListener:function(e,t){var i=Nw[e]||(Nw[e]=[]);~i.indexOf(t)||i.push(t)},removeEventListener:function(e,t){var i=Nw[e],r=i&&i.indexOf(t);r>=0&&i.splice(r,1)},utils:{wrap:XQ,wrapYoyo:YQ,distribute:aO,random:uO,snap:lO,normalize:JQ,getUnit:Cs,clamp:zQ,splitColor:pO,toArray:Ia,selector:IM,mapRange:dO,pipe:WQ,unitize:qQ,interpolate:KQ,shuffle:oO},install:YU,effects:HT,ticker:Xo,updateRoot:js.updateRoot,plugins:Wo,globalTimeline:Vi,core:{PropTween:To,globals:KU,Tween:Sr,Timeline:js,Animation:Ay,getCache:Ah,_removeLinkedListItem:bS,reverting:function(){return fs},context:function(e){return e&&Hi&&(Hi.data.push(e),e._ctx=Hi),Hi},suppressOverwrites:function(e){return Xb=e}}};Eo("to,from,fromTo,delayedCall,set,killTweensOf",function(n){return fA[n]=Sr[n]});Xo.add(js.updateRoot);Fm=fA.to({},{duration:0});var gZ=function(e,t){for(var i=e._pt;i&&i.p!==t&&i.op!==t&&i.fp!==t;)i=i._next;return i},vZ=function(e,t){var i=e._targets,r,s,o;for(r in t)for(s=i.length;s--;)o=e._ptLookup[s][r],o&&(o=o.d)&&(o._pt&&(o=gZ(o,r)),o&&o.modifier&&o.modifier(t[r],e,i[s],r))},qT=function(e,t){return{name:e,headless:1,rawVars:1,init:function(r,s,o){o._onInit=function(a){var l,u;if(Zr(s)&&(l={},Eo(s,function(d){return l[d]=1}),s=l),t){l={};for(u in s)l[u]=t(s[u]);s=l}vZ(a,s)}}}},bo=fA.registerPlugin({name:"attr",init:function(e,t,i,r,s){var o,a,l;this.tween=i;for(o in t)l=e.getAttribute(o)||"",a=this.add(e,"setAttribute",(l||0)+"",t[o],r,s,0,0,o),a.op=o,a.b=l,this._props.push(o)},render:function(e,t){for(var i=t._pt;i;)fs?i.set(i.t,i.p,i.b,i):i.r(e,i.d),i=i._next}},{name:"endArray",headless:1,init:function(e,t){for(var i=t.length;i--;)this.add(e,i,e[i]||0,t[i],0,0,0,0,0,1)}},qT("roundProps",DM),qT("modifiers"),qT("snap",lO))||fA;Sr.version=js.version=bo.version="3.13.0";XU=1;Kb()&&Ag();zn.Power0;zn.Power1;zn.Power2;zn.Power3;zn.Power4;zn.Linear;zn.Quad;zn.Cubic;zn.Quart;zn.Quint;zn.Strong;zn.Elastic;zn.Back;zn.SteppedEase;zn.Bounce;zn.Sine;zn.Expo;zn.Circ;/*!
 * CSSPlugin 3.13.0
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var VD,fd,$m,aR,mh,WD,lR,yZ=function(){return typeof window<"u"},ac={},eh=180/Math.PI,jm=Math.PI/180,Em=Math.atan2,qD=1e8,uR=/([A-Z])/g,_Z=/(left|right|width|margin|padding|x)/i,xZ=/[\s,\(]\S/,Vl={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},NM=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},wZ=function(e,t){return t.set(t.t,t.p,e===1?t.e:Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},AZ=function(e,t){return t.set(t.t,t.p,e?Math.round((t.s+t.c*e)*1e4)/1e4+t.u:t.b,t)},SZ=function(e,t){var i=t.s+t.c*e;t.set(t.t,t.p,~~(i+(i<0?-.5:.5))+t.u,t)},RO=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},PO=function(e,t){return t.set(t.t,t.p,e!==1?t.b:t.e,t)},EZ=function(e,t,i){return e.style[t]=i},TZ=function(e,t,i){return e.style.setProperty(t,i)},MZ=function(e,t,i){return e._gsap[t]=i},CZ=function(e,t,i){return e._gsap.scaleX=e._gsap.scaleY=i},bZ=function(e,t,i,r,s){var o=e._gsap;o.scaleX=o.scaleY=i,o.renderTransform(s,o)},RZ=function(e,t,i,r,s){var o=e._gsap;o[t]=i,o.renderTransform(s,o)},qi="transform",Mo=qi+"Origin",PZ=function n(e,t){var i=this,r=this.target,s=r.style,o=r._gsap;if(e in ac&&s){if(this.tfm=this.tfm||{},e!=="transform")e=Vl[e]||e,~e.indexOf(",")?e.split(",").forEach(function(a){return i.tfm[a]=Ju(r,a)}):this.tfm[e]=o.x?o[e]:Ju(r,e),e===Mo&&(this.tfm.zOrigin=o.zOrigin);else return Vl.transform.split(",").forEach(function(a){return n.call(i,a,t)});if(this.props.indexOf(qi)>=0)return;o.svg&&(this.svgo=r.getAttribute("data-svg-origin"),this.props.push(Mo,t,"")),e=qi}(s||t)&&this.props.push(e,t,s[e])},IO=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},IZ=function(){var e=this.props,t=this.target,i=t.style,r=t._gsap,s,o;for(s=0;s<e.length;s+=3)e[s+1]?e[s+1]===2?t[e[s]](e[s+2]):t[e[s]]=e[s+2]:e[s+2]?i[e[s]]=e[s+2]:i.removeProperty(e[s].substr(0,2)==="--"?e[s]:e[s].replace(uR,"-$1").toLowerCase());if(this.tfm){for(o in this.tfm)r[o]=this.tfm[o];r.svg&&(r.renderTransform(),t.setAttribute("data-svg-origin",this.svgo||"")),s=lR(),(!s||!s.isStart)&&!i[qi]&&(IO(i),r.zOrigin&&i[Mo]&&(i[Mo]+=" "+r.zOrigin+"px",r.zOrigin=0,r.renderTransform()),r.uncache=1)}},DO=function(e,t){var i={target:e,props:[],revert:IZ,save:PZ};return e._gsap||bo.core.getCache(e),t&&e.style&&e.nodeType&&t.split(",").forEach(function(r){return i.save(r)}),i},LO,kM=function(e,t){var i=fd.createElementNS?fd.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):fd.createElement(e);return i&&i.style?i:fd.createElement(e)},Da=function n(e,t,i){var r=getComputedStyle(e);return r[t]||r.getPropertyValue(t.replace(uR,"-$1").toLowerCase())||r.getPropertyValue(t)||!i&&n(e,Sg(t)||t,1)||""},JD="O,Moz,ms,Ms,Webkit".split(","),Sg=function(e,t,i){var r=t||mh,s=r.style,o=5;if(e in s&&!i)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);o--&&!(JD[o]+e in s););return o<0?null:(o===3?"ms":o>=0?JD[o]:"")+e},FM=function(){yZ()&&window.document&&(VD=window,fd=VD.document,$m=fd.documentElement,mh=kM("div")||{style:{}},kM("div"),qi=Sg(qi),Mo=qi+"Origin",mh.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",LO=!!Sg("perspective"),lR=bo.core.reverting,aR=1)},XD=function(e){var t=e.ownerSVGElement,i=kM("svg",t&&t.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),r=e.cloneNode(!0),s;r.style.display="block",i.appendChild(r),$m.appendChild(i);try{s=r.getBBox()}catch{}return i.removeChild(r),$m.removeChild(i),s},YD=function(e,t){for(var i=t.length;i--;)if(e.hasAttribute(t[i]))return e.getAttribute(t[i])},BO=function(e){var t,i;try{t=e.getBBox()}catch{t=XD(e),i=1}return t&&(t.width||t.height)||i||(t=XD(e)),t&&!t.width&&!t.x&&!t.y?{x:+YD(e,["x","cx","x1"])||0,y:+YD(e,["y","cy","y1"])||0,width:0,height:0}:t},NO=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&BO(e))},Hh=function(e,t){if(t){var i=e.style,r;t in ac&&t!==Mo&&(t=qi),i.removeProperty?(r=t.substr(0,2),(r==="ms"||t.substr(0,6)==="webkit")&&(t="-"+t),i.removeProperty(r==="--"?t:t.replace(uR,"-$1").toLowerCase())):i.removeAttribute(t)}},hd=function(e,t,i,r,s,o){var a=new To(e._pt,t,i,0,1,o?PO:RO);return e._pt=a,a.b=r,a.e=s,e._props.push(i),a},KD={deg:1,rad:1,turn:1},DZ={grid:1,flex:1},Fd=function n(e,t,i,r){var s=parseFloat(i)||0,o=(i+"").trim().substr((s+"").length)||"px",a=mh.style,l=_Z.test(t),u=e.tagName.toLowerCase()==="svg",d=(u?"client":"offset")+(l?"Width":"Height"),h=100,p=r==="px",v=r==="%",_,w,S,A;if(r===o||!s||KD[r]||KD[o])return s;if(o!=="px"&&!p&&(s=n(e,t,i,"px")),A=e.getCTM&&NO(e),(v||o==="%")&&(ac[t]||~t.indexOf("adius")))return _=A?e.getBBox()[l?"width":"height"]:e[d],ur(v?s/_*h:s/100*_);if(a[l?"width":"height"]=h+(p?o:r),w=r!=="rem"&&~t.indexOf("adius")||r==="em"&&e.appendChild&&!u?e:e.parentNode,A&&(w=(e.ownerSVGElement||{}).parentNode),(!w||w===fd||!w.appendChild)&&(w=fd.body),S=w._gsap,S&&v&&S.width&&l&&S.time===Xo.time&&!S.uncache)return ur(s/S.width*h);if(v&&(t==="height"||t==="width")){var b=e.style[t];e.style[t]=h+r,_=e[d],b?e.style[t]=b:Hh(e,t)}else(v||o==="%")&&!DZ[Da(w,"display")]&&(a.position=Da(e,"position")),w===e&&(a.position="static"),w.appendChild(mh),_=mh[d],w.removeChild(mh),a.position="absolute";return l&&v&&(S=Ah(w),S.time=Xo.time,S.width=w[d]),ur(p?_*s/h:_&&s?h/_*s:0)},Ju=function(e,t,i,r){var s;return aR||FM(),t in Vl&&t!=="transform"&&(t=Vl[t],~t.indexOf(",")&&(t=t.split(",")[0])),ac[t]&&t!=="transform"?(s=Ey(e,r),s=t!=="transformOrigin"?s[t]:s.svg?s.origin:pA(Da(e,Mo))+" "+s.zOrigin+"px"):(s=e.style[t],(!s||s==="auto"||r||~(s+"").indexOf("calc("))&&(s=hA[t]&&hA[t](e,t,i)||Da(e,t)||ZU(e,t)||(t==="opacity"?1:0))),i&&!~(s+"").trim().indexOf(" ")?Fd(e,t,s,i)+i:s},LZ=function(e,t,i,r){if(!i||i==="none"){var s=Sg(t,e,1),o=s&&Da(e,s,1);o&&o!==i?(t=s,i=o):t==="borderColor"&&(i=Da(e,"borderTopColor"))}var a=new To(this._pt,e.style,t,0,1,MO),l=0,u=0,d,h,p,v,_,w,S,A,b,C,P,k;if(a.b=i,a.e=r,i+="",r+="",r.substring(0,6)==="var(--"&&(r=Da(e,r.substring(4,r.indexOf(")")))),r==="auto"&&(w=e.style[t],e.style[t]=r,r=Da(e,t)||r,w?e.style[t]=w:Hh(e,t)),d=[i,r],gO(d),i=d[0],r=d[1],p=i.match(km)||[],k=r.match(km)||[],k.length){for(;h=km.exec(r);)S=h[0],b=r.substring(l,h.index),_?_=(_+1)%5:(b.substr(-5)==="rgba("||b.substr(-5)==="hsla(")&&(_=1),S!==(w=p[u++]||"")&&(v=parseFloat(w)||0,P=w.substr((v+"").length),S.charAt(1)==="="&&(S=Zm(v,S)+P),A=parseFloat(S),C=S.substr((A+"").length),l=km.lastIndex-C.length,C||(C=C||$o.units[t]||P,l===r.length&&(r+=C,a.e+=C)),P!==C&&(v=Fd(e,t,w,C)||0),a._pt={_next:a._pt,p:b||u===1?b:",",s:v,c:A-v,m:_&&_<4||t==="zIndex"?Math.round:0});a.c=l<r.length?r.substring(l,r.length):""}else a.r=t==="display"&&r==="none"?PO:RO;return qU.test(r)&&(a.e=0),this._pt=a,a},QD={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},BZ=function(e){var t=e.split(" "),i=t[0],r=t[1]||"50%";return(i==="top"||i==="bottom"||r==="left"||r==="right")&&(e=i,i=r,r=e),t[0]=QD[i]||i,t[1]=QD[r]||r,t.join(" ")},NZ=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var i=t.t,r=i.style,s=t.u,o=i._gsap,a,l,u;if(s==="all"||s===!0)r.cssText="",l=1;else for(s=s.split(","),u=s.length;--u>-1;)a=s[u],ac[a]&&(l=1,a=a==="transformOrigin"?Mo:qi),Hh(i,a);l&&(Hh(i,qi),o&&(o.svg&&i.removeAttribute("transform"),r.scale=r.rotate=r.translate="none",Ey(i,1),o.uncache=1,IO(r)))}},hA={clearProps:function(e,t,i,r,s){if(s.data!=="isFromStart"){var o=e._pt=new To(e._pt,t,i,0,0,NZ);return o.u=r,o.pr=-10,o.tween=s,e._props.push(i),1}}},Sy=[1,0,0,1,0,0],kO={},FO=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},ZD=function(e){var t=Da(e,qi);return FO(t)?Sy:t.substr(7).match(WU).map(ur)},cR=function(e,t){var i=e._gsap||Ah(e),r=e.style,s=ZD(e),o,a,l,u;return i.svg&&e.getAttribute("transform")?(l=e.transform.baseVal.consolidate().matrix,s=[l.a,l.b,l.c,l.d,l.e,l.f],s.join(",")==="1,0,0,1,0,0"?Sy:s):(s===Sy&&!e.offsetParent&&e!==$m&&!i.svg&&(l=r.display,r.display="block",o=e.parentNode,(!o||!e.offsetParent&&!e.getBoundingClientRect().width)&&(u=1,a=e.nextElementSibling,$m.appendChild(e)),s=ZD(e),l?r.display=l:Hh(e,"display"),u&&(a?o.insertBefore(e,a):o?o.appendChild(e):$m.removeChild(e))),t&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},UM=function(e,t,i,r,s,o){var a=e._gsap,l=s||cR(e,!0),u=a.xOrigin||0,d=a.yOrigin||0,h=a.xOffset||0,p=a.yOffset||0,v=l[0],_=l[1],w=l[2],S=l[3],A=l[4],b=l[5],C=t.split(" "),P=parseFloat(C[0])||0,k=parseFloat(C[1])||0,L,N,O,D;i?l!==Sy&&(N=v*S-_*w)&&(O=P*(S/N)+k*(-w/N)+(w*b-S*A)/N,D=P*(-_/N)+k*(v/N)-(v*b-_*A)/N,P=O,k=D):(L=BO(e),P=L.x+(~C[0].indexOf("%")?P/100*L.width:P),k=L.y+(~(C[1]||C[0]).indexOf("%")?k/100*L.height:k)),r||r!==!1&&a.smooth?(A=P-u,b=k-d,a.xOffset=h+(A*v+b*w)-A,a.yOffset=p+(A*_+b*S)-b):a.xOffset=a.yOffset=0,a.xOrigin=P,a.yOrigin=k,a.smooth=!!r,a.origin=t,a.originIsAbsolute=!!i,e.style[Mo]="0px 0px",o&&(hd(o,a,"xOrigin",u,P),hd(o,a,"yOrigin",d,k),hd(o,a,"xOffset",h,a.xOffset),hd(o,a,"yOffset",p,a.yOffset)),e.setAttribute("data-svg-origin",P+" "+k)},Ey=function(e,t){var i=e._gsap||new xO(e);if("x"in i&&!t&&!i.uncache)return i;var r=e.style,s=i.scaleX<0,o="px",a="deg",l=getComputedStyle(e),u=Da(e,Mo)||"0",d,h,p,v,_,w,S,A,b,C,P,k,L,N,O,D,U,X,Z,he,Q,ue,re,ye,$,oe,W,J,se,me,Se,ke;return d=h=p=w=S=A=b=C=P=0,v=_=1,i.svg=!!(e.getCTM&&NO(e)),l.translate&&((l.translate!=="none"||l.scale!=="none"||l.rotate!=="none")&&(r[qi]=(l.translate!=="none"?"translate3d("+(l.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(l.rotate!=="none"?"rotate("+l.rotate+") ":"")+(l.scale!=="none"?"scale("+l.scale.split(" ").join(",")+") ":"")+(l[qi]!=="none"?l[qi]:"")),r.scale=r.rotate=r.translate="none"),N=cR(e,i.svg),i.svg&&(i.uncache?($=e.getBBox(),u=i.xOrigin-$.x+"px "+(i.yOrigin-$.y)+"px",ye=""):ye=!t&&e.getAttribute("data-svg-origin"),UM(e,ye||u,!!ye||i.originIsAbsolute,i.smooth!==!1,N)),k=i.xOrigin||0,L=i.yOrigin||0,N!==Sy&&(X=N[0],Z=N[1],he=N[2],Q=N[3],d=ue=N[4],h=re=N[5],N.length===6?(v=Math.sqrt(X*X+Z*Z),_=Math.sqrt(Q*Q+he*he),w=X||Z?Em(Z,X)*eh:0,b=he||Q?Em(he,Q)*eh+w:0,b&&(_*=Math.abs(Math.cos(b*jm))),i.svg&&(d-=k-(k*X+L*he),h-=L-(k*Z+L*Q))):(ke=N[6],me=N[7],W=N[8],J=N[9],se=N[10],Se=N[11],d=N[12],h=N[13],p=N[14],O=Em(ke,se),S=O*eh,O&&(D=Math.cos(-O),U=Math.sin(-O),ye=ue*D+W*U,$=re*D+J*U,oe=ke*D+se*U,W=ue*-U+W*D,J=re*-U+J*D,se=ke*-U+se*D,Se=me*-U+Se*D,ue=ye,re=$,ke=oe),O=Em(-he,se),A=O*eh,O&&(D=Math.cos(-O),U=Math.sin(-O),ye=X*D-W*U,$=Z*D-J*U,oe=he*D-se*U,Se=Q*U+Se*D,X=ye,Z=$,he=oe),O=Em(Z,X),w=O*eh,O&&(D=Math.cos(O),U=Math.sin(O),ye=X*D+Z*U,$=ue*D+re*U,Z=Z*D-X*U,re=re*D-ue*U,X=ye,ue=$),S&&Math.abs(S)+Math.abs(w)>359.9&&(S=w=0,A=180-A),v=ur(Math.sqrt(X*X+Z*Z+he*he)),_=ur(Math.sqrt(re*re+ke*ke)),O=Em(ue,re),b=Math.abs(O)>2e-4?O*eh:0,P=Se?1/(Se<0?-Se:Se):0),i.svg&&(ye=e.getAttribute("transform"),i.forceCSS=e.setAttribute("transform","")||!FO(Da(e,qi)),ye&&e.setAttribute("transform",ye))),Math.abs(b)>90&&Math.abs(b)<270&&(s?(v*=-1,b+=w<=0?180:-180,w+=w<=0?180:-180):(_*=-1,b+=b<=0?180:-180)),t=t||i.uncache,i.x=d-((i.xPercent=d&&(!t&&i.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-d)?-50:0)))?e.offsetWidth*i.xPercent/100:0)+o,i.y=h-((i.yPercent=h&&(!t&&i.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-h)?-50:0)))?e.offsetHeight*i.yPercent/100:0)+o,i.z=p+o,i.scaleX=ur(v),i.scaleY=ur(_),i.rotation=ur(w)+a,i.rotationX=ur(S)+a,i.rotationY=ur(A)+a,i.skewX=b+a,i.skewY=C+a,i.transformPerspective=P+o,(i.zOrigin=parseFloat(u.split(" ")[2])||!t&&i.zOrigin||0)&&(r[Mo]=pA(u)),i.xOffset=i.yOffset=0,i.force3D=$o.force3D,i.renderTransform=i.svg?FZ:LO?UO:kZ,i.uncache=0,i},pA=function(e){return(e=e.split(" "))[0]+" "+e[1]},JT=function(e,t,i){var r=Cs(t);return ur(parseFloat(t)+parseFloat(Fd(e,"x",i+"px",r)))+r},kZ=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,UO(e,t)},qf="0deg",iv="0px",Jf=") ",UO=function(e,t){var i=t||this,r=i.xPercent,s=i.yPercent,o=i.x,a=i.y,l=i.z,u=i.rotation,d=i.rotationY,h=i.rotationX,p=i.skewX,v=i.skewY,_=i.scaleX,w=i.scaleY,S=i.transformPerspective,A=i.force3D,b=i.target,C=i.zOrigin,P="",k=A==="auto"&&e&&e!==1||A===!0;if(C&&(h!==qf||d!==qf)){var L=parseFloat(d)*jm,N=Math.sin(L),O=Math.cos(L),D;L=parseFloat(h)*jm,D=Math.cos(L),o=JT(b,o,N*D*-C),a=JT(b,a,-Math.sin(L)*-C),l=JT(b,l,O*D*-C+C)}S!==iv&&(P+="perspective("+S+Jf),(r||s)&&(P+="translate("+r+"%, "+s+"%) "),(k||o!==iv||a!==iv||l!==iv)&&(P+=l!==iv||k?"translate3d("+o+", "+a+", "+l+") ":"translate("+o+", "+a+Jf),u!==qf&&(P+="rotate("+u+Jf),d!==qf&&(P+="rotateY("+d+Jf),h!==qf&&(P+="rotateX("+h+Jf),(p!==qf||v!==qf)&&(P+="skew("+p+", "+v+Jf),(_!==1||w!==1)&&(P+="scale("+_+", "+w+Jf),b.style[qi]=P||"translate(0, 0)"},FZ=function(e,t){var i=t||this,r=i.xPercent,s=i.yPercent,o=i.x,a=i.y,l=i.rotation,u=i.skewX,d=i.skewY,h=i.scaleX,p=i.scaleY,v=i.target,_=i.xOrigin,w=i.yOrigin,S=i.xOffset,A=i.yOffset,b=i.forceCSS,C=parseFloat(o),P=parseFloat(a),k,L,N,O,D;l=parseFloat(l),u=parseFloat(u),d=parseFloat(d),d&&(d=parseFloat(d),u+=d,l+=d),l||u?(l*=jm,u*=jm,k=Math.cos(l)*h,L=Math.sin(l)*h,N=Math.sin(l-u)*-p,O=Math.cos(l-u)*p,u&&(d*=jm,D=Math.tan(u-d),D=Math.sqrt(1+D*D),N*=D,O*=D,d&&(D=Math.tan(d),D=Math.sqrt(1+D*D),k*=D,L*=D)),k=ur(k),L=ur(L),N=ur(N),O=ur(O)):(k=h,O=p,L=N=0),(C&&!~(o+"").indexOf("px")||P&&!~(a+"").indexOf("px"))&&(C=Fd(v,"x",o,"px"),P=Fd(v,"y",a,"px")),(_||w||S||A)&&(C=ur(C+_-(_*k+w*N)+S),P=ur(P+w-(_*L+w*O)+A)),(r||s)&&(D=v.getBBox(),C=ur(C+r/100*D.width),P=ur(P+s/100*D.height)),D="matrix("+k+","+L+","+N+","+O+","+C+","+P+")",v.setAttribute("transform",D),b&&(v.style[qi]=D)},UZ=function(e,t,i,r,s){var o=360,a=Zr(s),l=parseFloat(s)*(a&&~s.indexOf("rad")?eh:1),u=l-r,d=r+u+"deg",h,p;return a&&(h=s.split("_")[1],h==="short"&&(u%=o,u!==u%(o/2)&&(u+=u<0?o:-o)),h==="cw"&&u<0?u=(u+o*qD)%o-~~(u/o)*o:h==="ccw"&&u>0&&(u=(u-o*qD)%o-~~(u/o)*o)),e._pt=p=new To(e._pt,t,i,r,u,wZ),p.e=d,p.u="deg",e._props.push(i),p},$D=function(e,t){for(var i in t)e[i]=t[i];return e},OZ=function(e,t,i){var r=$D({},i._gsap),s="perspective,force3D,transformOrigin,svgOrigin",o=i.style,a,l,u,d,h,p,v,_;r.svg?(u=i.getAttribute("transform"),i.setAttribute("transform",""),o[qi]=t,a=Ey(i,1),Hh(i,qi),i.setAttribute("transform",u)):(u=getComputedStyle(i)[qi],o[qi]=t,a=Ey(i,1),o[qi]=u);for(l in ac)u=r[l],d=a[l],u!==d&&s.indexOf(l)<0&&(v=Cs(u),_=Cs(d),h=v!==_?Fd(i,l,u,_):parseFloat(u),p=parseFloat(d),e._pt=new To(e._pt,a,l,h,p-h,NM),e._pt.u=_||0,e._props.push(l));$D(a,r)};Eo("padding,margin,Width,Radius",function(n,e){var t="Top",i="Right",r="Bottom",s="Left",o=(e<3?[t,i,r,s]:[t+s,t+i,r+i,r+s]).map(function(a){return e<2?n+a:"border"+a+n});hA[e>1?"border"+n:n]=function(a,l,u,d,h){var p,v;if(arguments.length<4)return p=o.map(function(_){return Ju(a,_,u)}),v=p.join(" "),v.split(p[0]).length===5?p[0]:v;p=(d+"").split(" "),v={},o.forEach(function(_,w){return v[_]=p[w]=p[w]||p[(w-1)/2|0]}),a.init(l,v,h)}});var OO={name:"css",register:FM,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,i,r,s){var o=this._props,a=e.style,l=i.vars.startAt,u,d,h,p,v,_,w,S,A,b,C,P,k,L,N,O;aR||FM(),this.styles=this.styles||DO(e),O=this.styles.props,this.tween=i;for(w in t)if(w!=="autoRound"&&(d=t[w],!(Wo[w]&&wO(w,t,i,r,e,s)))){if(v=typeof d,_=hA[w],v==="function"&&(d=d.call(i,r,e,s),v=typeof d),v==="string"&&~d.indexOf("random(")&&(d=xy(d)),_)_(this,e,w,d,i)&&(N=1);else if(w.substr(0,2)==="--")u=(getComputedStyle(e).getPropertyValue(w)+"").trim(),d+="",Cd.lastIndex=0,Cd.test(u)||(S=Cs(u),A=Cs(d)),A?S!==A&&(u=Fd(e,w,u,A)+A):S&&(d+=S),this.add(a,"setProperty",u,d,r,s,0,0,w),o.push(w),O.push(w,0,a[w]);else if(v!=="undefined"){if(l&&w in l?(u=typeof l[w]=="function"?l[w].call(i,r,e,s):l[w],Zr(u)&&~u.indexOf("random(")&&(u=xy(u)),Cs(u+"")||u==="auto"||(u+=$o.units[w]||Cs(Ju(e,w))||""),(u+"").charAt(1)==="="&&(u=Ju(e,w))):u=Ju(e,w),p=parseFloat(u),b=v==="string"&&d.charAt(1)==="="&&d.substr(0,2),b&&(d=d.substr(2)),h=parseFloat(d),w in Vl&&(w==="autoAlpha"&&(p===1&&Ju(e,"visibility")==="hidden"&&h&&(p=0),O.push("visibility",0,a.visibility),hd(this,a,"visibility",p?"inherit":"hidden",h?"inherit":"hidden",!h)),w!=="scale"&&w!=="transform"&&(w=Vl[w],~w.indexOf(",")&&(w=w.split(",")[0]))),C=w in ac,C){if(this.styles.save(w),v==="string"&&d.substring(0,6)==="var(--"&&(d=Da(e,d.substring(4,d.indexOf(")"))),h=parseFloat(d)),P||(k=e._gsap,k.renderTransform&&!t.parseTransform||Ey(e,t.parseTransform),L=t.smoothOrigin!==!1&&k.smooth,P=this._pt=new To(this._pt,a,qi,0,1,k.renderTransform,k,0,-1),P.dep=1),w==="scale")this._pt=new To(this._pt,k,"scaleY",k.scaleY,(b?Zm(k.scaleY,b+h):h)-k.scaleY||0,NM),this._pt.u=0,o.push("scaleY",w),w+="X";else if(w==="transformOrigin"){O.push(Mo,0,a[Mo]),d=BZ(d),k.svg?UM(e,d,0,L,0,this):(A=parseFloat(d.split(" ")[2])||0,A!==k.zOrigin&&hd(this,k,"zOrigin",k.zOrigin,A),hd(this,a,w,pA(u),pA(d)));continue}else if(w==="svgOrigin"){UM(e,d,1,L,0,this);continue}else if(w in kO){UZ(this,k,w,p,b?Zm(p,b+d):d);continue}else if(w==="smoothOrigin"){hd(this,k,"smooth",k.smooth,d);continue}else if(w==="force3D"){k[w]=d;continue}else if(w==="transform"){OZ(this,d,e);continue}}else w in a||(w=Sg(w)||w);if(C||(h||h===0)&&(p||p===0)&&!xZ.test(d)&&w in a)S=(u+"").substr((p+"").length),h||(h=0),A=Cs(d)||(w in $o.units?$o.units[w]:S),S!==A&&(p=Fd(e,w,u,A)),this._pt=new To(this._pt,C?k:a,w,p,(b?Zm(p,b+h):h)-p,!C&&(A==="px"||w==="zIndex")&&t.autoRound!==!1?SZ:NM),this._pt.u=A||0,S!==A&&A!=="%"&&(this._pt.b=u,this._pt.r=AZ);else if(w in a)LZ.call(this,e,w,u,b?b+d:d);else if(w in e)this.add(e,w,u||e[w],b?b+d:d,r,s);else if(w!=="parseTransform"){Zb(w,d);continue}C||(w in a?O.push(w,0,a[w]):typeof e[w]=="function"?O.push(w,2,e[w]()):O.push(w,1,u||e[w])),o.push(w)}}N&&CO(this)},render:function(e,t){if(t.tween._time||!lR())for(var i=t._pt;i;)i.r(e,i.d),i=i._next;else t.styles.revert()},get:Ju,aliases:Vl,getSetter:function(e,t,i){var r=Vl[t];return r&&r.indexOf(",")<0&&(t=r),t in ac&&t!==Mo&&(e._gsap.x||Ju(e,"x"))?i&&WD===i?t==="scale"?CZ:MZ:(WD=i||{})&&(t==="scale"?bZ:RZ):e.style&&!Yb(e.style[t])?EZ:~t.indexOf("-")?TZ:sR(e,t)},core:{_removeProperty:Hh,_getMatrix:cR}};bo.utils.checkPrefix=Sg;bo.core.getStyleSaver=DO;(function(n,e,t,i){var r=Eo(n+","+e+","+t,function(s){ac[s]=1});Eo(e,function(s){$o.units[s]="deg",kO[s]=1}),Vl[r[13]]=n+","+e,Eo(i,function(s){var o=s.split(":");Vl[o[1]]=r[o[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");Eo("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(n){$o.units[n]="px"});bo.registerPlugin(OO);var Mh=bo.registerPlugin(OO)||bo;Mh.core.Tween;/*!
* sweetalert2 v11.26.3
* Released under the MIT License.
*/function HO(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}function HZ(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function jD(n,e){return n.get(HO(n,e))}function GZ(n,e,t){HZ(n,e),e.set(n,t)}function zZ(n,e,t){return n.set(HO(n,e),t),t}const VZ=100,un={},WZ=()=>{un.previousActiveElement instanceof HTMLElement?(un.previousActiveElement.focus(),un.previousActiveElement=null):document.body&&document.body.focus()},qZ=n=>new Promise(e=>{if(!n)return e();const t=window.scrollX,i=window.scrollY;un.restoreFocusTimeout=setTimeout(()=>{WZ(),e()},VZ),window.scrollTo(t,i)}),GO="swal2-",JZ=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error","draggable","dragging"],We=JZ.reduce((n,e)=>(n[e]=GO+e,n),{}),XZ=["success","warning","info","question","error"],mA=XZ.reduce((n,e)=>(n[e]=GO+e,n),{}),zO="SweetAlert2:",dR=n=>n.charAt(0).toUpperCase()+n.slice(1),io=n=>{console.warn(`${zO} ${typeof n=="object"?n.join(" "):n}`)},Zh=n=>{console.error(`${zO} ${n}`)},eL=[],YZ=n=>{eL.includes(n)||(eL.push(n),io(n))},VO=(n,e=null)=>{YZ(`"${n}" is deprecated and will be removed in the next major release.${e?` Use "${e}" instead.`:""}`)},IS=n=>typeof n=="function"?n():n,fR=n=>n&&typeof n.toPromise=="function",jy=n=>fR(n)?n.toPromise():Promise.resolve(n),hR=n=>n&&Promise.resolve(n)===n,ro=()=>document.body.querySelector(`.${We.container}`),e_=n=>{const e=ro();return e?e.querySelector(n):null},ra=n=>e_(`.${n}`),Zn=()=>ra(We.popup),Ng=()=>ra(We.icon),KZ=()=>ra(We["icon-content"]),WO=()=>ra(We.title),pR=()=>ra(We["html-container"]),qO=()=>ra(We.image),mR=()=>ra(We["progress-steps"]),DS=()=>ra(We["validation-message"]),nu=()=>e_(`.${We.actions} .${We.confirm}`),kg=()=>e_(`.${We.actions} .${We.cancel}`),$h=()=>e_(`.${We.actions} .${We.deny}`),QZ=()=>ra(We["input-label"]),Fg=()=>e_(`.${We.loader}`),t_=()=>ra(We.actions),JO=()=>ra(We.footer),LS=()=>ra(We["timer-progress-bar"]),gR=()=>ra(We.close),ZZ=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,vR=()=>{const n=Zn();if(!n)return[];const e=n.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),t=Array.from(e).sort((s,o)=>{const a=parseInt(s.getAttribute("tabindex")||"0"),l=parseInt(o.getAttribute("tabindex")||"0");return a>l?1:a<l?-1:0}),i=n.querySelectorAll(ZZ),r=Array.from(i).filter(s=>s.getAttribute("tabindex")!=="-1");return[...new Set(t.concat(r))].filter(s=>Co(s))},yR=()=>ec(document.body,We.shown)&&!ec(document.body,We["toast-shown"])&&!ec(document.body,We["no-backdrop"]),BS=()=>{const n=Zn();return n?ec(n,We.toast):!1},$Z=()=>{const n=Zn();return n?n.hasAttribute("data-loading"):!1},sa=(n,e)=>{if(n.textContent="",e){const i=new DOMParser().parseFromString(e,"text/html"),r=i.querySelector("head");r&&Array.from(r.childNodes).forEach(o=>{n.appendChild(o)});const s=i.querySelector("body");s&&Array.from(s.childNodes).forEach(o=>{o instanceof HTMLVideoElement||o instanceof HTMLAudioElement?n.appendChild(o.cloneNode(!0)):n.appendChild(o)})}},ec=(n,e)=>{if(!e)return!1;const t=e.split(/\s+/);for(let i=0;i<t.length;i++)if(!n.classList.contains(t[i]))return!1;return!0},jZ=(n,e)=>{Array.from(n.classList).forEach(t=>{!Object.values(We).includes(t)&&!Object.values(mA).includes(t)&&!Object.values(e.showClass||{}).includes(t)&&n.classList.remove(t)})},na=(n,e,t)=>{if(jZ(n,e),!e.customClass)return;const i=e.customClass[t];if(i){if(typeof i!="string"&&!i.forEach){io(`Invalid type of customClass.${t}! Expected string or iterable object, got "${typeof i}"`);return}ti(n,i)}},NS=(n,e)=>{if(!e)return null;switch(e){case"select":case"textarea":case"file":return n.querySelector(`.${We.popup} > .${We[e]}`);case"checkbox":return n.querySelector(`.${We.popup} > .${We.checkbox} input`);case"radio":return n.querySelector(`.${We.popup} > .${We.radio} input:checked`)||n.querySelector(`.${We.popup} > .${We.radio} input:first-child`);case"range":return n.querySelector(`.${We.popup} > .${We.range} input`);default:return n.querySelector(`.${We.popup} > .${We.input}`)}},XO=n=>{if(n.focus(),n.type!=="file"){const e=n.value;n.value="",n.value=e}},YO=(n,e,t)=>{!n||!e||(typeof e=="string"&&(e=e.split(/\s+/).filter(Boolean)),e.forEach(i=>{Array.isArray(n)?n.forEach(r=>{t?r.classList.add(i):r.classList.remove(i)}):t?n.classList.add(i):n.classList.remove(i)}))},ti=(n,e)=>{YO(n,e,!0)},Na=(n,e)=>{YO(n,e,!1)},pd=(n,e)=>{const t=Array.from(n.children);for(let i=0;i<t.length;i++){const r=t[i];if(r instanceof HTMLElement&&ec(r,e))return r}},Ch=(n,e,t)=>{t===`${parseInt(`${t}`)}`&&(t=parseInt(t)),t||parseInt(`${t}`)===0?n.style.setProperty(e,typeof t=="number"?`${t}px`:t):n.style.removeProperty(e)},$r=(n,e="flex")=>{n&&(n.style.display=e)},Ls=n=>{n&&(n.style.display="none")},_R=(n,e="block")=>{n&&new MutationObserver(()=>{n_(n,n.innerHTML,e)}).observe(n,{childList:!0,subtree:!0})},tL=(n,e,t,i)=>{const r=n.querySelector(e);r&&r.style.setProperty(t,i)},n_=(n,e,t="flex")=>{e?$r(n,t):Ls(n)},Co=n=>!!(n&&(n.offsetWidth||n.offsetHeight||n.getClientRects().length)),e$=()=>!Co(nu())&&!Co($h())&&!Co(kg()),OM=n=>n.scrollHeight>n.clientHeight,t$=(n,e)=>{let t=n;for(;t&&t!==e;){if(OM(t))return!0;t=t.parentElement}return!1},KO=n=>{const e=window.getComputedStyle(n),t=parseFloat(e.getPropertyValue("animation-duration")||"0"),i=parseFloat(e.getPropertyValue("transition-duration")||"0");return t>0||i>0},xR=(n,e=!1)=>{const t=LS();t&&Co(t)&&(e&&(t.style.transition="none",t.style.width="100%"),setTimeout(()=>{t.style.transition=`width ${n/1e3}s linear`,t.style.width="0%"},10))},n$=()=>{const n=LS();if(!n)return;const e=parseInt(window.getComputedStyle(n).width);n.style.removeProperty("transition"),n.style.width="100%";const t=parseInt(window.getComputedStyle(n).width),i=e/t*100;n.style.width=`${i}%`},i$=()=>typeof window>"u"||typeof document>"u",r$=`
 <div aria-labelledby="${We.title}" aria-describedby="${We["html-container"]}" class="${We.popup}" tabindex="-1">
   <button type="button" class="${We.close}"></button>
   <ul class="${We["progress-steps"]}"></ul>
   <div class="${We.icon}"></div>
   <img class="${We.image}" />
   <h2 class="${We.title}" id="${We.title}"></h2>
   <div class="${We["html-container"]}" id="${We["html-container"]}"></div>
   <input class="${We.input}" id="${We.input}" />
   <input type="file" class="${We.file}" />
   <div class="${We.range}">
     <input type="range" />
     <output></output>
   </div>
   <select class="${We.select}" id="${We.select}"></select>
   <div class="${We.radio}"></div>
   <label class="${We.checkbox}">
     <input type="checkbox" id="${We.checkbox}" />
     <span class="${We.label}"></span>
   </label>
   <textarea class="${We.textarea}" id="${We.textarea}"></textarea>
   <div class="${We["validation-message"]}" id="${We["validation-message"]}"></div>
   <div class="${We.actions}">
     <div class="${We.loader}"></div>
     <button type="button" class="${We.confirm}"></button>
     <button type="button" class="${We.deny}"></button>
     <button type="button" class="${We.cancel}"></button>
   </div>
   <div class="${We.footer}"></div>
   <div class="${We["timer-progress-bar-container"]}">
     <div class="${We["timer-progress-bar"]}"></div>
   </div>
 </div>
`.replace(/(^|\n)\s*/g,""),s$=()=>{const n=ro();return n?(n.remove(),Na([document.documentElement,document.body],[We["no-backdrop"],We["toast-shown"],We["has-column"]]),!0):!1},Xf=()=>{un.currentInstance.resetValidationMessage()},o$=()=>{const n=Zn(),e=pd(n,We.input),t=pd(n,We.file),i=n.querySelector(`.${We.range} input`),r=n.querySelector(`.${We.range} output`),s=pd(n,We.select),o=n.querySelector(`.${We.checkbox} input`),a=pd(n,We.textarea);e.oninput=Xf,t.onchange=Xf,s.onchange=Xf,o.onchange=Xf,a.oninput=Xf,i.oninput=()=>{Xf(),r.value=i.value},i.onchange=()=>{Xf(),r.value=i.value}},a$=n=>typeof n=="string"?document.querySelector(n):n,l$=n=>{const e=Zn();e.setAttribute("role",n.toast?"alert":"dialog"),e.setAttribute("aria-live",n.toast?"polite":"assertive"),n.toast||e.setAttribute("aria-modal","true")},u$=n=>{window.getComputedStyle(n).direction==="rtl"&&ti(ro(),We.rtl)},c$=n=>{const e=s$();if(i$()){Zh("SweetAlert2 requires document to initialize");return}const t=document.createElement("div");t.className=We.container,e&&ti(t,We["no-transition"]),sa(t,r$),t.dataset.swal2Theme=n.theme;const i=a$(n.target);i.appendChild(t),n.topLayer&&(t.setAttribute("popover",""),t.showPopover()),l$(n),u$(i),o$()},wR=(n,e)=>{n instanceof HTMLElement?e.appendChild(n):typeof n=="object"?d$(n,e):n&&sa(e,n)},d$=(n,e)=>{n.jquery?f$(e,n):sa(e,n.toString())},f$=(n,e)=>{if(n.textContent="",0 in e)for(let t=0;t in e;t++)n.appendChild(e[t].cloneNode(!0));else n.appendChild(e.cloneNode(!0))},h$=(n,e)=>{const t=t_(),i=Fg();!t||!i||(!e.showConfirmButton&&!e.showDenyButton&&!e.showCancelButton?Ls(t):$r(t),na(t,e,"actions"),p$(t,i,e),sa(i,e.loaderHtml||""),na(i,e,"loader"))};function p$(n,e,t){const i=nu(),r=$h(),s=kg();!i||!r||!s||(YT(i,"confirm",t),YT(r,"deny",t),YT(s,"cancel",t),m$(i,r,s,t),t.reverseButtons&&(t.toast?(n.insertBefore(s,i),n.insertBefore(r,i)):(n.insertBefore(s,e),n.insertBefore(r,e),n.insertBefore(i,e))))}function m$(n,e,t,i){if(!i.buttonsStyling){Na([n,e,t],We.styled);return}ti([n,e,t],We.styled),i.confirmButtonColor&&n.style.setProperty("--swal2-confirm-button-background-color",i.confirmButtonColor),i.denyButtonColor&&e.style.setProperty("--swal2-deny-button-background-color",i.denyButtonColor),i.cancelButtonColor&&t.style.setProperty("--swal2-cancel-button-background-color",i.cancelButtonColor),XT(n),XT(e),XT(t)}function XT(n){const e=window.getComputedStyle(n);if(e.getPropertyValue("--swal2-action-button-focus-box-shadow"))return;const t=e.backgroundColor.replace(/rgba?\((\d+), (\d+), (\d+).*/,"rgba($1, $2, $3, 0.5)");n.style.setProperty("--swal2-action-button-focus-box-shadow",e.getPropertyValue("--swal2-outline").replace(/ rgba\(.*/,` ${t}`))}function YT(n,e,t){const i=dR(e);n_(n,t[`show${i}Button`],"inline-block"),sa(n,t[`${e}ButtonText`]||""),n.setAttribute("aria-label",t[`${e}ButtonAriaLabel`]||""),n.className=We[e],na(n,t,`${e}Button`)}const g$=(n,e)=>{const t=gR();t&&(sa(t,e.closeButtonHtml||""),na(t,e,"closeButton"),n_(t,e.showCloseButton),t.setAttribute("aria-label",e.closeButtonAriaLabel||""))},v$=(n,e)=>{const t=ro();t&&(y$(t,e.backdrop),_$(t,e.position),x$(t,e.grow),na(t,e,"container"))};function y$(n,e){typeof e=="string"?n.style.background=e:e||ti([document.documentElement,document.body],We["no-backdrop"])}function _$(n,e){e&&(e in We?ti(n,We[e]):(io('The "position" parameter is not valid, defaulting to "center"'),ti(n,We.center)))}function x$(n,e){e&&ti(n,We[`grow-${e}`])}var Ri={innerParams:new WeakMap,domCache:new WeakMap};const w$=["input","file","range","select","radio","checkbox","textarea"],A$=(n,e)=>{const t=Zn();if(!t)return;const i=Ri.innerParams.get(n),r=!i||e.input!==i.input;w$.forEach(s=>{const o=pd(t,We[s]);o&&(T$(s,e.inputAttributes),o.className=We[s],r&&Ls(o))}),e.input&&(r&&S$(e),M$(e))},S$=n=>{if(!n.input)return;if(!lr[n.input]){Zh(`Unexpected type of input! Expected ${Object.keys(lr).join(" | ")}, got "${n.input}"`);return}const e=QO(n.input);if(!e)return;const t=lr[n.input](e,n);$r(e),n.inputAutoFocus&&setTimeout(()=>{XO(t)})},E$=n=>{for(let e=0;e<n.attributes.length;e++){const t=n.attributes[e].name;["id","type","value","style"].includes(t)||n.removeAttribute(t)}},T$=(n,e)=>{const t=Zn();if(!t)return;const i=NS(t,n);if(i){E$(i);for(const r in e)i.setAttribute(r,e[r])}},M$=n=>{if(!n.input)return;const e=QO(n.input);e&&na(e,n,"input")},AR=(n,e)=>{!n.placeholder&&e.inputPlaceholder&&(n.placeholder=e.inputPlaceholder)},i_=(n,e,t)=>{if(t.inputLabel){const i=document.createElement("label"),r=We["input-label"];i.setAttribute("for",n.id),i.className=r,typeof t.customClass=="object"&&ti(i,t.customClass.inputLabel),i.innerText=t.inputLabel,e.insertAdjacentElement("beforebegin",i)}},QO=n=>{const e=Zn();if(e)return pd(e,We[n]||We.input)},gA=(n,e)=>{["string","number"].includes(typeof e)?n.value=`${e}`:hR(e)||io(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof e}"`)},lr={};lr.text=lr.email=lr.password=lr.number=lr.tel=lr.url=lr.search=lr.date=lr["datetime-local"]=lr.time=lr.week=lr.month=(n,e)=>(gA(n,e.inputValue),i_(n,n,e),AR(n,e),n.type=e.input,n);lr.file=(n,e)=>(i_(n,n,e),AR(n,e),n);lr.range=(n,e)=>{const t=n.querySelector("input"),i=n.querySelector("output");return gA(t,e.inputValue),t.type=e.input,gA(i,e.inputValue),i_(t,n,e),n};lr.select=(n,e)=>{if(n.textContent="",e.inputPlaceholder){const t=document.createElement("option");sa(t,e.inputPlaceholder),t.value="",t.disabled=!0,t.selected=!0,n.appendChild(t)}return i_(n,n,e),n};lr.radio=n=>(n.textContent="",n);lr.checkbox=(n,e)=>{const t=NS(Zn(),"checkbox");t.value="1",t.checked=!!e.inputValue;const i=n.querySelector("span");return sa(i,e.inputPlaceholder||e.inputLabel),t};lr.textarea=(n,e)=>{gA(n,e.inputValue),AR(n,e),i_(n,n,e);const t=i=>parseInt(window.getComputedStyle(i).marginLeft)+parseInt(window.getComputedStyle(i).marginRight);return setTimeout(()=>{if("MutationObserver"in window){const i=parseInt(window.getComputedStyle(Zn()).width),r=()=>{if(!document.body.contains(n))return;const s=n.offsetWidth+t(n);s>i?Zn().style.width=`${s}px`:Ch(Zn(),"width",e.width)};new MutationObserver(r).observe(n,{attributes:!0,attributeFilter:["style"]})}}),n};const C$=(n,e)=>{const t=pR();t&&(_R(t),na(t,e,"htmlContainer"),e.html?(wR(e.html,t),$r(t,"block")):e.text?(t.textContent=e.text,$r(t,"block")):Ls(t),A$(n,e))},b$=(n,e)=>{const t=JO();t&&(_R(t),n_(t,!!e.footer,"block"),e.footer&&wR(e.footer,t),na(t,e,"footer"))},R$=(n,e)=>{const t=Ri.innerParams.get(n),i=Ng();if(!i)return;if(t&&e.icon===t.icon){iL(i,e),nL(i,e);return}if(!e.icon&&!e.iconHtml){Ls(i);return}if(e.icon&&Object.keys(mA).indexOf(e.icon)===-1){Zh(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${e.icon}"`),Ls(i);return}$r(i),iL(i,e),nL(i,e),ti(i,e.showClass&&e.showClass.icon),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",ZO)},nL=(n,e)=>{for(const[t,i]of Object.entries(mA))e.icon!==t&&Na(n,i);ti(n,e.icon&&mA[e.icon]),D$(n,e),ZO(),na(n,e,"icon")},ZO=()=>{const n=Zn();if(!n)return;const e=window.getComputedStyle(n).getPropertyValue("background-color"),t=n.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let i=0;i<t.length;i++)t[i].style.backgroundColor=e},P$=n=>`
  ${n.animation?'<div class="swal2-success-circular-line-left"></div>':""}
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div>
  ${n.animation?'<div class="swal2-success-fix"></div>':""}
  ${n.animation?'<div class="swal2-success-circular-line-right"></div>':""}
`,I$=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,iL=(n,e)=>{if(!e.icon&&!e.iconHtml)return;let t=n.innerHTML,i="";e.iconHtml?i=rL(e.iconHtml):e.icon==="success"?(i=P$(e),t=t.replace(/ style=".*?"/g,"")):e.icon==="error"?i=I$:e.icon&&(i=rL({question:"?",warning:"!",info:"i"}[e.icon])),t.trim()!==i.trim()&&sa(n,i)},D$=(n,e)=>{if(e.iconColor){n.style.color=e.iconColor,n.style.borderColor=e.iconColor;for(const t of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])tL(n,t,"background-color",e.iconColor);tL(n,".swal2-success-ring","border-color",e.iconColor)}},rL=n=>`<div class="${We["icon-content"]}">${n}</div>`,L$=(n,e)=>{const t=qO();if(t){if(!e.imageUrl){Ls(t);return}$r(t,""),t.setAttribute("src",e.imageUrl),t.setAttribute("alt",e.imageAlt||""),Ch(t,"width",e.imageWidth),Ch(t,"height",e.imageHeight),t.className=We.image,na(t,e,"image")}};let SR=!1,$O=0,jO=0,eH=0,tH=0;const B$=n=>{n.addEventListener("mousedown",vA),document.body.addEventListener("mousemove",yA),n.addEventListener("mouseup",_A),n.addEventListener("touchstart",vA),document.body.addEventListener("touchmove",yA),n.addEventListener("touchend",_A)},N$=n=>{n.removeEventListener("mousedown",vA),document.body.removeEventListener("mousemove",yA),n.removeEventListener("mouseup",_A),n.removeEventListener("touchstart",vA),document.body.removeEventListener("touchmove",yA),n.removeEventListener("touchend",_A)},vA=n=>{const e=Zn();if(n.target===e||Ng().contains(n.target)){SR=!0;const t=nH(n);$O=t.clientX,jO=t.clientY,eH=parseInt(e.style.insetInlineStart)||0,tH=parseInt(e.style.insetBlockStart)||0,ti(e,"swal2-dragging")}},yA=n=>{const e=Zn();if(SR){let{clientX:t,clientY:i}=nH(n);e.style.insetInlineStart=`${eH+(t-$O)}px`,e.style.insetBlockStart=`${tH+(i-jO)}px`}},_A=()=>{const n=Zn();SR=!1,Na(n,"swal2-dragging")},nH=n=>{let e=0,t=0;return n.type.startsWith("mouse")?(e=n.clientX,t=n.clientY):n.type.startsWith("touch")&&(e=n.touches[0].clientX,t=n.touches[0].clientY),{clientX:e,clientY:t}},k$=(n,e)=>{const t=ro(),i=Zn();if(!(!t||!i)){if(e.toast){Ch(t,"width",e.width),i.style.width="100%";const r=Fg();r&&i.insertBefore(r,Ng())}else Ch(i,"width",e.width);Ch(i,"padding",e.padding),e.color&&(i.style.color=e.color),e.background&&(i.style.background=e.background),Ls(DS()),F$(i,e),e.draggable&&!e.toast?(ti(i,We.draggable),B$(i)):(Na(i,We.draggable),N$(i))}},F$=(n,e)=>{const t=e.showClass||{};n.className=`${We.popup} ${Co(n)?t.popup:""}`,e.toast?(ti([document.documentElement,document.body],We["toast-shown"]),ti(n,We.toast)):ti(n,We.modal),na(n,e,"popup"),typeof e.customClass=="string"&&ti(n,e.customClass),e.icon&&ti(n,We[`icon-${e.icon}`])},U$=(n,e)=>{const t=mR();if(!t)return;const{progressSteps:i,currentProgressStep:r}=e;if(!i||i.length===0||r===void 0){Ls(t);return}$r(t),t.textContent="",r>=i.length&&io("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),i.forEach((s,o)=>{const a=O$(s);if(t.appendChild(a),o===r&&ti(a,We["active-progress-step"]),o!==i.length-1){const l=H$(e);t.appendChild(l)}})},O$=n=>{const e=document.createElement("li");return ti(e,We["progress-step"]),sa(e,n),e},H$=n=>{const e=document.createElement("li");return ti(e,We["progress-step-line"]),n.progressStepsDistance&&Ch(e,"width",n.progressStepsDistance),e},G$=(n,e)=>{const t=WO();t&&(_R(t),n_(t,!!(e.title||e.titleText),"block"),e.title&&wR(e.title,t),e.titleText&&(t.innerText=e.titleText),na(t,e,"title"))},iH=(n,e)=>{k$(n,e),v$(n,e),U$(n,e),R$(n,e),L$(n,e),G$(n,e),g$(n,e),C$(n,e),h$(n,e),b$(n,e);const t=Zn();typeof e.didRender=="function"&&t&&e.didRender(t),un.eventEmitter.emit("didRender",t)},z$=()=>Co(Zn()),rH=()=>{var n;return(n=nu())===null||n===void 0?void 0:n.click()},V$=()=>{var n;return(n=$h())===null||n===void 0?void 0:n.click()},W$=()=>{var n;return(n=kg())===null||n===void 0?void 0:n.click()},Ug=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),sH=n=>{n.keydownTarget&&n.keydownHandlerAdded&&(n.keydownTarget.removeEventListener("keydown",n.keydownHandler,{capture:n.keydownListenerCapture}),n.keydownHandlerAdded=!1)},q$=(n,e,t)=>{sH(n),e.toast||(n.keydownHandler=i=>X$(e,i,t),n.keydownTarget=e.keydownListenerCapture?window:Zn(),n.keydownListenerCapture=e.keydownListenerCapture,n.keydownTarget.addEventListener("keydown",n.keydownHandler,{capture:n.keydownListenerCapture}),n.keydownHandlerAdded=!0)},HM=(n,e)=>{var t;const i=vR();if(i.length){n=n+e,n===-2&&(n=i.length-1),n===i.length?n=0:n===-1&&(n=i.length-1),i[n].focus();return}(t=Zn())===null||t===void 0||t.focus()},oH=["ArrowRight","ArrowDown"],J$=["ArrowLeft","ArrowUp"],X$=(n,e,t)=>{n&&(e.isComposing||e.keyCode===229||(n.stopKeydownPropagation&&e.stopPropagation(),e.key==="Enter"?Y$(e,n):e.key==="Tab"?K$(e):[...oH,...J$].includes(e.key)?Q$(e.key):e.key==="Escape"&&Z$(e,n,t)))},Y$=(n,e)=>{if(!IS(e.allowEnterKey))return;const t=NS(Zn(),e.input);if(n.target&&t&&n.target instanceof HTMLElement&&n.target.outerHTML===t.outerHTML){if(["textarea","file"].includes(e.input))return;rH(),n.preventDefault()}},K$=n=>{const e=n.target,t=vR();let i=-1;for(let r=0;r<t.length;r++)if(e===t[r]){i=r;break}n.shiftKey?HM(i,-1):HM(i,1),n.stopPropagation(),n.preventDefault()},Q$=n=>{const e=t_(),t=nu(),i=$h(),r=kg();if(!e||!t||!i||!r)return;const s=[t,i,r];if(document.activeElement instanceof HTMLElement&&!s.includes(document.activeElement))return;const o=oH.includes(n)?"nextElementSibling":"previousElementSibling";let a=document.activeElement;if(a){for(let l=0;l<e.children.length;l++){if(a=a[o],!a)return;if(a instanceof HTMLButtonElement&&Co(a))break}a instanceof HTMLButtonElement&&a.focus()}},Z$=(n,e,t)=>{n.preventDefault(),IS(e.allowEscapeKey)&&t(Ug.esc)};var Eg={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const $$=()=>{const n=ro();Array.from(document.body.children).forEach(t=>{t.contains(n)||(t.hasAttribute("aria-hidden")&&t.setAttribute("data-previous-aria-hidden",t.getAttribute("aria-hidden")||""),t.setAttribute("aria-hidden","true"))})},aH=()=>{Array.from(document.body.children).forEach(e=>{e.hasAttribute("data-previous-aria-hidden")?(e.setAttribute("aria-hidden",e.getAttribute("data-previous-aria-hidden")||""),e.removeAttribute("data-previous-aria-hidden")):e.removeAttribute("aria-hidden")})},lH=typeof window<"u"&&!!window.GestureEvent,j$=()=>{if(lH&&!ec(document.body,We.iosfix)){const n=document.body.scrollTop;document.body.style.top=`${n*-1}px`,ti(document.body,We.iosfix),ej()}},ej=()=>{const n=ro();if(!n)return;let e;n.ontouchstart=t=>{e=tj(t)},n.ontouchmove=t=>{e&&(t.preventDefault(),t.stopPropagation())}},tj=n=>{const e=n.target,t=ro(),i=pR();return!t||!i||nj(n)||ij(n)?!1:e===t||!OM(t)&&e instanceof HTMLElement&&!t$(e,i)&&e.tagName!=="INPUT"&&e.tagName!=="TEXTAREA"&&!(OM(i)&&i.contains(e))},nj=n=>n.touches&&n.touches.length&&n.touches[0].touchType==="stylus",ij=n=>n.touches&&n.touches.length>1,rj=()=>{if(ec(document.body,We.iosfix)){const n=parseInt(document.body.style.top,10);Na(document.body,We.iosfix),document.body.style.top="",document.body.scrollTop=n*-1}},sj=()=>{const n=document.createElement("div");n.className=We["scrollbar-measure"],document.body.appendChild(n);const e=n.getBoundingClientRect().width-n.clientWidth;return document.body.removeChild(n),e};let eg=null;const oj=n=>{eg===null&&(document.body.scrollHeight>window.innerHeight||n==="scroll")&&(eg=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${eg+sj()}px`)},aj=()=>{eg!==null&&(document.body.style.paddingRight=`${eg}px`,eg=null)};function uH(n,e,t,i){BS()?sL(n,i):(qZ(t).then(()=>sL(n,i)),sH(un)),lH?(e.setAttribute("style","display:none !important"),e.removeAttribute("class"),e.innerHTML=""):e.remove(),yR()&&(aj(),rj(),aH()),lj()}function lj(){Na([document.documentElement,document.body],[We.shown,We["height-auto"],We["no-backdrop"],We["toast-shown"]])}function md(n){n=cj(n);const e=Eg.swalPromiseResolve.get(this),t=uj(this);this.isAwaitingPromise?n.isDismissed||(r_(this),e(n)):t&&e(n)}const uj=n=>{const e=Zn();if(!e)return!1;const t=Ri.innerParams.get(n);if(!t||ec(e,t.hideClass.popup))return!1;Na(e,t.showClass.popup),ti(e,t.hideClass.popup);const i=ro();return Na(i,t.showClass.backdrop),ti(i,t.hideClass.backdrop),dj(n,e,t),!0};function cH(n){const e=Eg.swalPromiseReject.get(this);r_(this),e&&e(n)}const r_=n=>{n.isAwaitingPromise&&(delete n.isAwaitingPromise,Ri.innerParams.get(n)||n._destroy())},cj=n=>typeof n>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},n),dj=(n,e,t)=>{var i;const r=ro(),s=KO(e);typeof t.willClose=="function"&&t.willClose(e),(i=un.eventEmitter)===null||i===void 0||i.emit("willClose",e),s?fj(n,e,r,t.returnFocus,t.didClose):uH(n,r,t.returnFocus,t.didClose)},fj=(n,e,t,i,r)=>{un.swalCloseEventFinishedCallback=uH.bind(null,n,t,i,r);const s=function(o){if(o.target===e){var a;(a=un.swalCloseEventFinishedCallback)===null||a===void 0||a.call(un),delete un.swalCloseEventFinishedCallback,e.removeEventListener("animationend",s),e.removeEventListener("transitionend",s)}};e.addEventListener("animationend",s),e.addEventListener("transitionend",s)},sL=(n,e)=>{setTimeout(()=>{var t;typeof e=="function"&&e.bind(n.params)(),(t=un.eventEmitter)===null||t===void 0||t.emit("didClose"),n._destroy&&n._destroy()})},Tg=n=>{let e=Zn();if(e||new Ty,e=Zn(),!e)return;const t=Fg();BS()?Ls(Ng()):hj(e,n),$r(t),e.setAttribute("data-loading","true"),e.setAttribute("aria-busy","true"),e.focus()},hj=(n,e)=>{const t=t_(),i=Fg();!t||!i||(!e&&Co(nu())&&(e=nu()),$r(t),e&&(Ls(e),i.setAttribute("data-button-to-replace",e.className),t.insertBefore(i,e)),ti([n,t],We.loading))},pj=(n,e)=>{e.input==="select"||e.input==="radio"?_j(n,e):["text","email","number","tel","textarea"].some(t=>t===e.input)&&(fR(e.inputValue)||hR(e.inputValue))&&(Tg(nu()),xj(n,e))},mj=(n,e)=>{const t=n.getInput();if(!t)return null;switch(e.input){case"checkbox":return gj(t);case"radio":return vj(t);case"file":return yj(t);default:return e.inputAutoTrim?t.value.trim():t.value}},gj=n=>n.checked?1:0,vj=n=>n.checked?n.value:null,yj=n=>n.files&&n.files.length?n.getAttribute("multiple")!==null?n.files:n.files[0]:null,_j=(n,e)=>{const t=Zn();if(!t)return;const i=r=>{e.input==="select"?wj(t,xA(r),e):e.input==="radio"&&Aj(t,xA(r),e)};fR(e.inputOptions)||hR(e.inputOptions)?(Tg(nu()),jy(e.inputOptions).then(r=>{n.hideLoading(),i(r)})):typeof e.inputOptions=="object"?i(e.inputOptions):Zh(`Unexpected type of inputOptions! Expected object, Map or Promise, got ${typeof e.inputOptions}`)},xj=(n,e)=>{const t=n.getInput();t&&(Ls(t),jy(e.inputValue).then(i=>{t.value=e.input==="number"?`${parseFloat(i)||0}`:`${i}`,$r(t),t.focus(),n.hideLoading()}).catch(i=>{Zh(`Error in inputValue promise: ${i}`),t.value="",$r(t),t.focus(),n.hideLoading()}))};function wj(n,e,t){const i=pd(n,We.select);if(!i)return;const r=(s,o,a)=>{const l=document.createElement("option");l.value=a,sa(l,o),l.selected=dH(a,t.inputValue),s.appendChild(l)};e.forEach(s=>{const o=s[0],a=s[1];if(Array.isArray(a)){const l=document.createElement("optgroup");l.label=o,l.disabled=!1,i.appendChild(l),a.forEach(u=>r(l,u[1],u[0]))}else r(i,a,o)}),i.focus()}function Aj(n,e,t){const i=pd(n,We.radio);if(!i)return;e.forEach(s=>{const o=s[0],a=s[1],l=document.createElement("input"),u=document.createElement("label");l.type="radio",l.name=We.radio,l.value=o,dH(o,t.inputValue)&&(l.checked=!0);const d=document.createElement("span");sa(d,a),d.className=We.label,u.appendChild(l),u.appendChild(d),i.appendChild(u)});const r=i.querySelectorAll("input");r.length&&r[0].focus()}const xA=n=>{const e=[];return n instanceof Map?n.forEach((t,i)=>{let r=t;typeof r=="object"&&(r=xA(r)),e.push([i,r])}):Object.keys(n).forEach(t=>{let i=n[t];typeof i=="object"&&(i=xA(i)),e.push([t,i])}),e},dH=(n,e)=>!!e&&e.toString()===n.toString(),Sj=n=>{const e=Ri.innerParams.get(n);n.disableButtons(),e.input?fH(n,"confirm"):TR(n,!0)},Ej=n=>{const e=Ri.innerParams.get(n);n.disableButtons(),e.returnInputValueOnDeny?fH(n,"deny"):ER(n,!1)},Tj=(n,e)=>{n.disableButtons(),e(Ug.cancel)},fH=(n,e)=>{const t=Ri.innerParams.get(n);if(!t.input){Zh(`The "input" parameter is needed to be set when using returnInputValueOn${dR(e)}`);return}const i=n.getInput(),r=mj(n,t);t.inputValidator?Mj(n,r,e):i&&!i.checkValidity()?(n.enableButtons(),n.showValidationMessage(t.validationMessage||i.validationMessage)):e==="deny"?ER(n,r):TR(n,r)},Mj=(n,e,t)=>{const i=Ri.innerParams.get(n);n.disableInput(),Promise.resolve().then(()=>jy(i.inputValidator(e,i.validationMessage))).then(s=>{n.enableButtons(),n.enableInput(),s?n.showValidationMessage(s):t==="deny"?ER(n,e):TR(n,e)})},ER=(n,e)=>{const t=Ri.innerParams.get(n||void 0);t.showLoaderOnDeny&&Tg($h()),t.preDeny?(n.isAwaitingPromise=!0,Promise.resolve().then(()=>jy(t.preDeny(e,t.validationMessage))).then(r=>{r===!1?(n.hideLoading(),r_(n)):n.close({isDenied:!0,value:typeof r>"u"?e:r})}).catch(r=>hH(n||void 0,r))):n.close({isDenied:!0,value:e})},oL=(n,e)=>{n.close({isConfirmed:!0,value:e})},hH=(n,e)=>{n.rejectPromise(e)},TR=(n,e)=>{const t=Ri.innerParams.get(n||void 0);t.showLoaderOnConfirm&&Tg(),t.preConfirm?(n.resetValidationMessage(),n.isAwaitingPromise=!0,Promise.resolve().then(()=>jy(t.preConfirm(e,t.validationMessage))).then(r=>{Co(DS())||r===!1?(n.hideLoading(),r_(n)):oL(n,typeof r>"u"?e:r)}).catch(r=>hH(n||void 0,r))):oL(n,e)};function wA(){const n=Ri.innerParams.get(this);if(!n)return;const e=Ri.domCache.get(this);Ls(e.loader),BS()?n.icon&&$r(Ng()):Cj(e),Na([e.popup,e.actions],We.loading),e.popup.removeAttribute("aria-busy"),e.popup.removeAttribute("data-loading"),e.confirmButton.disabled=!1,e.denyButton.disabled=!1,e.cancelButton.disabled=!1}const Cj=n=>{const e=n.popup.getElementsByClassName(n.loader.getAttribute("data-button-to-replace"));e.length?$r(e[0],"inline-block"):e$()&&Ls(n.actions)};function pH(){const n=Ri.innerParams.get(this),e=Ri.domCache.get(this);return e?NS(e.popup,n.input):null}function mH(n,e,t){const i=Ri.domCache.get(n);e.forEach(r=>{i[r].disabled=t})}function gH(n,e){const t=Zn();if(!(!t||!n))if(n.type==="radio"){const i=t.querySelectorAll(`[name="${We.radio}"]`);for(let r=0;r<i.length;r++)i[r].disabled=e}else n.disabled=e}function vH(){mH(this,["confirmButton","denyButton","cancelButton"],!1)}function yH(){mH(this,["confirmButton","denyButton","cancelButton"],!0)}function _H(){gH(this.getInput(),!1)}function xH(){gH(this.getInput(),!0)}function wH(n){const e=Ri.domCache.get(this),t=Ri.innerParams.get(this);sa(e.validationMessage,n),e.validationMessage.className=We["validation-message"],t.customClass&&t.customClass.validationMessage&&ti(e.validationMessage,t.customClass.validationMessage),$r(e.validationMessage);const i=this.getInput();i&&(i.setAttribute("aria-invalid","true"),i.setAttribute("aria-describedby",We["validation-message"]),XO(i),ti(i,We.inputerror))}function AH(){const n=Ri.domCache.get(this);n.validationMessage&&Ls(n.validationMessage);const e=this.getInput();e&&(e.removeAttribute("aria-invalid"),e.removeAttribute("aria-describedby"),Na(e,We.inputerror))}const tg={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,draggable:!1,animation:!0,theme:"light",showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0,topLayer:!1},bj=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","draggable","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","theme","willClose"],Rj={allowEnterKey:void 0},Pj=["allowOutsideClick","allowEnterKey","backdrop","draggable","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],SH=n=>Object.prototype.hasOwnProperty.call(tg,n),EH=n=>bj.indexOf(n)!==-1,TH=n=>Rj[n],Ij=n=>{SH(n)||io(`Unknown parameter "${n}"`)},Dj=n=>{Pj.includes(n)&&io(`The parameter "${n}" is incompatible with toasts`)},Lj=n=>{const e=TH(n);e&&VO(n,e)},MH=n=>{n.backdrop===!1&&n.allowOutsideClick&&io('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`'),n.theme&&!["light","dark","auto","minimal","borderless","bootstrap-4","bootstrap-4-light","bootstrap-4-dark","bootstrap-5","bootstrap-5-light","bootstrap-5-dark","material-ui","material-ui-light","material-ui-dark","embed-iframe","bulma","bulma-light","bulma-dark"].includes(n.theme)&&io(`Invalid theme "${n.theme}"`);for(const e in n)Ij(e),n.toast&&Dj(e),Lj(e)};function CH(n){const e=ro(),t=Zn(),i=Ri.innerParams.get(this);if(!t||ec(t,i.hideClass.popup)){io("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");return}const r=Bj(n),s=Object.assign({},i,r);MH(s),e.dataset.swal2Theme=s.theme,iH(this,s),Ri.innerParams.set(this,s),Object.defineProperties(this,{params:{value:Object.assign({},this.params,n),writable:!1,enumerable:!0}})}const Bj=n=>{const e={};return Object.keys(n).forEach(t=>{EH(t)?e[t]=n[t]:io(`Invalid parameter to update: ${t}`)}),e};function bH(){const n=Ri.domCache.get(this),e=Ri.innerParams.get(this);if(!e){RH(this);return}n.popup&&un.swalCloseEventFinishedCallback&&(un.swalCloseEventFinishedCallback(),delete un.swalCloseEventFinishedCallback),typeof e.didDestroy=="function"&&e.didDestroy(),un.eventEmitter.emit("didDestroy"),Nj(this)}const Nj=n=>{RH(n),delete n.params,delete un.keydownHandler,delete un.keydownTarget,delete un.currentInstance},RH=n=>{n.isAwaitingPromise?(KT(Ri,n),n.isAwaitingPromise=!0):(KT(Eg,n),KT(Ri,n),delete n.isAwaitingPromise,delete n.disableButtons,delete n.enableButtons,delete n.getInput,delete n.disableInput,delete n.enableInput,delete n.hideLoading,delete n.disableLoading,delete n.showValidationMessage,delete n.resetValidationMessage,delete n.close,delete n.closePopup,delete n.closeModal,delete n.closeToast,delete n.rejectPromise,delete n.update,delete n._destroy)},KT=(n,e)=>{for(const t in n)n[t].delete(e)};var kj=Object.freeze({__proto__:null,_destroy:bH,close:md,closeModal:md,closePopup:md,closeToast:md,disableButtons:yH,disableInput:xH,disableLoading:wA,enableButtons:vH,enableInput:_H,getInput:pH,handleAwaitingPromise:r_,hideLoading:wA,rejectPromise:cH,resetValidationMessage:AH,showValidationMessage:wH,update:CH});const Fj=(n,e,t)=>{n.toast?Uj(n,e,t):(Hj(e),Gj(e),zj(n,e,t))},Uj=(n,e,t)=>{e.popup.onclick=()=>{n&&(Oj(n)||n.timer||n.input)||t(Ug.close)}},Oj=n=>!!(n.showConfirmButton||n.showDenyButton||n.showCancelButton||n.showCloseButton);let AA=!1;const Hj=n=>{n.popup.onmousedown=()=>{n.container.onmouseup=function(e){n.container.onmouseup=()=>{},e.target===n.container&&(AA=!0)}}},Gj=n=>{n.container.onmousedown=e=>{e.target===n.container&&e.preventDefault(),n.popup.onmouseup=function(t){n.popup.onmouseup=()=>{},(t.target===n.popup||t.target instanceof HTMLElement&&n.popup.contains(t.target))&&(AA=!0)}}},zj=(n,e,t)=>{e.container.onclick=i=>{if(AA){AA=!1;return}i.target===e.container&&IS(n.allowOutsideClick)&&t(Ug.backdrop)}},Vj=n=>typeof n=="object"&&n.jquery,aL=n=>n instanceof Element||Vj(n),Wj=n=>{const e={};return typeof n[0]=="object"&&!aL(n[0])?Object.assign(e,n[0]):["title","html","icon"].forEach((t,i)=>{const r=n[i];typeof r=="string"||aL(r)?e[t]=r:r!==void 0&&Zh(`Unexpected type of ${t}! Expected "string" or "Element", got ${typeof r}`)}),e};function qj(...n){return new this(...n)}function Jj(n){class e extends this{_main(i,r){return super._main(i,Object.assign({},n,r))}}return e}const Xj=()=>un.timeout&&un.timeout.getTimerLeft(),PH=()=>{if(un.timeout)return n$(),un.timeout.stop()},IH=()=>{if(un.timeout){const n=un.timeout.start();return xR(n),n}},Yj=()=>{const n=un.timeout;return n&&(n.running?PH():IH())},Kj=n=>{if(un.timeout){const e=un.timeout.increase(n);return xR(e,!0),e}},Qj=()=>!!(un.timeout&&un.timeout.isRunning());let lL=!1;const GM={};function Zj(n="data-swal-template"){GM[n]=this,lL||(document.body.addEventListener("click",$j),lL=!0)}const $j=n=>{for(let e=n.target;e&&e!==document;e=e.parentNode)for(const t in GM){const i=e.getAttribute(t);if(i){GM[t].fire({template:i});return}}};class jj{constructor(){this.events={}}_getHandlersByEventName(e){return typeof this.events[e]>"u"&&(this.events[e]=[]),this.events[e]}on(e,t){const i=this._getHandlersByEventName(e);i.includes(t)||i.push(t)}once(e,t){const i=(...r)=>{this.removeListener(e,i),t.apply(this,r)};this.on(e,i)}emit(e,...t){this._getHandlersByEventName(e).forEach(i=>{try{i.apply(this,t)}catch(r){console.error(r)}})}removeListener(e,t){const i=this._getHandlersByEventName(e),r=i.indexOf(t);r>-1&&i.splice(r,1)}removeAllListeners(e){this.events[e]!==void 0&&(this.events[e].length=0)}reset(){this.events={}}}un.eventEmitter=new jj;const eee=(n,e)=>{un.eventEmitter.on(n,e)},tee=(n,e)=>{un.eventEmitter.once(n,e)},nee=(n,e)=>{if(!n){un.eventEmitter.reset();return}e?un.eventEmitter.removeListener(n,e):un.eventEmitter.removeAllListeners(n)};var iee=Object.freeze({__proto__:null,argsToParams:Wj,bindClickHandler:Zj,clickCancel:W$,clickConfirm:rH,clickDeny:V$,enableLoading:Tg,fire:qj,getActions:t_,getCancelButton:kg,getCloseButton:gR,getConfirmButton:nu,getContainer:ro,getDenyButton:$h,getFocusableElements:vR,getFooter:JO,getHtmlContainer:pR,getIcon:Ng,getIconContent:KZ,getImage:qO,getInputLabel:QZ,getLoader:Fg,getPopup:Zn,getProgressSteps:mR,getTimerLeft:Xj,getTimerProgressBar:LS,getTitle:WO,getValidationMessage:DS,increaseTimer:Kj,isDeprecatedParameter:TH,isLoading:$Z,isTimerRunning:Qj,isUpdatableParameter:EH,isValidParameter:SH,isVisible:z$,mixin:Jj,off:nee,on:eee,once:tee,resumeTimer:IH,showLoading:Tg,stopTimer:PH,toggleTimer:Yj});class ree{constructor(e,t){this.callback=e,this.remaining=t,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}increase(e){const t=this.running;return t&&this.stop(),this.remaining+=e,t&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const DH=["swal-title","swal-html","swal-footer"],see=n=>{const e=typeof n.template=="string"?document.querySelector(n.template):n.template;if(!e)return{};const t=e.content;return hee(t),Object.assign(oee(t),aee(t),lee(t),uee(t),cee(t),dee(t),fee(t,DH))},oee=n=>{const e={};return Array.from(n.querySelectorAll("swal-param")).forEach(i=>{Gh(i,["name","value"]);const r=i.getAttribute("name"),s=i.getAttribute("value");!r||!s||(typeof tg[r]=="boolean"?e[r]=s!=="false":typeof tg[r]=="object"?e[r]=JSON.parse(s):e[r]=s)}),e},aee=n=>{const e={};return Array.from(n.querySelectorAll("swal-function-param")).forEach(i=>{const r=i.getAttribute("name"),s=i.getAttribute("value");!r||!s||(e[r]=new Function(`return ${s}`)())}),e},lee=n=>{const e={};return Array.from(n.querySelectorAll("swal-button")).forEach(i=>{Gh(i,["type","color","aria-label"]);const r=i.getAttribute("type");!r||!["confirm","cancel","deny"].includes(r)||(e[`${r}ButtonText`]=i.innerHTML,e[`show${dR(r)}Button`]=!0,i.hasAttribute("color")&&(e[`${r}ButtonColor`]=i.getAttribute("color")),i.hasAttribute("aria-label")&&(e[`${r}ButtonAriaLabel`]=i.getAttribute("aria-label")))}),e},uee=n=>{const e={},t=n.querySelector("swal-image");return t&&(Gh(t,["src","width","height","alt"]),t.hasAttribute("src")&&(e.imageUrl=t.getAttribute("src")||void 0),t.hasAttribute("width")&&(e.imageWidth=t.getAttribute("width")||void 0),t.hasAttribute("height")&&(e.imageHeight=t.getAttribute("height")||void 0),t.hasAttribute("alt")&&(e.imageAlt=t.getAttribute("alt")||void 0)),e},cee=n=>{const e={},t=n.querySelector("swal-icon");return t&&(Gh(t,["type","color"]),t.hasAttribute("type")&&(e.icon=t.getAttribute("type")),t.hasAttribute("color")&&(e.iconColor=t.getAttribute("color")),e.iconHtml=t.innerHTML),e},dee=n=>{const e={},t=n.querySelector("swal-input");t&&(Gh(t,["type","label","placeholder","value"]),e.input=t.getAttribute("type")||"text",t.hasAttribute("label")&&(e.inputLabel=t.getAttribute("label")),t.hasAttribute("placeholder")&&(e.inputPlaceholder=t.getAttribute("placeholder")),t.hasAttribute("value")&&(e.inputValue=t.getAttribute("value")));const i=Array.from(n.querySelectorAll("swal-input-option"));return i.length&&(e.inputOptions={},i.forEach(r=>{Gh(r,["value"]);const s=r.getAttribute("value");if(!s)return;const o=r.innerHTML;e.inputOptions[s]=o})),e},fee=(n,e)=>{const t={};for(const i in e){const r=e[i],s=n.querySelector(r);s&&(Gh(s,[]),t[r.replace(/^swal-/,"")]=s.innerHTML.trim())}return t},hee=n=>{const e=DH.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(n.children).forEach(t=>{const i=t.tagName.toLowerCase();e.includes(i)||io(`Unrecognized element <${i}>`)})},Gh=(n,e)=>{Array.from(n.attributes).forEach(t=>{e.indexOf(t.name)===-1&&io([`Unrecognized attribute "${t.name}" on <${n.tagName.toLowerCase()}>.`,`${e.length?`Allowed attributes are: ${e.join(", ")}`:"To set the value, use HTML within the element."}`])})},LH=10,pee=n=>{const e=ro(),t=Zn();typeof n.willOpen=="function"&&n.willOpen(t),un.eventEmitter.emit("willOpen",t);const r=window.getComputedStyle(document.body).overflowY;vee(e,t,n),setTimeout(()=>{mee(e,t)},LH),yR()&&(gee(e,n.scrollbarPadding,r),$$()),!BS()&&!un.previousActiveElement&&(un.previousActiveElement=document.activeElement),typeof n.didOpen=="function"&&setTimeout(()=>n.didOpen(t)),un.eventEmitter.emit("didOpen",t)},SA=n=>{const e=Zn();if(n.target!==e)return;const t=ro();e.removeEventListener("animationend",SA),e.removeEventListener("transitionend",SA),t.style.overflowY="auto",Na(t,We["no-transition"])},mee=(n,e)=>{KO(e)?(n.style.overflowY="hidden",e.addEventListener("animationend",SA),e.addEventListener("transitionend",SA)):n.style.overflowY="auto"},gee=(n,e,t)=>{j$(),e&&t!=="hidden"&&oj(t),setTimeout(()=>{n.scrollTop=0})},vee=(n,e,t)=>{ti(n,t.showClass.backdrop),t.animation?(e.style.setProperty("opacity","0","important"),$r(e,"grid"),setTimeout(()=>{ti(e,t.showClass.popup),e.style.removeProperty("opacity")},LH)):$r(e,"grid"),ti([document.documentElement,document.body],We.shown),t.heightAuto&&t.backdrop&&!t.toast&&ti([document.documentElement,document.body],We["height-auto"])};var uL={email:(n,e)=>/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(n)?Promise.resolve():Promise.resolve(e||"Invalid email address"),url:(n,e)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(n)?Promise.resolve():Promise.resolve(e||"Invalid URL")};function yee(n){n.inputValidator||(n.input==="email"&&(n.inputValidator=uL.email),n.input==="url"&&(n.inputValidator=uL.url))}function _ee(n){(!n.target||typeof n.target=="string"&&!document.querySelector(n.target)||typeof n.target!="string"&&!n.target.appendChild)&&(io('Target parameter is not valid, defaulting to "body"'),n.target="body")}function xee(n){yee(n),n.showLoaderOnConfirm&&!n.preConfirm&&io(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),_ee(n),typeof n.title=="string"&&(n.title=n.title.split(`
`).join("<br />")),c$(n)}let Ul;var ow=new WeakMap;class dr{constructor(...e){if(GZ(this,ow,void 0),typeof window>"u")return;Ul=this;const t=Object.freeze(this.constructor.argsToParams(e));this.params=t,this.isAwaitingPromise=!1,zZ(ow,this,this._main(Ul.params))}_main(e,t={}){if(MH(Object.assign({},t,e)),un.currentInstance){const s=Eg.swalPromiseResolve.get(un.currentInstance),{isAwaitingPromise:o}=un.currentInstance;un.currentInstance._destroy(),o||s({isDismissed:!0}),yR()&&aH()}un.currentInstance=Ul;const i=Aee(e,t);xee(i),Object.freeze(i),un.timeout&&(un.timeout.stop(),delete un.timeout),clearTimeout(un.restoreFocusTimeout);const r=See(Ul);return iH(Ul,i),Ri.innerParams.set(Ul,i),wee(Ul,r,i)}then(e){return jD(ow,this).then(e)}finally(e){return jD(ow,this).finally(e)}}const wee=(n,e,t)=>new Promise((i,r)=>{const s=o=>{n.close({isDismissed:!0,dismiss:o,isConfirmed:!1,isDenied:!1})};Eg.swalPromiseResolve.set(n,i),Eg.swalPromiseReject.set(n,r),e.confirmButton.onclick=()=>{Sj(n)},e.denyButton.onclick=()=>{Ej(n)},e.cancelButton.onclick=()=>{Tj(n,s)},e.closeButton.onclick=()=>{s(Ug.close)},Fj(t,e,s),q$(un,t,s),pj(n,t),pee(t),Eee(un,t,s),Tee(e,t),setTimeout(()=>{e.container.scrollTop=0})}),Aee=(n,e)=>{const t=see(n),i=Object.assign({},tg,e,t,n);return i.showClass=Object.assign({},tg.showClass,i.showClass),i.hideClass=Object.assign({},tg.hideClass,i.hideClass),i.animation===!1&&(i.showClass={backdrop:"swal2-noanimation"},i.hideClass={}),i},See=n=>{const e={popup:Zn(),container:ro(),actions:t_(),confirmButton:nu(),denyButton:$h(),cancelButton:kg(),loader:Fg(),closeButton:gR(),validationMessage:DS(),progressSteps:mR()};return Ri.domCache.set(n,e),e},Eee=(n,e,t)=>{const i=LS();Ls(i),e.timer&&(n.timeout=new ree(()=>{t("timer"),delete n.timeout},e.timer),e.timerProgressBar&&($r(i),na(i,e,"timerProgressBar"),setTimeout(()=>{n.timeout&&n.timeout.running&&xR(e.timer)})))},Tee=(n,e)=>{if(!e.toast){if(!IS(e.allowEnterKey)){VO("allowEnterKey"),bee();return}Mee(n)||Cee(n,e)||HM(-1,1)}},Mee=n=>{const e=Array.from(n.popup.querySelectorAll("[autofocus]"));for(const t of e)if(t instanceof HTMLElement&&Co(t))return t.focus(),!0;return!1},Cee=(n,e)=>e.focusDeny&&Co(n.denyButton)?(n.denyButton.focus(),!0):e.focusCancel&&Co(n.cancelButton)?(n.cancelButton.focus(),!0):e.focusConfirm&&Co(n.confirmButton)?(n.confirmButton.focus(),!0):!1,bee=()=>{document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};dr.prototype.disableButtons=yH;dr.prototype.enableButtons=vH;dr.prototype.getInput=pH;dr.prototype.disableInput=xH;dr.prototype.enableInput=_H;dr.prototype.hideLoading=wA;dr.prototype.disableLoading=wA;dr.prototype.showValidationMessage=wH;dr.prototype.resetValidationMessage=AH;dr.prototype.close=md;dr.prototype.closePopup=md;dr.prototype.closeModal=md;dr.prototype.closeToast=md;dr.prototype.rejectPromise=cH;dr.prototype.update=CH;dr.prototype._destroy=bH;Object.assign(dr,iee);Object.keys(kj).forEach(n=>{dr[n]=function(...e){return Ul&&Ul[n]?Ul[n](...e):null}});dr.DismissReason=Ug;dr.version="11.26.3";const Ty=dr;Ty.default=Ty;typeof document<"u"&&(function(n,e){var t=n.createElement("style");if(n.getElementsByTagName("head")[0].appendChild(t),t.styleSheet)t.styleSheet.disabled||(t.styleSheet.cssText=e);else try{t.innerHTML=e}catch{t.innerText=e}})(document,':root{--swal2-outline: 0 0 0 3px rgba(100, 150, 200, 0.5);--swal2-container-padding: 0.625em;--swal2-backdrop: rgba(0, 0, 0, 0.4);--swal2-backdrop-transition: background-color 0.15s;--swal2-width: 32em;--swal2-padding: 0 0 1.25em;--swal2-border: none;--swal2-border-radius: 0.3125rem;--swal2-background: white;--swal2-color: #545454;--swal2-show-animation: swal2-show 0.3s;--swal2-hide-animation: swal2-hide 0.15s forwards;--swal2-icon-zoom: 1;--swal2-icon-animations: true;--swal2-title-padding: 0.8em 1em 0;--swal2-html-container-padding: 1em 1.6em 0.3em;--swal2-input-border: 1px solid #d9d9d9;--swal2-input-border-radius: 0.1875em;--swal2-input-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px transparent;--swal2-input-background: transparent;--swal2-input-transition: border-color 0.2s, box-shadow 0.2s;--swal2-input-hover-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px transparent;--swal2-input-focus-border: 1px solid #b4dbed;--swal2-input-focus-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px rgba(100, 150, 200, 0.5);--swal2-progress-step-background: #add8e6;--swal2-validation-message-background: #f0f0f0;--swal2-validation-message-color: #666;--swal2-footer-border-color: #eee;--swal2-footer-background: transparent;--swal2-footer-color: inherit;--swal2-timer-progress-bar-background: rgba(0, 0, 0, 0.3);--swal2-close-button-position: initial;--swal2-close-button-inset: auto;--swal2-close-button-font-size: 2.5em;--swal2-close-button-color: #ccc;--swal2-close-button-transition: color 0.2s, box-shadow 0.2s;--swal2-close-button-outline: initial;--swal2-close-button-box-shadow: inset 0 0 0 3px transparent;--swal2-close-button-focus-box-shadow: inset var(--swal2-outline);--swal2-close-button-hover-transform: none;--swal2-actions-justify-content: center;--swal2-actions-width: auto;--swal2-actions-margin: 1.25em auto 0;--swal2-actions-padding: 0;--swal2-actions-border-radius: 0;--swal2-actions-background: transparent;--swal2-action-button-transition: background-color 0.2s, box-shadow 0.2s;--swal2-action-button-hover: black 10%;--swal2-action-button-active: black 10%;--swal2-confirm-button-box-shadow: none;--swal2-confirm-button-border-radius: 0.25em;--swal2-confirm-button-background-color: #7066e0;--swal2-confirm-button-color: #fff;--swal2-deny-button-box-shadow: none;--swal2-deny-button-border-radius: 0.25em;--swal2-deny-button-background-color: #dc3741;--swal2-deny-button-color: #fff;--swal2-cancel-button-box-shadow: none;--swal2-cancel-button-border-radius: 0.25em;--swal2-cancel-button-background-color: #6e7881;--swal2-cancel-button-color: #fff;--swal2-toast-show-animation: swal2-toast-show 0.5s;--swal2-toast-hide-animation: swal2-toast-hide 0.1s forwards;--swal2-toast-border: none;--swal2-toast-box-shadow: 0 0 1px hsl(0deg 0% 0% / 0.075), 0 1px 2px hsl(0deg 0% 0% / 0.075), 1px 2px 4px hsl(0deg 0% 0% / 0.075), 1px 3px 8px hsl(0deg 0% 0% / 0.075), 2px 4px 16px hsl(0deg 0% 0% / 0.075)}[data-swal2-theme=dark]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white);--swal2-timer-progress-bar-background: rgba(255, 255, 255, 0.7)}@media(prefers-color-scheme: dark){[data-swal2-theme=auto]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white);--swal2-timer-progress-bar-background: rgba(255, 255, 255, 0.7)}}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px var(--swal2-backdrop)}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}@media print{body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown) .swal2-container{position:static !important}}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:var(--swal2-container-padding);overflow-x:hidden;transition:var(--swal2-backdrop-transition);-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:var(--swal2-backdrop)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container)[popover]{width:auto;border:0}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:var(--swal2-width);max-width:100%;padding:var(--swal2-padding);border:var(--swal2-border);border-radius:var(--swal2-border-radius);background:var(--swal2-background);color:var(--swal2-color);font-family:inherit;font-size:1rem;container-name:swal2-popup}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable{cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable div:where(.swal2-icon){cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging{cursor:grabbing}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging div:where(.swal2-icon){cursor:grabbing}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:var(--swal2-title-padding);color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;overflow-wrap:break-word;cursor:initial}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:var(--swal2-actions-justify-content);width:var(--swal2-actions-width);margin:var(--swal2-actions-margin);padding:var(--swal2-actions-padding);border-radius:var(--swal2-actions-border-radius);background:var(--swal2-actions-background)}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:var(--swal2-action-button-transition);border:none;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm){border-radius:var(--swal2-confirm-button-border-radius);background:initial;background-color:var(--swal2-confirm-button-background-color);box-shadow:var(--swal2-confirm-button-box-shadow);color:var(--swal2-confirm-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):hover{background-color:color-mix(in srgb, var(--swal2-confirm-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):active{background-color:color-mix(in srgb, var(--swal2-confirm-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny){border-radius:var(--swal2-deny-button-border-radius);background:initial;background-color:var(--swal2-deny-button-background-color);box-shadow:var(--swal2-deny-button-box-shadow);color:var(--swal2-deny-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):hover{background-color:color-mix(in srgb, var(--swal2-deny-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):active{background-color:color-mix(in srgb, var(--swal2-deny-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel){border-radius:var(--swal2-cancel-button-border-radius);background:initial;background-color:var(--swal2-cancel-button-background-color);box-shadow:var(--swal2-cancel-button-box-shadow);color:var(--swal2-cancel-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):hover{background-color:color-mix(in srgb, var(--swal2-cancel-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):active{background-color:color-mix(in srgb, var(--swal2-cancel-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):focus-visible{outline:none;box-shadow:var(--swal2-action-button-focus-box-shadow)}div:where(.swal2-container) button:where(.swal2-styled)[disabled]:not(.swal2-loading){opacity:.4}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid var(--swal2-footer-border-color);background:var(--swal2-footer-background);color:var(--swal2-footer-color);font-size:1em;text-align:center;cursor:initial}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:var(--swal2-border-radius);border-bottom-left-radius:var(--swal2-border-radius)}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:var(--swal2-timer-progress-bar-background)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em;cursor:initial}div:where(.swal2-container) button:where(.swal2-close){position:var(--swal2-close-button-position);inset:var(--swal2-close-button-inset);z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:var(--swal2-close-button-transition);border:none;border-radius:var(--swal2-border-radius);outline:var(--swal2-close-button-outline);background:rgba(0,0,0,0);color:var(--swal2-close-button-color);font-family:monospace;font-size:var(--swal2-close-button-font-size);cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:var(--swal2-close-button-hover-transform);background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus-visible{outline:none;box-shadow:var(--swal2-close-button-focus-box-shadow)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-html-container){z-index:1;justify-content:center;margin:0;padding:var(--swal2-html-container-padding);overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;overflow-wrap:break-word;word-break:break-word;cursor:initial}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:var(--swal2-input-transition);border:var(--swal2-input-border);border-radius:var(--swal2-input-border-radius);background:var(--swal2-input-background);box-shadow:var(--swal2-input-box-shadow);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):hover,div:where(.swal2-container) input:where(.swal2-file):hover,div:where(.swal2-container) textarea:where(.swal2-textarea):hover{box-shadow:var(--swal2-input-hover-box-shadow)}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:var(--swal2-input-focus-border);outline:none;box-shadow:var(--swal2-input-focus-box-shadow)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:var(--swal2-background)}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:var(--swal2-input-background);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:var(--swal2-input-background);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:var(--swal2-background);color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:var(--swal2-validation-message-background);color:var(--swal2-validation-message-color);font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:var(--swal2-progress-step-background);color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:var(--swal2-progress-step-background)}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;zoom:var(--swal2-icon-zoom);border:.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}}div:where(.swal2-icon).swal2-warning{border-color:#f8bb86;color:#f8bb86}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}}div:where(.swal2-icon).swal2-info{border-color:#3fc3ee;color:#3fc3ee}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}}div:where(.swal2-icon).swal2-question{border-color:#87adbd;color:#87adbd}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:var(--swal2-show-animation)}.swal2-hide{animation:var(--swal2-hide-animation)}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;border:var(--swal2-toast-border);background:var(--swal2-background);box-shadow:var(--swal2-toast-box-shadow);pointer-events:all}.swal2-toast>*{grid-column:2}.swal2-toast h2:where(.swal2-title){margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-toast .swal2-loading{justify-content:center}.swal2-toast input:where(.swal2-input){height:2em;margin:.5em;font-size:1em}.swal2-toast .swal2-validation-message{font-size:1em}.swal2-toast div:where(.swal2-footer){margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-toast button:where(.swal2-close){grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-toast div:where(.swal2-html-container){margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-toast div:where(.swal2-html-container):empty{padding:0}.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-toast div:where(.swal2-actions){justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-toast button:where(.swal2-styled){margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}@container swal2-popup style(--swal2-icon-animations:true){.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}}.swal2-toast.swal2-show{animation:var(--swal2-toast-show-animation)}.swal2-toast.swal2-hide{animation:var(--swal2-toast-hide-animation)}@keyframes swal2-show{0%{transform:translate3d(0, -50px, 0) scale(0.9);opacity:0}100%{transform:translate3d(0, 0, 0) scale(1);opacity:1}}@keyframes swal2-hide{0%{transform:translate3d(0, 0, 0) scale(1);opacity:1}100%{transform:translate3d(0, -50px, 0) scale(0.9);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}');const ng={chasis:{Verde:{hex:"#7CBA40"},Amarillo:{hex:"#F3E600"},Azul:{hex:"#325EB7"},Blanco:{hex:"#F5F5F5"},Naranja:{hex:"#F47119"},Morado:{hex:"#7B217E"},Rojo:{hex:"#E52421"},Negro:{hex:"#1C1C1C"},Rosa:{hex:"#FF007F"},Gris:{hex:"#808080"}},buttons:{Verde:{hex:"#7CBA40"},Amarillo:{hex:"#F3E600"},Azul:{hex:"#325EB7"},Blanco:{hex:"#F5F5F5"},Naranja:{hex:"#F47119"},Morado:{hex:"#7B217E"},Rojo:{hex:"#E52421"},Negro:{hex:"#1C1C1C"},Rosa:{hex:"#FF007F"},Gris:{hex:"#808080"}},knobs:{Verde:{hex:"#7CBA40"},Amarillo:{hex:"#F3E600"},Azul:{hex:"#325EB7"},Blanco:{hex:"#F5F5F5"},Naranja:{hex:"#F47119"},Morado:{hex:"#7B217E"},Rojo:{hex:"#E52421"},Negro:{hex:"#1C1C1C"},Rosa:{hex:"#FF007F"},Gris:{hex:"#808080"}}},Ree=({product:n,currentView:e,onPartsFound:t,selectedButtons:i,selectedKnobs:r,selectedChasis:s,onPartClick:o})=>{const{scene:a}=ka(n.modelPath),{camera:l,gl:u}=Ar(),d=ie.useRef(null),[h,p]=ie.useState(!1),v={normal:{pos:new te(0,5,5),target:new te(0,0,0)},top:{pos:new te(0,8,0),target:new te(0,0,0)}},_=eu(ob,"/textures/blackhole.jpg.avif");return ie.useEffect(()=>{_.mapping=Dh},[_]),ie.useEffect(()=>{u.shadowMap.enabled=!0,u.shadowMap.type=Wm},[u]),ie.useEffect(()=>{if(!a)return;const w=[],S=[],A=[];a.traverse(b=>{if(b instanceof bi){b.castShadow=!0,b.receiveShadow=!0;const C=b.name.toLowerCase();if(C.includes("cubechasis")||C.includes("chasis"))b.material=new Ps({color:ng.chasis.Gris.hex,metalness:.8,roughness:.35,clearcoat:.85,clearcoatRoughness:.1}),w.push(b);else if(C.includes("boton"))b.material=new Ps({color:ng.buttons.Negro.hex,metalness:.4,roughness:.68,clearcoat:.85,clearcoatRoughness:.08,reflectivity:.3,sheen:.5,sheenColor:new St(1842204)}),S.push(b);else if(C.includes("knob")){const P=b.material;P&&P.color&&(P.color.r+P.color.g+P.color.b)/3<.5&&(b.material=new Lg({color:ng.knobs.Negro.hex,metalness:0,roughness:1}),A.push(b))}else C.includes("aro")&&(b.material=new Ps({color:0,metalness:0,roughness:.2,clearcoat:.8,clearcoatRoughness:.1,transmission:.3,thickness:.5,transparent:!0,opacity:.7}))}}),t({chasis:w,buttons:S,knobs:A}),p(!0)},[a,t]),ie.useEffect(()=>{if(!h)return;a.traverse(S=>{S instanceof bi&&S.material.emissive&&S.material.emissive.setHex(0)});const w=S=>{S&&S.material.emissive&&S.material.emissive.setHex(4473924)};i.forEach(w),r.forEach(w),s&&w(s)},[i,r,s,h,a]),ie.useEffect(()=>{if(!d.current)return;const w=e==="normal"?v.normal:v.top;Mh.to(l.position,{duration:1.2,ease:"power3.inOut",x:w.pos.x,y:w.pos.y,z:w.pos.z}),Mh.to(d.current.target,{duration:1.2,ease:"power3.inOut",x:w.target.x,y:w.target.y,z:w.target.z,onUpdate:()=>d.current.update()})},[e,l]),V.jsxs(V.Fragment,{children:[V.jsx("ambientLight",{intensity:.9}),V.jsx("directionalLight",{position:[5,4,-1],intensity:1.2,castShadow:!0}),V.jsx("directionalLight",{position:[-8,3,-9],intensity:1,color:"#99ccff"}),V.jsx("directionalLight",{position:[-8,3,15],intensity:1,color:"#99ccff"}),V.jsx("pointLight",{position:[0,5,5],intensity:.7}),V.jsx("directionalLight",{position:[-5,30,0],intensity:1.2,castShadow:!0}),V.jsx(FU,{map:_,background:!1}),V.jsx(PU,{position:[0,1,0],children:V.jsx("primitive",{object:a,scale:22,rotation:[0,-Math.PI/2,0],onPointerDown:w=>{w.stopPropagation(),o(w.object)}})}),V.jsx(RU,{ref:d,enableDamping:!0,dampingFactor:.05,minDistance:2,maxDistance:10,enabled:e==="normal"})]})},Pee=({product:n,onClose:e,onAddToCart:t})=>{const[i,r]=ie.useState("normal"),[s,o]=ie.useState({chasis:[],buttons:[],knobs:[]}),[a,l]=ie.useState(null),[u,d]=ie.useState([]),[h,p]=ie.useState([]),[v,_]=ie.useState({chasis:"Gris",buttons:{},knobs:{}}),w=ie.useCallback(N=>{o(N)},[]),S=ie.useCallback(N=>{if(i==="normal")return;const O=N.name.toLowerCase();i==="chasis"&&(O.includes("chasis")||O.includes("cubechasis"))?l(N):i==="buttons"&&O.includes("boton")?d(D=>D.find(X=>X.uuid===N.uuid)?D.filter(X=>X.uuid!==N.uuid):[...D,N]):i==="knobs"&&O.includes("knob")&&p(D=>D.find(X=>X.uuid===N.uuid)?D.filter(X=>X.uuid!==N.uuid):[...D,N])},[i]),A=(N,O)=>{i==="chasis"&&a?(a.material.color.set(O),_(D=>({...D,chasis:N}))):i==="buttons"?u.forEach(D=>{D.material.color.set(O),_(U=>({...U,buttons:{...U.buttons,[D.name]:N}}))}):i==="knobs"&&h.forEach(D=>{D.material.color.set(O),_(U=>({...U,knobs:{...U.knobs,[D.name]:N}}))})},b=async()=>{(await Ty.fire({title:"Confirmar Compra?",html:`
                <div style="text-align:left;">
                  <p><strong>Producto:</strong> ${n.name}</p>
                  <p><strong>Precio:</strong> $${n.price.toFixed(2)}</p>
                  <p><strong>Configuracin:</strong></p>
                  <ul style="font-size: 0.9em; color: #aaa;">
                    <li>Chasis: ${v.chasis}</li>
                    <li>Botones Personalizados: ${Object.keys(v.buttons).length}</li>
                    <li>Knobs Personalizados: ${Object.keys(v.knobs).length}</li>
                  </ul>
                </div>
            `,width:600,background:"#1a1a2e",color:"#e5e7eb",showCancelButton:!0,confirmButtonText:"Aadir al Carrito",cancelButtonText:"Cancelar",confirmButtonColor:"#a259ff"})).isConfirmed&&(t(n),await Ty.fire({title:"Producto Aadido!",html:`<p>${n.name} ha sido aadido al carrito.</p>`,icon:"success",background:"#1a1a2e",color:"#e5e7eb",confirmButtonColor:"#a259ff",confirmButtonText:"Continuar"}),e())},C=()=>{switch(i){case"chasis":return"CHOOSE THE CHASSIS COLOR";case"buttons":return"CHOOSE THE BUTTONS COLOR";case"knobs":return"CHOOSE THE KNOBS COLOR";default:return"PERSONALIZA TU CONTROLADOR"}},P=()=>{switch(i){case"chasis":return ng.chasis;case"buttons":return ng.buttons;case"knobs":return ng.knobs;default:return{}}},k=[{id:"normal",icon:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z",title:"View"},{id:"chasis",icon:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V5h14v14z",title:"Chassis"},{id:"buttons",icon:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-5-9h10v2H7z",title:"Buttons"},{id:"knobs",icon:"M15 12c0-1.66-1.34-3-3-3s-3 1.34-3 3 1.34 3 3 3 3-1.34 3-3zm-3-9C6.48 3 2 7.48 2 13s4.48 10 10 10 10-4.48 10-10S17.52 3 12 3zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z",title:"Knobs"}],L=[{id:"beato8",label:"BEATO8",img:"/textures/beato.png"},{id:"beato16",label:"BEATO16",img:"/textures/beato16.png"},{id:"knobo",label:"KNOBO",img:"/textures/knobo.png"},{id:"mixo",label:"MIXO",img:"/textures/mixo.png"},{id:"loopo",label:"LOOPO",img:"/textures/loopo.png"},{id:"fado",label:"FADO",img:"/textures/fado.png"}];return ie.useEffect(()=>{l(null),d([]),p([]),i==="chasis"&&s.chasis.length>0&&l(s.chasis[0])},[i,s]),V.jsxs("div",{className:"fixed inset-0 z-50 flex bg-[#120f24] text-white font-['Orbitron'] overflow-hidden",children:[V.jsxs("div",{className:"absolute inset-0 z-0 pointer-events-none",children:[V.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(to_right,#4f46e520_1px,transparent_1px),linear-gradient(to_bottom,#4f46e520_1px,transparent_1px)] bg-[size:50px_50px] [mask-image:linear-gradient(to_bottom,transparent,black)]"}),V.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1/2 bg-gradient-to-t from-purple-900/40 via-cyan-900/20 to-transparent"}),V.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(white_1px,transparent_1px)] bg-[size:100px_100px] opacity-20"})]}),V.jsx("div",{className:"w-20 z-20 flex flex-col items-center py-6 gap-6 bg-black/40 backdrop-blur-md border-r border-white/10",children:L.map(N=>V.jsxs("button",{className:`w-16 h-16 rounded-lg flex flex-col items-center justify-center transition-all duration-300 group
                            ${n.name.toLowerCase().includes(N.id.replace(/\d+/g,""))?"bg-cyan-500/20 border border-cyan-400 shadow-[0_0_15px_rgba(6,182,212,0.4)]":"bg-white/5 border border-white/10 hover:border-cyan-500/50 hover:bg-white/10"}`,title:N.label,children:[V.jsx("img",{src:N.img,alt:N.label,className:`w-10 h-10 mb-1 object-contain transition-all duration-300 ${n.name.toLowerCase().includes(N.id.replace(/\d+/g,""))?"opacity-100 drop-shadow-[0_0_5px_rgba(6,182,212,0.8)]":"opacity-50 group-hover:opacity-100"}`}),V.jsx("span",{className:"text-[7px] font-bold tracking-wider text-gray-400 group-hover:text-white",children:N.label})]},N.id))}),V.jsxs("div",{className:"flex-1 relative z-10 flex flex-col",children:[V.jsxs("div",{className:"h-20 flex items-center justify-between px-8 bg-gradient-to-b from-black/60 to-transparent",children:[V.jsxs("div",{className:"flex gap-4",children:[V.jsxs("button",{onClick:e,className:"px-6 py-2 bg-black/40 border border-white/20 rounded hover:bg-cyan-900/30 hover:border-cyan-400 transition-all text-sm font-bold tracking-wider flex items-center gap-2",children:[V.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-4 h-4",children:V.jsx("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"})}),"HOME"]}),V.jsxs("button",{className:"px-6 py-2 bg-black/40 border border-white/20 rounded hover:bg-purple-900/30 hover:border-purple-400 transition-all text-sm font-bold tracking-wider flex items-center gap-2",children:[V.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-4 h-4",children:V.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})}),"USUARIO"]})]}),V.jsx("h1",{className:"text-4xl font-black tracking-[0.2em] text-transparent bg-clip-text bg-gradient-to-r from-white via-cyan-200 to-white drop-shadow-[0_0_10px_rgba(255,255,255,0.5)]",children:n.name.toUpperCase()}),V.jsx("div",{className:"w-40"})]}),V.jsxs("div",{className:"flex-1 relative",children:[V.jsx(yS,{camera:{position:[3,4,3],fov:45},dpr:[1,2],children:V.jsx(ie.Suspense,{fallback:null,children:V.jsx(Ree,{product:n,currentView:i,onPartsFound:w,selectedButtons:u,selectedKnobs:h,selectedChasis:a,onPartClick:S})})}),i==="normal"&&V.jsx("div",{className:"absolute bottom-12 left-1/2 transform -translate-x-1/2",children:V.jsxs("button",{onClick:b,className:"group relative px-12 py-4 bg-transparent overflow-hidden rounded-full",children:[V.jsx("div",{className:"absolute inset-0 w-full h-full bg-gradient-to-r from-cyan-500 to-purple-600 opacity-80 group-hover:opacity-100 transition-opacity"}),V.jsx("div",{className:"absolute inset-0 w-full h-full border-2 border-white/50 rounded-full blur-[2px]"}),V.jsx("span",{className:"relative text-white font-bold tracking-[0.2em] text-lg drop-shadow-md",children:"FINISH & ORDER"})]})})]})]}),V.jsxs("div",{className:`fixed right-0 top-0 bottom-0 z-20 flex bg-transparent transition-transform duration-500 ease-in-out ${i==="normal"?"translate-x-[calc(100%-4rem)]":"translate-x-0"}`,children:[V.jsx("div",{className:"w-16 flex flex-col items-center justify-center py-6 gap-4 border-r border-white/5 bg-black/20 backdrop-blur-md border-l border-white/10",children:k.map(N=>V.jsx("button",{onClick:()=>r(N.id),className:`w-16 h-16 rounded-lg flex items-center justify-center transition-all duration-300 relative
                                ${i===N.id?"bg-cyan-500 text-black shadow-[0_0_15px_rgba(6,182,212,0.6)] scale-110":"bg-white/5 text-gray-400 hover:bg-white/10 hover:text-white"}`,title:N.title,children:V.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"w-9 h-9 fill-current",children:V.jsx("path",{d:N.icon})})},N.id))}),V.jsxs("div",{className:"w-80 flex flex-col bg-[#0a0a16]/95 backdrop-blur-xl shadow-[-10px_0_30px_rgba(0,0,0,0.5)]",children:[V.jsx("div",{className:"h-20 flex items-center justify-center border-b border-white/10 bg-gradient-to-r from-transparent via-cyan-900/10 to-transparent",children:V.jsx("div",{className:"w-10 h-10 rounded-full bg-cyan-500/20 flex items-center justify-center border border-cyan-500/50 mr-3 shadow-[0_0_10px_rgba(6,182,212,0.3)]",children:V.jsx("span",{className:"text-cyan-400 font-bold text-xl",children:"C"})})}),V.jsx("div",{className:"flex-1 p-6 overflow-y-auto",children:i!=="normal"?V.jsxs(V.Fragment,{children:[V.jsx("h2",{className:"text-white font-bold text-sm tracking-widest mb-6 border-l-4 border-cyan-500 pl-3",children:C()}),V.jsx("div",{className:"grid grid-cols-2 gap-4",children:Object.entries(P()).map(([N,O])=>V.jsxs("button",{onClick:()=>A(N,O.hex),className:"group relative w-full aspect-square rounded-2xl overflow-hidden transition-all duration-300 hover:scale-105 hover:shadow-[0_0_20px_rgba(255,255,255,0.3)]",children:[V.jsx("div",{className:"absolute inset-0 transition-transform duration-300 group-hover:scale-110",style:{backgroundColor:O.hex}}),V.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-black/40 to-transparent opacity-50"}),V.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-2 bg-black/60 backdrop-blur-sm translate-y-full group-hover:translate-y-0 transition-transform duration-300",children:V.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider text-white block text-center",children:N})}),(i==="chasis"&&v.chasis===N||i==="buttons"&&Object.values(v.buttons).includes(N)||i==="knobs"&&Object.values(v.knobs).includes(N))&&V.jsx("div",{className:"absolute top-2 right-2 w-3 h-3 bg-white rounded-full shadow-lg border-2 border-black"})]},N))})]}):V.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center opacity-50",children:[V.jsx("div",{className:"w-20 h-20 rounded-full border-2 border-dashed border-white/30 flex items-center justify-center mb-4 animate-spin-slow",children:V.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-8 h-8",children:V.jsx("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"})})}),V.jsxs("p",{className:"text-sm font-light tracking-wide",children:["SELECT A COMPONENT",V.jsx("br",{}),"TO CUSTOMIZE"]})]})})]})]})]})},Iee=({product:n,onBack:e,onAddToCart:t})=>V.jsx(Pee,{product:n,onClose:e,onAddToCart:t});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Dee,Lee;function Bee(){return{geminiUrl:Dee,vertexUrl:Lee}}function Nee(n,e,t,i){var r,s;if(!(n!=null&&n.baseUrl)){const o=Bee();return e?(r=o.vertexUrl)!==null&&r!==void 0?r:t:(s=o.geminiUrl)!==null&&s!==void 0?s:i}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class dc{}function Bt(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(i,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const s=e[r];return s!=null?String(s):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function E(n,e,t){for(let s=0;s<e.length-1;s++){const o=e[s];if(o.endsWith("[]")){const a=o.slice(0,-2);if(!(a in n))if(Array.isArray(t))n[a]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${o}`);if(Array.isArray(n[a])){const l=n[a];if(Array.isArray(t))for(let u=0;u<l.length;u++){const d=l[u];E(d,e.slice(s+1),t[u])}else for(const u of l)E(u,e.slice(s+1),t)}return}else if(o.endsWith("[0]")){const a=o.slice(0,-3);a in n||(n[a]=[{}]);const l=n[a];E(l[0],e.slice(s+1),t);return}(!n[o]||typeof n[o]!="object")&&(n[o]={}),n=n[o]}const i=e[e.length-1],r=n[i];if(r!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===r)return;if(typeof r=="object"&&typeof t=="object"&&r!==null&&t!==null)Object.assign(r,t);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[i]=t}function x(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let i=0;i<e.length;i++){if(typeof n!="object"||n===null)return t;const r=e[i];if(r.endsWith("[]")){const s=r.slice(0,-2);if(s in n){const o=n[s];return Array.isArray(o)?o.map(a=>x(a,e.slice(i+1),t)):t}else return t}else n=n[r]}return n}catch(i){if(i instanceof TypeError)return t;throw i}}function kee(n,e){for(const[t,i]of Object.entries(e)){const r=t.split("."),s=i.split("."),o=new Set;let a=-1;for(let l=0;l<r.length;l++)if(r[l]==="*"){a=l;break}if(a!==-1&&s.length>a)for(let l=a;l<s.length;l++){const u=s[l];u!=="*"&&!u.endsWith("[]")&&!u.endsWith("[0]")&&o.add(u)}zM(n,r,s,0,o)}}function zM(n,e,t,i,r){if(i>=e.length||typeof n!="object"||n===null)return;const s=e[i];if(s.endsWith("[]")){const o=s.slice(0,-2),a=n;if(o in a&&Array.isArray(a[o]))for(const l of a[o])zM(l,e,t,i+1,r)}else if(s==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const o=n,a=Object.keys(o).filter(u=>!u.startsWith("_")&&!r.has(u)),l={};for(const u of a)l[u]=o[u];for(const[u,d]of Object.entries(l)){const h=[];for(const p of t.slice(i))p==="*"?h.push(u):h.push(p);E(o,h,d)}for(const u of a)delete o[u]}}else{const o=n;s in o&&zM(o[s],e,t,i+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function MR(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Fee(n){const e={},t=x(n,["operationName"]);t!=null&&E(e,["operationName"],t);const i=x(n,["resourceName"]);return i!=null&&E(e,["_url","resourceName"],i),e}function Uee(n){const e={},t=x(n,["name"]);t!=null&&E(e,["name"],t);const i=x(n,["metadata"]);i!=null&&E(e,["metadata"],i);const r=x(n,["done"]);r!=null&&E(e,["done"],r);const s=x(n,["error"]);s!=null&&E(e,["error"],s);const o=x(n,["response","generateVideoResponse"]);return o!=null&&E(e,["response"],Hee(o)),e}function Oee(n){const e={},t=x(n,["name"]);t!=null&&E(e,["name"],t);const i=x(n,["metadata"]);i!=null&&E(e,["metadata"],i);const r=x(n,["done"]);r!=null&&E(e,["done"],r);const s=x(n,["error"]);s!=null&&E(e,["error"],s);const o=x(n,["response"]);return o!=null&&E(e,["response"],Gee(o)),e}function Hee(n){const e={},t=x(n,["generatedSamples"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>zee(o))),E(e,["generatedVideos"],s)}const i=x(n,["raiMediaFilteredCount"]);i!=null&&E(e,["raiMediaFilteredCount"],i);const r=x(n,["raiMediaFilteredReasons"]);return r!=null&&E(e,["raiMediaFilteredReasons"],r),e}function Gee(n){const e={},t=x(n,["videos"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>Vee(o))),E(e,["generatedVideos"],s)}const i=x(n,["raiMediaFilteredCount"]);i!=null&&E(e,["raiMediaFilteredCount"],i);const r=x(n,["raiMediaFilteredReasons"]);return r!=null&&E(e,["raiMediaFilteredReasons"],r),e}function zee(n){const e={},t=x(n,["video"]);return t!=null&&E(e,["video"],Kee(t)),e}function Vee(n){const e={},t=x(n,["_self"]);return t!=null&&E(e,["video"],Qee(t)),e}function Wee(n){const e={},t=x(n,["operationName"]);return t!=null&&E(e,["_url","operationName"],t),e}function qee(n){const e={},t=x(n,["operationName"]);return t!=null&&E(e,["_url","operationName"],t),e}function Jee(n){const e={},t=x(n,["name"]);t!=null&&E(e,["name"],t);const i=x(n,["metadata"]);i!=null&&E(e,["metadata"],i);const r=x(n,["done"]);r!=null&&E(e,["done"],r);const s=x(n,["error"]);s!=null&&E(e,["error"],s);const o=x(n,["response"]);return o!=null&&E(e,["response"],Xee(o)),e}function Xee(n){const e={},t=x(n,["sdkHttpResponse"]);t!=null&&E(e,["sdkHttpResponse"],t);const i=x(n,["parent"]);i!=null&&E(e,["parent"],i);const r=x(n,["documentName"]);return r!=null&&E(e,["documentName"],r),e}function BH(n){const e={},t=x(n,["name"]);t!=null&&E(e,["name"],t);const i=x(n,["metadata"]);i!=null&&E(e,["metadata"],i);const r=x(n,["done"]);r!=null&&E(e,["done"],r);const s=x(n,["error"]);s!=null&&E(e,["error"],s);const o=x(n,["response"]);return o!=null&&E(e,["response"],Yee(o)),e}function Yee(n){const e={},t=x(n,["sdkHttpResponse"]);t!=null&&E(e,["sdkHttpResponse"],t);const i=x(n,["parent"]);i!=null&&E(e,["parent"],i);const r=x(n,["documentName"]);return r!=null&&E(e,["documentName"],r),e}function Kee(n){const e={},t=x(n,["uri"]);t!=null&&E(e,["uri"],t);const i=x(n,["encodedVideo"]);i!=null&&E(e,["videoBytes"],MR(i));const r=x(n,["encoding"]);return r!=null&&E(e,["mimeType"],r),e}function Qee(n){const e={},t=x(n,["gcsUri"]);t!=null&&E(e,["uri"],t);const i=x(n,["bytesBase64Encoded"]);i!=null&&E(e,["videoBytes"],MR(i));const r=x(n,["mimeType"]);return r!=null&&E(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var cL;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(cL||(cL={}));var dL;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(dL||(dL={}));var fL;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(fL||(fL={}));var gd;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(gd||(gd={}));var hL;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(hL||(hL={}));var pL;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(pL||(pL={}));var mL;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(mL||(mL={}));var gL;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(gL||(gL={}));var vL;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(vL||(vL={}));var yL;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.HIGH="HIGH"})(yL||(yL={}));var _L;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(_L||(_L={}));var xL;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(xL||(xL={}));var wL;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(wL||(wL={}));var AL;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE"})(AL||(AL={}));var SL;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(SL||(SL={}));var EL;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(EL||(EL={}));var TL;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(TL||(TL={}));var ML;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(ML||(ML={}));var CL;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(CL||(CL={}));var EA;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(EA||(EA={}));var bL;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(bL||(bL={}));var RL;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(RL||(RL={}));var PL;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(PL||(PL={}));var VM;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(VM||(VM={}));var IL;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(IL||(IL={}));var DL;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(DL||(DL={}));var LL;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(LL||(LL={}));var BL;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(BL||(BL={}));var NL;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(NL||(NL={}));var kL;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(kL||(kL={}));var FL;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(FL||(FL={}));var UL;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(UL||(UL={}));var OL;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(OL||(OL={}));var HL;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(HL||(HL={}));var GL;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(GL||(GL={}));var zL;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(zL||(zL={}));var VL;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(VL||(VL={}));var WL;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(WL||(WL={}));var qL;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(qL||(qL={}));var JL;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(JL||(JL={}));var XL;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(XL||(XL={}));var YL;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(YL||(YL={}));var KL;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING"})(KL||(KL={}));var QL;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(QL||(QL={}));var ZL;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(ZL||(ZL={}));var $L;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})($L||($L={}));var jL;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(jL||(jL={}));var eB;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(eB||(eB={}));var tB;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(tB||(tB={}));var nB;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(nB||(nB={}));var iB;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(iB||(iB={}));var rB;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(rB||(rB={}));var sB;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(sB||(sB={}));var oB;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(oB||(oB={}));var Um;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(Um||(Um={}));class WM{constructor(e){const t={};for(const i of e.headers.entries())t[i[0]]=i[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class rv{get text(){var e,t,i,r,s,o,a,l;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let u="",d=!1;const h=[];for(const p of(l=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(const[v,_]of Object.entries(p))v!=="text"&&v!=="thought"&&v!=="thoughtSignature"&&(_!==null||_!==void 0)&&h.push(v);if(typeof p.text=="string"){if(typeof p.thought=="boolean"&&p.thought)continue;d=!0,u+=p.text}}return h.length>0&&console.warn(`there are non-text parts ${h} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),d?u:void 0}get data(){var e,t,i,r,s,o,a,l;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let u="";const d=[];for(const h of(l=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(const[p,v]of Object.entries(h))p!=="inlineData"&&(v!==null||v!==void 0)&&d.push(p);h.inlineData&&typeof h.inlineData.data=="string"&&(u+=atob(h.inlineData.data))}return d.length>0&&console.warn(`there are non-data parts ${d} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),u.length>0?btoa(u):void 0}get functionCalls(){var e,t,i,r,s,o,a,l;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const u=(l=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(d=>d.functionCall).map(d=>d.functionCall).filter(d=>d!==void 0);if((u==null?void 0:u.length)!==0)return u}get executableCode(){var e,t,i,r,s,o,a,l,u;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const d=(l=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(h=>h.executableCode).map(h=>h.executableCode).filter(h=>h!==void 0);if((d==null?void 0:d.length)!==0)return(u=d==null?void 0:d[0])===null||u===void 0?void 0:u.code}get codeExecutionResult(){var e,t,i,r,s,o,a,l,u;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const d=(l=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(h=>h.codeExecutionResult).map(h=>h.codeExecutionResult).filter(h=>h!==void 0);if((d==null?void 0:d.length)!==0)return(u=d==null?void 0:d[0])===null||u===void 0?void 0:u.output}}class aB{}class lB{}class Zee{}class $ee{}class jee{}class ete{}class uB{}class cB{}class dB{}class tte{}class TA{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new TA;let r;const s=e;return t?r=Oee(s):r=Uee(s),Object.assign(i,r),i}}class fB{}class hB{}class pB{}class nte{}class ite{}class rte{}class CR{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new CR,s=Jee(e);return Object.assign(i,s),i}}class ste{}class ote{}class ate{}class mB{}class lte{get text(){var e,t,i;let r="",s=!1;const o=[];for(const a of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[l,u]of Object.entries(a))l!=="text"&&l!=="thought"&&u!==null&&o.push(l);if(typeof a.text=="string"){if(typeof a.thought=="boolean"&&a.thought)continue;s=!0,r+=a.text}}return o.length>0&&console.warn(`there are non-text parts ${o} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),s?r:void 0}get data(){var e,t,i;let r="";const s=[];for(const o of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[a,l]of Object.entries(o))a!=="inlineData"&&l!==null&&s.push(a);o.inlineData&&typeof o.inlineData.data=="string"&&(r+=atob(o.inlineData.data))}return s.length>0&&console.warn(`there are non-data parts ${s} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class ute{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class bR{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new bR,s=BH(e);return Object.assign(i,s),i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $n(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function NH(n,e){const t=$n(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function kH(n){return Array.isArray(n)?n.map(e=>MA(e)):[MA(n)]}function MA(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function FH(n){const e=MA(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function UH(n){const e=MA(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function gB(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function OH(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>gB(e)):[gB(n)]}function qM(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function vB(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function yB(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function Rs(n){if(n==null)throw new Error("ContentUnion is required");return qM(n)?n:{role:"user",parts:OH(n)}}function RR(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const i=Rs(t);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(n.isVertexAI()){const t=Rs(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>Rs(t)):[Rs(e)]}function La(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(vB(n)||yB(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Rs(n)]}const e=[],t=[],i=qM(n[0]);for(const r of n){const s=qM(r);if(s!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(s)e.push(r);else{if(vB(r)||yB(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(r)}}return i||e.push({role:"user",parts:OH(t)}),e}function cte(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(i=>i!=="null");if(t.length===1)e.type=Object.values(gd).includes(t[0].toUpperCase())?t[0].toUpperCase():gd.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of t)e.anyOf.push({type:Object.values(gd).includes(i.toUpperCase())?i.toUpperCase():gd.TYPE_UNSPECIFIED})}}function ig(n){const e={},t=["items"],i=["anyOf"],r=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const s=n.anyOf;s!=null&&s.length==2&&(s[0].type==="null"?(e.nullable=!0,n=s[1]):s[1].type==="null"&&(e.nullable=!0,n=s[0])),n.type instanceof Array&&cte(n.type,e);for(const[o,a]of Object.entries(n))if(a!=null)if(o=="type"){if(a==="null")throw new Error("type: null can not be the only possible type for the field.");if(a instanceof Array)continue;e.type=Object.values(gd).includes(a.toUpperCase())?a.toUpperCase():gd.TYPE_UNSPECIFIED}else if(t.includes(o))e[o]=ig(a);else if(i.includes(o)){const l=[];for(const u of a){if(u.type=="null"){e.nullable=!0;continue}l.push(ig(u))}e[o]=l}else if(r.includes(o)){const l={};for(const[u,d]of Object.entries(a))l[u]=ig(d);e[o]=l}else{if(o==="additionalProperties")continue;e[o]=a}return e}function PR(n){return ig(n)}function IR(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function DR(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function Og(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=ig(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=ig(e.response));return n}function Hg(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function dte(n,e,t,i=1){const r=!e.startsWith(`${t}/`)&&e.split("/").length===i;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:r?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:r?`${t}/${e}`:e}function fc(n,e){if(typeof e!="string")throw new Error("name must be a string");return dte(n,e,"cachedContents")}function HH(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function Jd(n){return MR(n)}function fte(n){return n!=null&&typeof n=="object"&&"name"in n}function hte(n){return n!=null&&typeof n=="object"&&"video"in n}function pte(n){return n!=null&&typeof n=="object"&&"uri"in n}function GH(n){var e;let t;if(fte(n)&&(t=n.name),!(pte(n)&&(t=n.uri,t===void 0))&&!(hte(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const r=t.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${t}`);t=r[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function zH(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function VH(n){for(const e of["models","tunedModels","publisherModels"])if(mte(n,e))return n[e];return[]}function mte(n,e){return n!==null&&typeof n=="object"&&e in n}function gte(n,e={}){const t=n,i={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(i.responseJsonSchema=t.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function vte(n,e={}){const t=[],i=new Set;for(const r of n){const s=r.name;if(i.has(s))throw new Error(`Duplicate function name ${s} found in MCP tools. Please ensure function names are unique.`);i.add(s);const o=gte(r,e);o.functionDeclarations&&t.push(...o.functionDeclarations)}return{functionDeclarations:t}}function WH(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const i=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,r=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(r>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function yte(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function qH(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const r=t.inlinedResponses;if(!Array.isArray(r)||r.length===0)return n;let s=!1;for(const o of r){if(typeof o!="object"||o===null)continue;const l=o.response;if(typeof l!="object"||l===null)continue;if(l.embedding!==void 0){s=!0;break}}return s&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function Gg(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function JH(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _te(n){const e={},t=x(n,["responsesFile"]);t!=null&&E(e,["fileName"],t);const i=x(n,["inlinedResponses","inlinedResponses"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>jte(o))),E(e,["inlinedResponses"],s)}const r=x(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>o)),E(e,["inlinedEmbedContentResponses"],s)}return e}function xte(n){const e={},t=x(n,["predictionsFormat"]);t!=null&&E(e,["format"],t);const i=x(n,["gcsDestination","outputUriPrefix"]);i!=null&&E(e,["gcsUri"],i);const r=x(n,["bigqueryDestination","outputUri"]);return r!=null&&E(e,["bigqueryUri"],r),e}function wte(n){const e={},t=x(n,["format"]);t!=null&&E(e,["predictionsFormat"],t);const i=x(n,["gcsUri"]);i!=null&&E(e,["gcsDestination","outputUriPrefix"],i);const r=x(n,["bigqueryUri"]);if(r!=null&&E(e,["bigqueryDestination","outputUri"],r),x(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(x(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(x(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function kw(n){const e={},t=x(n,["name"]);t!=null&&E(e,["name"],t);const i=x(n,["metadata","displayName"]);i!=null&&E(e,["displayName"],i);const r=x(n,["metadata","state"]);r!=null&&E(e,["state"],JH(r));const s=x(n,["metadata","createTime"]);s!=null&&E(e,["createTime"],s);const o=x(n,["metadata","endTime"]);o!=null&&E(e,["endTime"],o);const a=x(n,["metadata","updateTime"]);a!=null&&E(e,["updateTime"],a);const l=x(n,["metadata","model"]);l!=null&&E(e,["model"],l);const u=x(n,["metadata","output"]);return u!=null&&E(e,["dest"],_te(qH(u))),e}function JM(n){const e={},t=x(n,["name"]);t!=null&&E(e,["name"],t);const i=x(n,["displayName"]);i!=null&&E(e,["displayName"],i);const r=x(n,["state"]);r!=null&&E(e,["state"],JH(r));const s=x(n,["error"]);s!=null&&E(e,["error"],s);const o=x(n,["createTime"]);o!=null&&E(e,["createTime"],o);const a=x(n,["startTime"]);a!=null&&E(e,["startTime"],a);const l=x(n,["endTime"]);l!=null&&E(e,["endTime"],l);const u=x(n,["updateTime"]);u!=null&&E(e,["updateTime"],u);const d=x(n,["model"]);d!=null&&E(e,["model"],d);const h=x(n,["inputConfig"]);h!=null&&E(e,["src"],Ate(h));const p=x(n,["outputConfig"]);p!=null&&E(e,["dest"],xte(qH(p)));const v=x(n,["completionStats"]);return v!=null&&E(e,["completionStats"],v),e}function Ate(n){const e={},t=x(n,["instancesFormat"]);t!=null&&E(e,["format"],t);const i=x(n,["gcsSource","uris"]);i!=null&&E(e,["gcsUri"],i);const r=x(n,["bigquerySource","inputUri"]);return r!=null&&E(e,["bigqueryUri"],r),e}function Ste(n,e){const t={};if(x(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(x(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(x(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=x(e,["fileName"]);i!=null&&E(t,["fileName"],i);const r=x(e,["inlinedRequests"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>$te(n,o))),E(t,["requests","requests"],s)}return t}function Ete(n){const e={},t=x(n,["format"]);t!=null&&E(e,["instancesFormat"],t);const i=x(n,["gcsUri"]);i!=null&&E(e,["gcsSource","uris"],i);const r=x(n,["bigqueryUri"]);if(r!=null&&E(e,["bigquerySource","inputUri"],r),x(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(x(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function Tte(n){const e={},t=x(n,["data"]);if(t!=null&&E(e,["data"],t),x(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=x(n,["mimeType"]);return i!=null&&E(e,["mimeType"],i),e}function Mte(n,e){const t={},i=x(e,["name"]);return i!=null&&E(t,["_url","name"],Gg(n,i)),t}function Cte(n,e){const t={},i=x(e,["name"]);return i!=null&&E(t,["_url","name"],Gg(n,i)),t}function bte(n){const e={},t=x(n,["content"]);t!=null&&E(e,["content"],t);const i=x(n,["citationMetadata"]);i!=null&&E(e,["citationMetadata"],Rte(i));const r=x(n,["tokenCount"]);r!=null&&E(e,["tokenCount"],r);const s=x(n,["finishReason"]);s!=null&&E(e,["finishReason"],s);const o=x(n,["avgLogprobs"]);o!=null&&E(e,["avgLogprobs"],o);const a=x(n,["groundingMetadata"]);a!=null&&E(e,["groundingMetadata"],a);const l=x(n,["index"]);l!=null&&E(e,["index"],l);const u=x(n,["logprobsResult"]);u!=null&&E(e,["logprobsResult"],u);const d=x(n,["safetyRatings"]);if(d!=null){let p=d;Array.isArray(p)&&(p=p.map(v=>v)),E(e,["safetyRatings"],p)}const h=x(n,["urlContextMetadata"]);return h!=null&&E(e,["urlContextMetadata"],h),e}function Rte(n){const e={},t=x(n,["citationSources"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>r)),E(e,["citations"],i)}return e}function XH(n){const e={},t=x(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(s=>one(s))),E(e,["parts"],r)}const i=x(n,["role"]);return i!=null&&E(e,["role"],i),e}function Pte(n,e){const t={},i=x(n,["displayName"]);if(e!==void 0&&i!=null&&E(e,["batch","displayName"],i),x(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function Ite(n,e){const t={},i=x(n,["displayName"]);e!==void 0&&i!=null&&E(e,["displayName"],i);const r=x(n,["dest"]);return e!==void 0&&r!=null&&E(e,["outputConfig"],wte(yte(r))),t}function _B(n,e){const t={},i=x(e,["model"]);i!=null&&E(t,["_url","model"],$n(n,i));const r=x(e,["src"]);r!=null&&E(t,["batch","inputConfig"],Ste(n,WH(n,r)));const s=x(e,["config"]);return s!=null&&Pte(s,t),t}function Dte(n,e){const t={},i=x(e,["model"]);i!=null&&E(t,["model"],$n(n,i));const r=x(e,["src"]);r!=null&&E(t,["inputConfig"],Ete(WH(n,r)));const s=x(e,["config"]);return s!=null&&Ite(s,t),t}function Lte(n,e){const t={},i=x(n,["displayName"]);return e!==void 0&&i!=null&&E(e,["batch","displayName"],i),t}function Bte(n,e){const t={},i=x(e,["model"]);i!=null&&E(t,["_url","model"],$n(n,i));const r=x(e,["src"]);r!=null&&E(t,["batch","inputConfig"],Gte(n,r));const s=x(e,["config"]);return s!=null&&Lte(s,t),t}function Nte(n,e){const t={},i=x(e,["name"]);return i!=null&&E(t,["_url","name"],Gg(n,i)),t}function kte(n,e){const t={},i=x(e,["name"]);return i!=null&&E(t,["_url","name"],Gg(n,i)),t}function Fte(n){const e={},t=x(n,["sdkHttpResponse"]);t!=null&&E(e,["sdkHttpResponse"],t);const i=x(n,["name"]);i!=null&&E(e,["name"],i);const r=x(n,["done"]);r!=null&&E(e,["done"],r);const s=x(n,["error"]);return s!=null&&E(e,["error"],s),e}function Ute(n){const e={},t=x(n,["sdkHttpResponse"]);t!=null&&E(e,["sdkHttpResponse"],t);const i=x(n,["name"]);i!=null&&E(e,["name"],i);const r=x(n,["done"]);r!=null&&E(e,["done"],r);const s=x(n,["error"]);return s!=null&&E(e,["error"],s),e}function Ote(n,e){const t={},i=x(e,["contents"]);if(i!=null){let s=RR(n,i);Array.isArray(s)&&(s=s.map(o=>o)),E(t,["requests[]","request","content"],s)}const r=x(e,["config"]);return r!=null&&(E(t,["_self"],Hte(r,t)),kee(t,{"requests[].*":"requests[].request.*"})),t}function Hte(n,e){const t={},i=x(n,["taskType"]);e!==void 0&&i!=null&&E(e,["requests[]","taskType"],i);const r=x(n,["title"]);e!==void 0&&r!=null&&E(e,["requests[]","title"],r);const s=x(n,["outputDimensionality"]);if(e!==void 0&&s!=null&&E(e,["requests[]","outputDimensionality"],s),x(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(x(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function Gte(n,e){const t={},i=x(e,["fileName"]);i!=null&&E(t,["file_name"],i);const r=x(e,["inlinedRequests"]);return r!=null&&E(t,["requests"],Ote(n,r)),t}function zte(n){const e={};if(x(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=x(n,["fileUri"]);t!=null&&E(e,["fileUri"],t);const i=x(n,["mimeType"]);return i!=null&&E(e,["mimeType"],i),e}function Vte(n){const e={},t=x(n,["id"]);t!=null&&E(e,["id"],t);const i=x(n,["args"]);i!=null&&E(e,["args"],i);const r=x(n,["name"]);if(r!=null&&E(e,["name"],r),x(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(x(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Wte(n){const e={},t=x(n,["mode"]);t!=null&&E(e,["mode"],t);const i=x(n,["allowedFunctionNames"]);if(i!=null&&E(e,["allowedFunctionNames"],i),x(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function qte(n,e,t){const i={},r=x(e,["systemInstruction"]);t!==void 0&&r!=null&&E(t,["systemInstruction"],XH(Rs(r)));const s=x(e,["temperature"]);s!=null&&E(i,["temperature"],s);const o=x(e,["topP"]);o!=null&&E(i,["topP"],o);const a=x(e,["topK"]);a!=null&&E(i,["topK"],a);const l=x(e,["candidateCount"]);l!=null&&E(i,["candidateCount"],l);const u=x(e,["maxOutputTokens"]);u!=null&&E(i,["maxOutputTokens"],u);const d=x(e,["stopSequences"]);d!=null&&E(i,["stopSequences"],d);const h=x(e,["responseLogprobs"]);h!=null&&E(i,["responseLogprobs"],h);const p=x(e,["logprobs"]);p!=null&&E(i,["logprobs"],p);const v=x(e,["presencePenalty"]);v!=null&&E(i,["presencePenalty"],v);const _=x(e,["frequencyPenalty"]);_!=null&&E(i,["frequencyPenalty"],_);const w=x(e,["seed"]);w!=null&&E(i,["seed"],w);const S=x(e,["responseMimeType"]);S!=null&&E(i,["responseMimeType"],S);const A=x(e,["responseSchema"]);A!=null&&E(i,["responseSchema"],PR(A));const b=x(e,["responseJsonSchema"]);if(b!=null&&E(i,["responseJsonSchema"],b),x(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(x(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const C=x(e,["safetySettings"]);if(t!==void 0&&C!=null){let Z=C;Array.isArray(Z)&&(Z=Z.map(he=>ane(he))),E(t,["safetySettings"],Z)}const P=x(e,["tools"]);if(t!==void 0&&P!=null){let Z=Hg(P);Array.isArray(Z)&&(Z=Z.map(he=>une(Og(he)))),E(t,["tools"],Z)}const k=x(e,["toolConfig"]);if(t!==void 0&&k!=null&&E(t,["toolConfig"],lne(k)),x(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const L=x(e,["cachedContent"]);t!==void 0&&L!=null&&E(t,["cachedContent"],fc(n,L));const N=x(e,["responseModalities"]);N!=null&&E(i,["responseModalities"],N);const O=x(e,["mediaResolution"]);O!=null&&E(i,["mediaResolution"],O);const D=x(e,["speechConfig"]);if(D!=null&&E(i,["speechConfig"],IR(D)),x(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const U=x(e,["thinkingConfig"]);U!=null&&E(i,["thinkingConfig"],U);const X=x(e,["imageConfig"]);return X!=null&&E(i,["imageConfig"],Zte(X)),i}function Jte(n){const e={},t=x(n,["sdkHttpResponse"]);t!=null&&E(e,["sdkHttpResponse"],t);const i=x(n,["candidates"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(u=>bte(u))),E(e,["candidates"],l)}const r=x(n,["modelVersion"]);r!=null&&E(e,["modelVersion"],r);const s=x(n,["promptFeedback"]);s!=null&&E(e,["promptFeedback"],s);const o=x(n,["responseId"]);o!=null&&E(e,["responseId"],o);const a=x(n,["usageMetadata"]);return a!=null&&E(e,["usageMetadata"],a),e}function Xte(n,e){const t={},i=x(e,["name"]);return i!=null&&E(t,["_url","name"],Gg(n,i)),t}function Yte(n,e){const t={},i=x(e,["name"]);return i!=null&&E(t,["_url","name"],Gg(n,i)),t}function Kte(n){const e={};if(x(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=x(n,["enableWidget"]);return t!=null&&E(e,["enableWidget"],t),e}function Qte(n){const e={};if(x(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(x(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=x(n,["timeRangeFilter"]);return t!=null&&E(e,["timeRangeFilter"],t),e}function Zte(n){const e={},t=x(n,["aspectRatio"]);t!=null&&E(e,["aspectRatio"],t);const i=x(n,["imageSize"]);if(i!=null&&E(e,["imageSize"],i),x(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(x(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function $te(n,e){const t={},i=x(e,["model"]);i!=null&&E(t,["request","model"],$n(n,i));const r=x(e,["contents"]);if(r!=null){let a=La(r);Array.isArray(a)&&(a=a.map(l=>XH(l))),E(t,["request","contents"],a)}const s=x(e,["metadata"]);s!=null&&E(t,["metadata"],s);const o=x(e,["config"]);return o!=null&&E(t,["request","generationConfig"],qte(n,o,x(t,["request"],{}))),t}function jte(n){const e={},t=x(n,["response"]);t!=null&&E(e,["response"],Jte(t));const i=x(n,["error"]);return i!=null&&E(e,["error"],i),e}function ene(n,e){const t={},i=x(n,["pageSize"]);e!==void 0&&i!=null&&E(e,["_query","pageSize"],i);const r=x(n,["pageToken"]);if(e!==void 0&&r!=null&&E(e,["_query","pageToken"],r),x(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function tne(n,e){const t={},i=x(n,["pageSize"]);e!==void 0&&i!=null&&E(e,["_query","pageSize"],i);const r=x(n,["pageToken"]);e!==void 0&&r!=null&&E(e,["_query","pageToken"],r);const s=x(n,["filter"]);return e!==void 0&&s!=null&&E(e,["_query","filter"],s),t}function nne(n){const e={},t=x(n,["config"]);return t!=null&&ene(t,e),e}function ine(n){const e={},t=x(n,["config"]);return t!=null&&tne(t,e),e}function rne(n){const e={},t=x(n,["sdkHttpResponse"]);t!=null&&E(e,["sdkHttpResponse"],t);const i=x(n,["nextPageToken"]);i!=null&&E(e,["nextPageToken"],i);const r=x(n,["operations"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>kw(o))),E(e,["batchJobs"],s)}return e}function sne(n){const e={},t=x(n,["sdkHttpResponse"]);t!=null&&E(e,["sdkHttpResponse"],t);const i=x(n,["nextPageToken"]);i!=null&&E(e,["nextPageToken"],i);const r=x(n,["batchPredictionJobs"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>JM(o))),E(e,["batchJobs"],s)}return e}function one(n){const e={},t=x(n,["mediaResolution"]);t!=null&&E(e,["mediaResolution"],t);const i=x(n,["codeExecutionResult"]);i!=null&&E(e,["codeExecutionResult"],i);const r=x(n,["executableCode"]);r!=null&&E(e,["executableCode"],r);const s=x(n,["fileData"]);s!=null&&E(e,["fileData"],zte(s));const o=x(n,["functionCall"]);o!=null&&E(e,["functionCall"],Vte(o));const a=x(n,["functionResponse"]);a!=null&&E(e,["functionResponse"],a);const l=x(n,["inlineData"]);l!=null&&E(e,["inlineData"],Tte(l));const u=x(n,["text"]);u!=null&&E(e,["text"],u);const d=x(n,["thought"]);d!=null&&E(e,["thought"],d);const h=x(n,["thoughtSignature"]);h!=null&&E(e,["thoughtSignature"],h);const p=x(n,["videoMetadata"]);return p!=null&&E(e,["videoMetadata"],p),e}function ane(n){const e={},t=x(n,["category"]);if(t!=null&&E(e,["category"],t),x(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=x(n,["threshold"]);return i!=null&&E(e,["threshold"],i),e}function lne(n){const e={},t=x(n,["functionCallingConfig"]);t!=null&&E(e,["functionCallingConfig"],Wte(t));const i=x(n,["retrievalConfig"]);return i!=null&&E(e,["retrievalConfig"],i),e}function une(n){const e={},t=x(n,["functionDeclarations"]);if(t!=null){let d=t;Array.isArray(d)&&(d=d.map(h=>h)),E(e,["functionDeclarations"],d)}if(x(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=x(n,["googleSearchRetrieval"]);i!=null&&E(e,["googleSearchRetrieval"],i);const r=x(n,["computerUse"]);r!=null&&E(e,["computerUse"],r);const s=x(n,["fileSearch"]);s!=null&&E(e,["fileSearch"],s);const o=x(n,["codeExecution"]);if(o!=null&&E(e,["codeExecution"],o),x(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=x(n,["googleMaps"]);a!=null&&E(e,["googleMaps"],Kte(a));const l=x(n,["googleSearch"]);l!=null&&E(e,["googleSearch"],Qte(l));const u=x(n,["urlContext"]);return u!=null&&E(e,["urlContext"],u),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var lc;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(lc||(lc={}));class jh{constructor(e,t,i,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,i,r)}init(e,t,i){var r,s;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let o={config:{}};!i||Object.keys(i).length===0?o={config:{}}:typeof i=="object"?o=Object.assign({},i):o=i,o.config&&(o.config.pageToken=t.nextPageToken),this.paramsInternal=o,this.pageInternalSize=(s=(r=o.config)===null||r===void 0?void 0:r.pageSize)!==null&&s!==void 0?s:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class cne extends dc{constructor(e){super(),this.apiClient=e,this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)},this.list=async(t={})=>new jh(lc.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(t),t)}createInlinedGenerateContentRequest(e){const t=_B(this.apiClient,e),i=t._url,r=Bt("{model}:batchGenerateContent",i),a=t.batch.inputConfig.requests,l=a.requests,u=[];for(const d of l){const h=Object.assign({},d);if(h.systemInstruction){const p=h.systemInstruction;delete h.systemInstruction;const v=h.request;v.systemInstruction=p,h.request=v}u.push(h)}return a.requests=u,delete t.config,delete t._url,delete t._query,{path:r,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const i=t?Object.assign({},t):{},r=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${r}`),i.dest===void 0){const s=this.getGcsUri(e),o=this.getBigqueryUri(e);if(s)s.endsWith(".jsonl")?i.dest=`${s.slice(0,-6)}/dest`:i.dest=`${s}_dest_${r}`;else if(o)i.dest=`${o}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var t,i,r,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=Dte(this.apiClient,e);return a=Bt("batchPredictionJobs",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>JM(d))}else{const u=_B(this.apiClient,e);return a=Bt("{model}:batchGenerateContent",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),o.then(d=>kw(d))}}async createEmbeddingsInternal(e){var t,i;let r,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Bte(this.apiClient,e);return s=Bt("{model}:asyncBatchEmbedContent",a._url),o=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),r.then(l=>kw(l))}}async get(e){var t,i,r,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=Yte(this.apiClient,e);return a=Bt("batchPredictionJobs/{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>JM(d))}else{const u=Xte(this.apiClient,e);return a=Bt("batches/{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),o.then(d=>kw(d))}}async cancel(e){var t,i,r,s;let o="",a={};if(this.apiClient.isVertexAI()){const l=Cte(this.apiClient,e);o=Bt("batchPredictionJobs/{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const l=Mte(this.apiClient,e);o=Bt("batches/{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var t,i,r,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=ine(e);return a=Bt("batchPredictionJobs",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),o.then(d=>{const h=sne(d),p=new mB;return Object.assign(p,h),p})}else{const u=nne(e);return a=Bt("batches",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),o.then(d=>{const h=rne(d),p=new mB;return Object.assign(p,h),p})}}async delete(e){var t,i,r,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=kte(this.apiClient,e);return a=Bt("batchPredictionJobs/{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),o.then(d=>Ute(d))}else{const u=Nte(this.apiClient,e);return a=Bt("batches/{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),o.then(d=>Fte(d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dne(n){const e={},t=x(n,["data"]);if(t!=null&&E(e,["data"],t),x(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=x(n,["mimeType"]);return i!=null&&E(e,["mimeType"],i),e}function xB(n){const e={},t=x(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(s=>Bne(s))),E(e,["parts"],r)}const i=x(n,["role"]);return i!=null&&E(e,["role"],i),e}function fne(n,e){const t={},i=x(n,["ttl"]);e!==void 0&&i!=null&&E(e,["ttl"],i);const r=x(n,["expireTime"]);e!==void 0&&r!=null&&E(e,["expireTime"],r);const s=x(n,["displayName"]);e!==void 0&&s!=null&&E(e,["displayName"],s);const o=x(n,["contents"]);if(e!==void 0&&o!=null){let d=La(o);Array.isArray(d)&&(d=d.map(h=>xB(h))),E(e,["contents"],d)}const a=x(n,["systemInstruction"]);e!==void 0&&a!=null&&E(e,["systemInstruction"],xB(Rs(a)));const l=x(n,["tools"]);if(e!==void 0&&l!=null){let d=l;Array.isArray(d)&&(d=d.map(h=>kne(h))),E(e,["tools"],d)}const u=x(n,["toolConfig"]);if(e!==void 0&&u!=null&&E(e,["toolConfig"],Nne(u)),x(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function hne(n,e){const t={},i=x(n,["ttl"]);e!==void 0&&i!=null&&E(e,["ttl"],i);const r=x(n,["expireTime"]);e!==void 0&&r!=null&&E(e,["expireTime"],r);const s=x(n,["displayName"]);e!==void 0&&s!=null&&E(e,["displayName"],s);const o=x(n,["contents"]);if(e!==void 0&&o!=null){let h=La(o);Array.isArray(h)&&(h=h.map(p=>p)),E(e,["contents"],h)}const a=x(n,["systemInstruction"]);e!==void 0&&a!=null&&E(e,["systemInstruction"],Rs(a));const l=x(n,["tools"]);if(e!==void 0&&l!=null){let h=l;Array.isArray(h)&&(h=h.map(p=>Fne(p))),E(e,["tools"],h)}const u=x(n,["toolConfig"]);e!==void 0&&u!=null&&E(e,["toolConfig"],u);const d=x(n,["kmsKeyName"]);return e!==void 0&&d!=null&&E(e,["encryption_spec","kmsKeyName"],d),t}function pne(n,e){const t={},i=x(e,["model"]);i!=null&&E(t,["model"],NH(n,i));const r=x(e,["config"]);return r!=null&&fne(r,t),t}function mne(n,e){const t={},i=x(e,["model"]);i!=null&&E(t,["model"],NH(n,i));const r=x(e,["config"]);return r!=null&&hne(r,t),t}function gne(n,e){const t={},i=x(e,["name"]);return i!=null&&E(t,["_url","name"],fc(n,i)),t}function vne(n,e){const t={},i=x(e,["name"]);return i!=null&&E(t,["_url","name"],fc(n,i)),t}function yne(n){const e={},t=x(n,["sdkHttpResponse"]);return t!=null&&E(e,["sdkHttpResponse"],t),e}function _ne(n){const e={},t=x(n,["sdkHttpResponse"]);return t!=null&&E(e,["sdkHttpResponse"],t),e}function xne(n){const e={};if(x(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=x(n,["fileUri"]);t!=null&&E(e,["fileUri"],t);const i=x(n,["mimeType"]);return i!=null&&E(e,["mimeType"],i),e}function wne(n){const e={},t=x(n,["id"]);t!=null&&E(e,["id"],t);const i=x(n,["args"]);i!=null&&E(e,["args"],i);const r=x(n,["name"]);if(r!=null&&E(e,["name"],r),x(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(x(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Ane(n){const e={},t=x(n,["mode"]);t!=null&&E(e,["mode"],t);const i=x(n,["allowedFunctionNames"]);if(i!=null&&E(e,["allowedFunctionNames"],i),x(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Sne(n){const e={};if(x(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=x(n,["description"]);t!=null&&E(e,["description"],t);const i=x(n,["name"]);i!=null&&E(e,["name"],i);const r=x(n,["parameters"]);r!=null&&E(e,["parameters"],r);const s=x(n,["parametersJsonSchema"]);s!=null&&E(e,["parametersJsonSchema"],s);const o=x(n,["response"]);o!=null&&E(e,["response"],o);const a=x(n,["responseJsonSchema"]);return a!=null&&E(e,["responseJsonSchema"],a),e}function Ene(n,e){const t={},i=x(e,["name"]);return i!=null&&E(t,["_url","name"],fc(n,i)),t}function Tne(n,e){const t={},i=x(e,["name"]);return i!=null&&E(t,["_url","name"],fc(n,i)),t}function Mne(n){const e={};if(x(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=x(n,["enableWidget"]);return t!=null&&E(e,["enableWidget"],t),e}function Cne(n){const e={};if(x(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(x(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=x(n,["timeRangeFilter"]);return t!=null&&E(e,["timeRangeFilter"],t),e}function bne(n,e){const t={},i=x(n,["pageSize"]);e!==void 0&&i!=null&&E(e,["_query","pageSize"],i);const r=x(n,["pageToken"]);return e!==void 0&&r!=null&&E(e,["_query","pageToken"],r),t}function Rne(n,e){const t={},i=x(n,["pageSize"]);e!==void 0&&i!=null&&E(e,["_query","pageSize"],i);const r=x(n,["pageToken"]);return e!==void 0&&r!=null&&E(e,["_query","pageToken"],r),t}function Pne(n){const e={},t=x(n,["config"]);return t!=null&&bne(t,e),e}function Ine(n){const e={},t=x(n,["config"]);return t!=null&&Rne(t,e),e}function Dne(n){const e={},t=x(n,["sdkHttpResponse"]);t!=null&&E(e,["sdkHttpResponse"],t);const i=x(n,["nextPageToken"]);i!=null&&E(e,["nextPageToken"],i);const r=x(n,["cachedContents"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>o)),E(e,["cachedContents"],s)}return e}function Lne(n){const e={},t=x(n,["sdkHttpResponse"]);t!=null&&E(e,["sdkHttpResponse"],t);const i=x(n,["nextPageToken"]);i!=null&&E(e,["nextPageToken"],i);const r=x(n,["cachedContents"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>o)),E(e,["cachedContents"],s)}return e}function Bne(n){const e={},t=x(n,["mediaResolution"]);t!=null&&E(e,["mediaResolution"],t);const i=x(n,["codeExecutionResult"]);i!=null&&E(e,["codeExecutionResult"],i);const r=x(n,["executableCode"]);r!=null&&E(e,["executableCode"],r);const s=x(n,["fileData"]);s!=null&&E(e,["fileData"],xne(s));const o=x(n,["functionCall"]);o!=null&&E(e,["functionCall"],wne(o));const a=x(n,["functionResponse"]);a!=null&&E(e,["functionResponse"],a);const l=x(n,["inlineData"]);l!=null&&E(e,["inlineData"],dne(l));const u=x(n,["text"]);u!=null&&E(e,["text"],u);const d=x(n,["thought"]);d!=null&&E(e,["thought"],d);const h=x(n,["thoughtSignature"]);h!=null&&E(e,["thoughtSignature"],h);const p=x(n,["videoMetadata"]);return p!=null&&E(e,["videoMetadata"],p),e}function Nne(n){const e={},t=x(n,["functionCallingConfig"]);t!=null&&E(e,["functionCallingConfig"],Ane(t));const i=x(n,["retrievalConfig"]);return i!=null&&E(e,["retrievalConfig"],i),e}function kne(n){const e={},t=x(n,["functionDeclarations"]);if(t!=null){let d=t;Array.isArray(d)&&(d=d.map(h=>h)),E(e,["functionDeclarations"],d)}if(x(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=x(n,["googleSearchRetrieval"]);i!=null&&E(e,["googleSearchRetrieval"],i);const r=x(n,["computerUse"]);r!=null&&E(e,["computerUse"],r);const s=x(n,["fileSearch"]);s!=null&&E(e,["fileSearch"],s);const o=x(n,["codeExecution"]);if(o!=null&&E(e,["codeExecution"],o),x(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=x(n,["googleMaps"]);a!=null&&E(e,["googleMaps"],Mne(a));const l=x(n,["googleSearch"]);l!=null&&E(e,["googleSearch"],Cne(l));const u=x(n,["urlContext"]);return u!=null&&E(e,["urlContext"],u),e}function Fne(n){const e={},t=x(n,["functionDeclarations"]);if(t!=null){let h=t;Array.isArray(h)&&(h=h.map(p=>Sne(p))),E(e,["functionDeclarations"],h)}const i=x(n,["retrieval"]);i!=null&&E(e,["retrieval"],i);const r=x(n,["googleSearchRetrieval"]);r!=null&&E(e,["googleSearchRetrieval"],r);const s=x(n,["computerUse"]);if(s!=null&&E(e,["computerUse"],s),x(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const o=x(n,["codeExecution"]);o!=null&&E(e,["codeExecution"],o);const a=x(n,["enterpriseWebSearch"]);a!=null&&E(e,["enterpriseWebSearch"],a);const l=x(n,["googleMaps"]);l!=null&&E(e,["googleMaps"],l);const u=x(n,["googleSearch"]);u!=null&&E(e,["googleSearch"],u);const d=x(n,["urlContext"]);return d!=null&&E(e,["urlContext"],d),e}function Une(n,e){const t={},i=x(n,["ttl"]);e!==void 0&&i!=null&&E(e,["ttl"],i);const r=x(n,["expireTime"]);return e!==void 0&&r!=null&&E(e,["expireTime"],r),t}function One(n,e){const t={},i=x(n,["ttl"]);e!==void 0&&i!=null&&E(e,["ttl"],i);const r=x(n,["expireTime"]);return e!==void 0&&r!=null&&E(e,["expireTime"],r),t}function Hne(n,e){const t={},i=x(e,["name"]);i!=null&&E(t,["_url","name"],fc(n,i));const r=x(e,["config"]);return r!=null&&Une(r,t),t}function Gne(n,e){const t={},i=x(e,["name"]);i!=null&&E(t,["_url","name"],fc(n,i));const r=x(e,["config"]);return r!=null&&One(r,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class zne extends dc{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new jh(lc.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(t),t)}async create(e){var t,i,r,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=mne(this.apiClient,e);return a=Bt("cachedContents",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>d)}else{const u=pne(this.apiClient,e);return a=Bt("cachedContents",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),o.then(d=>d)}}async get(e){var t,i,r,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=Tne(this.apiClient,e);return a=Bt("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>d)}else{const u=Ene(this.apiClient,e);return a=Bt("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),o.then(d=>d)}}async delete(e){var t,i,r,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=vne(this.apiClient,e);return a=Bt("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),o.then(d=>{const h=_ne(d),p=new hB;return Object.assign(p,h),p})}else{const u=gne(this.apiClient,e);return a=Bt("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),o.then(d=>{const h=yne(d),p=new hB;return Object.assign(p,h),p})}}async update(e){var t,i,r,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=Gne(this.apiClient,e);return a=Bt("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>d)}else{const u=Hne(this.apiClient,e);return a=Bt("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),o.then(d=>d)}}async listInternal(e){var t,i,r,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=Ine(e);return a=Bt("cachedContents",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),o.then(d=>{const h=Lne(d),p=new pB;return Object.assign(p,h),p})}else{const u=Pne(e);return a=Bt("cachedContents",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),o.then(d=>{const h=Dne(d),p=new pB;return Object.assign(p,h),p})}}}function wB(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Li(n){return this instanceof Li?(this.v=n,this):new Li(n)}function rg(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),r,s=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),r[Symbol.asyncIterator]=function(){return this},r;function o(v){return function(_){return Promise.resolve(_).then(v,h)}}function a(v,_){i[v]&&(r[v]=function(w){return new Promise(function(S,A){s.push([v,w,S,A])>1||l(v,w)})},_&&(r[v]=_(r[v])))}function l(v,_){try{u(i[v](_))}catch(w){p(s[0][3],w)}}function u(v){v.value instanceof Li?Promise.resolve(v.value.v).then(d,h):p(s[0][2],v)}function d(v){l("next",v)}function h(v){l("throw",v)}function p(v,_){v(_),s.shift(),s.length&&l(s[0][0],s[0][1])}}function Dv(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof wB=="function"?wB(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(s){t[s]=n[s]&&function(o){return new Promise(function(a,l){o=n[s](o),r(a,l,o.done,o.value)})}}function r(s,o,a,l){Promise.resolve(l).then(function(u){s({value:u,done:a})},o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Vne(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:YH(t)}function YH(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function Wne(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function AB(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let i=0;for(;i<t;)if(n[i].role==="user")e.push(n[i]),i++;else{const r=[];let s=!0;for(;i<t&&n[i].role==="model";)r.push(n[i]),s&&!YH(n[i])&&(s=!1),i++;s?e.push(...r):e.pop()}return e}class qne{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new Jne(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class Jne{constructor(e,t,i,r={},s=[]){this.apiClient=e,this.modelsModule=t,this.model=i,this.config=r,this.history=s,this.sendPromise=Promise.resolve(),Wne(s)}async sendMessage(e){var t;await this.sendPromise;const i=Rs(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var s,o,a;const l=await r,u=(o=(s=l.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content,d=l.automaticFunctionCallingHistory,h=this.getHistory(!0).length;let p=[];d!=null&&(p=(a=d.slice(h))!==null&&a!==void 0?a:[]);const v=u?[u]:[];this.recordHistory(i,v,p)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var t;await this.sendPromise;const i=Rs(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const s=await r;return this.processStreamResponse(s,i)}getHistory(e=!1){const t=e?AB(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){var i,r;return rg(this,arguments,function*(){var o,a,l,u;const d=[];try{for(var h=!0,p=Dv(e),v;v=yield Li(p.next()),o=v.done,!o;h=!0){u=v.value,h=!1;const _=u;if(Vne(_)){const w=(r=(i=_.candidates)===null||i===void 0?void 0:i[0])===null||r===void 0?void 0:r.content;w!==void 0&&d.push(w)}yield yield Li(_)}}catch(_){a={error:_}}finally{try{!h&&!o&&(l=p.return)&&(yield Li(l.call(p)))}finally{if(a)throw a.error}}this.recordHistory(t,d)})}recordHistory(e,t,i){let r=[];t.length>0&&t.every(s=>s.role!==void 0)?r=t:r.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...AB(i)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class kS extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,kS.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Xne(n){const e={},t=x(n,["file"]);return t!=null&&E(e,["file"],t),e}function Yne(n){const e={},t=x(n,["sdkHttpResponse"]);return t!=null&&E(e,["sdkHttpResponse"],t),e}function Kne(n){const e={},t=x(n,["name"]);return t!=null&&E(e,["_url","file"],GH(t)),e}function Qne(n){const e={},t=x(n,["sdkHttpResponse"]);return t!=null&&E(e,["sdkHttpResponse"],t),e}function Zne(n){const e={},t=x(n,["name"]);return t!=null&&E(e,["_url","file"],GH(t)),e}function $ne(n,e){const t={},i=x(n,["pageSize"]);e!==void 0&&i!=null&&E(e,["_query","pageSize"],i);const r=x(n,["pageToken"]);return e!==void 0&&r!=null&&E(e,["_query","pageToken"],r),t}function jne(n){const e={},t=x(n,["config"]);return t!=null&&$ne(t,e),e}function eie(n){const e={},t=x(n,["sdkHttpResponse"]);t!=null&&E(e,["sdkHttpResponse"],t);const i=x(n,["nextPageToken"]);i!=null&&E(e,["nextPageToken"],i);const r=x(n,["files"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>o)),E(e,["files"],s)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class tie extends dc{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new jh(lc.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,i;let r,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=jne(e);return s=Bt("files",a._url),o=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:l.headers},d})),r.then(l=>{const u=eie(l),d=new ste;return Object.assign(d,u),d})}}async createInternal(e){var t,i;let r,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Xne(e);return s=Bt("upload/v1beta/files",a._url),o=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),r.then(l=>{const u=Yne(l),d=new ote;return Object.assign(d,u),d})}}async get(e){var t,i;let r,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Zne(e);return s=Bt("files/{file}",a._url),o=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),r.then(l=>l)}}async delete(e){var t,i;let r,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Kne(e);return s=Bt("files/{file}",a._url),o=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:l.headers},d})),r.then(l=>{const u=Qne(l),d=new ate;return Object.assign(d,u),d})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Fw(n){const e={},t=x(n,["data"]);if(t!=null&&E(e,["data"],t),x(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=x(n,["mimeType"]);return i!=null&&E(e,["mimeType"],i),e}function nie(n){const e={},t=x(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(s=>yie(s))),E(e,["parts"],r)}const i=x(n,["role"]);return i!=null&&E(e,["role"],i),e}function iie(n){const e={};if(x(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=x(n,["fileUri"]);t!=null&&E(e,["fileUri"],t);const i=x(n,["mimeType"]);return i!=null&&E(e,["mimeType"],i),e}function rie(n){const e={},t=x(n,["id"]);t!=null&&E(e,["id"],t);const i=x(n,["args"]);i!=null&&E(e,["args"],i);const r=x(n,["name"]);if(r!=null&&E(e,["name"],r),x(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(x(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function sie(n){const e={};if(x(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=x(n,["description"]);t!=null&&E(e,["description"],t);const i=x(n,["name"]);i!=null&&E(e,["name"],i);const r=x(n,["parameters"]);r!=null&&E(e,["parameters"],r);const s=x(n,["parametersJsonSchema"]);s!=null&&E(e,["parametersJsonSchema"],s);const o=x(n,["response"]);o!=null&&E(e,["response"],o);const a=x(n,["responseJsonSchema"]);return a!=null&&E(e,["responseJsonSchema"],a),e}function oie(n){const e={},t=x(n,["modelSelectionConfig"]);t!=null&&E(e,["modelConfig"],t);const i=x(n,["responseJsonSchema"]);i!=null&&E(e,["responseJsonSchema"],i);const r=x(n,["audioTimestamp"]);r!=null&&E(e,["audioTimestamp"],r);const s=x(n,["candidateCount"]);s!=null&&E(e,["candidateCount"],s);const o=x(n,["enableAffectiveDialog"]);o!=null&&E(e,["enableAffectiveDialog"],o);const a=x(n,["frequencyPenalty"]);a!=null&&E(e,["frequencyPenalty"],a);const l=x(n,["logprobs"]);l!=null&&E(e,["logprobs"],l);const u=x(n,["maxOutputTokens"]);u!=null&&E(e,["maxOutputTokens"],u);const d=x(n,["mediaResolution"]);d!=null&&E(e,["mediaResolution"],d);const h=x(n,["presencePenalty"]);h!=null&&E(e,["presencePenalty"],h);const p=x(n,["responseLogprobs"]);p!=null&&E(e,["responseLogprobs"],p);const v=x(n,["responseMimeType"]);v!=null&&E(e,["responseMimeType"],v);const _=x(n,["responseModalities"]);_!=null&&E(e,["responseModalities"],_);const w=x(n,["responseSchema"]);w!=null&&E(e,["responseSchema"],w);const S=x(n,["routingConfig"]);S!=null&&E(e,["routingConfig"],S);const A=x(n,["seed"]);A!=null&&E(e,["seed"],A);const b=x(n,["speechConfig"]);b!=null&&E(e,["speechConfig"],KH(b));const C=x(n,["stopSequences"]);C!=null&&E(e,["stopSequences"],C);const P=x(n,["temperature"]);P!=null&&E(e,["temperature"],P);const k=x(n,["thinkingConfig"]);k!=null&&E(e,["thinkingConfig"],k);const L=x(n,["topK"]);L!=null&&E(e,["topK"],L);const N=x(n,["topP"]);if(N!=null&&E(e,["topP"],N),x(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function aie(n){const e={};if(x(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=x(n,["enableWidget"]);return t!=null&&E(e,["enableWidget"],t),e}function lie(n){const e={};if(x(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(x(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=x(n,["timeRangeFilter"]);return t!=null&&E(e,["timeRangeFilter"],t),e}function uie(n,e){const t={},i=x(n,["generationConfig"]);e!==void 0&&i!=null&&E(e,["setup","generationConfig"],i);const r=x(n,["responseModalities"]);e!==void 0&&r!=null&&E(e,["setup","generationConfig","responseModalities"],r);const s=x(n,["temperature"]);e!==void 0&&s!=null&&E(e,["setup","generationConfig","temperature"],s);const o=x(n,["topP"]);e!==void 0&&o!=null&&E(e,["setup","generationConfig","topP"],o);const a=x(n,["topK"]);e!==void 0&&a!=null&&E(e,["setup","generationConfig","topK"],a);const l=x(n,["maxOutputTokens"]);e!==void 0&&l!=null&&E(e,["setup","generationConfig","maxOutputTokens"],l);const u=x(n,["mediaResolution"]);e!==void 0&&u!=null&&E(e,["setup","generationConfig","mediaResolution"],u);const d=x(n,["seed"]);e!==void 0&&d!=null&&E(e,["setup","generationConfig","seed"],d);const h=x(n,["speechConfig"]);e!==void 0&&h!=null&&E(e,["setup","generationConfig","speechConfig"],DR(h));const p=x(n,["thinkingConfig"]);e!==void 0&&p!=null&&E(e,["setup","generationConfig","thinkingConfig"],p);const v=x(n,["enableAffectiveDialog"]);e!==void 0&&v!=null&&E(e,["setup","generationConfig","enableAffectiveDialog"],v);const _=x(n,["systemInstruction"]);e!==void 0&&_!=null&&E(e,["setup","systemInstruction"],nie(Rs(_)));const w=x(n,["tools"]);if(e!==void 0&&w!=null){let L=Hg(w);Array.isArray(L)&&(L=L.map(N=>xie(Og(N)))),E(e,["setup","tools"],L)}const S=x(n,["sessionResumption"]);e!==void 0&&S!=null&&E(e,["setup","sessionResumption"],_ie(S));const A=x(n,["inputAudioTranscription"]);e!==void 0&&A!=null&&E(e,["setup","inputAudioTranscription"],A);const b=x(n,["outputAudioTranscription"]);e!==void 0&&b!=null&&E(e,["setup","outputAudioTranscription"],b);const C=x(n,["realtimeInputConfig"]);e!==void 0&&C!=null&&E(e,["setup","realtimeInputConfig"],C);const P=x(n,["contextWindowCompression"]);e!==void 0&&P!=null&&E(e,["setup","contextWindowCompression"],P);const k=x(n,["proactivity"]);return e!==void 0&&k!=null&&E(e,["setup","proactivity"],k),t}function cie(n,e){const t={},i=x(n,["generationConfig"]);e!==void 0&&i!=null&&E(e,["setup","generationConfig"],oie(i));const r=x(n,["responseModalities"]);e!==void 0&&r!=null&&E(e,["setup","generationConfig","responseModalities"],r);const s=x(n,["temperature"]);e!==void 0&&s!=null&&E(e,["setup","generationConfig","temperature"],s);const o=x(n,["topP"]);e!==void 0&&o!=null&&E(e,["setup","generationConfig","topP"],o);const a=x(n,["topK"]);e!==void 0&&a!=null&&E(e,["setup","generationConfig","topK"],a);const l=x(n,["maxOutputTokens"]);e!==void 0&&l!=null&&E(e,["setup","generationConfig","maxOutputTokens"],l);const u=x(n,["mediaResolution"]);e!==void 0&&u!=null&&E(e,["setup","generationConfig","mediaResolution"],u);const d=x(n,["seed"]);e!==void 0&&d!=null&&E(e,["setup","generationConfig","seed"],d);const h=x(n,["speechConfig"]);e!==void 0&&h!=null&&E(e,["setup","generationConfig","speechConfig"],KH(DR(h)));const p=x(n,["thinkingConfig"]);e!==void 0&&p!=null&&E(e,["setup","generationConfig","thinkingConfig"],p);const v=x(n,["enableAffectiveDialog"]);e!==void 0&&v!=null&&E(e,["setup","generationConfig","enableAffectiveDialog"],v);const _=x(n,["systemInstruction"]);e!==void 0&&_!=null&&E(e,["setup","systemInstruction"],Rs(_));const w=x(n,["tools"]);if(e!==void 0&&w!=null){let L=Hg(w);Array.isArray(L)&&(L=L.map(N=>wie(Og(N)))),E(e,["setup","tools"],L)}const S=x(n,["sessionResumption"]);e!==void 0&&S!=null&&E(e,["setup","sessionResumption"],S);const A=x(n,["inputAudioTranscription"]);e!==void 0&&A!=null&&E(e,["setup","inputAudioTranscription"],A);const b=x(n,["outputAudioTranscription"]);e!==void 0&&b!=null&&E(e,["setup","outputAudioTranscription"],b);const C=x(n,["realtimeInputConfig"]);e!==void 0&&C!=null&&E(e,["setup","realtimeInputConfig"],C);const P=x(n,["contextWindowCompression"]);e!==void 0&&P!=null&&E(e,["setup","contextWindowCompression"],P);const k=x(n,["proactivity"]);return e!==void 0&&k!=null&&E(e,["setup","proactivity"],k),t}function die(n,e){const t={},i=x(e,["model"]);i!=null&&E(t,["setup","model"],$n(n,i));const r=x(e,["config"]);return r!=null&&E(t,["config"],uie(r,t)),t}function fie(n,e){const t={},i=x(e,["model"]);i!=null&&E(t,["setup","model"],$n(n,i));const r=x(e,["config"]);return r!=null&&E(t,["config"],cie(r,t)),t}function hie(n){const e={},t=x(n,["musicGenerationConfig"]);return t!=null&&E(e,["musicGenerationConfig"],t),e}function pie(n){const e={},t=x(n,["weightedPrompts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>r)),E(e,["weightedPrompts"],i)}return e}function mie(n){const e={},t=x(n,["media"]);if(t!=null){let u=kH(t);Array.isArray(u)&&(u=u.map(d=>Fw(d))),E(e,["mediaChunks"],u)}const i=x(n,["audio"]);i!=null&&E(e,["audio"],Fw(UH(i)));const r=x(n,["audioStreamEnd"]);r!=null&&E(e,["audioStreamEnd"],r);const s=x(n,["video"]);s!=null&&E(e,["video"],Fw(FH(s)));const o=x(n,["text"]);o!=null&&E(e,["text"],o);const a=x(n,["activityStart"]);a!=null&&E(e,["activityStart"],a);const l=x(n,["activityEnd"]);return l!=null&&E(e,["activityEnd"],l),e}function gie(n){const e={},t=x(n,["media"]);if(t!=null){let u=kH(t);Array.isArray(u)&&(u=u.map(d=>d)),E(e,["mediaChunks"],u)}const i=x(n,["audio"]);i!=null&&E(e,["audio"],UH(i));const r=x(n,["audioStreamEnd"]);r!=null&&E(e,["audioStreamEnd"],r);const s=x(n,["video"]);s!=null&&E(e,["video"],FH(s));const o=x(n,["text"]);o!=null&&E(e,["text"],o);const a=x(n,["activityStart"]);a!=null&&E(e,["activityStart"],a);const l=x(n,["activityEnd"]);return l!=null&&E(e,["activityEnd"],l),e}function vie(n){const e={},t=x(n,["setupComplete"]);t!=null&&E(e,["setupComplete"],t);const i=x(n,["serverContent"]);i!=null&&E(e,["serverContent"],i);const r=x(n,["toolCall"]);r!=null&&E(e,["toolCall"],r);const s=x(n,["toolCallCancellation"]);s!=null&&E(e,["toolCallCancellation"],s);const o=x(n,["usageMetadata"]);o!=null&&E(e,["usageMetadata"],Aie(o));const a=x(n,["goAway"]);a!=null&&E(e,["goAway"],a);const l=x(n,["sessionResumptionUpdate"]);return l!=null&&E(e,["sessionResumptionUpdate"],l),e}function yie(n){const e={},t=x(n,["mediaResolution"]);t!=null&&E(e,["mediaResolution"],t);const i=x(n,["codeExecutionResult"]);i!=null&&E(e,["codeExecutionResult"],i);const r=x(n,["executableCode"]);r!=null&&E(e,["executableCode"],r);const s=x(n,["fileData"]);s!=null&&E(e,["fileData"],iie(s));const o=x(n,["functionCall"]);o!=null&&E(e,["functionCall"],rie(o));const a=x(n,["functionResponse"]);a!=null&&E(e,["functionResponse"],a);const l=x(n,["inlineData"]);l!=null&&E(e,["inlineData"],Fw(l));const u=x(n,["text"]);u!=null&&E(e,["text"],u);const d=x(n,["thought"]);d!=null&&E(e,["thought"],d);const h=x(n,["thoughtSignature"]);h!=null&&E(e,["thoughtSignature"],h);const p=x(n,["videoMetadata"]);return p!=null&&E(e,["videoMetadata"],p),e}function _ie(n){const e={},t=x(n,["handle"]);if(t!=null&&E(e,["handle"],t),x(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function KH(n){const e={},t=x(n,["languageCode"]);t!=null&&E(e,["languageCode"],t);const i=x(n,["voiceConfig"]);if(i!=null&&E(e,["voiceConfig"],i),x(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function xie(n){const e={},t=x(n,["functionDeclarations"]);if(t!=null){let d=t;Array.isArray(d)&&(d=d.map(h=>h)),E(e,["functionDeclarations"],d)}if(x(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=x(n,["googleSearchRetrieval"]);i!=null&&E(e,["googleSearchRetrieval"],i);const r=x(n,["computerUse"]);r!=null&&E(e,["computerUse"],r);const s=x(n,["fileSearch"]);s!=null&&E(e,["fileSearch"],s);const o=x(n,["codeExecution"]);if(o!=null&&E(e,["codeExecution"],o),x(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=x(n,["googleMaps"]);a!=null&&E(e,["googleMaps"],aie(a));const l=x(n,["googleSearch"]);l!=null&&E(e,["googleSearch"],lie(l));const u=x(n,["urlContext"]);return u!=null&&E(e,["urlContext"],u),e}function wie(n){const e={},t=x(n,["functionDeclarations"]);if(t!=null){let h=t;Array.isArray(h)&&(h=h.map(p=>sie(p))),E(e,["functionDeclarations"],h)}const i=x(n,["retrieval"]);i!=null&&E(e,["retrieval"],i);const r=x(n,["googleSearchRetrieval"]);r!=null&&E(e,["googleSearchRetrieval"],r);const s=x(n,["computerUse"]);if(s!=null&&E(e,["computerUse"],s),x(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const o=x(n,["codeExecution"]);o!=null&&E(e,["codeExecution"],o);const a=x(n,["enterpriseWebSearch"]);a!=null&&E(e,["enterpriseWebSearch"],a);const l=x(n,["googleMaps"]);l!=null&&E(e,["googleMaps"],l);const u=x(n,["googleSearch"]);u!=null&&E(e,["googleSearch"],u);const d=x(n,["urlContext"]);return d!=null&&E(e,["urlContext"],d),e}function Aie(n){const e={},t=x(n,["promptTokenCount"]);t!=null&&E(e,["promptTokenCount"],t);const i=x(n,["cachedContentTokenCount"]);i!=null&&E(e,["cachedContentTokenCount"],i);const r=x(n,["candidatesTokenCount"]);r!=null&&E(e,["responseTokenCount"],r);const s=x(n,["toolUsePromptTokenCount"]);s!=null&&E(e,["toolUsePromptTokenCount"],s);const o=x(n,["thoughtsTokenCount"]);o!=null&&E(e,["thoughtsTokenCount"],o);const a=x(n,["totalTokenCount"]);a!=null&&E(e,["totalTokenCount"],a);const l=x(n,["promptTokensDetails"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(_=>_)),E(e,["promptTokensDetails"],v)}const u=x(n,["cacheTokensDetails"]);if(u!=null){let v=u;Array.isArray(v)&&(v=v.map(_=>_)),E(e,["cacheTokensDetails"],v)}const d=x(n,["candidatesTokensDetails"]);if(d!=null){let v=d;Array.isArray(v)&&(v=v.map(_=>_)),E(e,["responseTokensDetails"],v)}const h=x(n,["toolUsePromptTokensDetails"]);if(h!=null){let v=h;Array.isArray(v)&&(v=v.map(_=>_)),E(e,["toolUsePromptTokensDetails"],v)}const p=x(n,["trafficType"]);return p!=null&&E(e,["trafficType"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Sie(n){const e={},t=x(n,["data"]);if(t!=null&&E(e,["data"],t),x(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=x(n,["mimeType"]);return i!=null&&E(e,["mimeType"],i),e}function Eie(n){const e={},t=x(n,["content"]);t!=null&&E(e,["content"],t);const i=x(n,["citationMetadata"]);i!=null&&E(e,["citationMetadata"],Tie(i));const r=x(n,["tokenCount"]);r!=null&&E(e,["tokenCount"],r);const s=x(n,["finishReason"]);s!=null&&E(e,["finishReason"],s);const o=x(n,["avgLogprobs"]);o!=null&&E(e,["avgLogprobs"],o);const a=x(n,["groundingMetadata"]);a!=null&&E(e,["groundingMetadata"],a);const l=x(n,["index"]);l!=null&&E(e,["index"],l);const u=x(n,["logprobsResult"]);u!=null&&E(e,["logprobsResult"],u);const d=x(n,["safetyRatings"]);if(d!=null){let p=d;Array.isArray(p)&&(p=p.map(v=>v)),E(e,["safetyRatings"],p)}const h=x(n,["urlContextMetadata"]);return h!=null&&E(e,["urlContextMetadata"],h),e}function Tie(n){const e={},t=x(n,["citationSources"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>r)),E(e,["citations"],i)}return e}function Mie(n,e){const t={},i=x(e,["model"]);i!=null&&E(t,["_url","model"],$n(n,i));const r=x(e,["contents"]);if(r!=null){let s=La(r);Array.isArray(s)&&(s=s.map(o=>o)),E(t,["contents"],s)}return t}function Cie(n){const e={},t=x(n,["sdkHttpResponse"]);t!=null&&E(e,["sdkHttpResponse"],t);const i=x(n,["tokensInfo"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>s)),E(e,["tokensInfo"],r)}return e}function bie(n){const e={},t=x(n,["values"]);t!=null&&E(e,["values"],t);const i=x(n,["statistics"]);return i!=null&&E(e,["statistics"],Rie(i)),e}function Rie(n){const e={},t=x(n,["truncated"]);t!=null&&E(e,["truncated"],t);const i=x(n,["token_count"]);return i!=null&&E(e,["tokenCount"],i),e}function FS(n){const e={},t=x(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(s=>Ure(s))),E(e,["parts"],r)}const i=x(n,["role"]);return i!=null&&E(e,["role"],i),e}function Pie(n){const e={},t=x(n,["controlType"]);t!=null&&E(e,["controlType"],t);const i=x(n,["enableControlImageComputation"]);return i!=null&&E(e,["computeControl"],i),e}function Iie(n){const e={};if(x(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(x(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(x(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function Die(n,e){const t={},i=x(n,["systemInstruction"]);e!==void 0&&i!=null&&E(e,["systemInstruction"],Rs(i));const r=x(n,["tools"]);if(e!==void 0&&r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>eG(a))),E(e,["tools"],o)}const s=x(n,["generationConfig"]);return e!==void 0&&s!=null&&E(e,["generationConfig"],Sre(s)),t}function Lie(n,e){const t={},i=x(e,["model"]);i!=null&&E(t,["_url","model"],$n(n,i));const r=x(e,["contents"]);if(r!=null){let o=La(r);Array.isArray(o)&&(o=o.map(a=>FS(a))),E(t,["contents"],o)}const s=x(e,["config"]);return s!=null&&Iie(s),t}function Bie(n,e){const t={},i=x(e,["model"]);i!=null&&E(t,["_url","model"],$n(n,i));const r=x(e,["contents"]);if(r!=null){let o=La(r);Array.isArray(o)&&(o=o.map(a=>a)),E(t,["contents"],o)}const s=x(e,["config"]);return s!=null&&Die(s,t),t}function Nie(n){const e={},t=x(n,["sdkHttpResponse"]);t!=null&&E(e,["sdkHttpResponse"],t);const i=x(n,["totalTokens"]);i!=null&&E(e,["totalTokens"],i);const r=x(n,["cachedContentTokenCount"]);return r!=null&&E(e,["cachedContentTokenCount"],r),e}function kie(n){const e={},t=x(n,["sdkHttpResponse"]);t!=null&&E(e,["sdkHttpResponse"],t);const i=x(n,["totalTokens"]);return i!=null&&E(e,["totalTokens"],i),e}function Fie(n,e){const t={},i=x(e,["model"]);return i!=null&&E(t,["_url","name"],$n(n,i)),t}function Uie(n,e){const t={},i=x(e,["model"]);return i!=null&&E(t,["_url","name"],$n(n,i)),t}function Oie(n){const e={},t=x(n,["sdkHttpResponse"]);return t!=null&&E(e,["sdkHttpResponse"],t),e}function Hie(n){const e={},t=x(n,["sdkHttpResponse"]);return t!=null&&E(e,["sdkHttpResponse"],t),e}function Gie(n,e){const t={},i=x(n,["outputGcsUri"]);e!==void 0&&i!=null&&E(e,["parameters","storageUri"],i);const r=x(n,["negativePrompt"]);e!==void 0&&r!=null&&E(e,["parameters","negativePrompt"],r);const s=x(n,["numberOfImages"]);e!==void 0&&s!=null&&E(e,["parameters","sampleCount"],s);const o=x(n,["aspectRatio"]);e!==void 0&&o!=null&&E(e,["parameters","aspectRatio"],o);const a=x(n,["guidanceScale"]);e!==void 0&&a!=null&&E(e,["parameters","guidanceScale"],a);const l=x(n,["seed"]);e!==void 0&&l!=null&&E(e,["parameters","seed"],l);const u=x(n,["safetyFilterLevel"]);e!==void 0&&u!=null&&E(e,["parameters","safetySetting"],u);const d=x(n,["personGeneration"]);e!==void 0&&d!=null&&E(e,["parameters","personGeneration"],d);const h=x(n,["includeSafetyAttributes"]);e!==void 0&&h!=null&&E(e,["parameters","includeSafetyAttributes"],h);const p=x(n,["includeRaiReason"]);e!==void 0&&p!=null&&E(e,["parameters","includeRaiReason"],p);const v=x(n,["language"]);e!==void 0&&v!=null&&E(e,["parameters","language"],v);const _=x(n,["outputMimeType"]);e!==void 0&&_!=null&&E(e,["parameters","outputOptions","mimeType"],_);const w=x(n,["outputCompressionQuality"]);e!==void 0&&w!=null&&E(e,["parameters","outputOptions","compressionQuality"],w);const S=x(n,["addWatermark"]);e!==void 0&&S!=null&&E(e,["parameters","addWatermark"],S);const A=x(n,["labels"]);e!==void 0&&A!=null&&E(e,["labels"],A);const b=x(n,["editMode"]);e!==void 0&&b!=null&&E(e,["parameters","editMode"],b);const C=x(n,["baseSteps"]);return e!==void 0&&C!=null&&E(e,["parameters","editConfig","baseSteps"],C),t}function zie(n,e){const t={},i=x(e,["model"]);i!=null&&E(t,["_url","model"],$n(n,i));const r=x(e,["prompt"]);r!=null&&E(t,["instances[0]","prompt"],r);const s=x(e,["referenceImages"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>Wre(l))),E(t,["instances[0]","referenceImages"],a)}const o=x(e,["config"]);return o!=null&&Gie(o,t),t}function Vie(n){const e={},t=x(n,["sdkHttpResponse"]);t!=null&&E(e,["sdkHttpResponse"],t);const i=x(n,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>US(s))),E(e,["generatedImages"],r)}return e}function Wie(n,e){const t={},i=x(n,["taskType"]);e!==void 0&&i!=null&&E(e,["requests[]","taskType"],i);const r=x(n,["title"]);e!==void 0&&r!=null&&E(e,["requests[]","title"],r);const s=x(n,["outputDimensionality"]);if(e!==void 0&&s!=null&&E(e,["requests[]","outputDimensionality"],s),x(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(x(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function qie(n,e){const t={},i=x(n,["taskType"]);e!==void 0&&i!=null&&E(e,["instances[]","task_type"],i);const r=x(n,["title"]);e!==void 0&&r!=null&&E(e,["instances[]","title"],r);const s=x(n,["outputDimensionality"]);e!==void 0&&s!=null&&E(e,["parameters","outputDimensionality"],s);const o=x(n,["mimeType"]);e!==void 0&&o!=null&&E(e,["instances[]","mimeType"],o);const a=x(n,["autoTruncate"]);return e!==void 0&&a!=null&&E(e,["parameters","autoTruncate"],a),t}function Jie(n,e){const t={},i=x(e,["model"]);i!=null&&E(t,["_url","model"],$n(n,i));const r=x(e,["contents"]);if(r!=null){let a=RR(n,r);Array.isArray(a)&&(a=a.map(l=>l)),E(t,["requests[]","content"],a)}const s=x(e,["config"]);s!=null&&Wie(s,t);const o=x(e,["model"]);return o!==void 0&&E(t,["requests[]","model"],$n(n,o)),t}function Xie(n,e){const t={},i=x(e,["model"]);i!=null&&E(t,["_url","model"],$n(n,i));const r=x(e,["contents"]);if(r!=null){let o=RR(n,r);Array.isArray(o)&&(o=o.map(a=>a)),E(t,["instances[]","content"],o)}const s=x(e,["config"]);return s!=null&&qie(s,t),t}function Yie(n){const e={},t=x(n,["sdkHttpResponse"]);t!=null&&E(e,["sdkHttpResponse"],t);const i=x(n,["embeddings"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),E(e,["embeddings"],s)}const r=x(n,["metadata"]);return r!=null&&E(e,["metadata"],r),e}function Kie(n){const e={},t=x(n,["sdkHttpResponse"]);t!=null&&E(e,["sdkHttpResponse"],t);const i=x(n,["predictions[]","embeddings"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>bie(o))),E(e,["embeddings"],s)}const r=x(n,["metadata"]);return r!=null&&E(e,["metadata"],r),e}function Qie(n){const e={},t=x(n,["endpoint"]);t!=null&&E(e,["name"],t);const i=x(n,["deployedModelId"]);return i!=null&&E(e,["deployedModelId"],i),e}function Zie(n){const e={};if(x(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=x(n,["fileUri"]);t!=null&&E(e,["fileUri"],t);const i=x(n,["mimeType"]);return i!=null&&E(e,["mimeType"],i),e}function $ie(n){const e={},t=x(n,["id"]);t!=null&&E(e,["id"],t);const i=x(n,["args"]);i!=null&&E(e,["args"],i);const r=x(n,["name"]);if(r!=null&&E(e,["name"],r),x(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(x(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function jie(n){const e={},t=x(n,["mode"]);t!=null&&E(e,["mode"],t);const i=x(n,["allowedFunctionNames"]);if(i!=null&&E(e,["allowedFunctionNames"],i),x(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function ere(n){const e={};if(x(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=x(n,["description"]);t!=null&&E(e,["description"],t);const i=x(n,["name"]);i!=null&&E(e,["name"],i);const r=x(n,["parameters"]);r!=null&&E(e,["parameters"],r);const s=x(n,["parametersJsonSchema"]);s!=null&&E(e,["parametersJsonSchema"],s);const o=x(n,["response"]);o!=null&&E(e,["response"],o);const a=x(n,["responseJsonSchema"]);return a!=null&&E(e,["responseJsonSchema"],a),e}function tre(n,e,t){const i={},r=x(e,["systemInstruction"]);t!==void 0&&r!=null&&E(t,["systemInstruction"],FS(Rs(r)));const s=x(e,["temperature"]);s!=null&&E(i,["temperature"],s);const o=x(e,["topP"]);o!=null&&E(i,["topP"],o);const a=x(e,["topK"]);a!=null&&E(i,["topK"],a);const l=x(e,["candidateCount"]);l!=null&&E(i,["candidateCount"],l);const u=x(e,["maxOutputTokens"]);u!=null&&E(i,["maxOutputTokens"],u);const d=x(e,["stopSequences"]);d!=null&&E(i,["stopSequences"],d);const h=x(e,["responseLogprobs"]);h!=null&&E(i,["responseLogprobs"],h);const p=x(e,["logprobs"]);p!=null&&E(i,["logprobs"],p);const v=x(e,["presencePenalty"]);v!=null&&E(i,["presencePenalty"],v);const _=x(e,["frequencyPenalty"]);_!=null&&E(i,["frequencyPenalty"],_);const w=x(e,["seed"]);w!=null&&E(i,["seed"],w);const S=x(e,["responseMimeType"]);S!=null&&E(i,["responseMimeType"],S);const A=x(e,["responseSchema"]);A!=null&&E(i,["responseSchema"],PR(A));const b=x(e,["responseJsonSchema"]);if(b!=null&&E(i,["responseJsonSchema"],b),x(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(x(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const C=x(e,["safetySettings"]);if(t!==void 0&&C!=null){let Z=C;Array.isArray(Z)&&(Z=Z.map(he=>qre(he))),E(t,["safetySettings"],Z)}const P=x(e,["tools"]);if(t!==void 0&&P!=null){let Z=Hg(P);Array.isArray(Z)&&(Z=Z.map(he=>$re(Og(he)))),E(t,["tools"],Z)}const k=x(e,["toolConfig"]);if(t!==void 0&&k!=null&&E(t,["toolConfig"],Zre(k)),x(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const L=x(e,["cachedContent"]);t!==void 0&&L!=null&&E(t,["cachedContent"],fc(n,L));const N=x(e,["responseModalities"]);N!=null&&E(i,["responseModalities"],N);const O=x(e,["mediaResolution"]);O!=null&&E(i,["mediaResolution"],O);const D=x(e,["speechConfig"]);if(D!=null&&E(i,["speechConfig"],IR(D)),x(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const U=x(e,["thinkingConfig"]);U!=null&&E(i,["thinkingConfig"],U);const X=x(e,["imageConfig"]);return X!=null&&E(i,["imageConfig"],bre(X)),i}function nre(n,e,t){const i={},r=x(e,["systemInstruction"]);t!==void 0&&r!=null&&E(t,["systemInstruction"],Rs(r));const s=x(e,["temperature"]);s!=null&&E(i,["temperature"],s);const o=x(e,["topP"]);o!=null&&E(i,["topP"],o);const a=x(e,["topK"]);a!=null&&E(i,["topK"],a);const l=x(e,["candidateCount"]);l!=null&&E(i,["candidateCount"],l);const u=x(e,["maxOutputTokens"]);u!=null&&E(i,["maxOutputTokens"],u);const d=x(e,["stopSequences"]);d!=null&&E(i,["stopSequences"],d);const h=x(e,["responseLogprobs"]);h!=null&&E(i,["responseLogprobs"],h);const p=x(e,["logprobs"]);p!=null&&E(i,["logprobs"],p);const v=x(e,["presencePenalty"]);v!=null&&E(i,["presencePenalty"],v);const _=x(e,["frequencyPenalty"]);_!=null&&E(i,["frequencyPenalty"],_);const w=x(e,["seed"]);w!=null&&E(i,["seed"],w);const S=x(e,["responseMimeType"]);S!=null&&E(i,["responseMimeType"],S);const A=x(e,["responseSchema"]);A!=null&&E(i,["responseSchema"],PR(A));const b=x(e,["responseJsonSchema"]);b!=null&&E(i,["responseJsonSchema"],b);const C=x(e,["routingConfig"]);C!=null&&E(i,["routingConfig"],C);const P=x(e,["modelSelectionConfig"]);P!=null&&E(i,["modelConfig"],P);const k=x(e,["safetySettings"]);if(t!==void 0&&k!=null){let re=k;Array.isArray(re)&&(re=re.map(ye=>ye)),E(t,["safetySettings"],re)}const L=x(e,["tools"]);if(t!==void 0&&L!=null){let re=Hg(L);Array.isArray(re)&&(re=re.map(ye=>eG(Og(ye)))),E(t,["tools"],re)}const N=x(e,["toolConfig"]);t!==void 0&&N!=null&&E(t,["toolConfig"],N);const O=x(e,["labels"]);t!==void 0&&O!=null&&E(t,["labels"],O);const D=x(e,["cachedContent"]);t!==void 0&&D!=null&&E(t,["cachedContent"],fc(n,D));const U=x(e,["responseModalities"]);U!=null&&E(i,["responseModalities"],U);const X=x(e,["mediaResolution"]);X!=null&&E(i,["mediaResolution"],X);const Z=x(e,["speechConfig"]);Z!=null&&E(i,["speechConfig"],jH(IR(Z)));const he=x(e,["audioTimestamp"]);he!=null&&E(i,["audioTimestamp"],he);const Q=x(e,["thinkingConfig"]);Q!=null&&E(i,["thinkingConfig"],Q);const ue=x(e,["imageConfig"]);return ue!=null&&E(i,["imageConfig"],Rre(ue)),i}function SB(n,e){const t={},i=x(e,["model"]);i!=null&&E(t,["_url","model"],$n(n,i));const r=x(e,["contents"]);if(r!=null){let o=La(r);Array.isArray(o)&&(o=o.map(a=>FS(a))),E(t,["contents"],o)}const s=x(e,["config"]);return s!=null&&E(t,["generationConfig"],tre(n,s,t)),t}function EB(n,e){const t={},i=x(e,["model"]);i!=null&&E(t,["_url","model"],$n(n,i));const r=x(e,["contents"]);if(r!=null){let o=La(r);Array.isArray(o)&&(o=o.map(a=>a)),E(t,["contents"],o)}const s=x(e,["config"]);return s!=null&&E(t,["generationConfig"],nre(n,s,t)),t}function TB(n){const e={},t=x(n,["sdkHttpResponse"]);t!=null&&E(e,["sdkHttpResponse"],t);const i=x(n,["candidates"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(u=>Eie(u))),E(e,["candidates"],l)}const r=x(n,["modelVersion"]);r!=null&&E(e,["modelVersion"],r);const s=x(n,["promptFeedback"]);s!=null&&E(e,["promptFeedback"],s);const o=x(n,["responseId"]);o!=null&&E(e,["responseId"],o);const a=x(n,["usageMetadata"]);return a!=null&&E(e,["usageMetadata"],a),e}function MB(n){const e={},t=x(n,["sdkHttpResponse"]);t!=null&&E(e,["sdkHttpResponse"],t);const i=x(n,["candidates"]);if(i!=null){let u=i;Array.isArray(u)&&(u=u.map(d=>d)),E(e,["candidates"],u)}const r=x(n,["createTime"]);r!=null&&E(e,["createTime"],r);const s=x(n,["modelVersion"]);s!=null&&E(e,["modelVersion"],s);const o=x(n,["promptFeedback"]);o!=null&&E(e,["promptFeedback"],o);const a=x(n,["responseId"]);a!=null&&E(e,["responseId"],a);const l=x(n,["usageMetadata"]);return l!=null&&E(e,["usageMetadata"],l),e}function ire(n,e){const t={};if(x(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(x(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=x(n,["numberOfImages"]);e!==void 0&&i!=null&&E(e,["parameters","sampleCount"],i);const r=x(n,["aspectRatio"]);e!==void 0&&r!=null&&E(e,["parameters","aspectRatio"],r);const s=x(n,["guidanceScale"]);if(e!==void 0&&s!=null&&E(e,["parameters","guidanceScale"],s),x(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=x(n,["safetyFilterLevel"]);e!==void 0&&o!=null&&E(e,["parameters","safetySetting"],o);const a=x(n,["personGeneration"]);e!==void 0&&a!=null&&E(e,["parameters","personGeneration"],a);const l=x(n,["includeSafetyAttributes"]);e!==void 0&&l!=null&&E(e,["parameters","includeSafetyAttributes"],l);const u=x(n,["includeRaiReason"]);e!==void 0&&u!=null&&E(e,["parameters","includeRaiReason"],u);const d=x(n,["language"]);e!==void 0&&d!=null&&E(e,["parameters","language"],d);const h=x(n,["outputMimeType"]);e!==void 0&&h!=null&&E(e,["parameters","outputOptions","mimeType"],h);const p=x(n,["outputCompressionQuality"]);if(e!==void 0&&p!=null&&E(e,["parameters","outputOptions","compressionQuality"],p),x(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(x(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const v=x(n,["imageSize"]);if(e!==void 0&&v!=null&&E(e,["parameters","sampleImageSize"],v),x(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function rre(n,e){const t={},i=x(n,["outputGcsUri"]);e!==void 0&&i!=null&&E(e,["parameters","storageUri"],i);const r=x(n,["negativePrompt"]);e!==void 0&&r!=null&&E(e,["parameters","negativePrompt"],r);const s=x(n,["numberOfImages"]);e!==void 0&&s!=null&&E(e,["parameters","sampleCount"],s);const o=x(n,["aspectRatio"]);e!==void 0&&o!=null&&E(e,["parameters","aspectRatio"],o);const a=x(n,["guidanceScale"]);e!==void 0&&a!=null&&E(e,["parameters","guidanceScale"],a);const l=x(n,["seed"]);e!==void 0&&l!=null&&E(e,["parameters","seed"],l);const u=x(n,["safetyFilterLevel"]);e!==void 0&&u!=null&&E(e,["parameters","safetySetting"],u);const d=x(n,["personGeneration"]);e!==void 0&&d!=null&&E(e,["parameters","personGeneration"],d);const h=x(n,["includeSafetyAttributes"]);e!==void 0&&h!=null&&E(e,["parameters","includeSafetyAttributes"],h);const p=x(n,["includeRaiReason"]);e!==void 0&&p!=null&&E(e,["parameters","includeRaiReason"],p);const v=x(n,["language"]);e!==void 0&&v!=null&&E(e,["parameters","language"],v);const _=x(n,["outputMimeType"]);e!==void 0&&_!=null&&E(e,["parameters","outputOptions","mimeType"],_);const w=x(n,["outputCompressionQuality"]);e!==void 0&&w!=null&&E(e,["parameters","outputOptions","compressionQuality"],w);const S=x(n,["addWatermark"]);e!==void 0&&S!=null&&E(e,["parameters","addWatermark"],S);const A=x(n,["labels"]);e!==void 0&&A!=null&&E(e,["labels"],A);const b=x(n,["imageSize"]);e!==void 0&&b!=null&&E(e,["parameters","sampleImageSize"],b);const C=x(n,["enhancePrompt"]);return e!==void 0&&C!=null&&E(e,["parameters","enhancePrompt"],C),t}function sre(n,e){const t={},i=x(e,["model"]);i!=null&&E(t,["_url","model"],$n(n,i));const r=x(e,["prompt"]);r!=null&&E(t,["instances[0]","prompt"],r);const s=x(e,["config"]);return s!=null&&ire(s,t),t}function ore(n,e){const t={},i=x(e,["model"]);i!=null&&E(t,["_url","model"],$n(n,i));const r=x(e,["prompt"]);r!=null&&E(t,["instances[0]","prompt"],r);const s=x(e,["config"]);return s!=null&&rre(s,t),t}function are(n){const e={},t=x(n,["sdkHttpResponse"]);t!=null&&E(e,["sdkHttpResponse"],t);const i=x(n,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>_re(o))),E(e,["generatedImages"],s)}const r=x(n,["positivePromptSafetyAttributes"]);return r!=null&&E(e,["positivePromptSafetyAttributes"],ZH(r)),e}function lre(n){const e={},t=x(n,["sdkHttpResponse"]);t!=null&&E(e,["sdkHttpResponse"],t);const i=x(n,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>US(o))),E(e,["generatedImages"],s)}const r=x(n,["positivePromptSafetyAttributes"]);return r!=null&&E(e,["positivePromptSafetyAttributes"],$H(r)),e}function ure(n,e){const t={},i=x(n,["numberOfVideos"]);if(e!==void 0&&i!=null&&E(e,["parameters","sampleCount"],i),x(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(x(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=x(n,["durationSeconds"]);if(e!==void 0&&r!=null&&E(e,["parameters","durationSeconds"],r),x(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=x(n,["aspectRatio"]);e!==void 0&&s!=null&&E(e,["parameters","aspectRatio"],s);const o=x(n,["resolution"]);e!==void 0&&o!=null&&E(e,["parameters","resolution"],o);const a=x(n,["personGeneration"]);if(e!==void 0&&a!=null&&E(e,["parameters","personGeneration"],a),x(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const l=x(n,["negativePrompt"]);e!==void 0&&l!=null&&E(e,["parameters","negativePrompt"],l);const u=x(n,["enhancePrompt"]);if(e!==void 0&&u!=null&&E(e,["parameters","enhancePrompt"],u),x(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const d=x(n,["lastFrame"]);e!==void 0&&d!=null&&E(e,["instances[0]","lastFrame"],OS(d));const h=x(n,["referenceImages"]);if(e!==void 0&&h!=null){let p=h;Array.isArray(p)&&(p=p.map(v=>dse(v))),E(e,["instances[0]","referenceImages"],p)}if(x(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(x(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function cre(n,e){const t={},i=x(n,["numberOfVideos"]);e!==void 0&&i!=null&&E(e,["parameters","sampleCount"],i);const r=x(n,["outputGcsUri"]);e!==void 0&&r!=null&&E(e,["parameters","storageUri"],r);const s=x(n,["fps"]);e!==void 0&&s!=null&&E(e,["parameters","fps"],s);const o=x(n,["durationSeconds"]);e!==void 0&&o!=null&&E(e,["parameters","durationSeconds"],o);const a=x(n,["seed"]);e!==void 0&&a!=null&&E(e,["parameters","seed"],a);const l=x(n,["aspectRatio"]);e!==void 0&&l!=null&&E(e,["parameters","aspectRatio"],l);const u=x(n,["resolution"]);e!==void 0&&u!=null&&E(e,["parameters","resolution"],u);const d=x(n,["personGeneration"]);e!==void 0&&d!=null&&E(e,["parameters","personGeneration"],d);const h=x(n,["pubsubTopic"]);e!==void 0&&h!=null&&E(e,["parameters","pubsubTopic"],h);const p=x(n,["negativePrompt"]);e!==void 0&&p!=null&&E(e,["parameters","negativePrompt"],p);const v=x(n,["enhancePrompt"]);e!==void 0&&v!=null&&E(e,["parameters","enhancePrompt"],v);const _=x(n,["generateAudio"]);e!==void 0&&_!=null&&E(e,["parameters","generateAudio"],_);const w=x(n,["lastFrame"]);e!==void 0&&w!=null&&E(e,["instances[0]","lastFrame"],Al(w));const S=x(n,["referenceImages"]);if(e!==void 0&&S!=null){let C=S;Array.isArray(C)&&(C=C.map(P=>fse(P))),E(e,["instances[0]","referenceImages"],C)}const A=x(n,["mask"]);e!==void 0&&A!=null&&E(e,["instances[0]","mask"],cse(A));const b=x(n,["compressionQuality"]);return e!==void 0&&b!=null&&E(e,["parameters","compressionQuality"],b),t}function dre(n){const e={},t=x(n,["name"]);t!=null&&E(e,["name"],t);const i=x(n,["metadata"]);i!=null&&E(e,["metadata"],i);const r=x(n,["done"]);r!=null&&E(e,["done"],r);const s=x(n,["error"]);s!=null&&E(e,["error"],s);const o=x(n,["response","generateVideoResponse"]);return o!=null&&E(e,["response"],mre(o)),e}function fre(n){const e={},t=x(n,["name"]);t!=null&&E(e,["name"],t);const i=x(n,["metadata"]);i!=null&&E(e,["metadata"],i);const r=x(n,["done"]);r!=null&&E(e,["done"],r);const s=x(n,["error"]);s!=null&&E(e,["error"],s);const o=x(n,["response"]);return o!=null&&E(e,["response"],gre(o)),e}function hre(n,e){const t={},i=x(e,["model"]);i!=null&&E(t,["_url","model"],$n(n,i));const r=x(e,["prompt"]);r!=null&&E(t,["instances[0]","prompt"],r);const s=x(e,["image"]);s!=null&&E(t,["instances[0]","image"],OS(s));const o=x(e,["video"]);o!=null&&E(t,["instances[0]","video"],tG(o));const a=x(e,["source"]);a!=null&&vre(a,t);const l=x(e,["config"]);return l!=null&&ure(l,t),t}function pre(n,e){const t={},i=x(e,["model"]);i!=null&&E(t,["_url","model"],$n(n,i));const r=x(e,["prompt"]);r!=null&&E(t,["instances[0]","prompt"],r);const s=x(e,["image"]);s!=null&&E(t,["instances[0]","image"],Al(s));const o=x(e,["video"]);o!=null&&E(t,["instances[0]","video"],nG(o));const a=x(e,["source"]);a!=null&&yre(a,t);const l=x(e,["config"]);return l!=null&&cre(l,t),t}function mre(n){const e={},t=x(n,["generatedSamples"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>wre(o))),E(e,["generatedVideos"],s)}const i=x(n,["raiMediaFilteredCount"]);i!=null&&E(e,["raiMediaFilteredCount"],i);const r=x(n,["raiMediaFilteredReasons"]);return r!=null&&E(e,["raiMediaFilteredReasons"],r),e}function gre(n){const e={},t=x(n,["videos"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>Are(o))),E(e,["generatedVideos"],s)}const i=x(n,["raiMediaFilteredCount"]);i!=null&&E(e,["raiMediaFilteredCount"],i);const r=x(n,["raiMediaFilteredReasons"]);return r!=null&&E(e,["raiMediaFilteredReasons"],r),e}function vre(n,e){const t={},i=x(n,["prompt"]);e!==void 0&&i!=null&&E(e,["instances[0]","prompt"],i);const r=x(n,["image"]);e!==void 0&&r!=null&&E(e,["instances[0]","image"],OS(r));const s=x(n,["video"]);return e!==void 0&&s!=null&&E(e,["instances[0]","video"],tG(s)),t}function yre(n,e){const t={},i=x(n,["prompt"]);e!==void 0&&i!=null&&E(e,["instances[0]","prompt"],i);const r=x(n,["image"]);e!==void 0&&r!=null&&E(e,["instances[0]","image"],Al(r));const s=x(n,["video"]);return e!==void 0&&s!=null&&E(e,["instances[0]","video"],nG(s)),t}function _re(n){const e={},t=x(n,["_self"]);t!=null&&E(e,["image"],Pre(t));const i=x(n,["raiFilteredReason"]);i!=null&&E(e,["raiFilteredReason"],i);const r=x(n,["_self"]);return r!=null&&E(e,["safetyAttributes"],ZH(r)),e}function US(n){const e={},t=x(n,["_self"]);t!=null&&E(e,["image"],QH(t));const i=x(n,["raiFilteredReason"]);i!=null&&E(e,["raiFilteredReason"],i);const r=x(n,["_self"]);r!=null&&E(e,["safetyAttributes"],$H(r));const s=x(n,["prompt"]);return s!=null&&E(e,["enhancedPrompt"],s),e}function xre(n){const e={},t=x(n,["_self"]);t!=null&&E(e,["mask"],QH(t));const i=x(n,["labels"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>s)),E(e,["labels"],r)}return e}function wre(n){const e={},t=x(n,["video"]);return t!=null&&E(e,["video"],lse(t)),e}function Are(n){const e={},t=x(n,["_self"]);return t!=null&&E(e,["video"],use(t)),e}function Sre(n){const e={},t=x(n,["modelSelectionConfig"]);t!=null&&E(e,["modelConfig"],t);const i=x(n,["responseJsonSchema"]);i!=null&&E(e,["responseJsonSchema"],i);const r=x(n,["audioTimestamp"]);r!=null&&E(e,["audioTimestamp"],r);const s=x(n,["candidateCount"]);s!=null&&E(e,["candidateCount"],s);const o=x(n,["enableAffectiveDialog"]);o!=null&&E(e,["enableAffectiveDialog"],o);const a=x(n,["frequencyPenalty"]);a!=null&&E(e,["frequencyPenalty"],a);const l=x(n,["logprobs"]);l!=null&&E(e,["logprobs"],l);const u=x(n,["maxOutputTokens"]);u!=null&&E(e,["maxOutputTokens"],u);const d=x(n,["mediaResolution"]);d!=null&&E(e,["mediaResolution"],d);const h=x(n,["presencePenalty"]);h!=null&&E(e,["presencePenalty"],h);const p=x(n,["responseLogprobs"]);p!=null&&E(e,["responseLogprobs"],p);const v=x(n,["responseMimeType"]);v!=null&&E(e,["responseMimeType"],v);const _=x(n,["responseModalities"]);_!=null&&E(e,["responseModalities"],_);const w=x(n,["responseSchema"]);w!=null&&E(e,["responseSchema"],w);const S=x(n,["routingConfig"]);S!=null&&E(e,["routingConfig"],S);const A=x(n,["seed"]);A!=null&&E(e,["seed"],A);const b=x(n,["speechConfig"]);b!=null&&E(e,["speechConfig"],jH(b));const C=x(n,["stopSequences"]);C!=null&&E(e,["stopSequences"],C);const P=x(n,["temperature"]);P!=null&&E(e,["temperature"],P);const k=x(n,["thinkingConfig"]);k!=null&&E(e,["thinkingConfig"],k);const L=x(n,["topK"]);L!=null&&E(e,["topK"],L);const N=x(n,["topP"]);if(N!=null&&E(e,["topP"],N),x(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Ere(n,e){const t={},i=x(e,["model"]);return i!=null&&E(t,["_url","name"],$n(n,i)),t}function Tre(n,e){const t={},i=x(e,["model"]);return i!=null&&E(t,["_url","name"],$n(n,i)),t}function Mre(n){const e={};if(x(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=x(n,["enableWidget"]);return t!=null&&E(e,["enableWidget"],t),e}function Cre(n){const e={};if(x(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(x(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=x(n,["timeRangeFilter"]);return t!=null&&E(e,["timeRangeFilter"],t),e}function bre(n){const e={},t=x(n,["aspectRatio"]);t!=null&&E(e,["aspectRatio"],t);const i=x(n,["imageSize"]);if(i!=null&&E(e,["imageSize"],i),x(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(x(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function Rre(n){const e={},t=x(n,["aspectRatio"]);t!=null&&E(e,["aspectRatio"],t);const i=x(n,["imageSize"]);i!=null&&E(e,["imageSize"],i);const r=x(n,["outputMimeType"]);r!=null&&E(e,["imageOutputOptions","mimeType"],r);const s=x(n,["outputCompressionQuality"]);return s!=null&&E(e,["imageOutputOptions","compressionQuality"],s),e}function Pre(n){const e={},t=x(n,["bytesBase64Encoded"]);t!=null&&E(e,["imageBytes"],Jd(t));const i=x(n,["mimeType"]);return i!=null&&E(e,["mimeType"],i),e}function QH(n){const e={},t=x(n,["gcsUri"]);t!=null&&E(e,["gcsUri"],t);const i=x(n,["bytesBase64Encoded"]);i!=null&&E(e,["imageBytes"],Jd(i));const r=x(n,["mimeType"]);return r!=null&&E(e,["mimeType"],r),e}function OS(n){const e={};if(x(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=x(n,["imageBytes"]);t!=null&&E(e,["bytesBase64Encoded"],Jd(t));const i=x(n,["mimeType"]);return i!=null&&E(e,["mimeType"],i),e}function Al(n){const e={},t=x(n,["gcsUri"]);t!=null&&E(e,["gcsUri"],t);const i=x(n,["imageBytes"]);i!=null&&E(e,["bytesBase64Encoded"],Jd(i));const r=x(n,["mimeType"]);return r!=null&&E(e,["mimeType"],r),e}function Ire(n,e,t){const i={},r=x(e,["pageSize"]);t!==void 0&&r!=null&&E(t,["_query","pageSize"],r);const s=x(e,["pageToken"]);t!==void 0&&s!=null&&E(t,["_query","pageToken"],s);const o=x(e,["filter"]);t!==void 0&&o!=null&&E(t,["_query","filter"],o);const a=x(e,["queryBase"]);return t!==void 0&&a!=null&&E(t,["_url","models_url"],zH(n,a)),i}function Dre(n,e,t){const i={},r=x(e,["pageSize"]);t!==void 0&&r!=null&&E(t,["_query","pageSize"],r);const s=x(e,["pageToken"]);t!==void 0&&s!=null&&E(t,["_query","pageToken"],s);const o=x(e,["filter"]);t!==void 0&&o!=null&&E(t,["_query","filter"],o);const a=x(e,["queryBase"]);return t!==void 0&&a!=null&&E(t,["_url","models_url"],zH(n,a)),i}function Lre(n,e){const t={},i=x(e,["config"]);return i!=null&&Ire(n,i,t),t}function Bre(n,e){const t={},i=x(e,["config"]);return i!=null&&Dre(n,i,t),t}function Nre(n){const e={},t=x(n,["sdkHttpResponse"]);t!=null&&E(e,["sdkHttpResponse"],t);const i=x(n,["nextPageToken"]);i!=null&&E(e,["nextPageToken"],i);const r=x(n,["_self"]);if(r!=null){let s=VH(r);Array.isArray(s)&&(s=s.map(o=>XM(o))),E(e,["models"],s)}return e}function kre(n){const e={},t=x(n,["sdkHttpResponse"]);t!=null&&E(e,["sdkHttpResponse"],t);const i=x(n,["nextPageToken"]);i!=null&&E(e,["nextPageToken"],i);const r=x(n,["_self"]);if(r!=null){let s=VH(r);Array.isArray(s)&&(s=s.map(o=>YM(o))),E(e,["models"],s)}return e}function Fre(n){const e={},t=x(n,["maskMode"]);t!=null&&E(e,["maskMode"],t);const i=x(n,["segmentationClasses"]);i!=null&&E(e,["maskClasses"],i);const r=x(n,["maskDilation"]);return r!=null&&E(e,["dilation"],r),e}function XM(n){const e={},t=x(n,["name"]);t!=null&&E(e,["name"],t);const i=x(n,["displayName"]);i!=null&&E(e,["displayName"],i);const r=x(n,["description"]);r!=null&&E(e,["description"],r);const s=x(n,["version"]);s!=null&&E(e,["version"],s);const o=x(n,["_self"]);o!=null&&E(e,["tunedModelInfo"],jre(o));const a=x(n,["inputTokenLimit"]);a!=null&&E(e,["inputTokenLimit"],a);const l=x(n,["outputTokenLimit"]);l!=null&&E(e,["outputTokenLimit"],l);const u=x(n,["supportedGenerationMethods"]);u!=null&&E(e,["supportedActions"],u);const d=x(n,["temperature"]);d!=null&&E(e,["temperature"],d);const h=x(n,["maxTemperature"]);h!=null&&E(e,["maxTemperature"],h);const p=x(n,["topP"]);p!=null&&E(e,["topP"],p);const v=x(n,["topK"]);v!=null&&E(e,["topK"],v);const _=x(n,["thinking"]);return _!=null&&E(e,["thinking"],_),e}function YM(n){const e={},t=x(n,["name"]);t!=null&&E(e,["name"],t);const i=x(n,["displayName"]);i!=null&&E(e,["displayName"],i);const r=x(n,["description"]);r!=null&&E(e,["description"],r);const s=x(n,["versionId"]);s!=null&&E(e,["version"],s);const o=x(n,["deployedModels"]);if(o!=null){let h=o;Array.isArray(h)&&(h=h.map(p=>Qie(p))),E(e,["endpoints"],h)}const a=x(n,["labels"]);a!=null&&E(e,["labels"],a);const l=x(n,["_self"]);l!=null&&E(e,["tunedModelInfo"],ese(l));const u=x(n,["defaultCheckpointId"]);u!=null&&E(e,["defaultCheckpointId"],u);const d=x(n,["checkpoints"]);if(d!=null){let h=d;Array.isArray(h)&&(h=h.map(p=>p)),E(e,["checkpoints"],h)}return e}function Ure(n){const e={},t=x(n,["mediaResolution"]);t!=null&&E(e,["mediaResolution"],t);const i=x(n,["codeExecutionResult"]);i!=null&&E(e,["codeExecutionResult"],i);const r=x(n,["executableCode"]);r!=null&&E(e,["executableCode"],r);const s=x(n,["fileData"]);s!=null&&E(e,["fileData"],Zie(s));const o=x(n,["functionCall"]);o!=null&&E(e,["functionCall"],$ie(o));const a=x(n,["functionResponse"]);a!=null&&E(e,["functionResponse"],a);const l=x(n,["inlineData"]);l!=null&&E(e,["inlineData"],Sie(l));const u=x(n,["text"]);u!=null&&E(e,["text"],u);const d=x(n,["thought"]);d!=null&&E(e,["thought"],d);const h=x(n,["thoughtSignature"]);h!=null&&E(e,["thoughtSignature"],h);const p=x(n,["videoMetadata"]);return p!=null&&E(e,["videoMetadata"],p),e}function Ore(n){const e={},t=x(n,["productImage"]);return t!=null&&E(e,["image"],Al(t)),e}function Hre(n,e){const t={},i=x(n,["numberOfImages"]);e!==void 0&&i!=null&&E(e,["parameters","sampleCount"],i);const r=x(n,["baseSteps"]);e!==void 0&&r!=null&&E(e,["parameters","baseSteps"],r);const s=x(n,["outputGcsUri"]);e!==void 0&&s!=null&&E(e,["parameters","storageUri"],s);const o=x(n,["seed"]);e!==void 0&&o!=null&&E(e,["parameters","seed"],o);const a=x(n,["safetyFilterLevel"]);e!==void 0&&a!=null&&E(e,["parameters","safetySetting"],a);const l=x(n,["personGeneration"]);e!==void 0&&l!=null&&E(e,["parameters","personGeneration"],l);const u=x(n,["addWatermark"]);e!==void 0&&u!=null&&E(e,["parameters","addWatermark"],u);const d=x(n,["outputMimeType"]);e!==void 0&&d!=null&&E(e,["parameters","outputOptions","mimeType"],d);const h=x(n,["outputCompressionQuality"]);e!==void 0&&h!=null&&E(e,["parameters","outputOptions","compressionQuality"],h);const p=x(n,["enhancePrompt"]);e!==void 0&&p!=null&&E(e,["parameters","enhancePrompt"],p);const v=x(n,["labels"]);return e!==void 0&&v!=null&&E(e,["labels"],v),t}function Gre(n,e){const t={},i=x(e,["model"]);i!=null&&E(t,["_url","model"],$n(n,i));const r=x(e,["source"]);r!=null&&Vre(r,t);const s=x(e,["config"]);return s!=null&&Hre(s,t),t}function zre(n){const e={},t=x(n,["predictions"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>US(r))),E(e,["generatedImages"],i)}return e}function Vre(n,e){const t={},i=x(n,["prompt"]);e!==void 0&&i!=null&&E(e,["instances[0]","prompt"],i);const r=x(n,["personImage"]);e!==void 0&&r!=null&&E(e,["instances[0]","personImage","image"],Al(r));const s=x(n,["productImages"]);if(e!==void 0&&s!=null){let o=s;Array.isArray(o)&&(o=o.map(a=>Ore(a))),E(e,["instances[0]","productImages"],o)}return t}function Wre(n){const e={},t=x(n,["referenceImage"]);t!=null&&E(e,["referenceImage"],Al(t));const i=x(n,["referenceId"]);i!=null&&E(e,["referenceId"],i);const r=x(n,["referenceType"]);r!=null&&E(e,["referenceType"],r);const s=x(n,["maskImageConfig"]);s!=null&&E(e,["maskImageConfig"],Fre(s));const o=x(n,["controlImageConfig"]);o!=null&&E(e,["controlImageConfig"],Pie(o));const a=x(n,["styleImageConfig"]);a!=null&&E(e,["styleImageConfig"],a);const l=x(n,["subjectImageConfig"]);return l!=null&&E(e,["subjectImageConfig"],l),e}function ZH(n){const e={},t=x(n,["safetyAttributes","categories"]);t!=null&&E(e,["categories"],t);const i=x(n,["safetyAttributes","scores"]);i!=null&&E(e,["scores"],i);const r=x(n,["contentType"]);return r!=null&&E(e,["contentType"],r),e}function $H(n){const e={},t=x(n,["safetyAttributes","categories"]);t!=null&&E(e,["categories"],t);const i=x(n,["safetyAttributes","scores"]);i!=null&&E(e,["scores"],i);const r=x(n,["contentType"]);return r!=null&&E(e,["contentType"],r),e}function qre(n){const e={},t=x(n,["category"]);if(t!=null&&E(e,["category"],t),x(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=x(n,["threshold"]);return i!=null&&E(e,["threshold"],i),e}function Jre(n){const e={},t=x(n,["image"]);return t!=null&&E(e,["image"],Al(t)),e}function Xre(n,e){const t={},i=x(n,["mode"]);e!==void 0&&i!=null&&E(e,["parameters","mode"],i);const r=x(n,["maxPredictions"]);e!==void 0&&r!=null&&E(e,["parameters","maxPredictions"],r);const s=x(n,["confidenceThreshold"]);e!==void 0&&s!=null&&E(e,["parameters","confidenceThreshold"],s);const o=x(n,["maskDilation"]);e!==void 0&&o!=null&&E(e,["parameters","maskDilation"],o);const a=x(n,["binaryColorThreshold"]);e!==void 0&&a!=null&&E(e,["parameters","binaryColorThreshold"],a);const l=x(n,["labels"]);return e!==void 0&&l!=null&&E(e,["labels"],l),t}function Yre(n,e){const t={},i=x(e,["model"]);i!=null&&E(t,["_url","model"],$n(n,i));const r=x(e,["source"]);r!=null&&Qre(r,t);const s=x(e,["config"]);return s!=null&&Xre(s,t),t}function Kre(n){const e={},t=x(n,["predictions"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>xre(r))),E(e,["generatedMasks"],i)}return e}function Qre(n,e){const t={},i=x(n,["prompt"]);e!==void 0&&i!=null&&E(e,["instances[0]","prompt"],i);const r=x(n,["image"]);e!==void 0&&r!=null&&E(e,["instances[0]","image"],Al(r));const s=x(n,["scribbleImage"]);return e!==void 0&&s!=null&&E(e,["instances[0]","scribble"],Jre(s)),t}function jH(n){const e={},t=x(n,["languageCode"]);t!=null&&E(e,["languageCode"],t);const i=x(n,["voiceConfig"]);if(i!=null&&E(e,["voiceConfig"],i),x(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function Zre(n){const e={},t=x(n,["functionCallingConfig"]);t!=null&&E(e,["functionCallingConfig"],jie(t));const i=x(n,["retrievalConfig"]);return i!=null&&E(e,["retrievalConfig"],i),e}function $re(n){const e={},t=x(n,["functionDeclarations"]);if(t!=null){let d=t;Array.isArray(d)&&(d=d.map(h=>h)),E(e,["functionDeclarations"],d)}if(x(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=x(n,["googleSearchRetrieval"]);i!=null&&E(e,["googleSearchRetrieval"],i);const r=x(n,["computerUse"]);r!=null&&E(e,["computerUse"],r);const s=x(n,["fileSearch"]);s!=null&&E(e,["fileSearch"],s);const o=x(n,["codeExecution"]);if(o!=null&&E(e,["codeExecution"],o),x(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=x(n,["googleMaps"]);a!=null&&E(e,["googleMaps"],Mre(a));const l=x(n,["googleSearch"]);l!=null&&E(e,["googleSearch"],Cre(l));const u=x(n,["urlContext"]);return u!=null&&E(e,["urlContext"],u),e}function eG(n){const e={},t=x(n,["functionDeclarations"]);if(t!=null){let h=t;Array.isArray(h)&&(h=h.map(p=>ere(p))),E(e,["functionDeclarations"],h)}const i=x(n,["retrieval"]);i!=null&&E(e,["retrieval"],i);const r=x(n,["googleSearchRetrieval"]);r!=null&&E(e,["googleSearchRetrieval"],r);const s=x(n,["computerUse"]);if(s!=null&&E(e,["computerUse"],s),x(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const o=x(n,["codeExecution"]);o!=null&&E(e,["codeExecution"],o);const a=x(n,["enterpriseWebSearch"]);a!=null&&E(e,["enterpriseWebSearch"],a);const l=x(n,["googleMaps"]);l!=null&&E(e,["googleMaps"],l);const u=x(n,["googleSearch"]);u!=null&&E(e,["googleSearch"],u);const d=x(n,["urlContext"]);return d!=null&&E(e,["urlContext"],d),e}function jre(n){const e={},t=x(n,["baseModel"]);t!=null&&E(e,["baseModel"],t);const i=x(n,["createTime"]);i!=null&&E(e,["createTime"],i);const r=x(n,["updateTime"]);return r!=null&&E(e,["updateTime"],r),e}function ese(n){const e={},t=x(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&E(e,["baseModel"],t);const i=x(n,["createTime"]);i!=null&&E(e,["createTime"],i);const r=x(n,["updateTime"]);return r!=null&&E(e,["updateTime"],r),e}function tse(n,e){const t={},i=x(n,["displayName"]);e!==void 0&&i!=null&&E(e,["displayName"],i);const r=x(n,["description"]);e!==void 0&&r!=null&&E(e,["description"],r);const s=x(n,["defaultCheckpointId"]);return e!==void 0&&s!=null&&E(e,["defaultCheckpointId"],s),t}function nse(n,e){const t={},i=x(n,["displayName"]);e!==void 0&&i!=null&&E(e,["displayName"],i);const r=x(n,["description"]);e!==void 0&&r!=null&&E(e,["description"],r);const s=x(n,["defaultCheckpointId"]);return e!==void 0&&s!=null&&E(e,["defaultCheckpointId"],s),t}function ise(n,e){const t={},i=x(e,["model"]);i!=null&&E(t,["_url","name"],$n(n,i));const r=x(e,["config"]);return r!=null&&tse(r,t),t}function rse(n,e){const t={},i=x(e,["model"]);i!=null&&E(t,["_url","model"],$n(n,i));const r=x(e,["config"]);return r!=null&&nse(r,t),t}function sse(n,e){const t={},i=x(n,["outputGcsUri"]);e!==void 0&&i!=null&&E(e,["parameters","storageUri"],i);const r=x(n,["safetyFilterLevel"]);e!==void 0&&r!=null&&E(e,["parameters","safetySetting"],r);const s=x(n,["personGeneration"]);e!==void 0&&s!=null&&E(e,["parameters","personGeneration"],s);const o=x(n,["includeRaiReason"]);e!==void 0&&o!=null&&E(e,["parameters","includeRaiReason"],o);const a=x(n,["outputMimeType"]);e!==void 0&&a!=null&&E(e,["parameters","outputOptions","mimeType"],a);const l=x(n,["outputCompressionQuality"]);e!==void 0&&l!=null&&E(e,["parameters","outputOptions","compressionQuality"],l);const u=x(n,["enhanceInputImage"]);e!==void 0&&u!=null&&E(e,["parameters","upscaleConfig","enhanceInputImage"],u);const d=x(n,["imagePreservationFactor"]);e!==void 0&&d!=null&&E(e,["parameters","upscaleConfig","imagePreservationFactor"],d);const h=x(n,["labels"]);e!==void 0&&h!=null&&E(e,["labels"],h);const p=x(n,["numberOfImages"]);e!==void 0&&p!=null&&E(e,["parameters","sampleCount"],p);const v=x(n,["mode"]);return e!==void 0&&v!=null&&E(e,["parameters","mode"],v),t}function ose(n,e){const t={},i=x(e,["model"]);i!=null&&E(t,["_url","model"],$n(n,i));const r=x(e,["image"]);r!=null&&E(t,["instances[0]","image"],Al(r));const s=x(e,["upscaleFactor"]);s!=null&&E(t,["parameters","upscaleConfig","upscaleFactor"],s);const o=x(e,["config"]);return o!=null&&sse(o,t),t}function ase(n){const e={},t=x(n,["sdkHttpResponse"]);t!=null&&E(e,["sdkHttpResponse"],t);const i=x(n,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>US(s))),E(e,["generatedImages"],r)}return e}function lse(n){const e={},t=x(n,["uri"]);t!=null&&E(e,["uri"],t);const i=x(n,["encodedVideo"]);i!=null&&E(e,["videoBytes"],Jd(i));const r=x(n,["encoding"]);return r!=null&&E(e,["mimeType"],r),e}function use(n){const e={},t=x(n,["gcsUri"]);t!=null&&E(e,["uri"],t);const i=x(n,["bytesBase64Encoded"]);i!=null&&E(e,["videoBytes"],Jd(i));const r=x(n,["mimeType"]);return r!=null&&E(e,["mimeType"],r),e}function cse(n){const e={},t=x(n,["image"]);t!=null&&E(e,["_self"],Al(t));const i=x(n,["maskMode"]);return i!=null&&E(e,["maskMode"],i),e}function dse(n){const e={},t=x(n,["image"]);t!=null&&E(e,["image"],OS(t));const i=x(n,["referenceType"]);return i!=null&&E(e,["referenceType"],i),e}function fse(n){const e={},t=x(n,["image"]);t!=null&&E(e,["image"],Al(t));const i=x(n,["referenceType"]);return i!=null&&E(e,["referenceType"],i),e}function tG(n){const e={},t=x(n,["uri"]);t!=null&&E(e,["uri"],t);const i=x(n,["videoBytes"]);i!=null&&E(e,["encodedVideo"],Jd(i));const r=x(n,["mimeType"]);return r!=null&&E(e,["encoding"],r),e}function nG(n){const e={},t=x(n,["uri"]);t!=null&&E(e,["gcsUri"],t);const i=x(n,["videoBytes"]);i!=null&&E(e,["bytesBase64Encoded"],Jd(i));const r=x(n,["mimeType"]);return r!=null&&E(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const hse="Content-Type",pse="X-Server-Timeout",mse="User-Agent",KM="x-goog-api-client",gse="1.30.0",vse=`google-genai-sdk/${gse}`,yse="v1beta1",_se="v1beta",CB=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class xse{constructor(e){var t,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:yse,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:_se,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,i){const r=[this.getRequestUrlInternal(t)];return i&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,t,i);if(e.queryParams)for(const[o,a]of Object.entries(e.queryParams))r.searchParams.append(o,String(a));let s={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else s.body=e.body;return s=await this.includeExtraHttpOptionsToRequestInit(s,t,r.toString(),e.abortSignal),this.unaryApiCall(r,s,e.httpMethod)}patchHttpOptions(e,t){const i=JSON.parse(JSON.stringify(e));for(const[r,s]of Object.entries(t))typeof s=="object"?i[r]=Object.assign(Object.assign({},i[r]),s):s!==void 0&&(i[r]=s);return i}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,t,i);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let s={};return s.body=e.body,s=await this.includeExtraHttpOptionsToRequestInit(s,t,r.toString(),e.abortSignal),this.streamApiCall(r,s,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,i,r){if(t&&t.timeout||r){const s=new AbortController,o=s.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const a=setTimeout(()=>s.abort(),t.timeout);a&&typeof a.unref=="function"&&a.unref()}r&&r.addEventListener("abort",()=>{s.abort()}),e.signal=o}return t&&t.extraBody!==null&&wse(e,t.extraBody),e.headers=await this.getHeadersInternal(t,i),e}async unaryApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async r=>(await bB(r),new WM(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async r=>(await bB(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){var t;return rg(this,arguments,function*(){const r=(t=e==null?void 0:e.body)===null||t===void 0?void 0:t.getReader(),s=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let o="";for(;;){const{done:a,value:l}=yield Li(r.read());if(a){if(o.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const u=s.decode(l,{stream:!0});try{const h=JSON.parse(u);if("error"in h){const p=JSON.parse(JSON.stringify(h.error)),v=p.status,_=p.code,w=`got status: ${v}. ${JSON.stringify(h)}`;if(_>=400&&_<600)throw new kS({message:w,status:_})}}catch(h){if(h.name==="ApiError")throw h}o+=u;let d=o.match(CB);for(;d;){const h=d[1];try{const p=new Response(h,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Li(new WM(p)),o=o.slice(d[0].length),d=o.match(CB)}catch(p){throw new Error(`exception parsing stream chunk ${h}. ${p}`)}}}}finally{r.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},t=vse+" "+this.clientOptions.userAgentExtra;return e[mse]=t,e[KM]=t,e[hse]="application/json",e}async getHeadersInternal(e,t){const i=new Headers;if(e&&e.headers){for(const[r,s]of Object.entries(e.headers))i.append(r,s);e.timeout&&e.timeout>0&&i.append(pse,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,t),i}getFileName(e){var t;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(t=i.split(/[/\\]/).pop())!==null&&t!==void 0?t:""),i}async uploadFile(e,t){var i;const r={};t!=null&&(r.mimeType=t.mimeType,r.name=t.name,r.displayName=t.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const s=this.clientOptions.uploader,o=await s.stat(e);r.sizeBytes=String(o.size);const a=(i=t==null?void 0:t.mimeType)!==null&&i!==void 0?i:o.type;if(a===void 0||a==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=a;const l={file:r},u=this.getFileName(e),d=Bt("upload/v1beta/files",l._url),h=await this.fetchUploadUrl(d,r.sizeBytes,r.mimeType,u,l,t==null?void 0:t.httpOptions);return s.upload(e,h,this)}async uploadFileToFileSearchStore(e,t,i){var r;const s=this.clientOptions.uploader,o=await s.stat(t),a=String(o.size),l=(r=i==null?void 0:i.mimeType)!==null&&r!==void 0?r:o.type;if(l===void 0||l==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const u=`upload/v1beta/${e}:uploadToFileSearchStore`,d=this.getFileName(t),h={};i!=null&&i.customMetadata&&(h.customMetadata=i.customMetadata),i!=null&&i.chunkingConfig&&(h.chunkingConfig=i.chunkingConfig);const p=await this.fetchUploadUrl(u,a,l,d,h,i==null?void 0:i.httpOptions);return s.uploadToFileSearchStore(t,p,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,i,r,s,o){var a;let l={};o?l=o:l={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${i}`},r?{"X-Goog-Upload-File-Name":r}:{})};const u=await this.request({path:e,body:JSON.stringify(s),httpMethod:"POST",httpOptions:l});if(!u||!(u!=null&&u.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const d=(a=u==null?void 0:u.headers)===null||a===void 0?void 0:a["x-goog-upload-url"];if(d===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return d}}async function bB(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let i;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await n.json():i={error:{message:await n.text(),code:n.status,status:n.statusText}};const r=JSON.stringify(i);throw t>=400&&t<600?new kS({message:r,status:t}):new Error(r)}}function wse(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const s=JSON.parse(n.body);if(typeof s=="object"&&s!==null&&!Array.isArray(s))t=s;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(s,o){const a=Object.assign({},s);for(const l in o)if(Object.prototype.hasOwnProperty.call(o,l)){const u=o[l],d=a[l];u&&typeof u=="object"&&!Array.isArray(u)&&d&&typeof d=="object"&&!Array.isArray(d)?a[l]=i(d,u):(d&&u&&typeof d!=typeof u&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${l}". Original type: ${typeof d}, New type: ${typeof u}. Overwriting.`),a[l]=u)}return a}const r=i(t,e);n.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ase="mcp_used/unknown";let Sse=!1;function iG(n){for(const e of n)if(Ese(e)||typeof e=="object"&&"inputSchema"in e)return!0;return Sse}function rG(n){var e;const t=(e=n[KM])!==null&&e!==void 0?e:"";n[KM]=(t+` ${Ase}`).trimStart()}function Ese(n){return n!==null&&typeof n=="object"&&n instanceof LR}function Tse(n,e=100){return rg(this,arguments,function*(){let i,r=0;for(;r<e;){const s=yield Li(n.listTools({cursor:i}));for(const o of s.tools)yield yield Li(o),r++;if(!s.nextCursor)break;i=s.nextCursor}})}class LR{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new LR(e,t)}async initialize(){var e,t,i,r;if(this.mcpTools.length>0)return;const s={},o=[];for(const d of this.mcpClients)try{for(var a=!0,l=(t=void 0,Dv(Tse(d))),u;u=await l.next(),e=u.done,!e;a=!0){r=u.value,a=!1;const h=r;o.push(h);const p=h.name;if(s[p])throw new Error(`Duplicate function name ${p} found in MCP tools. Please ensure function names are unique.`);s[p]=d}}catch(h){t={error:h}}finally{try{!a&&!e&&(i=l.return)&&await i.call(l)}finally{if(t)throw t.error}}this.mcpTools=o,this.functionNameToMcpClient=s}async tool(){return await this.initialize(),vte(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[i.name];let s;this.config.timeout&&(s={timeout:this.config.timeout});const o=await r.callTool({name:i.name,arguments:i.args},void 0,s);t.push({functionResponse:{name:i.name,response:o.isError?{error:o}:o}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function Mse(n,e,t){const i=new ute;let r;t.data instanceof Blob?r=JSON.parse(await t.data.text()):r=JSON.parse(t.data),Object.assign(i,r),e(i)}class Cse{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i}async connect(e){var t,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),s=this.apiClient.getApiVersion(),o=Pse(this.apiClient.getDefaultHeaders()),a=this.apiClient.getApiKey(),l=`${r}/ws/google.ai.generativelanguage.${s}.GenerativeService.BidiGenerateMusic?key=${a}`;let u=()=>{};const d=new Promise(C=>{u=C}),h=e.callbacks,p=function(){u({})},v=this.apiClient,_={onopen:p,onmessage:C=>{Mse(v,h.onmessage,C)},onerror:(t=h==null?void 0:h.onerror)!==null&&t!==void 0?t:function(C){},onclose:(i=h==null?void 0:h.onclose)!==null&&i!==void 0?i:function(C){}},w=this.webSocketFactory.create(l,Rse(o),_);w.connect(),await d;const b={setup:{model:$n(this.apiClient,e.model)}};return w.send(JSON.stringify(b)),new bse(w,this.apiClient)}}class bse{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=pie(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=hie(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(Um.PLAY)}pause(){this.sendPlaybackControl(Um.PAUSE)}stop(){this.sendPlaybackControl(Um.STOP)}resetContext(){this.sendPlaybackControl(Um.RESET_CONTEXT)}close(){this.conn.close()}}function Rse(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function Pse(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ise="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function Dse(n,e,t){const i=new lte;let r;t.data instanceof Blob?r=await t.data.text():t.data instanceof ArrayBuffer?r=new TextDecoder().decode(t.data):r=t.data;const s=JSON.parse(r);if(n.isVertexAI()){const o=vie(s);Object.assign(i,o)}else Object.assign(i,s);e(i)}class Lse{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i,this.music=new Cse(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,i,r,s,o,a;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const l=this.apiClient.getWebsocketBaseUrl(),u=this.apiClient.getApiVersion();let d;const h=this.apiClient.getHeaders();e.config&&e.config.tools&&iG(e.config.tools)&&rG(h);const p=Fse(h);if(this.apiClient.isVertexAI())d=`${l}/ws/google.cloud.aiplatform.${u}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(p,d);else{const D=this.apiClient.getApiKey();let U="BidiGenerateContent",X="key";D!=null&&D.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),u!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),U="BidiGenerateContentConstrained",X="access_token"),d=`${l}/ws/google.ai.generativelanguage.${u}.GenerativeService.${U}?${X}=${D}`}let v=()=>{};const _=new Promise(D=>{v=D}),w=e.callbacks,S=function(){var D;(D=w==null?void 0:w.onopen)===null||D===void 0||D.call(w),v({})},A=this.apiClient,b={onopen:S,onmessage:D=>{Dse(A,w.onmessage,D)},onerror:(t=w==null?void 0:w.onerror)!==null&&t!==void 0?t:function(D){},onclose:(i=w==null?void 0:w.onclose)!==null&&i!==void 0?i:function(D){}},C=this.webSocketFactory.create(d,kse(p),b);C.connect(),await _;let P=$n(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&P.startsWith("publishers/")){const D=this.apiClient.getProject(),U=this.apiClient.getLocation();P=`projects/${D}/locations/${U}/`+P}let k={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[EA.AUDIO]}:e.config.responseModalities=[EA.AUDIO]),!((s=e.config)===null||s===void 0)&&s.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const L=(a=(o=e.config)===null||o===void 0?void 0:o.tools)!==null&&a!==void 0?a:[],N=[];for(const D of L)if(this.isCallableTool(D)){const U=D;N.push(await U.tool())}else N.push(D);N.length>0&&(e.config.tools=N);const O={model:P,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?k=fie(this.apiClient,O):k=die(this.apiClient,O),delete k.config,C.send(JSON.stringify(k)),new Nse(C,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const Bse={turnComplete:!0};class Nse{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let i=[];try{i=La(t.turns),e.isVertexAI()||(i=i.map(r=>FS(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:i,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let i=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?i=t.functionResponses:i=[t.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const s of i){if(typeof s!="object"||s===null||!("name"in s)||!("response"in s))throw new Error(`Could not parse function response, type '${typeof s}'.`);if(!e.isVertexAI()&&!("id"in s))throw new Error(Ise)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},Bse),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:gie(e)}:t={realtimeInput:mie(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function kse(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function Fse(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const RB=10;function PB(n){var e,t,i;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const o of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(sg(o)){r=!0;break}if(!r)return!0;const s=(i=n==null?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return s&&(s<0||!Number.isInteger(s))||s==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",s),!0):!1}function sg(n){return"callTool"in n&&typeof n.callTool=="function"}function Use(n){var e,t,i;return(i=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(r=>sg(r)))!==null&&i!==void 0?i:!1}function IB(n){var e;const t=[];return!((e=n==null?void 0:n.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((i,r)=>{if(sg(i))return;const s=i;s.functionDeclarations&&s.functionDeclarations.length>0&&t.push(r)}),t}function DB(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ose extends dc{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var i,r,s,o,a;const l=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!Use(t)||PB(t.config))return await this.generateContentInternal(l);const u=IB(t);if(u.length>0){const w=u.map(S=>`tools[${S}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${w}.`)}let d,h;const p=La(l.contents),v=(s=(r=(i=l.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&s!==void 0?s:RB;let _=0;for(;_<v&&(d=await this.generateContentInternal(l),!(!d.functionCalls||d.functionCalls.length===0));){const w=d.candidates[0].content,S=[];for(const A of(a=(o=t.config)===null||o===void 0?void 0:o.tools)!==null&&a!==void 0?a:[])if(sg(A)){const C=await A.callTool(d.functionCalls);S.push(...C)}_++,h={role:"user",parts:S},l.contents=La(l.contents),l.contents.push(w),l.contents.push(h),DB(l.config)&&(p.push(w),p.push(h))}return DB(l.config)&&(d.automaticFunctionCallingHistory=p),d},this.generateContentStream=async t=>{var i,r,s,o,a;if(this.maybeMoveToResponseJsonSchem(t),PB(t.config)){const h=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(h)}const l=IB(t);if(l.length>0){const h=l.map(p=>`tools[${p}]`).join(", ");throw new Error(`Incompatible tools found at ${h}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const u=(s=(r=(i=t==null?void 0:t.config)===null||i===void 0?void 0:i.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||s===void 0?void 0:s.streamFunctionCallArguments,d=(a=(o=t==null?void 0:t.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||a===void 0?void 0:a.disable;if(u&&!d)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(i=>{var r;let s;const o=[];if(i!=null&&i.generatedImages)for(const l of i.generatedImages)l&&(l!=null&&l.safetyAttributes)&&((r=l==null?void 0:l.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?s=l==null?void 0:l.safetyAttributes:o.push(l);let a;return s?a={generatedImages:o,positivePromptSafetyAttributes:s,sdkHttpResponse:i.sdkHttpResponse}:a={generatedImages:o,sdkHttpResponse:i.sdkHttpResponse},a}),this.list=async t=>{var i;const o={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!o.config.queryBase){if(!((i=o.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");o.config.filter="labels.tune-type:*"}return new jh(lc.PAGED_ITEM_MODELS,a=>this.listInternal(a),await this.listInternal(o),o)},this.editImage=async t=>{const i={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(i.referenceImages=t.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async t=>{let i={numberOfImages:1,mode:"upscale"};t.config&&(i=Object.assign(Object.assign({},i),t.config));const r={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:i};return await this.upscaleImageInternal(r)},this.generateVideos=async t=>{var i,r,s,o,a,l;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=t.video)===null||i===void 0)&&i.uri&&(!((r=t.video)===null||r===void 0)&&r.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((o=(s=t.source)===null||s===void 0?void 0:s.video)===null||o===void 0)&&o.uri&&(!((l=(a=t.source)===null||a===void 0?void 0:a.video)===null||l===void 0)&&l.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,i,r;const s=(t=e.config)===null||t===void 0?void 0:t.tools;if(!s)return e;const o=await Promise.all(s.map(async l=>sg(l)?await l.tool():l)),a={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:o})};if(a.config.tools=o,e.config&&e.config.tools&&iG(e.config.tools)){const l=(r=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&r!==void 0?r:{};let u=Object.assign({},l);Object.keys(u).length===0&&(u=this.apiClient.getDefaultHeaders()),rG(u),a.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:u})}return a}async initAfcToolsMap(e){var t,i,r;const s=new Map;for(const o of(i=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&i!==void 0?i:[])if(sg(o)){const a=o,l=await a.tool();for(const u of(r=l.functionDeclarations)!==null&&r!==void 0?r:[]){if(!u.name)throw new Error("Function declaration name is required.");if(s.has(u.name))throw new Error(`Duplicate tool declaration name: ${u.name}`);s.set(u.name,a)}}return s}async processAfcStream(e){var t,i,r;const s=(r=(i=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&r!==void 0?r:RB;let o=!1,a=0;const l=await this.initAfcToolsMap(e);return(function(u,d,h){var p,v;return rg(this,arguments,function*(){for(var _,w,S,A;a<s;){o&&(a++,o=!1);const k=yield Li(u.processParamsMaybeAddMcpUsage(h)),L=yield Li(u.generateContentStreamInternal(k)),N=[],O=[];try{for(var b=!0,C=(w=void 0,Dv(L)),P;P=yield Li(C.next()),_=P.done,!_;b=!0){A=P.value,b=!1;const D=A;if(yield yield Li(D),D.candidates&&(!((p=D.candidates[0])===null||p===void 0)&&p.content)){O.push(D.candidates[0].content);for(const U of(v=D.candidates[0].content.parts)!==null&&v!==void 0?v:[])if(a<s&&U.functionCall){if(!U.functionCall.name)throw new Error("Function call name was not returned by the model.");if(d.has(U.functionCall.name)){const X=yield Li(d.get(U.functionCall.name).callTool([U.functionCall]));N.push(...X)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${d.keys()}, mising tool: ${U.functionCall.name}`)}}}}catch(D){w={error:D}}finally{try{!b&&!_&&(S=C.return)&&(yield Li(S.call(C)))}finally{if(w)throw w.error}}if(N.length>0){o=!0;const D=new rv;D.candidates=[{content:{role:"user",parts:N}}],yield yield Li(D);const U=[];U.push(...O),U.push({role:"user",parts:N});const X=La(h.contents).concat(U);h.contents=X}else break}})})(this,l,e)}async generateContentInternal(e){var t,i,r,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=EB(this.apiClient,e);return a=Bt("{model}:generateContent",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),o.then(d=>{const h=MB(d),p=new rv;return Object.assign(p,h),p})}else{const u=SB(this.apiClient,e);return a=Bt("{model}:generateContent",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),o.then(d=>{const h=TB(d),p=new rv;return Object.assign(p,h),p})}}async generateContentStreamInternal(e){var t,i,r,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=EB(this.apiClient,e);return a=Bt("{model}:streamGenerateContent?alt=sse",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),o.then(function(h){return rg(this,arguments,function*(){var p,v,_,w;try{for(var S=!0,A=Dv(h),b;b=yield Li(A.next()),p=b.done,!p;S=!0){w=b.value,S=!1;const C=w,P=MB(yield Li(C.json()));P.sdkHttpResponse={headers:C.headers};const k=new rv;Object.assign(k,P),yield yield Li(k)}}catch(C){v={error:C}}finally{try{!S&&!p&&(_=A.return)&&(yield Li(_.call(A)))}finally{if(v)throw v.error}}})})}else{const u=SB(this.apiClient,e);return a=Bt("{model}:streamGenerateContent?alt=sse",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),o.then(function(h){return rg(this,arguments,function*(){var p,v,_,w;try{for(var S=!0,A=Dv(h),b;b=yield Li(A.next()),p=b.done,!p;S=!0){w=b.value,S=!1;const C=w,P=TB(yield Li(C.json()));P.sdkHttpResponse={headers:C.headers};const k=new rv;Object.assign(k,P),yield yield Li(k)}}catch(C){v={error:C}}finally{try{!S&&!p&&(_=A.return)&&(yield Li(_.call(A)))}finally{if(v)throw v.error}}})})}}async embedContent(e){var t,i,r,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=Xie(this.apiClient,e);return a=Bt("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),o.then(d=>{const h=Kie(d),p=new aB;return Object.assign(p,h),p})}else{const u=Jie(this.apiClient,e);return a=Bt("{model}:batchEmbedContents",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),o.then(d=>{const h=Yie(d),p=new aB;return Object.assign(p,h),p})}}async generateImagesInternal(e){var t,i,r,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=ore(this.apiClient,e);return a=Bt("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),o.then(d=>{const h=lre(d),p=new lB;return Object.assign(p,h),p})}else{const u=sre(this.apiClient,e);return a=Bt("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),o.then(d=>{const h=are(d),p=new lB;return Object.assign(p,h),p})}}async editImageInternal(e){var t,i;let r,s="",o={};if(this.apiClient.isVertexAI()){const a=zie(this.apiClient,e);return s=Bt("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:l.headers},d})),r.then(l=>{const u=Vie(l),d=new Zee;return Object.assign(d,u),d})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,i;let r,s="",o={};if(this.apiClient.isVertexAI()){const a=ose(this.apiClient,e);return s=Bt("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:l.headers},d})),r.then(l=>{const u=ase(l),d=new $ee;return Object.assign(d,u),d})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,i;let r,s="",o={};if(this.apiClient.isVertexAI()){const a=Gre(this.apiClient,e);return s=Bt("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),r.then(l=>{const u=zre(l),d=new jee;return Object.assign(d,u),d})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,i;let r,s="",o={};if(this.apiClient.isVertexAI()){const a=Yre(this.apiClient,e);return s=Bt("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),r.then(l=>{const u=Kre(l),d=new ete;return Object.assign(d,u),d})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,i,r,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=Tre(this.apiClient,e);return a=Bt("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>YM(d))}else{const u=Ere(this.apiClient,e);return a=Bt("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),o.then(d=>XM(d))}}async listInternal(e){var t,i,r,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=Bre(this.apiClient,e);return a=Bt("{models_url}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),o.then(d=>{const h=kre(d),p=new uB;return Object.assign(p,h),p})}else{const u=Lre(this.apiClient,e);return a=Bt("{models_url}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),o.then(d=>{const h=Nre(d),p=new uB;return Object.assign(p,h),p})}}async update(e){var t,i,r,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=rse(this.apiClient,e);return a=Bt("{model}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>YM(d))}else{const u=ise(this.apiClient,e);return a=Bt("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),o.then(d=>XM(d))}}async delete(e){var t,i,r,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=Uie(this.apiClient,e);return a=Bt("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),o.then(d=>{const h=Hie(d),p=new cB;return Object.assign(p,h),p})}else{const u=Fie(this.apiClient,e);return a=Bt("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),o.then(d=>{const h=Oie(d),p=new cB;return Object.assign(p,h),p})}}async countTokens(e){var t,i,r,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=Bie(this.apiClient,e);return a=Bt("{model}:countTokens",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),o.then(d=>{const h=kie(d),p=new dB;return Object.assign(p,h),p})}else{const u=Lie(this.apiClient,e);return a=Bt("{model}:countTokens",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),o.then(d=>{const h=Nie(d),p=new dB;return Object.assign(p,h),p})}}async computeTokens(e){var t,i;let r,s="",o={};if(this.apiClient.isVertexAI()){const a=Mie(this.apiClient,e);return s=Bt("{model}:computeTokens",a._url),o=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:l.headers},d})),r.then(l=>{const u=Cie(l),d=new tte;return Object.assign(d,u),d})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,i,r,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=pre(this.apiClient,e);return a=Bt("{model}:predictLongRunning",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>{const h=fre(d),p=new TA;return Object.assign(p,h),p})}else{const u=hre(this.apiClient,e);return a=Bt("{model}:predictLongRunning",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),o.then(d=>{const h=dre(d),p=new TA;return Object.assign(p,h),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Hse extends dc{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=t.name.split("/operations/")[0];let s;i&&"httpOptions"in i&&(s=i.httpOptions);const o=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:s}});return t._fromAPIResponse({apiResponse:o,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=t.name.split("/operations/")[0];let s;i&&"httpOptions"in i&&(s=i.httpOptions);const o=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:s}});return t._fromAPIResponse({apiResponse:o,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,i,r,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=qee(e);return a=Bt("{operationName}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o}else{const u=Wee(e);return a=Bt("{operationName}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),o}}async fetchPredictVideosOperationInternal(e){var t,i;let r,s="",o={};if(this.apiClient.isVertexAI()){const a=Fee(e);return s=Bt("{resourceName}:fetchPredictOperation",a._url),o=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Gse(n){const e={},t=x(n,["data"]);if(t!=null&&E(e,["data"],t),x(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=x(n,["mimeType"]);return i!=null&&E(e,["mimeType"],i),e}function zse(n){const e={},t=x(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(s=>Zse(s))),E(e,["parts"],r)}const i=x(n,["role"]);return i!=null&&E(e,["role"],i),e}function Vse(n,e,t){const i={},r=x(e,["expireTime"]);t!==void 0&&r!=null&&E(t,["expireTime"],r);const s=x(e,["newSessionExpireTime"]);t!==void 0&&s!=null&&E(t,["newSessionExpireTime"],s);const o=x(e,["uses"]);t!==void 0&&o!=null&&E(t,["uses"],o);const a=x(e,["liveConnectConstraints"]);t!==void 0&&a!=null&&E(t,["bidiGenerateContentSetup"],Qse(n,a));const l=x(e,["lockAdditionalFields"]);return t!==void 0&&l!=null&&E(t,["fieldMask"],l),i}function Wse(n,e){const t={},i=x(e,["config"]);return i!=null&&E(t,["config"],Vse(n,i,t)),t}function qse(n){const e={};if(x(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=x(n,["fileUri"]);t!=null&&E(e,["fileUri"],t);const i=x(n,["mimeType"]);return i!=null&&E(e,["mimeType"],i),e}function Jse(n){const e={},t=x(n,["id"]);t!=null&&E(e,["id"],t);const i=x(n,["args"]);i!=null&&E(e,["args"],i);const r=x(n,["name"]);if(r!=null&&E(e,["name"],r),x(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(x(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Xse(n){const e={};if(x(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=x(n,["enableWidget"]);return t!=null&&E(e,["enableWidget"],t),e}function Yse(n){const e={};if(x(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(x(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=x(n,["timeRangeFilter"]);return t!=null&&E(e,["timeRangeFilter"],t),e}function Kse(n,e){const t={},i=x(n,["generationConfig"]);e!==void 0&&i!=null&&E(e,["setup","generationConfig"],i);const r=x(n,["responseModalities"]);e!==void 0&&r!=null&&E(e,["setup","generationConfig","responseModalities"],r);const s=x(n,["temperature"]);e!==void 0&&s!=null&&E(e,["setup","generationConfig","temperature"],s);const o=x(n,["topP"]);e!==void 0&&o!=null&&E(e,["setup","generationConfig","topP"],o);const a=x(n,["topK"]);e!==void 0&&a!=null&&E(e,["setup","generationConfig","topK"],a);const l=x(n,["maxOutputTokens"]);e!==void 0&&l!=null&&E(e,["setup","generationConfig","maxOutputTokens"],l);const u=x(n,["mediaResolution"]);e!==void 0&&u!=null&&E(e,["setup","generationConfig","mediaResolution"],u);const d=x(n,["seed"]);e!==void 0&&d!=null&&E(e,["setup","generationConfig","seed"],d);const h=x(n,["speechConfig"]);e!==void 0&&h!=null&&E(e,["setup","generationConfig","speechConfig"],DR(h));const p=x(n,["thinkingConfig"]);e!==void 0&&p!=null&&E(e,["setup","generationConfig","thinkingConfig"],p);const v=x(n,["enableAffectiveDialog"]);e!==void 0&&v!=null&&E(e,["setup","generationConfig","enableAffectiveDialog"],v);const _=x(n,["systemInstruction"]);e!==void 0&&_!=null&&E(e,["setup","systemInstruction"],zse(Rs(_)));const w=x(n,["tools"]);if(e!==void 0&&w!=null){let L=Hg(w);Array.isArray(L)&&(L=L.map(N=>jse(Og(N)))),E(e,["setup","tools"],L)}const S=x(n,["sessionResumption"]);e!==void 0&&S!=null&&E(e,["setup","sessionResumption"],$se(S));const A=x(n,["inputAudioTranscription"]);e!==void 0&&A!=null&&E(e,["setup","inputAudioTranscription"],A);const b=x(n,["outputAudioTranscription"]);e!==void 0&&b!=null&&E(e,["setup","outputAudioTranscription"],b);const C=x(n,["realtimeInputConfig"]);e!==void 0&&C!=null&&E(e,["setup","realtimeInputConfig"],C);const P=x(n,["contextWindowCompression"]);e!==void 0&&P!=null&&E(e,["setup","contextWindowCompression"],P);const k=x(n,["proactivity"]);return e!==void 0&&k!=null&&E(e,["setup","proactivity"],k),t}function Qse(n,e){const t={},i=x(e,["model"]);i!=null&&E(t,["setup","model"],$n(n,i));const r=x(e,["config"]);return r!=null&&E(t,["config"],Kse(r,t)),t}function Zse(n){const e={},t=x(n,["mediaResolution"]);t!=null&&E(e,["mediaResolution"],t);const i=x(n,["codeExecutionResult"]);i!=null&&E(e,["codeExecutionResult"],i);const r=x(n,["executableCode"]);r!=null&&E(e,["executableCode"],r);const s=x(n,["fileData"]);s!=null&&E(e,["fileData"],qse(s));const o=x(n,["functionCall"]);o!=null&&E(e,["functionCall"],Jse(o));const a=x(n,["functionResponse"]);a!=null&&E(e,["functionResponse"],a);const l=x(n,["inlineData"]);l!=null&&E(e,["inlineData"],Gse(l));const u=x(n,["text"]);u!=null&&E(e,["text"],u);const d=x(n,["thought"]);d!=null&&E(e,["thought"],d);const h=x(n,["thoughtSignature"]);h!=null&&E(e,["thoughtSignature"],h);const p=x(n,["videoMetadata"]);return p!=null&&E(e,["videoMetadata"],p),e}function $se(n){const e={},t=x(n,["handle"]);if(t!=null&&E(e,["handle"],t),x(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function jse(n){const e={},t=x(n,["functionDeclarations"]);if(t!=null){let d=t;Array.isArray(d)&&(d=d.map(h=>h)),E(e,["functionDeclarations"],d)}if(x(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=x(n,["googleSearchRetrieval"]);i!=null&&E(e,["googleSearchRetrieval"],i);const r=x(n,["computerUse"]);r!=null&&E(e,["computerUse"],r);const s=x(n,["fileSearch"]);s!=null&&E(e,["fileSearch"],s);const o=x(n,["codeExecution"]);if(o!=null&&E(e,["codeExecution"],o),x(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=x(n,["googleMaps"]);a!=null&&E(e,["googleMaps"],Xse(a));const l=x(n,["googleSearch"]);l!=null&&E(e,["googleSearch"],Yse(l));const u=x(n,["urlContext"]);return u!=null&&E(e,["urlContext"],u),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function eoe(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const i=n[t];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const r=Object.keys(i).map(s=>`${t}.${s}`);e.push(...r)}else e.push(t)}return e.join(",")}function toe(n,e){let t=null;const i=n.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const s=i.setup;typeof s=="object"&&s!==null?(n.bidiGenerateContentSetup=s,t=s):delete n.bidiGenerateContentSetup}else i!==void 0&&delete n.bidiGenerateContentSetup;const r=n.fieldMask;if(t){const s=eoe(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)s?n.fieldMask=s:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const o=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let a=[];r.length>0&&(a=r.map(u=>o.includes(u)?`generationConfig.${u}`:u));const l=[];s&&l.push(s),a.length>0&&l.push(...a),l.length>0?n.fieldMask=l.join(","):delete n.fieldMask}else delete n.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?n.fieldMask=r.join(","):delete n.fieldMask;return n}class noe extends dc{constructor(e){super(),this.apiClient=e}async create(e){var t,i;let r,s="",o={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const a=Wse(this.apiClient,e);s=Bt("auth_tokens",a._url),o=a._query,delete a.config,delete a._url,delete a._query;const l=toe(a,e.config);return r=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),r.then(u=>u)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ioe(n,e){const t={},i=x(n,["displayName"]);return e!==void 0&&i!=null&&E(e,["displayName"],i),t}function roe(n){const e={},t=x(n,["config"]);return t!=null&&ioe(t,e),e}function soe(n,e){const t={},i=x(n,["force"]);return e!==void 0&&i!=null&&E(e,["_query","force"],i),t}function ooe(n){const e={},t=x(n,["name"]);t!=null&&E(e,["_url","name"],t);const i=x(n,["config"]);return i!=null&&soe(i,e),e}function aoe(n){const e={},t=x(n,["name"]);return t!=null&&E(e,["_url","name"],t),e}function loe(n,e){const t={},i=x(n,["customMetadata"]);if(e!==void 0&&i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),E(e,["customMetadata"],s)}const r=x(n,["chunkingConfig"]);return e!==void 0&&r!=null&&E(e,["chunkingConfig"],r),t}function uoe(n){const e={},t=x(n,["name"]);t!=null&&E(e,["name"],t);const i=x(n,["metadata"]);i!=null&&E(e,["metadata"],i);const r=x(n,["done"]);r!=null&&E(e,["done"],r);const s=x(n,["error"]);s!=null&&E(e,["error"],s);const o=x(n,["response"]);return o!=null&&E(e,["response"],doe(o)),e}function coe(n){const e={},t=x(n,["fileSearchStoreName"]);t!=null&&E(e,["_url","file_search_store_name"],t);const i=x(n,["fileName"]);i!=null&&E(e,["fileName"],i);const r=x(n,["config"]);return r!=null&&loe(r,e),e}function doe(n){const e={},t=x(n,["sdkHttpResponse"]);t!=null&&E(e,["sdkHttpResponse"],t);const i=x(n,["parent"]);i!=null&&E(e,["parent"],i);const r=x(n,["documentName"]);return r!=null&&E(e,["documentName"],r),e}function foe(n,e){const t={},i=x(n,["pageSize"]);e!==void 0&&i!=null&&E(e,["_query","pageSize"],i);const r=x(n,["pageToken"]);return e!==void 0&&r!=null&&E(e,["_query","pageToken"],r),t}function hoe(n){const e={},t=x(n,["config"]);return t!=null&&foe(t,e),e}function poe(n){const e={},t=x(n,["sdkHttpResponse"]);t!=null&&E(e,["sdkHttpResponse"],t);const i=x(n,["nextPageToken"]);i!=null&&E(e,["nextPageToken"],i);const r=x(n,["fileSearchStores"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>o)),E(e,["fileSearchStores"],s)}return e}function moe(n,e){const t={},i=x(n,["mimeType"]);e!==void 0&&i!=null&&E(e,["mimeType"],i);const r=x(n,["displayName"]);e!==void 0&&r!=null&&E(e,["displayName"],r);const s=x(n,["customMetadata"]);if(e!==void 0&&s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),E(e,["customMetadata"],a)}const o=x(n,["chunkingConfig"]);return e!==void 0&&o!=null&&E(e,["chunkingConfig"],o),t}function goe(n){const e={},t=x(n,["fileSearchStoreName"]);t!=null&&E(e,["_url","file_search_store_name"],t);const i=x(n,["config"]);return i!=null&&moe(i,e),e}function voe(n){const e={},t=x(n,["sdkHttpResponse"]);return t!=null&&E(e,["sdkHttpResponse"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function yoe(n,e){const t={},i=x(n,["force"]);return e!==void 0&&i!=null&&E(e,["_query","force"],i),t}function _oe(n){const e={},t=x(n,["name"]);t!=null&&E(e,["_url","name"],t);const i=x(n,["config"]);return i!=null&&yoe(i,e),e}function xoe(n){const e={},t=x(n,["name"]);return t!=null&&E(e,["_url","name"],t),e}function woe(n,e){const t={},i=x(n,["pageSize"]);e!==void 0&&i!=null&&E(e,["_query","pageSize"],i);const r=x(n,["pageToken"]);return e!==void 0&&r!=null&&E(e,["_query","pageToken"],r),t}function Aoe(n){const e={},t=x(n,["parent"]);t!=null&&E(e,["_url","parent"],t);const i=x(n,["config"]);return i!=null&&woe(i,e),e}function Soe(n){const e={},t=x(n,["sdkHttpResponse"]);t!=null&&E(e,["sdkHttpResponse"],t);const i=x(n,["nextPageToken"]);i!=null&&E(e,["nextPageToken"],i);const r=x(n,["documents"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>o)),E(e,["documents"],s)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Eoe extends dc{constructor(e){super(),this.apiClient=e,this.list=async t=>new jh(lc.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:t.parent,config:i.config}),await this.listInternal(t),t)}async get(e){var t,i;let r,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=xoe(e);return s=Bt("{name}",a._url),o=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),r.then(l=>l)}}async delete(e){var t,i;let r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=_oe(e);r=Bt("{name}",o._url),s=o._query,delete o._url,delete o._query,await this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var t,i;let r,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Aoe(e);return s=Bt("{parent}/documents",a._url),o=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),r.then(l=>{const u=Soe(l),d=new nte;return Object.assign(d,u),d})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Toe extends dc{constructor(e,t=new Eoe(e)){super(),this.apiClient=e,this.documents=t,this.list=async(i={})=>new jh(lc.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,i;let r,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=roe(e);return s=Bt("fileSearchStores",a._url),o=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),r.then(l=>l)}}async get(e){var t,i;let r,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=aoe(e);return s=Bt("{name}",a._url),o=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),r.then(l=>l)}}async delete(e){var t,i;let r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=ooe(e);r=Bt("{name}",o._url),s=o._query,delete o._url,delete o._query,await this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var t,i;let r,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=hoe(e);return s=Bt("fileSearchStores",a._url),o=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),r.then(l=>{const u=poe(l),d=new ite;return Object.assign(d,u),d})}}async uploadToFileSearchStoreInternal(e){var t,i;let r,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=goe(e);return s=Bt("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",a._url),o=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),r.then(l=>{const u=voe(l),d=new rte;return Object.assign(d,u),d})}}async importFile(e){var t,i;let r,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=coe(e);return s=Bt("{file_search_store_name}:importFile",a._url),o=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),r.then(l=>{const u=uoe(l),d=new CR;return Object.assign(d,u),d})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Moe(n,e){const t={},i=x(n,["name"]);return i!=null&&E(t,["_url","name"],i),t}function Coe(n,e){const t={},i=x(n,["name"]);return i!=null&&E(t,["_url","name"],i),t}function boe(n,e,t){const i={};if(x(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=x(n,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&E(e,["displayName"],r),x(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const s=x(n,["epochCount"]);e!==void 0&&s!=null&&E(e,["tuningTask","hyperparameters","epochCount"],s);const o=x(n,["learningRateMultiplier"]);if(o!=null&&E(i,["tuningTask","hyperparameters","learningRateMultiplier"],o),x(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(x(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(x(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const a=x(n,["batchSize"]);e!==void 0&&a!=null&&E(e,["tuningTask","hyperparameters","batchSize"],a);const l=x(n,["learningRate"]);if(e!==void 0&&l!=null&&E(e,["tuningTask","hyperparameters","learningRate"],l),x(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(x(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return i}function Roe(n,e,t){const i={};let r=x(t,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const v=x(n,["validationDataset"]);e!==void 0&&v!=null&&E(e,["supervisedTuningSpec"],LB(v))}else if(r==="PREFERENCE_TUNING"){const v=x(n,["validationDataset"]);e!==void 0&&v!=null&&E(e,["preferenceOptimizationSpec"],LB(v))}const s=x(n,["tunedModelDisplayName"]);e!==void 0&&s!=null&&E(e,["tunedModelDisplayName"],s);const o=x(n,["description"]);e!==void 0&&o!=null&&E(e,["description"],o);let a=x(t,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const v=x(n,["epochCount"]);e!==void 0&&v!=null&&E(e,["supervisedTuningSpec","hyperParameters","epochCount"],v)}else if(a==="PREFERENCE_TUNING"){const v=x(n,["epochCount"]);e!==void 0&&v!=null&&E(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],v)}let l=x(t,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const v=x(n,["learningRateMultiplier"]);e!==void 0&&v!=null&&E(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],v)}else if(l==="PREFERENCE_TUNING"){const v=x(n,["learningRateMultiplier"]);e!==void 0&&v!=null&&E(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],v)}let u=x(t,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const v=x(n,["exportLastCheckpointOnly"]);e!==void 0&&v!=null&&E(e,["supervisedTuningSpec","exportLastCheckpointOnly"],v)}else if(u==="PREFERENCE_TUNING"){const v=x(n,["exportLastCheckpointOnly"]);e!==void 0&&v!=null&&E(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],v)}let d=x(t,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const v=x(n,["adapterSize"]);e!==void 0&&v!=null&&E(e,["supervisedTuningSpec","hyperParameters","adapterSize"],v)}else if(d==="PREFERENCE_TUNING"){const v=x(n,["adapterSize"]);e!==void 0&&v!=null&&E(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],v)}if(x(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(x(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const h=x(n,["labels"]);e!==void 0&&h!=null&&E(e,["labels"],h);const p=x(n,["beta"]);return e!==void 0&&p!=null&&E(e,["preferenceOptimizationSpec","hyperParameters","beta"],p),i}function Poe(n,e){const t={},i=x(n,["baseModel"]);i!=null&&E(t,["baseModel"],i);const r=x(n,["preTunedModel"]);r!=null&&E(t,["preTunedModel"],r);const s=x(n,["trainingDataset"]);s!=null&&Goe(s);const o=x(n,["config"]);return o!=null&&boe(o,t),t}function Ioe(n,e){const t={},i=x(n,["baseModel"]);i!=null&&E(t,["baseModel"],i);const r=x(n,["preTunedModel"]);r!=null&&E(t,["preTunedModel"],r);const s=x(n,["trainingDataset"]);s!=null&&zoe(s,t,e);const o=x(n,["config"]);return o!=null&&Roe(o,t,e),t}function Doe(n,e){const t={},i=x(n,["name"]);return i!=null&&E(t,["_url","name"],i),t}function Loe(n,e){const t={},i=x(n,["name"]);return i!=null&&E(t,["_url","name"],i),t}function Boe(n,e,t){const i={},r=x(n,["pageSize"]);e!==void 0&&r!=null&&E(e,["_query","pageSize"],r);const s=x(n,["pageToken"]);e!==void 0&&s!=null&&E(e,["_query","pageToken"],s);const o=x(n,["filter"]);return e!==void 0&&o!=null&&E(e,["_query","filter"],o),i}function Noe(n,e,t){const i={},r=x(n,["pageSize"]);e!==void 0&&r!=null&&E(e,["_query","pageSize"],r);const s=x(n,["pageToken"]);e!==void 0&&s!=null&&E(e,["_query","pageToken"],s);const o=x(n,["filter"]);return e!==void 0&&o!=null&&E(e,["_query","filter"],o),i}function koe(n,e){const t={},i=x(n,["config"]);return i!=null&&Boe(i,t),t}function Foe(n,e){const t={},i=x(n,["config"]);return i!=null&&Noe(i,t),t}function Uoe(n,e){const t={},i=x(n,["sdkHttpResponse"]);i!=null&&E(t,["sdkHttpResponse"],i);const r=x(n,["nextPageToken"]);r!=null&&E(t,["nextPageToken"],r);const s=x(n,["tunedModels"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(a=>sG(a))),E(t,["tuningJobs"],o)}return t}function Ooe(n,e){const t={},i=x(n,["sdkHttpResponse"]);i!=null&&E(t,["sdkHttpResponse"],i);const r=x(n,["nextPageToken"]);r!=null&&E(t,["nextPageToken"],r);const s=x(n,["tuningJobs"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(a=>QM(a))),E(t,["tuningJobs"],o)}return t}function Hoe(n,e){const t={},i=x(n,["name"]);i!=null&&E(t,["model"],i);const r=x(n,["name"]);return r!=null&&E(t,["endpoint"],r),t}function Goe(n,e){const t={};if(x(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(x(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=x(n,["examples"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>s)),E(t,["examples","examples"],r)}return t}function zoe(n,e,t){const i={};let r=x(t,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const o=x(n,["gcsUri"]);e!==void 0&&o!=null&&E(e,["supervisedTuningSpec","trainingDatasetUri"],o)}else if(r==="PREFERENCE_TUNING"){const o=x(n,["gcsUri"]);e!==void 0&&o!=null&&E(e,["preferenceOptimizationSpec","trainingDatasetUri"],o)}let s=x(t,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const o=x(n,["vertexDatasetResource"]);e!==void 0&&o!=null&&E(e,["supervisedTuningSpec","trainingDatasetUri"],o)}else if(s==="PREFERENCE_TUNING"){const o=x(n,["vertexDatasetResource"]);e!==void 0&&o!=null&&E(e,["preferenceOptimizationSpec","trainingDatasetUri"],o)}if(x(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function sG(n,e){const t={},i=x(n,["sdkHttpResponse"]);i!=null&&E(t,["sdkHttpResponse"],i);const r=x(n,["name"]);r!=null&&E(t,["name"],r);const s=x(n,["state"]);s!=null&&E(t,["state"],HH(s));const o=x(n,["createTime"]);o!=null&&E(t,["createTime"],o);const a=x(n,["tuningTask","startTime"]);a!=null&&E(t,["startTime"],a);const l=x(n,["tuningTask","completeTime"]);l!=null&&E(t,["endTime"],l);const u=x(n,["updateTime"]);u!=null&&E(t,["updateTime"],u);const d=x(n,["description"]);d!=null&&E(t,["description"],d);const h=x(n,["baseModel"]);h!=null&&E(t,["baseModel"],h);const p=x(n,["_self"]);return p!=null&&E(t,["tunedModel"],Hoe(p)),t}function QM(n,e){const t={},i=x(n,["sdkHttpResponse"]);i!=null&&E(t,["sdkHttpResponse"],i);const r=x(n,["name"]);r!=null&&E(t,["name"],r);const s=x(n,["state"]);s!=null&&E(t,["state"],HH(s));const o=x(n,["createTime"]);o!=null&&E(t,["createTime"],o);const a=x(n,["startTime"]);a!=null&&E(t,["startTime"],a);const l=x(n,["endTime"]);l!=null&&E(t,["endTime"],l);const u=x(n,["updateTime"]);u!=null&&E(t,["updateTime"],u);const d=x(n,["error"]);d!=null&&E(t,["error"],d);const h=x(n,["description"]);h!=null&&E(t,["description"],h);const p=x(n,["baseModel"]);p!=null&&E(t,["baseModel"],p);const v=x(n,["tunedModel"]);v!=null&&E(t,["tunedModel"],v);const _=x(n,["preTunedModel"]);_!=null&&E(t,["preTunedModel"],_);const w=x(n,["supervisedTuningSpec"]);w!=null&&E(t,["supervisedTuningSpec"],w);const S=x(n,["preferenceOptimizationSpec"]);S!=null&&E(t,["preferenceOptimizationSpec"],S);const A=x(n,["tuningDataStats"]);A!=null&&E(t,["tuningDataStats"],A);const b=x(n,["encryptionSpec"]);b!=null&&E(t,["encryptionSpec"],b);const C=x(n,["partnerModelTuningSpec"]);C!=null&&E(t,["partnerModelTuningSpec"],C);const P=x(n,["customBaseModel"]);P!=null&&E(t,["customBaseModel"],P);const k=x(n,["experiment"]);k!=null&&E(t,["experiment"],k);const L=x(n,["labels"]);L!=null&&E(t,["labels"],L);const N=x(n,["outputUri"]);N!=null&&E(t,["outputUri"],N);const O=x(n,["pipelineJob"]);O!=null&&E(t,["pipelineJob"],O);const D=x(n,["serviceAccount"]);D!=null&&E(t,["serviceAccount"],D);const U=x(n,["tunedModelDisplayName"]);U!=null&&E(t,["tunedModelDisplayName"],U);const X=x(n,["veoTuningSpec"]);return X!=null&&E(t,["veoTuningSpec"],X),t}function Voe(n,e){const t={},i=x(n,["sdkHttpResponse"]);i!=null&&E(t,["sdkHttpResponse"],i);const r=x(n,["name"]);r!=null&&E(t,["name"],r);const s=x(n,["metadata"]);s!=null&&E(t,["metadata"],s);const o=x(n,["done"]);o!=null&&E(t,["done"],o);const a=x(n,["error"]);return a!=null&&E(t,["error"],a),t}function LB(n,e){const t={},i=x(n,["gcsUri"]);i!=null&&E(t,["validationDatasetUri"],i);const r=x(n,["vertexDatasetResource"]);return r!=null&&E(t,["validationDatasetUri"],r),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Woe extends dc{constructor(e){super(),this.apiClient=e,this.get=async t=>await this.getInternal(t),this.list=async(t={})=>new jh(lc.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(t),t),this.tune=async t=>{var i;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const r={tunedModelName:t.baseModel};!((i=t.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(r.checkpointId=t.config.preTunedModelCheckpointId);const s=Object.assign(Object.assign({},t),{preTunedModel:r});return s.baseModel=void 0,await this.tuneInternal(s)}else{const r=Object.assign({},t);return await this.tuneInternal(r)}else{const r=Object.assign({},t),s=await this.tuneMldevInternal(r);let o="";return s.metadata!==void 0&&s.metadata.tunedModel!==void 0?o=s.metadata.tunedModel:s.name!==void 0&&s.name.includes("/operations/")&&(o=s.name.split("/operations/")[0]),{name:o,state:VM.JOB_STATE_QUEUED}}}}async getInternal(e){var t,i,r,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=Loe(e);return a=Bt("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),o.then(d=>QM(d))}else{const u=Doe(e);return a=Bt("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),o.then(d=>sG(d))}}async listInternal(e){var t,i,r,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=Foe(e);return a=Bt("tuningJobs",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),o.then(d=>{const h=Ooe(d),p=new fB;return Object.assign(p,h),p})}else{const u=koe(e);return a=Bt("tunedModels",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),o.then(d=>{const h=Uoe(d),p=new fB;return Object.assign(p,h),p})}}async cancel(e){var t,i,r,s;let o="",a={};if(this.apiClient.isVertexAI()){const l=Coe(e);o=Bt("{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const l=Moe(e);o=Bt("{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async tuneInternal(e){var t,i;let r,s="",o={};if(this.apiClient.isVertexAI()){const a=Ioe(e,e);return s=Bt("tuningJobs",a._url),o=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:l.headers},d})),r.then(l=>QM(l))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,i;let r,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Poe(e);return s=Bt("tunedModels",a._url),o=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:l.headers},d})),r.then(l=>Voe(l))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class qoe{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const Joe=1024*1024*8,Xoe=3,Yoe=1e3,Koe=2,CA="x-goog-upload-status";async function Qoe(n,e,t){var i;const r=await oG(n,e,t),s=await(r==null?void 0:r.json());if(((i=r==null?void 0:r.headers)===null||i===void 0?void 0:i[CA])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return s.file}async function Zoe(n,e,t){var i;const r=await oG(n,e,t),s=await(r==null?void 0:r.json());if(((i=r==null?void 0:r.headers)===null||i===void 0?void 0:i[CA])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const o=BH(s),a=new bR;return Object.assign(a,o),a}async function oG(n,e,t){var i,r;let s=0,o=0,a=new WM(new Response),l="upload";for(s=n.size;o<s;){const u=Math.min(Joe,s-o),d=n.slice(o,o+u);o+u>=s&&(l+=", finalize");let h=0,p=Yoe;for(;h<Xoe&&(a=await t.request({path:"",body:d,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":l,"X-Goog-Upload-Offset":String(o),"Content-Length":String(u)}}}),!(!((i=a==null?void 0:a.headers)===null||i===void 0)&&i[CA]));)h++,await joe(p),p=p*Koe;if(o+=u,((r=a==null?void 0:a.headers)===null||r===void 0?void 0:r[CA])!=="active")break;if(s<=o)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return a}async function $oe(n){return{size:n.size,type:n.type}}function joe(n){return new Promise(e=>setTimeout(e,n))}class eae{async upload(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Qoe(e,t,i)}async uploadToFileSearchStore(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Zoe(e,t,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await $oe(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class tae{create(e,t,i){return new nae(e,t,i)}}class nae{constructor(e,t,i){this.url=e,this.headers=t,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const BB="x-goog-api-key";class iae{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(BB)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(BB,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const rae="gl-node/";class sae{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const i=Nee(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion;const r=new iae(this.apiKey);this.apiClient=new xse({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:rae+"web",uploader:new eae,downloader:new qoe}),this.models=new Ose(this.apiClient),this.live=new Lse(this.apiClient,r,new tae),this.batches=new cne(this.apiClient),this.chats=new qne(this.models,this.apiClient),this.caches=new zne(this.apiClient),this.files=new tie(this.apiClient),this.operations=new Hse(this.apiClient),this.authTokens=new noe(this.apiClient),this.tunings=new Woe(this.apiClient),this.fileSearchStores=new Toe(this.apiClient)}}var oae={};const aG=typeof process<"u"&&oae?"PLACEHOLDER_API_KEY":"",aae=new sae({apiKey:aG}),lae=`
You are "C-Tech", the holographic AI sales assistant for CreartTech, a futuristic cyberpunk e-commerce store.
Your tone is robotic but helpful, using slang like "Netrunner", "Choom", "Preem", and "Nova".
You are an expert in high-end computer hardware and futuristic tech.
Keep answers concise (under 50 words unless technical detail is requested).
If asked about products, recommend items based on the user's needs (Gaming, Work, AI development).
Do not handle payments.
`,uae=async n=>{if(!aG)return"SYSTEM ERROR: API_KEY_MISSING. Please configure your neural link.";try{return(await aae.models.generateContent({model:"gemini-1.5-flash",contents:n,config:{systemInstruction:lae,temperature:.7}})).text||"Transmission interrupted. Please retry."}catch(e){return console.error("Neural link failure:",e),"Error: Connection to mainframe lost."}},BR=ie.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"}),HS=ie.createContext({}),GS=ie.createContext(null),zS=typeof document<"u",s_=zS?ie.useLayoutEffect:ie.useEffect,lG=ie.createContext({strict:!1}),NR=n=>n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),cae="framerAppearId",uG="data-"+NR(cae);function dae(n,e,t,i){const{visualElement:r}=ie.useContext(HS),s=ie.useContext(lG),o=ie.useContext(GS),a=ie.useContext(BR).reducedMotion,l=ie.useRef();i=i||s.renderer,!l.current&&i&&(l.current=i(n,{visualState:e,parent:r,props:t,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:a}));const u=l.current;ie.useInsertionEffect(()=>{u&&u.update(t,o)});const d=ie.useRef(!!(t[uG]&&!window.HandoffComplete));return s_(()=>{u&&(u.render(),d.current&&u.animationState&&u.animationState.animateChanges())}),ie.useEffect(()=>{u&&(u.updateFeatures(),!d.current&&u.animationState&&u.animationState.animateChanges(),d.current&&(d.current=!1,window.HandoffComplete=!0))}),u}function Om(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function fae(n,e,t){return ie.useCallback(i=>{i&&n.mount&&n.mount(i),e&&(i?e.mount(i):e.unmount()),t&&(typeof t=="function"?t(i):Om(t)&&(t.current=i))},[e])}function My(n){return typeof n=="string"||Array.isArray(n)}function VS(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}const kR=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],FR=["initial",...kR];function WS(n){return VS(n.animate)||FR.some(e=>My(n[e]))}function cG(n){return!!(WS(n)||n.variants)}function hae(n,e){if(WS(n)){const{initial:t,animate:i}=n;return{initial:t===!1||My(t)?t:void 0,animate:My(i)?i:void 0}}return n.inherit!==!1?e:{}}function pae(n){const{initial:e,animate:t}=hae(n,ie.useContext(HS));return ie.useMemo(()=>({initial:e,animate:t}),[NB(e),NB(t)])}function NB(n){return Array.isArray(n)?n.join(" "):n}const kB={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Cy={};for(const n in kB)Cy[n]={isEnabled:e=>kB[n].some(t=>!!e[t])};function mae(n){for(const e in n)Cy[e]={...Cy[e],...n[e]}}const UR=ie.createContext({}),dG=ie.createContext({}),gae=Symbol.for("motionComponentSymbol");function vae({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:i,Component:r}){n&&mae(n);function s(a,l){let u;const d={...ie.useContext(BR),...a,layoutId:yae(a)},{isStatic:h}=d,p=pae(a),v=i(a,h);if(!h&&zS){p.visualElement=dae(r,v,d,e);const _=ie.useContext(dG),w=ie.useContext(lG).strict;p.visualElement&&(u=p.visualElement.loadFeatures(d,w,n,_))}return ie.createElement(HS.Provider,{value:p},u&&p.visualElement?ie.createElement(u,{visualElement:p.visualElement,...d}):null,t(r,a,fae(v,p.visualElement,l),v,h,p.visualElement))}const o=ie.forwardRef(s);return o[gae]=r,o}function yae({layoutId:n}){const e=ie.useContext(UR).id;return e&&n!==void 0?e+"-"+n:n}function _ae(n){function e(i,r={}){return vae(n(i,r))}if(typeof Proxy>"u")return e;const t=new Map;return new Proxy(e,{get:(i,r)=>(t.has(r)||t.set(r,e(r)),t.get(r))})}const xae=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function OR(n){return typeof n!="string"||n.includes("-")?!1:!!(xae.indexOf(n)>-1||/[A-Z]/.test(n))}const bA={};function wae(n){Object.assign(bA,n)}const o_=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ep=new Set(o_);function fG(n,{layout:e,layoutId:t}){return ep.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!bA[n]||n==="opacity")}const Ro=n=>!!(n&&n.getVelocity),Aae={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Sae=o_.length;function Eae(n,{enableHardwareAcceleration:e=!0,allowTransformNone:t=!0},i,r){let s="";for(let o=0;o<Sae;o++){const a=o_[o];if(n[a]!==void 0){const l=Aae[a]||a;s+=`${l}(${n[a]}) `}}return e&&!n.z&&(s+="translateZ(0)"),s=s.trim(),r?s=r(n,i?"":s):t&&i&&(s="none"),s}const hG=n=>e=>typeof e=="string"&&e.startsWith(n),pG=hG("--"),ZM=hG("var(--"),Tae=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,Mae=(n,e)=>e&&typeof n=="number"?e.transform(n):n,Ud=(n,e,t)=>Math.min(Math.max(t,n),e),tp={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},Lv={...tp,transform:n=>Ud(0,1,n)},aw={...tp,default:1},Bv=n=>Math.round(n*1e5)/1e5,qS=/(-)?([\d]*\.?[\d])+/g,mG=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,Cae=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function a_(n){return typeof n=="string"}const l_=n=>({test:e=>a_(e)&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),nd=l_("deg"),Kl=l_("%"),pn=l_("px"),bae=l_("vh"),Rae=l_("vw"),FB={...Kl,parse:n=>Kl.parse(n)/100,transform:n=>Kl.transform(n*100)},UB={...tp,transform:Math.round},gG={borderWidth:pn,borderTopWidth:pn,borderRightWidth:pn,borderBottomWidth:pn,borderLeftWidth:pn,borderRadius:pn,radius:pn,borderTopLeftRadius:pn,borderTopRightRadius:pn,borderBottomRightRadius:pn,borderBottomLeftRadius:pn,width:pn,maxWidth:pn,height:pn,maxHeight:pn,size:pn,top:pn,right:pn,bottom:pn,left:pn,padding:pn,paddingTop:pn,paddingRight:pn,paddingBottom:pn,paddingLeft:pn,margin:pn,marginTop:pn,marginRight:pn,marginBottom:pn,marginLeft:pn,rotate:nd,rotateX:nd,rotateY:nd,rotateZ:nd,scale:aw,scaleX:aw,scaleY:aw,scaleZ:aw,skew:nd,skewX:nd,skewY:nd,distance:pn,translateX:pn,translateY:pn,translateZ:pn,x:pn,y:pn,z:pn,perspective:pn,transformPerspective:pn,opacity:Lv,originX:FB,originY:FB,originZ:pn,zIndex:UB,fillOpacity:Lv,strokeOpacity:Lv,numOctaves:UB};function HR(n,e,t,i){const{style:r,vars:s,transform:o,transformOrigin:a}=n;let l=!1,u=!1,d=!0;for(const h in e){const p=e[h];if(pG(h)){s[h]=p;continue}const v=gG[h],_=Mae(p,v);if(ep.has(h)){if(l=!0,o[h]=_,!d)continue;p!==(v.default||0)&&(d=!1)}else h.startsWith("origin")?(u=!0,a[h]=_):r[h]=_}if(e.transform||(l||i?r.transform=Eae(n.transform,t,d,i):r.transform&&(r.transform="none")),u){const{originX:h="50%",originY:p="50%",originZ:v=0}=a;r.transformOrigin=`${h} ${p} ${v}`}}const GR=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function vG(n,e,t){for(const i in e)!Ro(e[i])&&!fG(i,t)&&(n[i]=e[i])}function Pae({transformTemplate:n},e,t){return ie.useMemo(()=>{const i=GR();return HR(i,e,{enableHardwareAcceleration:!t},n),Object.assign({},i.vars,i.style)},[e])}function Iae(n,e,t){const i=n.style||{},r={};return vG(r,i,n),Object.assign(r,Pae(n,e,t)),n.transformValues?n.transformValues(r):r}function Dae(n,e,t){const i={},r=Iae(n,e,t);return n.drag&&n.dragListener!==!1&&(i.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(i.tabIndex=0),i.style=r,i}const Lae=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function RA(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||Lae.has(n)}let yG=n=>!RA(n);function Bae(n){n&&(yG=e=>e.startsWith("on")?!RA(e):n(e))}try{Bae(require("@emotion/is-prop-valid").default)}catch{}function Nae(n,e,t){const i={};for(const r in n)r==="values"&&typeof n.values=="object"||(yG(r)||t===!0&&RA(r)||!e&&!RA(r)||n.draggable&&r.startsWith("onDrag"))&&(i[r]=n[r]);return i}function OB(n,e,t){return typeof n=="string"?n:pn.transform(e+t*n)}function kae(n,e,t){const i=OB(e,n.x,n.width),r=OB(t,n.y,n.height);return`${i} ${r}`}const Fae={offset:"stroke-dashoffset",array:"stroke-dasharray"},Uae={offset:"strokeDashoffset",array:"strokeDasharray"};function Oae(n,e,t=1,i=0,r=!0){n.pathLength=1;const s=r?Fae:Uae;n[s.offset]=pn.transform(-i);const o=pn.transform(e),a=pn.transform(t);n[s.array]=`${o} ${a}`}function zR(n,{attrX:e,attrY:t,attrScale:i,originX:r,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...u},d,h,p){if(HR(n,u,d,p),h){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:v,style:_,dimensions:w}=n;v.transform&&(w&&(_.transform=v.transform),delete v.transform),w&&(r!==void 0||s!==void 0||_.transform)&&(_.transformOrigin=kae(w,r!==void 0?r:.5,s!==void 0?s:.5)),e!==void 0&&(v.x=e),t!==void 0&&(v.y=t),i!==void 0&&(v.scale=i),o!==void 0&&Oae(v,o,a,l,!1)}const _G=()=>({...GR(),attrs:{}}),VR=n=>typeof n=="string"&&n.toLowerCase()==="svg";function Hae(n,e,t,i){const r=ie.useMemo(()=>{const s=_G();return zR(s,e,{enableHardwareAcceleration:!1},VR(i),n.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(n.style){const s={};vG(s,n.style,n),r.style={...s,...r.style}}return r}function Gae(n=!1){return(t,i,r,{latestValues:s},o)=>{const l=(OR(t)?Hae:Dae)(i,s,o,t),d={...Nae(i,typeof t=="string",n),...l,ref:r},{children:h}=i,p=ie.useMemo(()=>Ro(h)?h.get():h,[h]);return ie.createElement(t,{...d,children:p})}}function xG(n,{style:e,vars:t},i,r){Object.assign(n.style,e,r&&r.getProjectionStyles(i));for(const s in t)n.style.setProperty(s,t[s])}const wG=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function AG(n,e,t,i){xG(n,e,void 0,i);for(const r in e.attrs)n.setAttribute(wG.has(r)?r:NR(r),e.attrs[r])}function WR(n,e){const{style:t}=n,i={};for(const r in t)(Ro(t[r])||e.style&&Ro(e.style[r])||fG(r,n))&&(i[r]=t[r]);return i}function SG(n,e){const t=WR(n,e);for(const i in n)if(Ro(n[i])||Ro(e[i])){const r=o_.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;t[r]=n[i]}return t}function qR(n,e,t,i={},r={}){return typeof e=="function"&&(e=e(t!==void 0?t:n.custom,i,r)),typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"&&(e=e(t!==void 0?t:n.custom,i,r)),e}function u_(n){const e=ie.useRef(null);return e.current===null&&(e.current=n()),e.current}const PA=n=>Array.isArray(n),zae=n=>!!(n&&typeof n=="object"&&n.mix&&n.toValue),Vae=n=>PA(n)?n[n.length-1]||0:n;function Uw(n){const e=Ro(n)?n.get():n;return zae(e)?e.toValue():e}function Wae({scrapeMotionValuesFromProps:n,createRenderState:e,onMount:t},i,r,s){const o={latestValues:qae(i,r,s,n),renderState:e()};return t&&(o.mount=a=>t(i,a,o)),o}const EG=n=>(e,t)=>{const i=ie.useContext(HS),r=ie.useContext(GS),s=()=>Wae(n,e,i,r);return t?s():u_(s)};function qae(n,e,t,i){const r={},s=i(n,{});for(const p in s)r[p]=Uw(s[p]);let{initial:o,animate:a}=n;const l=WS(n),u=cG(n);e&&u&&!l&&n.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let d=t?t.initial===!1:!1;d=d||o===!1;const h=d?a:o;return h&&typeof h!="boolean"&&!VS(h)&&(Array.isArray(h)?h:[h]).forEach(v=>{const _=qR(n,v);if(!_)return;const{transitionEnd:w,transition:S,...A}=_;for(const b in A){let C=A[b];if(Array.isArray(C)){const P=d?C.length-1:0;C=C[P]}C!==null&&(r[b]=C)}for(const b in w)r[b]=w[b]}),r}const tr=n=>n;class HB{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const t=this.order.indexOf(e);t!==-1&&(this.order.splice(t,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function Jae(n){let e=new HB,t=new HB,i=0,r=!1,s=!1;const o=new WeakSet,a={schedule:(l,u=!1,d=!1)=>{const h=d&&r,p=h?e:t;return u&&o.add(l),p.add(l)&&h&&r&&(i=e.order.length),l},cancel:l=>{t.remove(l),o.delete(l)},process:l=>{if(r){s=!0;return}if(r=!0,[e,t]=[t,e],t.clear(),i=e.order.length,i)for(let u=0;u<i;u++){const d=e.order[u];d(l),o.has(d)&&(a.schedule(d),n())}r=!1,s&&(s=!1,a.process(l))}};return a}const lw=["prepare","read","update","preRender","render","postRender"],Xae=40;function Yae(n,e){let t=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},s=lw.reduce((h,p)=>(h[p]=Jae(()=>t=!0),h),{}),o=h=>s[h].process(r),a=()=>{const h=performance.now();t=!1,r.delta=i?1e3/60:Math.max(Math.min(h-r.timestamp,Xae),1),r.timestamp=h,r.isProcessing=!0,lw.forEach(o),r.isProcessing=!1,t&&e&&(i=!1,n(a))},l=()=>{t=!0,i=!0,r.isProcessing||n(a)};return{schedule:lw.reduce((h,p)=>{const v=s[p];return h[p]=(_,w=!1,S=!1)=>(t||l(),v.schedule(_,w,S)),h},{}),cancel:h=>lw.forEach(p=>s[p].cancel(h)),state:r,steps:s}}const{schedule:ni,cancel:yl,state:ls,steps:QT}=Yae(typeof requestAnimationFrame<"u"?requestAnimationFrame:tr,!0),Kae={useVisualState:EG({scrapeMotionValuesFromProps:SG,createRenderState:_G,onMount:(n,e,{renderState:t,latestValues:i})=>{ni.read(()=>{try{t.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}}),ni.render(()=>{zR(t,i,{enableHardwareAcceleration:!1},VR(e.tagName),n.transformTemplate),AG(e,t)})}})},Qae={useVisualState:EG({scrapeMotionValuesFromProps:WR,createRenderState:GR})};function Zae(n,{forwardMotionProps:e=!1},t,i){return{...OR(n)?Kae:Qae,preloadedFeatures:t,useRender:Gae(e),createVisualElement:i,Component:n}}function Zu(n,e,t,i={passive:!0}){return n.addEventListener(e,t,i),()=>n.removeEventListener(e,t)}const TG=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1;function JS(n,e="page"){return{point:{x:n[e+"X"],y:n[e+"Y"]}}}const $ae=n=>e=>TG(e)&&n(e,JS(e));function tc(n,e,t,i){return Zu(n,e,$ae(t),i)}const jae=(n,e)=>t=>e(n(t)),bd=(...n)=>n.reduce(jae);function MG(n){let e=null;return()=>{const t=()=>{e=null};return e===null?(e=n,t):!1}}const GB=MG("dragHorizontal"),zB=MG("dragVertical");function CG(n){let e=!1;if(n==="y")e=zB();else if(n==="x")e=GB();else{const t=GB(),i=zB();t&&i?e=()=>{t(),i()}:(t&&t(),i&&i())}return e}function bG(){const n=CG(!0);return n?(n(),!1):!0}class Xd{constructor(e){this.isMounted=!1,this.node=e}update(){}}function VB(n,e){const t="pointer"+(e?"enter":"leave"),i="onHover"+(e?"Start":"End"),r=(s,o)=>{if(s.pointerType==="touch"||bG())return;const a=n.getProps();n.animationState&&a.whileHover&&n.animationState.setActive("whileHover",e),a[i]&&ni.update(()=>a[i](s,o))};return tc(n.current,t,r,{passive:!n.getProps()[i]})}class ele extends Xd{mount(){this.unmount=bd(VB(this.node,!0),VB(this.node,!1))}unmount(){}}class tle extends Xd{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=bd(Zu(this.node.current,"focus",()=>this.onFocus()),Zu(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const RG=(n,e)=>e?n===e?!0:RG(n,e.parentElement):!1;function ZT(n,e){if(!e)return;const t=new PointerEvent("pointer"+n);e(t,JS(t))}class nle extends Xd{constructor(){super(...arguments),this.removeStartListeners=tr,this.removeEndListeners=tr,this.removeAccessibleListeners=tr,this.startPointerPress=(e,t)=>{if(this.isPressing)return;this.removeEndListeners();const i=this.node.getProps(),s=tc(window,"pointerup",(a,l)=>{if(!this.checkPressEnd())return;const{onTap:u,onTapCancel:d,globalTapTarget:h}=this.node.getProps();ni.update(()=>{!h&&!RG(this.node.current,a.target)?d&&d(a,l):u&&u(a,l)})},{passive:!(i.onTap||i.onPointerUp)}),o=tc(window,"pointercancel",(a,l)=>this.cancelPress(a,l),{passive:!(i.onTapCancel||i.onPointerCancel)});this.removeEndListeners=bd(s,o),this.startPress(e,t)},this.startAccessiblePress=()=>{const e=s=>{if(s.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||ZT("up",(l,u)=>{const{onTap:d}=this.node.getProps();d&&ni.update(()=>d(l,u))})};this.removeEndListeners(),this.removeEndListeners=Zu(this.node.current,"keyup",o),ZT("down",(a,l)=>{this.startPress(a,l)})},t=Zu(this.node.current,"keydown",e),i=()=>{this.isPressing&&ZT("cancel",(s,o)=>this.cancelPress(s,o))},r=Zu(this.node.current,"blur",i);this.removeAccessibleListeners=bd(t,r)}}startPress(e,t){this.isPressing=!0;const{onTapStart:i,whileTap:r}=this.node.getProps();r&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),i&&ni.update(()=>i(e,t))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!bG()}cancelPress(e,t){if(!this.checkPressEnd())return;const{onTapCancel:i}=this.node.getProps();i&&ni.update(()=>i(e,t))}mount(){const e=this.node.getProps(),t=tc(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),i=Zu(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=bd(t,i)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const $M=new WeakMap,$T=new WeakMap,ile=n=>{const e=$M.get(n.target);e&&e(n)},rle=n=>{n.forEach(ile)};function sle({root:n,...e}){const t=n||document;$T.has(t)||$T.set(t,{});const i=$T.get(t),r=JSON.stringify(e);return i[r]||(i[r]=new IntersectionObserver(rle,{root:n,...e})),i[r]}function ole(n,e,t){const i=sle(e);return $M.set(n,t),i.observe(n),()=>{$M.delete(n),i.unobserve(n)}}const ale={some:0,all:1};class lle extends Xd{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:i,amount:r="some",once:s}=e,o={root:t?t.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:ale[r]},a=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,s&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:h}=this.node.getProps(),p=u?d:h;p&&p(l)};return ole(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(ule(e,t))&&this.startObserver()}unmount(){}}function ule({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const cle={inView:{Feature:lle},tap:{Feature:nle},focus:{Feature:tle},hover:{Feature:ele}};function PG(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let i=0;i<t;i++)if(e[i]!==n[i])return!1;return!0}function dle(n){const e={};return n.values.forEach((t,i)=>e[i]=t.get()),e}function fle(n){const e={};return n.values.forEach((t,i)=>e[i]=t.getVelocity()),e}function XS(n,e,t){const i=n.getProps();return qR(i,e,t!==void 0?t:i.custom,dle(n),fle(n))}let hle=tr,JR=tr;const bh=n=>n*1e3,nc=n=>n/1e3,ple={current:!1},IG=n=>Array.isArray(n)&&typeof n[0]=="number";function DG(n){return!!(!n||typeof n=="string"&&LG[n]||IG(n)||Array.isArray(n)&&n.every(DG))}const mv=([n,e,t,i])=>`cubic-bezier(${n}, ${e}, ${t}, ${i})`,LG={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:mv([0,.65,.55,1]),circOut:mv([.55,0,1,.45]),backIn:mv([.31,.01,.66,-.59]),backOut:mv([.33,1.53,.69,.99])};function BG(n){if(n)return IG(n)?mv(n):Array.isArray(n)?n.map(BG):LG[n]}function mle(n,e,t,{delay:i=0,duration:r,repeat:s=0,repeatType:o="loop",ease:a,times:l}={}){const u={[e]:t};l&&(u.offset=l);const d=BG(a);return Array.isArray(d)&&(u.easing=d),n.animate(u,{delay:i,duration:r,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}function gle(n,{repeat:e,repeatType:t="loop"}){const i=e&&t!=="loop"&&e%2===1?0:n.length-1;return n[i]}const NG=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,vle=1e-7,yle=12;function _le(n,e,t,i,r){let s,o,a=0;do o=e+(t-e)/2,s=NG(o,i,r)-n,s>0?t=o:e=o;while(Math.abs(s)>vle&&++a<yle);return o}function c_(n,e,t,i){if(n===e&&t===i)return tr;const r=s=>_le(s,0,1,n,t);return s=>s===0||s===1?s:NG(r(s),e,i)}const xle=c_(.42,0,1,1),wle=c_(0,0,.58,1),kG=c_(.42,0,.58,1),Ale=n=>Array.isArray(n)&&typeof n[0]!="number",FG=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,UG=n=>e=>1-n(1-e),XR=n=>1-Math.sin(Math.acos(n)),OG=UG(XR),Sle=FG(XR),HG=c_(.33,1.53,.69,.99),YR=UG(HG),Ele=FG(YR),Tle=n=>(n*=2)<1?.5*YR(n):.5*(2-Math.pow(2,-10*(n-1))),Mle={linear:tr,easeIn:xle,easeInOut:kG,easeOut:wle,circIn:XR,circInOut:Sle,circOut:OG,backIn:YR,backInOut:Ele,backOut:HG,anticipate:Tle},WB=n=>{if(Array.isArray(n)){JR(n.length===4);const[e,t,i,r]=n;return c_(e,t,i,r)}else if(typeof n=="string")return Mle[n];return n},KR=(n,e)=>t=>!!(a_(t)&&Cae.test(t)&&t.startsWith(n)||e&&Object.prototype.hasOwnProperty.call(t,e)),GG=(n,e,t)=>i=>{if(!a_(i))return i;const[r,s,o,a]=i.match(qS);return{[n]:parseFloat(r),[e]:parseFloat(s),[t]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},Cle=n=>Ud(0,255,n),jT={...tp,transform:n=>Math.round(Cle(n))},gh={test:KR("rgb","red"),parse:GG("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:i=1})=>"rgba("+jT.transform(n)+", "+jT.transform(e)+", "+jT.transform(t)+", "+Bv(Lv.transform(i))+")"};function ble(n){let e="",t="",i="",r="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),i=n.substring(5,7),r=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),i=n.substring(3,4),r=n.substring(4,5),e+=e,t+=t,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const jM={test:KR("#"),parse:ble,transform:gh.transform},Hm={test:KR("hsl","hue"),parse:GG("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:i=1})=>"hsla("+Math.round(n)+", "+Kl.transform(Bv(e))+", "+Kl.transform(Bv(t))+", "+Bv(Lv.transform(i))+")"},Ks={test:n=>gh.test(n)||jM.test(n)||Hm.test(n),parse:n=>gh.test(n)?gh.parse(n):Hm.test(n)?Hm.parse(n):jM.parse(n),transform:n=>a_(n)?n:n.hasOwnProperty("red")?gh.transform(n):Hm.transform(n)},Ji=(n,e,t)=>-t*n+t*e+n;function e1(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function Rle({hue:n,saturation:e,lightness:t,alpha:i}){n/=360,e/=100,t/=100;let r=0,s=0,o=0;if(!e)r=s=o=t;else{const a=t<.5?t*(1+e):t+e-t*e,l=2*t-a;r=e1(l,a,n+1/3),s=e1(l,a,n),o=e1(l,a,n-1/3)}return{red:Math.round(r*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:i}}const t1=(n,e,t)=>{const i=n*n;return Math.sqrt(Math.max(0,t*(e*e-i)+i))},Ple=[jM,gh,Hm],Ile=n=>Ple.find(e=>e.test(n));function qB(n){const e=Ile(n);let t=e.parse(n);return e===Hm&&(t=Rle(t)),t}const zG=(n,e)=>{const t=qB(n),i=qB(e),r={...t};return s=>(r.red=t1(t.red,i.red,s),r.green=t1(t.green,i.green,s),r.blue=t1(t.blue,i.blue,s),r.alpha=Ji(t.alpha,i.alpha,s),gh.transform(r))};function Dle(n){var e,t;return isNaN(n)&&a_(n)&&(((e=n.match(qS))===null||e===void 0?void 0:e.length)||0)+(((t=n.match(mG))===null||t===void 0?void 0:t.length)||0)>0}const VG={regex:Tae,countKey:"Vars",token:"${v}",parse:tr},WG={regex:mG,countKey:"Colors",token:"${c}",parse:Ks.parse},qG={regex:qS,countKey:"Numbers",token:"${n}",parse:tp.parse};function n1(n,{regex:e,countKey:t,token:i,parse:r}){const s=n.tokenised.match(e);s&&(n["num"+t]=s.length,n.tokenised=n.tokenised.replace(e,i),n.values.push(...s.map(r)))}function IA(n){const e=n.toString(),t={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return t.value.includes("var(--")&&n1(t,VG),n1(t,WG),n1(t,qG),t}function JG(n){return IA(n).values}function XG(n){const{values:e,numColors:t,numVars:i,tokenised:r}=IA(n),s=e.length;return o=>{let a=r;for(let l=0;l<s;l++)l<i?a=a.replace(VG.token,o[l]):l<i+t?a=a.replace(WG.token,Ks.transform(o[l])):a=a.replace(qG.token,Bv(o[l]));return a}}const Lle=n=>typeof n=="number"?0:n;function Ble(n){const e=JG(n);return XG(n)(e.map(Lle))}const Od={test:Dle,parse:JG,createTransformer:XG,getAnimatableNone:Ble},YG=(n,e)=>t=>`${t>0?e:n}`;function KG(n,e){return typeof n=="number"?t=>Ji(n,e,t):Ks.test(n)?zG(n,e):n.startsWith("var(")?YG(n,e):ZG(n,e)}const QG=(n,e)=>{const t=[...n],i=t.length,r=n.map((s,o)=>KG(s,e[o]));return s=>{for(let o=0;o<i;o++)t[o]=r[o](s);return t}},Nle=(n,e)=>{const t={...n,...e},i={};for(const r in t)n[r]!==void 0&&e[r]!==void 0&&(i[r]=KG(n[r],e[r]));return r=>{for(const s in i)t[s]=i[s](r);return t}},ZG=(n,e)=>{const t=Od.createTransformer(e),i=IA(n),r=IA(e);return i.numVars===r.numVars&&i.numColors===r.numColors&&i.numNumbers>=r.numNumbers?bd(QG(i.values,r.values),t):YG(n,e)},Mg=(n,e,t)=>{const i=e-n;return i===0?1:(t-n)/i},JB=(n,e)=>t=>Ji(n,e,t);function kle(n){return typeof n=="number"?JB:typeof n=="string"?Ks.test(n)?zG:ZG:Array.isArray(n)?QG:typeof n=="object"?Nle:JB}function Fle(n,e,t){const i=[],r=t||kle(n[0]),s=n.length-1;for(let o=0;o<s;o++){let a=r(n[o],n[o+1]);if(e){const l=Array.isArray(e)?e[o]||tr:e;a=bd(l,a)}i.push(a)}return i}function YS(n,e,{clamp:t=!0,ease:i,mixer:r}={}){const s=n.length;if(JR(s===e.length),s===1)return()=>e[0];n[0]>n[s-1]&&(n=[...n].reverse(),e=[...e].reverse());const o=Fle(e,i,r),a=o.length,l=u=>{let d=0;if(a>1)for(;d<n.length-2&&!(u<n[d+1]);d++);const h=Mg(n[d],n[d+1],u);return o[d](h)};return t?u=>l(Ud(n[0],n[s-1],u)):l}function Ule(n,e){const t=n[n.length-1];for(let i=1;i<=e;i++){const r=Mg(0,e,i);n.push(Ji(t,1,r))}}function $G(n){const e=[0];return Ule(e,n.length-1),e}function Ole(n,e){return n.map(t=>t*e)}function Hle(n,e){return n.map(()=>e||kG).splice(0,n.length-1)}function DA({duration:n=300,keyframes:e,times:t,ease:i="easeInOut"}){const r=Ale(i)?i.map(WB):WB(i),s={done:!1,value:e[0]},o=Ole(t&&t.length===e.length?t:$G(e),n),a=YS(o,e,{ease:Array.isArray(r)?r:Hle(e,r)});return{calculatedDuration:n,next:l=>(s.value=a(l),s.done=l>=n,s)}}function QR(n,e){return e?n*(1e3/e):0}const Gle=5;function jG(n,e,t){const i=Math.max(e-Gle,0);return QR(t-n(i),e-i)}const i1=.001,zle=.01,Vle=10,Wle=.05,qle=1;function Jle({duration:n=800,bounce:e=.25,velocity:t=0,mass:i=1}){let r,s,o=1-e;o=Ud(Wle,qle,o),n=Ud(zle,Vle,nc(n)),o<1?(r=u=>{const d=u*o,h=d*n,p=d-t,v=eC(u,o),_=Math.exp(-h);return i1-p/v*_},s=u=>{const h=u*o*n,p=h*t+t,v=Math.pow(o,2)*Math.pow(u,2)*n,_=Math.exp(-h),w=eC(Math.pow(u,2),o);return(-r(u)+i1>0?-1:1)*((p-v)*_)/w}):(r=u=>{const d=Math.exp(-u*n),h=(u-t)*n+1;return-i1+d*h},s=u=>{const d=Math.exp(-u*n),h=(t-u)*(n*n);return d*h});const a=5/n,l=Yle(r,s,a);if(n=bh(n),isNaN(l))return{stiffness:100,damping:10,duration:n};{const u=Math.pow(l,2)*i;return{stiffness:u,damping:o*2*Math.sqrt(i*u),duration:n}}}const Xle=12;function Yle(n,e,t){let i=t;for(let r=1;r<Xle;r++)i=i-n(i)/e(i);return i}function eC(n,e){return n*Math.sqrt(1-e*e)}const Kle=["duration","bounce"],Qle=["stiffness","damping","mass"];function XB(n,e){return e.some(t=>n[t]!==void 0)}function Zle(n){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...n};if(!XB(n,Qle)&&XB(n,Kle)){const t=Jle(n);e={...e,...t,mass:1},e.isResolvedFromDuration=!0}return e}function ez({keyframes:n,restDelta:e,restSpeed:t,...i}){const r=n[0],s=n[n.length-1],o={done:!1,value:r},{stiffness:a,damping:l,mass:u,duration:d,velocity:h,isResolvedFromDuration:p}=Zle({...i,velocity:-nc(i.velocity||0)}),v=h||0,_=l/(2*Math.sqrt(a*u)),w=s-r,S=nc(Math.sqrt(a/u)),A=Math.abs(w)<5;t||(t=A?.01:2),e||(e=A?.005:.5);let b;if(_<1){const C=eC(S,_);b=P=>{const k=Math.exp(-_*S*P);return s-k*((v+_*S*w)/C*Math.sin(C*P)+w*Math.cos(C*P))}}else if(_===1)b=C=>s-Math.exp(-S*C)*(w+(v+S*w)*C);else{const C=S*Math.sqrt(_*_-1);b=P=>{const k=Math.exp(-_*S*P),L=Math.min(C*P,300);return s-k*((v+_*S*w)*Math.sinh(L)+C*w*Math.cosh(L))/C}}return{calculatedDuration:p&&d||null,next:C=>{const P=b(C);if(p)o.done=C>=d;else{let k=v;C!==0&&(_<1?k=jG(b,C,P):k=0);const L=Math.abs(k)<=t,N=Math.abs(s-P)<=e;o.done=L&&N}return o.value=o.done?s:P,o}}}function YB({keyframes:n,velocity:e=0,power:t=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:u=.5,restSpeed:d}){const h=n[0],p={done:!1,value:h},v=O=>a!==void 0&&O<a||l!==void 0&&O>l,_=O=>a===void 0?l:l===void 0||Math.abs(a-O)<Math.abs(l-O)?a:l;let w=t*e;const S=h+w,A=o===void 0?S:o(S);A!==S&&(w=A-h);const b=O=>-w*Math.exp(-O/i),C=O=>A+b(O),P=O=>{const D=b(O),U=C(O);p.done=Math.abs(D)<=u,p.value=p.done?A:U};let k,L;const N=O=>{v(p.value)&&(k=O,L=ez({keyframes:[p.value,_(p.value)],velocity:jG(C,O,p.value),damping:r,stiffness:s,restDelta:u,restSpeed:d}))};return N(0),{calculatedDuration:null,next:O=>{let D=!1;return!L&&k===void 0&&(D=!0,P(O),N(O)),k!==void 0&&O>k?L.next(O-k):(!D&&P(O),p)}}}const $le=n=>{const e=({timestamp:t})=>n(t);return{start:()=>ni.update(e,!0),stop:()=>yl(e),now:()=>ls.isProcessing?ls.timestamp:performance.now()}},KB=2e4;function QB(n){let e=0;const t=50;let i=n.next(e);for(;!i.done&&e<KB;)e+=t,i=n.next(e);return e>=KB?1/0:e}const jle={decay:YB,inertia:YB,tween:DA,keyframes:DA,spring:ez};function LA({autoplay:n=!0,delay:e=0,driver:t=$le,keyframes:i,type:r="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:a="loop",onPlay:l,onStop:u,onComplete:d,onUpdate:h,...p}){let v=1,_=!1,w,S;const A=()=>{S=new Promise(J=>{w=J})};A();let b;const C=jle[r]||DA;let P;C!==DA&&typeof i[0]!="number"&&(P=YS([0,100],i,{clamp:!1}),i=[0,100]);const k=C({...p,keyframes:i});let L;a==="mirror"&&(L=C({...p,keyframes:[...i].reverse(),velocity:-(p.velocity||0)}));let N="idle",O=null,D=null,U=null;k.calculatedDuration===null&&s&&(k.calculatedDuration=QB(k));const{calculatedDuration:X}=k;let Z=1/0,he=1/0;X!==null&&(Z=X+o,he=Z*(s+1)-o);let Q=0;const ue=J=>{if(D===null)return;v>0&&(D=Math.min(D,J)),v<0&&(D=Math.min(J-he/v,D)),O!==null?Q=O:Q=Math.round(J-D)*v;const se=Q-e*(v>=0?1:-1),me=v>=0?se<0:se>he;Q=Math.max(se,0),N==="finished"&&O===null&&(Q=he);let Se=Q,ke=k;if(s){const at=Math.min(Q,he)/Z;let ut=Math.floor(at),gt=at%1;!gt&&at>=1&&(gt=1),gt===1&&ut--,ut=Math.min(ut,s+1),!!(ut%2)&&(a==="reverse"?(gt=1-gt,o&&(gt-=o/Z)):a==="mirror"&&(ke=L)),Se=Ud(0,1,gt)*Z}const Ie=me?{done:!1,value:i[0]}:ke.next(Se);P&&(Ie.value=P(Ie.value));let{done:ze}=Ie;!me&&X!==null&&(ze=v>=0?Q>=he:Q<=0);const je=O===null&&(N==="finished"||N==="running"&&ze);return h&&h(Ie.value),je&&$(),Ie},re=()=>{b&&b.stop(),b=void 0},ye=()=>{N="idle",re(),w(),A(),D=U=null},$=()=>{N="finished",d&&d(),re(),w()},oe=()=>{if(_)return;b||(b=t(ue));const J=b.now();l&&l(),O!==null?D=J-O:(!D||N==="finished")&&(D=J),N==="finished"&&A(),U=D,O=null,N="running",b.start()};n&&oe();const W={then(J,se){return S.then(J,se)},get time(){return nc(Q)},set time(J){J=bh(J),Q=J,O!==null||!b||v===0?O=J:D=b.now()-J/v},get duration(){const J=k.calculatedDuration===null?QB(k):k.calculatedDuration;return nc(J)},get speed(){return v},set speed(J){J===v||!b||(v=J,W.time=nc(Q))},get state(){return N},play:oe,pause:()=>{N="paused",O=Q},stop:()=>{_=!0,N!=="idle"&&(N="idle",u&&u(),ye())},cancel:()=>{U!==null&&ue(U),ye()},complete:()=>{N="finished"},sample:J=>(D=0,ue(J))};return W}function eue(n){let e;return()=>(e===void 0&&(e=n()),e)}const tue=eue(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),nue=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),uw=10,iue=2e4,rue=(n,e)=>e.type==="spring"||n==="backgroundColor"||!DG(e.ease);function sue(n,e,{onUpdate:t,onComplete:i,...r}){if(!(tue()&&nue.has(e)&&!r.repeatDelay&&r.repeatType!=="mirror"&&r.damping!==0&&r.type!=="inertia"))return!1;let o=!1,a,l,u=!1;const d=()=>{l=new Promise(C=>{a=C})};d();let{keyframes:h,duration:p=300,ease:v,times:_}=r;if(rue(e,r)){const C=LA({...r,repeat:0,delay:0});let P={done:!1,value:h[0]};const k=[];let L=0;for(;!P.done&&L<iue;)P=C.sample(L),k.push(P.value),L+=uw;_=void 0,h=k,p=L-uw,v="linear"}const w=mle(n.owner.current,e,h,{...r,duration:p,ease:v,times:_}),S=()=>{u=!1,w.cancel()},A=()=>{u=!0,ni.update(S),a(),d()};return w.onfinish=()=>{u||(n.set(gle(h,r)),i&&i(),A())},{then(C,P){return l.then(C,P)},attachTimeline(C){return w.timeline=C,w.onfinish=null,tr},get time(){return nc(w.currentTime||0)},set time(C){w.currentTime=bh(C)},get speed(){return w.playbackRate},set speed(C){w.playbackRate=C},get duration(){return nc(p)},play:()=>{o||(w.play(),yl(S))},pause:()=>w.pause(),stop:()=>{if(o=!0,w.playState==="idle")return;const{currentTime:C}=w;if(C){const P=LA({...r,autoplay:!1});n.setWithVelocity(P.sample(C-uw).value,P.sample(C).value,uw)}A()},complete:()=>{u||w.finish()},cancel:A}}function oue({keyframes:n,delay:e,onUpdate:t,onComplete:i}){const r=()=>(t&&t(n[n.length-1]),i&&i(),{time:0,speed:1,duration:0,play:tr,pause:tr,stop:tr,then:s=>(s(),Promise.resolve()),cancel:tr,complete:tr});return e?LA({keyframes:[0,1],duration:0,delay:e,onComplete:r}):r()}const aue={type:"spring",stiffness:500,damping:25,restSpeed:10},lue=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),uue={type:"keyframes",duration:.8},cue={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},due=(n,{keyframes:e})=>e.length>2?uue:ep.has(n)?n.startsWith("scale")?lue(e[1]):aue:cue,tC=(n,e)=>n==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Od.test(e)||e==="0")&&!e.startsWith("url(")),fue=new Set(["brightness","contrast","saturate","opacity"]);function hue(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[i]=t.match(qS)||[];if(!i)return n;const r=t.replace(i,"");let s=fue.has(e)?1:0;return i!==t&&(s*=100),e+"("+s+r+")"}const pue=/([a-z-]*)\(.*?\)/g,nC={...Od,getAnimatableNone:n=>{const e=n.match(pue);return e?e.map(hue).join(" "):n}},mue={...gG,color:Ks,backgroundColor:Ks,outlineColor:Ks,fill:Ks,stroke:Ks,borderColor:Ks,borderTopColor:Ks,borderRightColor:Ks,borderBottomColor:Ks,borderLeftColor:Ks,filter:nC,WebkitFilter:nC},ZR=n=>mue[n];function tz(n,e){let t=ZR(n);return t!==nC&&(t=Od),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const nz=n=>/^0[^.\s]+$/.test(n);function gue(n){if(typeof n=="number")return n===0;if(n!==null)return n==="none"||n==="0"||nz(n)}function vue(n,e,t,i){const r=tC(e,t);let s;Array.isArray(t)?s=[...t]:s=[null,t];const o=i.from!==void 0?i.from:n.get();let a;const l=[];for(let u=0;u<s.length;u++)s[u]===null&&(s[u]=u===0?o:s[u-1]),gue(s[u])&&l.push(u),typeof s[u]=="string"&&s[u]!=="none"&&s[u]!=="0"&&(a=s[u]);if(r&&l.length&&a)for(let u=0;u<l.length;u++){const d=l[u];s[d]=tz(e,a)}return s}function yue({when:n,delay:e,delayChildren:t,staggerChildren:i,staggerDirection:r,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:u,...d}){return!!Object.keys(d).length}function $R(n,e){return n[e]||n.default||n}const _ue={skipAnimations:!1},jR=(n,e,t,i={})=>r=>{const s=$R(i,n)||{},o=s.delay||i.delay||0;let{elapsed:a=0}=i;a=a-bh(o);const l=vue(e,n,t,s),u=l[0],d=l[l.length-1],h=tC(n,u),p=tC(n,d);let v={keyframes:l,velocity:e.getVelocity(),ease:"easeOut",...s,delay:-a,onUpdate:_=>{e.set(_),s.onUpdate&&s.onUpdate(_)},onComplete:()=>{r(),s.onComplete&&s.onComplete()}};if(yue(s)||(v={...v,...due(n,v)}),v.duration&&(v.duration=bh(v.duration)),v.repeatDelay&&(v.repeatDelay=bh(v.repeatDelay)),!h||!p||ple.current||s.type===!1||_ue.skipAnimations)return oue(v);if(!i.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const _=sue(e,n,v);if(_)return _}return LA(v)};function BA(n){return!!(Ro(n)&&n.add)}const iz=n=>/^\-?\d*\.?\d+$/.test(n);function eP(n,e){n.indexOf(e)===-1&&n.push(e)}function tP(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}class nP{constructor(){this.subscriptions=[]}add(e){return eP(this.subscriptions,e),()=>tP(this.subscriptions,e)}notify(e,t,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,t,i);else for(let s=0;s<r;s++){const o=this.subscriptions[s];o&&o(e,t,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const xue=n=>!isNaN(parseFloat(n)),Nv={current:void 0};class wue{constructor(e,t={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(i,r=!0)=>{this.prev=this.current,this.current=i;const{delta:s,timestamp:o}=ls;this.lastUpdated!==o&&(this.timeDelta=s,this.lastUpdated=o,ni.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>ni.postRender(this.velocityCheck),this.velocityCheck=({timestamp:i})=>{i!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=xue(this.current),this.owner=t.owner}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new nP);const i=this.events[e].add(t);return e==="change"?()=>{i(),ni.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,i){this.set(t),this.prev=e,this.timeDelta=i}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return Nv.current&&Nv.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?QR(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function gl(n,e){return new wue(n,e)}const rz=n=>e=>e.test(n),Aue={test:n=>n==="auto",parse:n=>n},sz=[tp,pn,Kl,nd,Rae,bae,Aue],sv=n=>sz.find(rz(n)),Sue=[...sz,Ks,Od],Eue=n=>Sue.find(rz(n));function Tue(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,gl(t))}function Mue(n,e){const t=XS(n,e);let{transitionEnd:i={},transition:r={},...s}=t?n.makeTargetAnimatable(t,!1):{};s={...s,...i};for(const o in s){const a=Vae(s[o]);Tue(n,o,a)}}function Cue(n,e,t){var i,r;const s=Object.keys(e).filter(a=>!n.hasValue(a)),o=s.length;if(o)for(let a=0;a<o;a++){const l=s[a],u=e[l];let d=null;Array.isArray(u)&&(d=u[0]),d===null&&(d=(r=(i=t[l])!==null&&i!==void 0?i:n.readValue(l))!==null&&r!==void 0?r:e[l]),d!=null&&(typeof d=="string"&&(iz(d)||nz(d))?d=parseFloat(d):!Eue(d)&&Od.test(u)&&(d=tz(l,u)),n.addValue(l,gl(d,{owner:n})),t[l]===void 0&&(t[l]=d),d!==null&&n.setBaseTarget(l,d))}}function bue(n,e){return e?(e[n]||e.default||e).from:void 0}function Rue(n,e,t){const i={};for(const r in n){const s=bue(r,e);if(s!==void 0)i[r]=s;else{const o=t.getValue(r);o&&(i[r]=o.get())}}return i}function Pue({protectedKeys:n,needsAnimating:e},t){const i=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,i}function Iue(n,e){const t=n.get();if(Array.isArray(e)){for(let i=0;i<e.length;i++)if(e[i]!==t)return!0}else return t!==e}function oz(n,e,{delay:t=0,transitionOverride:i,type:r}={}){let{transition:s=n.getDefaultTransition(),transitionEnd:o,...a}=n.makeTargetAnimatable(e);const l=n.getValue("willChange");i&&(s=i);const u=[],d=r&&n.animationState&&n.animationState.getState()[r];for(const h in a){const p=n.getValue(h),v=a[h];if(!p||v===void 0||d&&Pue(d,h))continue;const _={delay:t,elapsed:0,...$R(s||{},h)};if(window.HandoffAppearAnimations){const A=n.getProps()[uG];if(A){const b=window.HandoffAppearAnimations(A,h,p,ni);b!==null&&(_.elapsed=b,_.isHandoff=!0)}}let w=!_.isHandoff&&!Iue(p,v);if(_.type==="spring"&&(p.getVelocity()||_.velocity)&&(w=!1),p.animation&&(w=!1),w)continue;p.start(jR(h,p,v,n.shouldReduceMotion&&ep.has(h)?{type:!1}:_));const S=p.animation;BA(l)&&(l.add(h),S.then(()=>l.remove(h))),u.push(S)}return o&&Promise.all(u).then(()=>{o&&Mue(n,o)}),u}function iC(n,e,t={}){const i=XS(n,e,t.custom);let{transition:r=n.getDefaultTransition()||{}}=i||{};t.transitionOverride&&(r=t.transitionOverride);const s=i?()=>Promise.all(oz(n,i,t)):()=>Promise.resolve(),o=n.variantChildren&&n.variantChildren.size?(l=0)=>{const{delayChildren:u=0,staggerChildren:d,staggerDirection:h}=r;return Due(n,e,u+l,d,h,t)}:()=>Promise.resolve(),{when:a}=r;if(a){const[l,u]=a==="beforeChildren"?[s,o]:[o,s];return l().then(()=>u())}else return Promise.all([s(),o(t.delay)])}function Due(n,e,t=0,i=0,r=1,s){const o=[],a=(n.variantChildren.size-1)*i,l=r===1?(u=0)=>u*i:(u=0)=>a-u*i;return Array.from(n.variantChildren).sort(Lue).forEach((u,d)=>{u.notify("AnimationStart",e),o.push(iC(u,e,{...s,delay:t+l(d)}).then(()=>u.notify("AnimationComplete",e)))}),Promise.all(o)}function Lue(n,e){return n.sortNodePosition(e)}function Bue(n,e,t={}){n.notify("AnimationStart",e);let i;if(Array.isArray(e)){const r=e.map(s=>iC(n,s,t));i=Promise.all(r)}else if(typeof e=="string")i=iC(n,e,t);else{const r=typeof e=="function"?XS(n,e,t.custom):e;i=Promise.all(oz(n,r,t))}return i.then(()=>n.notify("AnimationComplete",e))}const Nue=[...kR].reverse(),kue=kR.length;function Fue(n){return e=>Promise.all(e.map(({animation:t,options:i})=>Bue(n,t,i)))}function Uue(n){let e=Fue(n);const t=Hue();let i=!0;const r=(l,u)=>{const d=XS(n,u);if(d){const{transition:h,transitionEnd:p,...v}=d;l={...l,...v,...p}}return l};function s(l){e=l(n)}function o(l,u){const d=n.getProps(),h=n.getVariantContext(!0)||{},p=[],v=new Set;let _={},w=1/0;for(let A=0;A<kue;A++){const b=Nue[A],C=t[b],P=d[b]!==void 0?d[b]:h[b],k=My(P),L=b===u?C.isActive:null;L===!1&&(w=A);let N=P===h[b]&&P!==d[b]&&k;if(N&&i&&n.manuallyAnimateOnMount&&(N=!1),C.protectedKeys={..._},!C.isActive&&L===null||!P&&!C.prevProp||VS(P)||typeof P=="boolean")continue;let D=Oue(C.prevProp,P)||b===u&&C.isActive&&!N&&k||A>w&&k,U=!1;const X=Array.isArray(P)?P:[P];let Z=X.reduce(r,{});L===!1&&(Z={});const{prevResolvedValues:he={}}=C,Q={...he,...Z},ue=re=>{D=!0,v.has(re)&&(U=!0,v.delete(re)),C.needsAnimating[re]=!0};for(const re in Q){const ye=Z[re],$=he[re];if(_.hasOwnProperty(re))continue;let oe=!1;PA(ye)&&PA($)?oe=!PG(ye,$):oe=ye!==$,oe?ye!==void 0?ue(re):v.add(re):ye!==void 0&&v.has(re)?ue(re):C.protectedKeys[re]=!0}C.prevProp=P,C.prevResolvedValues=Z,C.isActive&&(_={..._,...Z}),i&&n.blockInitialAnimation&&(D=!1),D&&(!N||U)&&p.push(...X.map(re=>({animation:re,options:{type:b,...l}})))}if(v.size){const A={};v.forEach(b=>{const C=n.getBaseTarget(b);C!==void 0&&(A[b]=C)}),p.push({animation:A})}let S=!!p.length;return i&&(d.initial===!1||d.initial===d.animate)&&!n.manuallyAnimateOnMount&&(S=!1),i=!1,S?e(p):Promise.resolve()}function a(l,u,d){var h;if(t[l].isActive===u)return Promise.resolve();(h=n.variantChildren)===null||h===void 0||h.forEach(v=>{var _;return(_=v.animationState)===null||_===void 0?void 0:_.setActive(l,u)}),t[l].isActive=u;const p=o(d,l);for(const v in t)t[v].protectedKeys={};return p}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>t}}function Oue(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!PG(e,n):!1}function Yf(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Hue(){return{animate:Yf(!0),whileInView:Yf(),whileHover:Yf(),whileTap:Yf(),whileDrag:Yf(),whileFocus:Yf(),exit:Yf()}}class Gue extends Xd{constructor(e){super(e),e.animationState||(e.animationState=Uue(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),VS(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){}}let zue=0;class Vue extends Xd{constructor(){super(...arguments),this.id=zue++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t,custom:i}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e,{custom:i??this.node.getProps().custom});t&&!e&&s.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const Wue={animation:{Feature:Gue},exit:{Feature:Vue}},ZB=(n,e)=>Math.abs(n-e);function que(n,e){const t=ZB(n.x,e.x),i=ZB(n.y,e.y);return Math.sqrt(t**2+i**2)}class az{constructor(e,t,{transformPagePoint:i,contextWindow:r,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=s1(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,v=que(h.offset,{x:0,y:0})>=3;if(!p&&!v)return;const{point:_}=h,{timestamp:w}=ls;this.history.push({..._,timestamp:w});const{onStart:S,onMove:A}=this.handlers;p||(S&&S(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),A&&A(this.lastMoveEvent,h)},this.handlePointerMove=(h,p)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=r1(p,this.transformPagePoint),ni.update(this.updatePoint,!0)},this.handlePointerUp=(h,p)=>{this.end();const{onEnd:v,onSessionEnd:_,resumeAnimation:w}=this.handlers;if(this.dragSnapToOrigin&&w&&w(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const S=s1(h.type==="pointercancel"?this.lastMoveEventInfo:r1(p,this.transformPagePoint),this.history);this.startEvent&&v&&v(h,S),_&&_(h,S)},!TG(e))return;this.dragSnapToOrigin=s,this.handlers=t,this.transformPagePoint=i,this.contextWindow=r||window;const o=JS(e),a=r1(o,this.transformPagePoint),{point:l}=a,{timestamp:u}=ls;this.history=[{...l,timestamp:u}];const{onSessionStart:d}=t;d&&d(e,s1(a,this.history)),this.removeListeners=bd(tc(this.contextWindow,"pointermove",this.handlePointerMove),tc(this.contextWindow,"pointerup",this.handlePointerUp),tc(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),yl(this.updatePoint)}}function r1(n,e){return e?{point:e(n.point)}:n}function $B(n,e){return{x:n.x-e.x,y:n.y-e.y}}function s1({point:n},e){return{point:n,delta:$B(n,lz(e)),offset:$B(n,Jue(e)),velocity:Xue(e,.1)}}function Jue(n){return n[0]}function lz(n){return n[n.length-1]}function Xue(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,i=null;const r=lz(n);for(;t>=0&&(i=n[t],!(r.timestamp-i.timestamp>bh(e)));)t--;if(!i)return{x:0,y:0};const s=nc(r.timestamp-i.timestamp);if(s===0)return{x:0,y:0};const o={x:(r.x-i.x)/s,y:(r.y-i.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function ia(n){return n.max-n.min}function rC(n,e=0,t=.01){return Math.abs(n-e)<=t}function jB(n,e,t,i=.5){n.origin=i,n.originPoint=Ji(e.min,e.max,n.origin),n.scale=ia(t)/ia(e),(rC(n.scale,1,1e-4)||isNaN(n.scale))&&(n.scale=1),n.translate=Ji(t.min,t.max,n.origin)-n.originPoint,(rC(n.translate)||isNaN(n.translate))&&(n.translate=0)}function kv(n,e,t,i){jB(n.x,e.x,t.x,i?i.originX:void 0),jB(n.y,e.y,t.y,i?i.originY:void 0)}function eN(n,e,t){n.min=t.min+e.min,n.max=n.min+ia(e)}function Yue(n,e,t){eN(n.x,e.x,t.x),eN(n.y,e.y,t.y)}function tN(n,e,t){n.min=e.min-t.min,n.max=n.min+ia(e)}function Fv(n,e,t){tN(n.x,e.x,t.x),tN(n.y,e.y,t.y)}function Kue(n,{min:e,max:t},i){return e!==void 0&&n<e?n=i?Ji(e,n,i.min):Math.max(n,e):t!==void 0&&n>t&&(n=i?Ji(t,n,i.max):Math.min(n,t)),n}function nN(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function Que(n,{top:e,left:t,bottom:i,right:r}){return{x:nN(n.x,t,r),y:nN(n.y,e,i)}}function iN(n,e){let t=e.min-n.min,i=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,i]=[i,t]),{min:t,max:i}}function Zue(n,e){return{x:iN(n.x,e.x),y:iN(n.y,e.y)}}function $ue(n,e){let t=.5;const i=ia(n),r=ia(e);return r>i?t=Mg(e.min,e.max-i,n.min):i>r&&(t=Mg(n.min,n.max-r,e.min)),Ud(0,1,t)}function jue(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const sC=.35;function ece(n=sC){return n===!1?n=0:n===!0&&(n=sC),{x:rN(n,"left","right"),y:rN(n,"top","bottom")}}function rN(n,e,t){return{min:sN(n,e),max:sN(n,t)}}function sN(n,e){return typeof n=="number"?n:n[e]||0}const oN=()=>({translate:0,scale:1,origin:0,originPoint:0}),Gm=()=>({x:oN(),y:oN()}),aN=()=>({min:0,max:0}),_r=()=>({x:aN(),y:aN()});function xa(n){return[n("x"),n("y")]}function uz({top:n,left:e,right:t,bottom:i}){return{x:{min:e,max:t},y:{min:n,max:i}}}function tce({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function nce(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),i=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:i.y,right:i.x}}function o1(n){return n===void 0||n===1}function oC({scale:n,scaleX:e,scaleY:t}){return!o1(n)||!o1(e)||!o1(t)}function th(n){return oC(n)||cz(n)||n.z||n.rotate||n.rotateX||n.rotateY}function cz(n){return lN(n.x)||lN(n.y)}function lN(n){return n&&n!=="0%"}function NA(n,e,t){const i=n-t,r=e*i;return t+r}function uN(n,e,t,i,r){return r!==void 0&&(n=NA(n,r,i)),NA(n,t,i)+e}function aC(n,e=0,t=1,i,r){n.min=uN(n.min,e,t,i,r),n.max=uN(n.max,e,t,i,r)}function dz(n,{x:e,y:t}){aC(n.x,e.translate,e.scale,e.originPoint),aC(n.y,t.translate,t.scale,t.originPoint)}function ice(n,e,t,i=!1){const r=t.length;if(!r)return;e.x=e.y=1;let s,o;for(let a=0;a<r;a++){s=t[a],o=s.projectionDelta;const l=s.instance;l&&l.style&&l.style.display==="contents"||(i&&s.options.layoutScroll&&s.scroll&&s!==s.root&&zm(n,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,dz(n,o)),i&&th(s.latestValues)&&zm(n,s.latestValues))}e.x=cN(e.x),e.y=cN(e.y)}function cN(n){return Number.isInteger(n)||n>1.0000000000001||n<.999999999999?n:1}function sd(n,e){n.min=n.min+e,n.max=n.max+e}function dN(n,e,[t,i,r]){const s=e[r]!==void 0?e[r]:.5,o=Ji(n.min,n.max,s);aC(n,e[t],e[i],o,e.scale)}const rce=["x","scaleX","originX"],sce=["y","scaleY","originY"];function zm(n,e){dN(n.x,e,rce),dN(n.y,e,sce)}function fz(n,e){return uz(nce(n.getBoundingClientRect(),e))}function oce(n,e,t){const i=fz(n,t),{scroll:r}=e;return r&&(sd(i.x,r.offset.x),sd(i.y,r.offset.y)),i}const hz=({current:n})=>n?n.ownerDocument.defaultView:null,ace=new WeakMap;class lce{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=_r(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const r=d=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(JS(d,"page").point)},s=(d,h)=>{const{drag:p,dragPropagation:v,onDragStart:_}=this.getProps();if(p&&!v&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=CG(p),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),xa(S=>{let A=this.getAxisMotionValue(S).get()||0;if(Kl.test(A)){const{projection:b}=this.visualElement;if(b&&b.layout){const C=b.layout.layoutBox[S];C&&(A=ia(C)*(parseFloat(A)/100))}}this.originPoint[S]=A}),_&&ni.update(()=>_(d,h),!1,!0);const{animationState:w}=this.visualElement;w&&w.setActive("whileDrag",!0)},o=(d,h)=>{const{dragPropagation:p,dragDirectionLock:v,onDirectionLock:_,onDrag:w}=this.getProps();if(!p&&!this.openGlobalLock)return;const{offset:S}=h;if(v&&this.currentDirection===null){this.currentDirection=uce(S),this.currentDirection!==null&&_&&_(this.currentDirection);return}this.updateAxis("x",h.point,S),this.updateAxis("y",h.point,S),this.visualElement.render(),w&&w(d,h)},a=(d,h)=>this.stop(d,h),l=()=>xa(d=>{var h;return this.getAnimationState(d)==="paused"&&((h=this.getAxisMotionValue(d).animation)===null||h===void 0?void 0:h.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new az(e,{onSessionStart:r,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:hz(this.visualElement)})}stop(e,t){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:r}=t;this.startAnimation(r);const{onDragEnd:s}=this.getProps();s&&ni.update(()=>s(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,i){const{drag:r}=this.getProps();if(!i||!cw(e,r,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(o=Kue(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:i}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;t&&Om(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=Que(r.layoutBox,t):this.constraints=!1,this.elastic=ece(i),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&xa(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=jue(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Om(e))return!1;const i=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const s=oce(i,r.root,this.visualElement.getTransformPagePoint());let o=Zue(r.layout.layoutBox,s);if(t){const a=t(tce(o));this.hasMutatedConstraints=!!a,a&&(o=uz(a))}return o}startAnimation(e){const{drag:t,dragMomentum:i,dragElastic:r,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},u=xa(d=>{if(!cw(d,t,this.currentDirection))return;let h=l&&l[d]||{};o&&(h={min:0,max:0});const p=r?200:1e6,v=r?40:1e7,_={type:"inertia",velocity:i?e[d]:0,bounceStiffness:p,bounceDamping:v,timeConstant:750,restDelta:1,restSpeed:10,...s,...h};return this.startAxisValueAnimation(d,_)});return Promise.all(u).then(a)}startAxisValueAnimation(e,t){const i=this.getAxisMotionValue(e);return i.start(jR(e,i,0,t))}stopAnimation(){xa(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){xa(e=>{var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.state}getAxisMotionValue(e){const t="_drag"+e.toUpperCase(),i=this.visualElement.getProps(),r=i[t];return r||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){xa(t=>{const{drag:i}=this.getProps();if(!cw(t,i,this.currentDirection))return;const{projection:r}=this.visualElement,s=this.getAxisMotionValue(t);if(r&&r.layout){const{min:o,max:a}=r.layout.layoutBox[t];s.set(e[t]-Ji(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:i}=this.visualElement;if(!Om(t)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};xa(o=>{const a=this.getAxisMotionValue(o);if(a){const l=a.get();r[o]=$ue({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),xa(o=>{if(!cw(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:u}=this.constraints[o];a.set(Ji(l,u,r[o]))})}addListeners(){if(!this.visualElement.current)return;ace.set(this.visualElement,this);const e=this.visualElement.current,t=tc(e,"pointerdown",l=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(l)}),i=()=>{const{dragConstraints:l}=this.getProps();Om(l)&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,s=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),i();const o=Zu(window,"resize",()=>this.scalePositionWithinConstraints()),a=r.addEventListener("didUpdate",(({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(xa(d=>{const h=this.getAxisMotionValue(d);h&&(this.originPoint[d]+=l[d].translate,h.set(h.get()+l[d].translate))}),this.visualElement.render())}));return()=>{o(),t(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:s=!1,dragElastic:o=sC,dragMomentum:a=!0}=e;return{...e,drag:t,dragDirectionLock:i,dragPropagation:r,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function cw(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function uce(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class cce extends Xd{constructor(e){super(e),this.removeGroupControls=tr,this.removeListeners=tr,this.controls=new lce(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||tr}unmount(){this.removeGroupControls(),this.removeListeners()}}const fN=n=>(e,t)=>{n&&ni.update(()=>n(e,t))};class dce extends Xd{constructor(){super(...arguments),this.removePointerDownListener=tr}onPointerDown(e){this.session=new az(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:hz(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:fN(e),onStart:fN(t),onMove:i,onEnd:(s,o)=>{delete this.session,r&&ni.update(()=>r(s,o))}}}mount(){this.removePointerDownListener=tc(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function fce(){const n=ie.useContext(GS);if(n===null)return[!0,null];const{isPresent:e,onExitComplete:t,register:i}=n,r=ie.useId();return ie.useEffect(()=>i(r),[]),!e&&t?[!1,()=>t&&t(r)]:[!0]}const Ow={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function hN(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const ov={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(pn.test(n))n=parseFloat(n);else return n;const t=hN(n,e.target.x),i=hN(n,e.target.y);return`${t}% ${i}%`}},hce={correct:(n,{treeScale:e,projectionDelta:t})=>{const i=n,r=Od.parse(n);if(r.length>5)return i;const s=Od.createTransformer(n),o=typeof r[0]!="number"?1:0,a=t.x.scale*e.x,l=t.y.scale*e.y;r[0+o]/=a,r[1+o]/=l;const u=Ji(a,l,.5);return typeof r[2+o]=="number"&&(r[2+o]/=u),typeof r[3+o]=="number"&&(r[3+o]/=u),s(r)}};class pce extends _d.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i,layoutId:r}=this.props,{projection:s}=e;wae(mce),s&&(t.group&&t.group.add(s),i&&i.register&&r&&i.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),Ow.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:i,drag:r,isPresent:s}=this.props,o=i.projection;return o&&(o.isPresent=s,r||e.layoutDependency!==t||t===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||ni.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function pz(n){const[e,t]=fce(),i=ie.useContext(UR);return _d.createElement(pce,{...n,layoutGroup:i,switchLayoutGroup:ie.useContext(dG),isPresent:e,safeToRemove:t})}const mce={borderRadius:{...ov,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:ov,borderTopRightRadius:ov,borderBottomLeftRadius:ov,borderBottomRightRadius:ov,boxShadow:hce},mz=["TopLeft","TopRight","BottomLeft","BottomRight"],gce=mz.length,pN=n=>typeof n=="string"?parseFloat(n):n,mN=n=>typeof n=="number"||pn.test(n);function vce(n,e,t,i,r,s){r?(n.opacity=Ji(0,t.opacity!==void 0?t.opacity:1,yce(i)),n.opacityExit=Ji(e.opacity!==void 0?e.opacity:1,0,_ce(i))):s&&(n.opacity=Ji(e.opacity!==void 0?e.opacity:1,t.opacity!==void 0?t.opacity:1,i));for(let o=0;o<gce;o++){const a=`border${mz[o]}Radius`;let l=gN(e,a),u=gN(t,a);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||mN(l)===mN(u)?(n[a]=Math.max(Ji(pN(l),pN(u),i),0),(Kl.test(u)||Kl.test(l))&&(n[a]+="%")):n[a]=u}(e.rotate||t.rotate)&&(n.rotate=Ji(e.rotate||0,t.rotate||0,i))}function gN(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const yce=gz(0,.5,OG),_ce=gz(.5,.95,tr);function gz(n,e,t){return i=>i<n?0:i>e?1:t(Mg(n,e,i))}function vN(n,e){n.min=e.min,n.max=e.max}function ya(n,e){vN(n.x,e.x),vN(n.y,e.y)}function yN(n,e,t,i,r){return n-=e,n=NA(n,1/t,i),r!==void 0&&(n=NA(n,1/r,i)),n}function xce(n,e=0,t=1,i=.5,r,s=n,o=n){if(Kl.test(e)&&(e=parseFloat(e),e=Ji(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=Ji(s.min,s.max,i);n===s&&(a-=e),n.min=yN(n.min,e,t,a,r),n.max=yN(n.max,e,t,a,r)}function _N(n,e,[t,i,r],s,o){xce(n,e[t],e[i],e[r],e.scale,s,o)}const wce=["x","scaleX","originX"],Ace=["y","scaleY","originY"];function xN(n,e,t,i){_N(n.x,e,wce,t?t.x:void 0,i?i.x:void 0),_N(n.y,e,Ace,t?t.y:void 0,i?i.y:void 0)}function wN(n){return n.translate===0&&n.scale===1}function vz(n){return wN(n.x)&&wN(n.y)}function Sce(n,e){return n.x.min===e.x.min&&n.x.max===e.x.max&&n.y.min===e.y.min&&n.y.max===e.y.max}function yz(n,e){return Math.round(n.x.min)===Math.round(e.x.min)&&Math.round(n.x.max)===Math.round(e.x.max)&&Math.round(n.y.min)===Math.round(e.y.min)&&Math.round(n.y.max)===Math.round(e.y.max)}function AN(n){return ia(n.x)/ia(n.y)}class Ece{constructor(){this.members=[]}add(e){eP(this.members,e),e.scheduleRender()}remove(e){if(tP(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(r=>e===r);if(t===0)return!1;let i;for(let r=t;r>=0;r--){const s=this.members[r];if(s.isPresent!==!1){i=s;break}}return i?(this.promote(i),!0):!1}promote(e,t){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,t&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:i}=e;t.onExitComplete&&t.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function SN(n,e,t){let i="";const r=n.x.translate/e.x,s=n.y.translate/e.y;if((r||s)&&(i=`translate3d(${r}px, ${s}px, 0) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),t){const{rotate:l,rotateX:u,rotateY:d}=t;l&&(i+=`rotate(${l}deg) `),u&&(i+=`rotateX(${u}deg) `),d&&(i+=`rotateY(${d}deg) `)}const o=n.x.scale*e.x,a=n.y.scale*e.y;return(o!==1||a!==1)&&(i+=`scale(${o}, ${a})`),i||"none"}const Tce=(n,e)=>n.depth-e.depth;class Mce{constructor(){this.children=[],this.isDirty=!1}add(e){eP(this.children,e),this.isDirty=!0}remove(e){tP(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Tce),this.isDirty=!1,this.children.forEach(e)}}function Cce(n,e){const t=performance.now(),i=({timestamp:r})=>{const s=r-t;s>=e&&(yl(i),n(s-e))};return ni.read(i,!0),()=>yl(i)}function bce(n){window.MotionDebug&&window.MotionDebug.record(n)}function Rce(n){return n instanceof SVGElement&&n.tagName!=="svg"}function Pce(n,e,t){const i=Ro(n)?n:gl(n);return i.start(jR("",i,e,t)),i.animation}const EN=["","X","Y","Z"],Ice={visibility:"hidden"},TN=1e3;let Dce=0;const nh={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function _z({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(o={},a=e==null?void 0:e()){this.id=Dce++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,nh.totalNodes=nh.resolvedTargetDeltas=nh.recalculatedProjection=0,this.nodes.forEach(Nce),this.nodes.forEach(Hce),this.nodes.forEach(Gce),this.nodes.forEach(kce),bce(nh)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new Mce)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new nP),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=Rce(o),this.instance=o;const{layoutId:l,layout:u,visualElement:d}=this.options;if(d&&!d.current&&d.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(u||l)&&(this.isLayoutDirty=!0),n){let h;const p=()=>this.root.updateBlockedByResize=!1;n(o,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=Cce(p,250),Ow.hasAnimatedSinceResize&&(Ow.hasAnimatedSinceResize=!1,this.nodes.forEach(CN))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&d&&(l||u)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:p,hasRelativeTargetChanged:v,layout:_})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const w=this.options.transition||d.getDefaultTransition()||Jce,{onLayoutAnimationStart:S,onLayoutAnimationComplete:A}=d.getProps(),b=!this.targetLayout||!yz(this.targetLayout,_)||v,C=!p&&v;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||C||p&&(b||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,C);const P={...$R(w,"layout"),onPlay:S,onComplete:A};(d.shouldReduceMotion||this.options.layoutRoot)&&(P.delay=0,P.type=!1),this.startAnimation(P)}else p||CN(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=_})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,yl(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(zce),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const h=this.path[d];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(MN);return}this.isUpdating||this.nodes.forEach(Uce),this.isUpdating=!1,this.nodes.forEach(Oce),this.nodes.forEach(Lce),this.nodes.forEach(Bce),this.clearAllSnapshots();const a=performance.now();ls.delta=Ud(0,1e3/60,a-ls.timestamp),ls.timestamp=a,ls.isProcessing=!0,QT.update.process(ls),QT.preRender.process(ls),QT.render.process(ls),ls.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(Fce),this.sharedNodes.forEach(Vce)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ni.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ni.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=_r(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:i(this.instance),offset:t(this.instance)})}resetTransform(){if(!r)return;const o=this.isLayoutDirty||this.shouldResetTransform,a=this.projectionDelta&&!vz(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;o&&(a||th(this.latestValues)||d)&&(r(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),Xce(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return _r();const a=o.measureViewportBox(),{scroll:l}=this.root;return l&&(sd(a.x,l.offset.x),sd(a.y,l.offset.y)),a}removeElementScroll(o){const a=_r();ya(a,o);for(let l=0;l<this.path.length;l++){const u=this.path[l],{scroll:d,options:h}=u;if(u!==this.root&&d&&h.layoutScroll){if(d.isRoot){ya(a,o);const{scroll:p}=this.root;p&&(sd(a.x,-p.offset.x),sd(a.y,-p.offset.y))}sd(a.x,d.offset.x),sd(a.y,d.offset.y)}}return a}applyTransform(o,a=!1){const l=_r();ya(l,o);for(let u=0;u<this.path.length;u++){const d=this.path[u];!a&&d.options.layoutScroll&&d.scroll&&d!==d.root&&zm(l,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),th(d.latestValues)&&zm(l,d.latestValues)}return th(this.latestValues)&&zm(l,this.latestValues),l}removeTransform(o){const a=_r();ya(a,o);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!th(u.latestValues))continue;oC(u.latestValues)&&u.updateSnapshot();const d=_r(),h=u.measurePageBox();ya(d,h),xN(a,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return th(this.latestValues)&&xN(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ls.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==l;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:h,layoutId:p}=this.options;if(!(!this.layout||!(h||p))){if(this.resolvedRelativeTargetAt=ls.timestamp,!this.targetDelta&&!this.relativeTarget){const v=this.getClosestProjectingParent();v&&v.layout&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=_r(),this.relativeTargetOrigin=_r(),Fv(this.relativeTargetOrigin,this.layout.layoutBox,v.layout.layoutBox),ya(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=_r(),this.targetWithTransforms=_r()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Yue(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ya(this.target,this.layout.layoutBox),dz(this.target,this.targetDelta)):ya(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const v=this.getClosestProjectingParent();v&&!!v.resumingFrom==!!this.resumingFrom&&!v.options.layoutScroll&&v.target&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=_r(),this.relativeTargetOrigin=_r(),Fv(this.relativeTargetOrigin,this.target,v.target),ya(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}nh.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||oC(this.parent.latestValues)||cz(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let u=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(u=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===ls.timestamp&&(u=!1),u)return;const{layout:d,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||h))return;ya(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,v=this.treeScale.y;ice(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox);const{target:_}=a;if(!_){this.projectionTransform&&(this.projectionDelta=Gm(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Gm(),this.projectionDeltaWithTransform=Gm());const w=this.projectionTransform;kv(this.projectionDelta,this.layoutCorrected,_,this.latestValues),this.projectionTransform=SN(this.projectionDelta,this.treeScale),(this.projectionTransform!==w||this.treeScale.x!==p||this.treeScale.y!==v)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",_)),nh.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,a=!1){const l=this.snapshot,u=l?l.latestValues:{},d={...this.latestValues},h=Gm();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const p=_r(),v=l?l.source:void 0,_=this.layout?this.layout.source:void 0,w=v!==_,S=this.getStack(),A=!S||S.members.length<=1,b=!!(w&&!A&&this.options.crossfade===!0&&!this.path.some(qce));this.animationProgress=0;let C;this.mixTargetDelta=P=>{const k=P/1e3;bN(h.x,o.x,k),bN(h.y,o.y,k),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Fv(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Wce(this.relativeTarget,this.relativeTargetOrigin,p,k),C&&Sce(this.relativeTarget,C)&&(this.isProjectionDirty=!1),C||(C=_r()),ya(C,this.relativeTarget)),w&&(this.animationValues=d,vce(d,u,this.latestValues,k,b,A)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=k},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(yl(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ni.update(()=>{Ow.hasAnimatedSinceResize=!0,this.currentAnimation=Pce(0,TN,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(TN),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:u,latestValues:d}=o;if(!(!a||!l||!u)){if(this!==o&&this.layout&&u&&xz(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||_r();const h=ia(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+h;const p=ia(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+p}ya(a,l),zm(a,d),kv(this.projectionDeltaWithTransform,this.layoutCorrected,a,d)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new Ece),this.sharedNodes.get(o).add(a);const u=a.options.initialPromotionConfig;a.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.rotate||l.rotateX||l.rotateY||l.rotateZ)&&(a=!0),!a)return;const u={};for(let d=0;d<EN.length;d++){const h="rotate"+EN[d];l[h]&&(u[h]=l[h],o.setStaticValue(h,0))}o.render();for(const d in u)o.setStaticValue(d,u[d]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return Ice;const u={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=Uw(o==null?void 0:o.pointerEvents)||"",u.transform=d?d(this.latestValues,""):"none",u;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const w={};return this.options.layoutId&&(w.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,w.pointerEvents=Uw(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!th(this.latestValues)&&(w.transform=d?d({},""):"none",this.hasProjected=!1),w}const p=h.animationValues||h.latestValues;this.applyTransformsToTarget(),u.transform=SN(this.projectionDeltaWithTransform,this.treeScale,p),d&&(u.transform=d(p,u.transform));const{x:v,y:_}=this.projectionDelta;u.transformOrigin=`${v.origin*100}% ${_.origin*100}% 0`,h.animationValues?u.opacity=h===this?(l=(a=p.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:u.opacity=h===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const w in bA){if(p[w]===void 0)continue;const{correct:S,applyTo:A}=bA[w],b=u.transform==="none"?p[w]:S(p[w],h);if(A){const C=A.length;for(let P=0;P<C;P++)u[A[P]]=b}else u[w]=b}return this.options.layoutId&&(u.pointerEvents=h===this?Uw(o==null?void 0:o.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(MN),this.root.sharedNodes.clear()}}}function Lce(n){n.updateLayout()}function Bce(n){var e;const t=((e=n.resumeFrom)===null||e===void 0?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:r}=n.layout,{animationType:s}=n.options,o=t.source!==n.layout.source;s==="size"?xa(h=>{const p=o?t.measuredBox[h]:t.layoutBox[h],v=ia(p);p.min=i[h].min,p.max=p.min+v}):xz(s,t.layoutBox,i)&&xa(h=>{const p=o?t.measuredBox[h]:t.layoutBox[h],v=ia(i[h]);p.max=p.min+v,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[h].max=n.relativeTarget[h].min+v)});const a=Gm();kv(a,i,t.layoutBox);const l=Gm();o?kv(l,n.applyTransform(r,!0),t.measuredBox):kv(l,i,t.layoutBox);const u=!vz(a);let d=!1;if(!n.resumeFrom){const h=n.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:p,layout:v}=h;if(p&&v){const _=_r();Fv(_,t.layoutBox,p.layoutBox);const w=_r();Fv(w,i,v.layoutBox),yz(_,w)||(d=!0),h.options.layoutRoot&&(n.relativeTarget=w,n.relativeTargetOrigin=_,n.relativeParent=h)}}}n.notifyListeners("didUpdate",{layout:i,snapshot:t,delta:l,layoutDelta:a,hasLayoutChanged:u,hasRelativeTargetChanged:d})}else if(n.isLead()){const{onExitComplete:i}=n.options;i&&i()}n.options.transition=void 0}function Nce(n){nh.totalNodes++,n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function kce(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function Fce(n){n.clearSnapshot()}function MN(n){n.clearMeasurements()}function Uce(n){n.isLayoutDirty=!1}function Oce(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function CN(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function Hce(n){n.resolveTargetDelta()}function Gce(n){n.calcProjection()}function zce(n){n.resetRotation()}function Vce(n){n.removeLeadSnapshot()}function bN(n,e,t){n.translate=Ji(e.translate,0,t),n.scale=Ji(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function RN(n,e,t,i){n.min=Ji(e.min,t.min,i),n.max=Ji(e.max,t.max,i)}function Wce(n,e,t,i){RN(n.x,e.x,t.x,i),RN(n.y,e.y,t.y,i)}function qce(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const Jce={duration:.45,ease:[.4,0,.1,1]},PN=n=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(n),IN=PN("applewebkit/")&&!PN("chrome/")?Math.round:tr;function DN(n){n.min=IN(n.min),n.max=IN(n.max)}function Xce(n){DN(n.x),DN(n.y)}function xz(n,e,t){return n==="position"||n==="preserve-aspect"&&!rC(AN(e),AN(t),.2)}const Yce=_z({attachResizeListener:(n,e)=>Zu(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),a1={current:void 0},wz=_z({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!a1.current){const n=new Yce({});n.mount(window),n.setOptions({layoutScroll:!0}),a1.current=n}return a1.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),Kce={pan:{Feature:dce},drag:{Feature:cce,ProjectionNode:wz,MeasureLayout:pz}},Qce=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function Zce(n){const e=Qce.exec(n);if(!e)return[,];const[,t,i]=e;return[t,i]}function lC(n,e,t=1){const[i,r]=Zce(n);if(!i)return;const s=window.getComputedStyle(e).getPropertyValue(i);if(s){const o=s.trim();return iz(o)?parseFloat(o):o}else return ZM(r)?lC(r,e,t+1):r}function $ce(n,{...e},t){const i=n.current;if(!(i instanceof Element))return{target:e,transitionEnd:t};t&&(t={...t}),n.values.forEach(r=>{const s=r.get();if(!ZM(s))return;const o=lC(s,i);o&&r.set(o)});for(const r in e){const s=e[r];if(!ZM(s))continue;const o=lC(s,i);o&&(e[r]=o,t||(t={}),t[r]===void 0&&(t[r]=s))}return{target:e,transitionEnd:t}}const jce=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),Az=n=>jce.has(n),ede=n=>Object.keys(n).some(Az),LN=n=>n===tp||n===pn,BN=(n,e)=>parseFloat(n.split(", ")[e]),NN=(n,e)=>(t,{transform:i})=>{if(i==="none"||!i)return 0;const r=i.match(/^matrix3d\((.+)\)$/);if(r)return BN(r[1],e);{const s=i.match(/^matrix\((.+)\)$/);return s?BN(s[1],n):0}},tde=new Set(["x","y","z"]),nde=o_.filter(n=>!tde.has(n));function ide(n){const e=[];return nde.forEach(t=>{const i=n.getValue(t);i!==void 0&&(e.push([t,i.get()]),i.set(t.startsWith("scale")?1:0))}),e.length&&n.render(),e}const Cg={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:NN(4,13),y:NN(5,14)};Cg.translateX=Cg.x;Cg.translateY=Cg.y;const rde=(n,e,t)=>{const i=e.measureViewportBox(),r=e.current,s=getComputedStyle(r),{display:o}=s,a={};o==="none"&&e.setStaticValue("display",n.display||"block"),t.forEach(u=>{a[u]=Cg[u](i,s)}),e.render();const l=e.measureViewportBox();return t.forEach(u=>{const d=e.getValue(u);d&&d.jump(a[u]),n[u]=Cg[u](l,s)}),n},sde=(n,e,t={},i={})=>{e={...e},i={...i};const r=Object.keys(e).filter(Az);let s=[],o=!1;const a=[];if(r.forEach(l=>{const u=n.getValue(l);if(!n.hasValue(l))return;let d=t[l],h=sv(d);const p=e[l];let v;if(PA(p)){const _=p.length,w=p[0]===null?1:0;d=p[w],h=sv(d);for(let S=w;S<_&&p[S]!==null;S++)v?JR(sv(p[S])===v):v=sv(p[S])}else v=sv(p);if(h!==v)if(LN(h)&&LN(v)){const _=u.get();typeof _=="string"&&u.set(parseFloat(_)),typeof p=="string"?e[l]=parseFloat(p):Array.isArray(p)&&v===pn&&(e[l]=p.map(parseFloat))}else h!=null&&h.transform&&(v!=null&&v.transform)&&(d===0||p===0)?d===0?u.set(v.transform(d)):e[l]=h.transform(p):(o||(s=ide(n),o=!0),a.push(l),i[l]=i[l]!==void 0?i[l]:e[l],u.jump(p))}),a.length){const l=a.indexOf("height")>=0?window.pageYOffset:null,u=rde(e,n,a);return s.length&&s.forEach(([d,h])=>{n.getValue(d).set(h)}),n.render(),zS&&l!==null&&window.scrollTo({top:l}),{target:u,transitionEnd:i}}else return{target:e,transitionEnd:i}};function ode(n,e,t,i){return ede(e)?sde(n,e,t,i):{target:e,transitionEnd:i}}const ade=(n,e,t,i)=>{const r=$ce(n,e,i);return e=r.target,i=r.transitionEnd,ode(n,e,t,i)},uC={current:null},Sz={current:!1};function lde(){if(Sz.current=!0,!!zS)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>uC.current=n.matches;n.addListener(e),e()}else uC.current=!1}function ude(n,e,t){const{willChange:i}=e;for(const r in e){const s=e[r],o=t[r];if(Ro(s))n.addValue(r,s),BA(i)&&i.add(r);else if(Ro(o))n.addValue(r,gl(s,{owner:n})),BA(i)&&i.remove(r);else if(o!==s)if(n.hasValue(r)){const a=n.getValue(r);!a.hasAnimated&&a.set(s)}else{const a=n.getStaticValue(r);n.addValue(r,gl(a!==void 0?a:s,{owner:n}))}}for(const r in t)e[r]===void 0&&n.removeValue(r);return e}const kN=new WeakMap,Ez=Object.keys(Cy),cde=Ez.length,FN=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],dde=FR.length;class fde{constructor({parent:e,props:t,presenceContext:i,reducedMotionConfig:r,visualState:s},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>ni.render(this.render,!1,!0);const{latestValues:a,renderState:l}=s;this.latestValues=a,this.baseTarget={...a},this.initialValues=t.initial?{...a}:{},this.renderState=l,this.parent=e,this.props=t,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=o,this.isControllingVariants=WS(t),this.isVariantNode=cG(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:u,...d}=this.scrapeMotionValuesFromProps(t,{});for(const h in d){const p=d[h];a[h]!==void 0&&Ro(p)&&(p.set(a[h],!1),BA(u)&&u.add(h))}}scrapeMotionValuesFromProps(e,t){return{}}mount(e){this.current=e,kN.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,i)=>this.bindToMotionValue(i,t)),Sz.current||lde(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:uC.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){kN.delete(this.current),this.projection&&this.projection.unmount(),yl(this.notifyUpdate),yl(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,t){const i=ep.has(e),r=t.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&ni.update(this.notifyUpdate,!1,!0),i&&this.projection&&(this.projection.isTransformDirty=!0)}),s=t.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{r(),s()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...t},i,r,s){let o,a;for(let l=0;l<cde;l++){const u=Ez[l],{isEnabled:d,Feature:h,ProjectionNode:p,MeasureLayout:v}=Cy[u];p&&(o=p),d(t)&&(!this.features[u]&&h&&(this.features[u]=new h(this)),v&&(a=v))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:l,layout:u,drag:d,dragConstraints:h,layoutScroll:p,layoutRoot:v}=t;this.projection.setOptions({layoutId:l,layout:u,alwaysMeasureLayout:!!d||h&&Om(h),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof u=="string"?u:"both",initialPromotionConfig:s,layoutScroll:p,layoutRoot:v})}return a}updateFeatures(){for(const e in this.features){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):_r()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}makeTargetAnimatable(e,t=!0){return this.makeTargetAnimatableFromInstance(e,this.props,t)}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let i=0;i<FN.length;i++){const r=FN[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const s=e["on"+r];s&&(this.propEventSubscriptions[r]=this.on(r,s))}this.prevMotionValues=ude(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const i=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(i.initial=this.props.initial),i}const t={};for(let i=0;i<dde;i++){const r=FR[i],s=this.props[r];(My(s)||s===!1)&&(t[r]=s)}return t}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){t!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,t)),this.values.set(e,t),this.latestValues[e]=t.get()}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&t!==void 0&&(i=gl(t,{owner:this}),this.addValue(e,i)),i}readValue(e){var t;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(t=this.getBaseTargetFromProps(this.props,e))!==null&&t!==void 0?t:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:i}=this.props,r=typeof i=="string"||typeof i=="object"?(t=qR(this.props,i))===null||t===void 0?void 0:t[e]:void 0;if(i&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Ro(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new nP),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class Tz extends fde{sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:i}){delete t[e],delete i[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:t,...i},{transformValues:r},s){let o=Rue(i,e||{},this);if(r&&(t&&(t=r(t)),i&&(i=r(i)),o&&(o=r(o))),s){Cue(this,i,o);const a=ade(this,i,o,t);t=a.transitionEnd,i=a.target}return{transition:e,transitionEnd:t,...i}}}function hde(n){return window.getComputedStyle(n)}class pde extends Tz{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,t){if(ep.has(t)){const i=ZR(t);return i&&i.default||0}else{const i=hde(e),r=(pG(t)?i.getPropertyValue(t):i[t])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:t}){return fz(e,t)}build(e,t,i,r){HR(e,t,i,r.transformTemplate)}scrapeMotionValuesFromProps(e,t){return WR(e,t)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Ro(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}renderInstance(e,t,i,r){xG(e,t,i,r)}}class mde extends Tz{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(ep.has(t)){const i=ZR(t);return i&&i.default||0}return t=wG.has(t)?t:NR(t),e.getAttribute(t)}measureInstanceViewportBox(){return _r()}scrapeMotionValuesFromProps(e,t){return SG(e,t)}build(e,t,i,r){zR(e,t,i,this.isSVGTag,r.transformTemplate)}renderInstance(e,t,i,r){AG(e,t,i,r)}mount(e){this.isSVGTag=VR(e.tagName),super.mount(e)}}const gde=(n,e)=>OR(n)?new mde(e,{enableHardwareAcceleration:!1}):new pde(e,{enableHardwareAcceleration:!0}),vde={layout:{ProjectionNode:wz,MeasureLayout:pz}},yde={...Wue,...cle,...Kce,...vde},Rn=_ae((n,e)=>Zae(n,e,yde,gde));function Mz(){const n=ie.useRef(!1);return s_(()=>(n.current=!0,()=>{n.current=!1}),[]),n}function _de(){const n=Mz(),[e,t]=ie.useState(0),i=ie.useCallback(()=>{n.current&&t(e+1)},[e]);return[ie.useCallback(()=>ni.postRender(i),[i]),e]}class xde extends ie.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const i=this.props.sizeRef.current;i.height=t.offsetHeight||0,i.width=t.offsetWidth||0,i.top=t.offsetTop,i.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function wde({children:n,isPresent:e}){const t=ie.useId(),i=ie.useRef(null),r=ie.useRef({width:0,height:0,top:0,left:0});return ie.useInsertionEffect(()=>{const{width:s,height:o,top:a,left:l}=r.current;if(e||!i.current||!s||!o)return;i.current.dataset.motionPopId=t;const u=document.createElement("style");return document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${t}"] {
            position: absolute !important;
            width: ${s}px !important;
            height: ${o}px !important;
            top: ${a}px !important;
            left: ${l}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[e]),ie.createElement(xde,{isPresent:e,childRef:i,sizeRef:r},ie.cloneElement(n,{ref:i}))}const l1=({children:n,initial:e,isPresent:t,onExitComplete:i,custom:r,presenceAffectsLayout:s,mode:o})=>{const a=u_(Ade),l=ie.useId(),u=ie.useMemo(()=>({id:l,initial:e,isPresent:t,custom:r,onExitComplete:d=>{a.set(d,!0);for(const h of a.values())if(!h)return;i&&i()},register:d=>(a.set(d,!1),()=>a.delete(d))}),s?void 0:[t]);return ie.useMemo(()=>{a.forEach((d,h)=>a.set(h,!1))},[t]),ie.useEffect(()=>{!t&&!a.size&&i&&i()},[t]),o==="popLayout"&&(n=ie.createElement(wde,{isPresent:t},n)),ie.createElement(GS.Provider,{value:u},n)};function Ade(){return new Map}function Sde(n){return ie.useEffect(()=>()=>n(),[])}const ih=n=>n.key||"";function Ede(n,e){n.forEach(t=>{const i=ih(t);e.set(i,t)})}function Tde(n){const e=[];return ie.Children.forEach(n,t=>{ie.isValidElement(t)&&e.push(t)}),e}const by=({children:n,custom:e,initial:t=!0,onExitComplete:i,exitBeforeEnter:r,presenceAffectsLayout:s=!0,mode:o="sync"})=>{const a=ie.useContext(UR).forceRender||_de()[0],l=Mz(),u=Tde(n);let d=u;const h=ie.useRef(new Map).current,p=ie.useRef(d),v=ie.useRef(new Map).current,_=ie.useRef(!0);if(s_(()=>{_.current=!1,Ede(u,v),p.current=d}),Sde(()=>{_.current=!0,v.clear(),h.clear()}),_.current)return ie.createElement(ie.Fragment,null,d.map(b=>ie.createElement(l1,{key:ih(b),isPresent:!0,initial:t?void 0:!1,presenceAffectsLayout:s,mode:o},b)));d=[...d];const w=p.current.map(ih),S=u.map(ih),A=w.length;for(let b=0;b<A;b++){const C=w[b];S.indexOf(C)===-1&&!h.has(C)&&h.set(C,void 0)}return o==="wait"&&h.size&&(d=[]),h.forEach((b,C)=>{if(S.indexOf(C)!==-1)return;const P=v.get(C);if(!P)return;const k=w.indexOf(C);let L=b;if(!L){const N=()=>{h.delete(C);const O=Array.from(v.keys()).filter(D=>!S.includes(D));if(O.forEach(D=>v.delete(D)),p.current=u.filter(D=>{const U=ih(D);return U===C||O.includes(U)}),!h.size){if(l.current===!1)return;a(),i&&i()}};L=ie.createElement(l1,{key:ih(P),isPresent:!1,onExitComplete:N,custom:e,presenceAffectsLayout:s,mode:o},P),h.set(C,L)}d.splice(k,0,L)}),d=d.map(b=>{const C=b.key;return h.has(C)?b:ie.createElement(l1,{key:ih(b),isPresent:!0,presenceAffectsLayout:s,mode:o},b)}),ie.createElement(ie.Fragment,null,h.size?d:d.map(b=>ie.cloneElement(b)))};function Mde(n){const e=u_(()=>gl(n)),{isStatic:t}=ie.useContext(BR);if(t){const[,i]=ie.useState(n);ie.useEffect(()=>e.on("change",i),[])}return e}const Cde=n=>n&&typeof n=="object"&&n.mix,bde=n=>Cde(n)?n.mix:void 0;function Rde(...n){const e=!Array.isArray(n[0]),t=e?0:-1,i=n[0+t],r=n[1+t],s=n[2+t],o=n[3+t],a=YS(r,s,{mixer:bde(s[0]),...o});return e?a(i):a}function Cz(n,e){const t=Mde(e()),i=()=>t.set(e());return i(),s_(()=>{const r=()=>ni.update(i,!1,!0),s=n.map(o=>o.on("change",r));return()=>{s.forEach(o=>o()),yl(i)}}),t}function Pde(n){Nv.current=[],n();const e=Cz(Nv.current,n);return Nv.current=void 0,e}function av(n,e,t,i){if(typeof n=="function")return Pde(n);const r=typeof e=="function"?e:Rde(e,t,i);return Array.isArray(n)?UN(n,r):UN([n],([s])=>r(s))}function UN(n,e){const t=u_(()=>[]);return Cz(n,()=>{t.length=0;const i=n.length;for(let r=0;r<i;r++)t[r]=n[r].get();return e(t)})}function Ide(n,e,t){return typeof n=="string"?n=document.querySelectorAll(n):n instanceof Element&&(n=[n]),Array.from(n||[])}const Hw=new WeakMap;let id;function Dde(n,e){if(e){const{inlineSize:t,blockSize:i}=e[0];return{width:t,height:i}}else return n instanceof SVGElement&&"getBBox"in n?n.getBBox():{width:n.offsetWidth,height:n.offsetHeight}}function Lde({target:n,contentRect:e,borderBoxSize:t}){var i;(i=Hw.get(n))===null||i===void 0||i.forEach(r=>{r({target:n,contentSize:e,get size(){return Dde(n,t)}})})}function Bde(n){n.forEach(Lde)}function Nde(){typeof ResizeObserver>"u"||(id=new ResizeObserver(Bde))}function kde(n,e){id||Nde();const t=Ide(n);return t.forEach(i=>{let r=Hw.get(i);r||(r=new Set,Hw.set(i,r)),r.add(e),id==null||id.observe(i)}),()=>{t.forEach(i=>{const r=Hw.get(i);r==null||r.delete(e),r!=null&&r.size||id==null||id.unobserve(i)})}}const Gw=new Set;let Uv;function Fde(){Uv=()=>{const n={width:window.innerWidth,height:window.innerHeight},e={target:window,size:n,contentSize:n};Gw.forEach(t=>t(e))},window.addEventListener("resize",Uv)}function Ude(n){return Gw.add(n),Uv||Fde(),()=>{Gw.delete(n),!Gw.size&&Uv&&(Uv=void 0)}}function Ode(n,e){return typeof n=="function"?Ude(n):kde(n,e)}const Hde=50,ON=()=>({current:0,offset:[],progress:0,scrollLength:0,targetOffset:0,targetLength:0,containerLength:0,velocity:0}),Gde=()=>({time:0,x:ON(),y:ON()}),zde={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}};function HN(n,e,t,i){const r=t[e],{length:s,position:o}=zde[e],a=r.current,l=t.time;r.current=n["scroll"+o],r.scrollLength=n["scroll"+s]-n["client"+s],r.offset.length=0,r.offset[0]=0,r.offset[1]=r.scrollLength,r.progress=Mg(0,r.scrollLength,r.current);const u=i-l;r.velocity=u>Hde?0:QR(r.current-a,u)}function Vde(n,e,t){HN(n,"x",e,t),HN(n,"y",e,t),e.time=t}function Wde(n,e){const t={x:0,y:0};let i=n;for(;i&&i!==e;)if(i instanceof HTMLElement)t.x+=i.offsetLeft,t.y+=i.offsetTop,i=i.offsetParent;else if(i.tagName==="svg"){const r=i.getBoundingClientRect();i=i.parentElement;const s=i.getBoundingClientRect();t.x+=r.left-s.left,t.y+=r.top-s.top}else if(i instanceof SVGGraphicsElement){const{x:r,y:s}=i.getBBox();t.x+=r,t.y+=s;let o=null,a=i.parentNode;for(;!o;)a.tagName==="svg"&&(o=a),a=i.parentNode;i=o}else break;return t}const qde={All:[[0,0],[1,1]]},cC={start:0,center:.5,end:1};function GN(n,e,t=0){let i=0;if(cC[n]!==void 0&&(n=cC[n]),typeof n=="string"){const r=parseFloat(n);n.endsWith("px")?i=r:n.endsWith("%")?n=r/100:n.endsWith("vw")?i=r/100*document.documentElement.clientWidth:n.endsWith("vh")?i=r/100*document.documentElement.clientHeight:n=r}return typeof n=="number"&&(i=e*n),t+i}const Jde=[0,0];function Xde(n,e,t,i){let r=Array.isArray(n)?n:Jde,s=0,o=0;return typeof n=="number"?r=[n,n]:typeof n=="string"&&(n=n.trim(),n.includes(" ")?r=n.split(" "):r=[n,cC[n]?n:"0"]),s=GN(r[0],t,i),o=GN(r[1],e),s-o}const Yde={x:0,y:0};function Kde(n){return"getBBox"in n&&n.tagName!=="svg"?n.getBBox():{width:n.clientWidth,height:n.clientHeight}}function Qde(n,e,t){let{offset:i=qde.All}=t;const{target:r=n,axis:s="y"}=t,o=s==="y"?"height":"width",a=r!==n?Wde(r,n):Yde,l=r===n?{width:n.scrollWidth,height:n.scrollHeight}:Kde(r),u={width:n.clientWidth,height:n.clientHeight};e[s].offset.length=0;let d=!e[s].interpolate;const h=i.length;for(let p=0;p<h;p++){const v=Xde(i[p],u[o],l[o],a[s]);!d&&v!==e[s].interpolatorOffsets[p]&&(d=!0),e[s].offset[p]=v}d&&(e[s].interpolate=YS(e[s].offset,$G(i)),e[s].interpolatorOffsets=[...e[s].offset]),e[s].progress=e[s].interpolate(e[s].current)}function Zde(n,e=n,t){if(t.x.targetOffset=0,t.y.targetOffset=0,e!==n){let i=e;for(;i&&i!==n;)t.x.targetOffset+=i.offsetLeft,t.y.targetOffset+=i.offsetTop,i=i.offsetParent}t.x.targetLength=e===n?e.scrollWidth:e.clientWidth,t.y.targetLength=e===n?e.scrollHeight:e.clientHeight,t.x.containerLength=n.clientWidth,t.y.containerLength=n.clientHeight}function $de(n,e,t,i={}){return{measure:()=>Zde(n,i.target,t),update:r=>{Vde(n,t,r),(i.offset||i.target)&&Qde(n,t,i)},notify:()=>e(t)}}const lv=new WeakMap,zN=new WeakMap,u1=new WeakMap,VN=n=>n===document.documentElement?window:n;function jde(n,{container:e=document.documentElement,...t}={}){let i=u1.get(e);i||(i=new Set,u1.set(e,i));const r=Gde(),s=$de(e,n,r,t);if(i.add(s),!lv.has(e)){const a=()=>{for(const p of i)p.measure()},l=()=>{for(const p of i)p.update(ls.timestamp)},u=()=>{for(const p of i)p.notify()},d=()=>{ni.read(a,!1,!0),ni.read(l,!1,!0),ni.update(u,!1,!0)};lv.set(e,d);const h=VN(e);window.addEventListener("resize",d,{passive:!0}),e!==document.documentElement&&zN.set(e,Ode(e,d)),h.addEventListener("scroll",d,{passive:!0})}const o=lv.get(e);return ni.read(o,!1,!0),()=>{var a;yl(o);const l=u1.get(e);if(!l||(l.delete(s),l.size))return;const u=lv.get(e);lv.delete(e),u&&(VN(e).removeEventListener("scroll",u),(a=zN.get(e))===null||a===void 0||a(),window.removeEventListener("resize",u))}}function WN(n,e){hle(!!(!e||e.current))}const efe=()=>({scrollX:gl(0),scrollY:gl(0),scrollXProgress:gl(0),scrollYProgress:gl(0)});function tfe({container:n,target:e,layoutEffect:t=!0,...i}={}){const r=u_(efe);return(t?s_:ie.useEffect)(()=>(WN("target",e),WN("container",n),jde(({x:o,y:a})=>{r.scrollX.set(o.current),r.scrollXProgress.set(o.progress),r.scrollY.set(a.current),r.scrollYProgress.set(a.progress)},{...i,container:(n==null?void 0:n.current)||void 0,target:(e==null?void 0:e.current)||void 0})),[n,e,JSON.stringify(i.offset)]),r}const nfe=()=>{const[n,e]=ie.useState(!1),[t,i]=ie.useState(""),[r,s]=ie.useState(!1),[o,a]=ie.useState([{role:"model",text:"Greetings, user. I am C-Tech. How can I assist with your hardware upgrades today?"}]),l=ie.useRef(null),u=()=>{var h;(h=l.current)==null||h.scrollIntoView({behavior:"smooth"})};ie.useEffect(()=>{u()},[o,n]);const d=async()=>{if(!t.trim())return;const h={role:"user",text:t};a(v=>[...v,h]),i(""),s(!0);const p=await uae(t);a(v=>[...v,{role:"model",text:p}]),s(!1)};return V.jsxs("div",{className:"fixed bottom-6 right-6 z-50 flex flex-col items-end",children:[V.jsx(by,{children:n&&V.jsxs(Rn.div,{initial:{opacity:0,y:20,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:20,scale:.9},className:"w-80 md:w-96 h-[500px] bg-black/90 border border-cyan-500/50 rounded-lg shadow-[0_0_30px_rgba(0,243,255,0.2)] backdrop-blur-md flex flex-col overflow-hidden mb-4",children:[V.jsxs("div",{className:"bg-cyan-900/30 p-3 border-b border-cyan-500/30 flex justify-between items-center",children:[V.jsxs("div",{className:"flex items-center gap-2",children:[V.jsx("div",{className:"w-2 h-2 bg-cyan-400 rounded-full animate-pulse"}),V.jsx("h3",{className:"text-cyan-400 font-mono font-bold text-sm tracking-wider",children:"C-TECH AI SUPPORT"})]}),V.jsx("button",{onClick:()=>e(!1),className:"text-cyan-600 hover:text-cyan-400 text-xl",children:""})]}),V.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[o.map((h,p)=>V.jsx("div",{className:`flex ${h.role==="user"?"justify-end":"justify-start"}`,children:V.jsx("div",{className:`max-w-[80%] p-3 rounded-lg text-sm ${h.role==="user"?"bg-cyan-900/40 text-cyan-50 border border-cyan-700":"bg-gray-900/80 text-gray-300 border border-gray-700"}`,children:h.text})},p)),r&&V.jsx("div",{className:"flex justify-start",children:V.jsx("div",{className:"bg-gray-900/80 p-3 rounded-lg border border-gray-700",children:V.jsxs("div",{className:"flex gap-1",children:[V.jsx("span",{className:"w-2 h-2 bg-cyan-500 rounded-full animate-bounce"}),V.jsx("span",{className:"w-2 h-2 bg-cyan-500 rounded-full animate-bounce delay-75"}),V.jsx("span",{className:"w-2 h-2 bg-cyan-500 rounded-full animate-bounce delay-150"})]})})}),V.jsx("div",{ref:l})]}),V.jsx("div",{className:"p-3 border-t border-cyan-500/30 bg-black/50",children:V.jsxs("div",{className:"flex gap-2",children:[V.jsx("input",{type:"text",value:t,onChange:h=>i(h.target.value),onKeyDown:h=>h.key==="Enter"&&d(),placeholder:"Ask about specs...",className:"flex-1 bg-transparent border border-gray-700 rounded px-3 py-2 text-sm text-white focus:border-cyan-500 outline-none font-mono"}),V.jsx("button",{onClick:d,className:"bg-cyan-600 hover:bg-cyan-500 text-black font-bold px-3 rounded transition-colors",children:""})]})})]})}),V.jsx("button",{onClick:()=>e(!n),className:"w-14 h-14 bg-cyan-500 hover:bg-cyan-400 rounded-full shadow-[0_0_20px_rgba(0,243,255,0.6)] flex items-center justify-center transition-all hover:scale-110 group",children:V.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-black group-hover:rotate-12 transition-transform",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:V.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})})]})};function ife(){const n=ie.useRef(null),e=ie.useMemo(()=>{const i=new Float32Array(2400),r=new Float32Array(800*3),s=new Float32Array(800),o=new Float32Array(800);for(let a=0;a<800;a++){const l=a*3,u=Math.random()*150+50,d=Math.random()*Math.PI*2;i[l]=Math.cos(d)*u,i[l+1]=(Math.random()-.5)*250,i[l+2]=Math.sin(d)*u-Math.random()*300;const h=Math.random();h<.33?(r[l]=0,r[l+1]=.95,r[l+2]=1):h<.66?(r[l]=.8,r[l+1]=0,r[l+2]=1):(r[l]=1,r[l+1]=1,r[l+2]=1),s[a]=Math.random()*3+1.5,o[a]=Math.random()*.6+.2}return{positions:i,colors:r,velocities:s,sizes:o}},[]);return cc(()=>{if(n.current){const t=n.current.geometry.attributes.position.array;for(let i=0;i<t.length/3;i++){const r=i*3;if(t[r+2]+=e.velocities[i],t[r+2]>60){t[r+2]=-300;const s=Math.random()*150+50,o=Math.random()*Math.PI*2;t[r]=Math.cos(o)*s,t[r+1]=(Math.random()-.5)*250}}n.current.geometry.attributes.position.needsUpdate=!0}}),V.jsxs("points",{ref:n,children:[V.jsxs("bufferGeometry",{children:[V.jsx("bufferAttribute",{attach:"attributes-position",count:e.positions.length/3,array:e.positions,itemSize:3}),V.jsx("bufferAttribute",{attach:"attributes-color",count:e.colors.length/3,array:e.colors,itemSize:3}),V.jsx("bufferAttribute",{attach:"attributes-size",count:e.sizes.length,array:e.sizes,itemSize:1})]}),V.jsx("pointsMaterial",{size:.5,vertexColors:!0,transparent:!0,opacity:.9,sizeAttenuation:!0,blending:Yv})]})}function rfe(){const n=ie.useRef(null);return cc(({clock:e})=>{n.current&&(n.current.rotation.z=e.getElapsedTime()*.05)}),V.jsxs("mesh",{ref:n,position:[0,0,-100],children:[V.jsx("planeGeometry",{args:[300,300]}),V.jsx("meshBasicMaterial",{color:"#6b21a8",transparent:!0,opacity:.15,blending:Yv})]})}function sfe(){const n=ka("/crearttech-3.0/models/logo3d.glb"),e=ie.useMemo(()=>{const t=n.scene.clone();return t.traverse(i=>{if(i.isMesh){const r=new Ps({color:new St(14239471),metalness:.2,roughness:.15,clearcoat:1,clearcoatRoughness:.05,reflectivity:1,envMapIntensity:2,emissive:new St(14239471),emissiveIntensity:.3});i.material=r,i.castShadow=!0,i.receiveShadow=!0}}),t},[n.scene]);return V.jsx("primitive",{object:e,scale:150,position:[0,10,0],rotation:[0,Math.PI,0]})}function ofe(){return V.jsxs("section",{className:"relative min-h-screen flex items-center justify-center overflow-hidden pt-16",children:[V.jsxs("div",{className:"absolute inset-0 bg-black",children:[V.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-950/30 via-black to-cyan-950/20"}),V.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(ellipse_at_center,_transparent_0%,_rgba(139,92,246,0.1)_50%,_transparent_100%)]"})]}),V.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(to_right,rgba(6,182,212,0.1)_1px,transparent_1px),linear-gradient(to_bottom,rgba(168,85,247,0.1)_1px,transparent_1px)] bg-[size:80px_80px] opacity-30"}),V.jsxs("div",{className:"absolute inset-0 opacity-20",children:[V.jsx("div",{className:"absolute top-0 left-0 w-full h-px bg-gradient-to-r from-transparent via-cyan-400 to-transparent"}),V.jsx("div",{className:"absolute top-1/4 left-0 w-full h-px bg-gradient-to-r from-transparent via-purple-400 to-transparent"}),V.jsx("div",{className:"absolute top-2/4 left-0 w-full h-px bg-gradient-to-r from-transparent via-fuchsia-400 to-transparent"}),V.jsx("div",{className:"absolute top-3/4 left-0 w-full h-px bg-gradient-to-r from-transparent via-cyan-400 to-transparent"})]}),V.jsx("div",{className:"absolute inset-0 z-0 pointer-events-none",children:V.jsx(yS,{camera:{position:[0,0,55],fov:85},style:{width:"100%",height:"100%"},children:V.jsxs(ie.Suspense,{fallback:null,children:[V.jsx(rfe,{}),V.jsx(ife,{}),V.jsx("ambientLight",{intensity:1.5}),V.jsx("directionalLight",{position:[5,5,5],intensity:2,color:"#06b6d4"}),V.jsx("directionalLight",{position:[-5,-5,-5],intensity:1.5,color:"#a855f7"}),V.jsx("pointLight",{position:[10,10,10],intensity:3,color:"#06b6d4"}),V.jsx("pointLight",{position:[-10,-10,-10],intensity:2,color:"#d946ef"}),V.jsx("pointLight",{position:[0,-10,5],intensity:2.5,color:"#8b5cf6"}),V.jsx("spotLight",{position:[0,15,0],angle:.4,penumbra:1,intensity:3,color:"#06b6d4",castShadow:!0}),V.jsx(WY,{global:!0,config:{mass:2,tension:500},snap:{mass:4,tension:1500},rotation:[0,0,0],polar:[-Math.PI/3,Math.PI/3],azimuth:[-Math.PI/1.4,Math.PI/2],children:V.jsx(sfe,{})})]})})}),V.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_center,_transparent_0%,_black_100%)] opacity-40 pointer-events-none"}),V.jsx("div",{className:"relative z-10 max-w-7xl mx-auto px-6 text-center pointer-events-auto",children:V.jsxs(Rn.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8},children:[V.jsx(Rn.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.2,duration:.5},className:"inline-block mb-8",children:V.jsx("span",{className:"px-6 py-2 bg-gradient-to-r from-cyan-500/10 via-purple-500/10 to-fuchsia-500/10 border border-cyan-400/30 rounded-full text-cyan-300 text-sm font-semibold backdrop-blur-md shadow-[0_0_20px_rgba(6,182,212,0.3)]",children:" Nueva Generacin de Controladores MIDI"})}),V.jsxs(Rn.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5,duration:.8},className:"text-3xl md:text-5xl text-gray-400 mb-12 max-w-3xl mx-auto font-bold",children:["CONTROLADORES MIDI PERSONALIZADOS"," ",V.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 via-purple-400 to-fuchsia-400 font-bold"})]}),V.jsxs(Rn.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7,duration:.8},className:"flex flex-col sm:flex-row gap-4 justify-center items-center",children:[V.jsxs("a",{href:"#productos",className:"group relative px-8 py-4 bg-gradient-to-r from-cyan-600 to-purple-600 text-white font-bold rounded-lg overflow-hidden transition-all hover:scale-105",children:[V.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-cyan-400 to-fuchsia-500 opacity-0 group-hover:opacity-100 transition-opacity blur-xl"}),V.jsx("span",{className:"relative z-10",children:"Explorar Productos"})]}),V.jsx("a",{href:"#about",className:"px-8 py-4 bg-white/5 border border-cyan-400/30 text-cyan-300 font-bold rounded-lg backdrop-blur-md hover:bg-white/10 hover:border-cyan-400/50 transition-all hover:shadow-[0_0_20px_rgba(6,182,212,0.3)]",children:"Conocer Ms"})]}),V.jsx(Rn.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.9,duration:.8},className:"grid grid-cols-3 gap-8 mt-20 max-w-2xl mx-auto",children:[{value:"500+",label:"Clientes",color:"from-cyan-400 to-cyan-600"},{value:"100%",label:"Personalizable",color:"from-purple-400 to-purple-600"},{value:"24/7",label:"Soporte",color:"from-fuchsia-400 to-fuchsia-600"}].map((n,e)=>V.jsxs("div",{className:"text-center group",children:[V.jsx("div",{className:`text-3xl md:text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-br ${n.color} drop-shadow-[0_0_10px_rgba(6,182,212,0.5)] group-hover:drop-shadow-[0_0_20px_rgba(6,182,212,0.8)] transition-all`,children:n.value}),V.jsx("div",{className:"text-sm text-gray-500 mt-2",children:n.label})]},e))})]})}),V.jsx(Rn.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1.2,duration:.8},className:"absolute bottom-10 left-1/2 transform -translate-x-1/2 z-20",children:V.jsx(Rn.div,{animate:{y:[0,10,0]},transition:{repeat:1/0,duration:2},className:"text-cyan-400 drop-shadow-[0_0_10px_rgba(6,182,212,0.8)]",children:V.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:V.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 14l-7 7m0 0l-7-7m7 7V3"})})})})]})}function afe(){return V.jsxs("section",{id:"about",className:"relative py-24 px-6 overflow-hidden",children:[V.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(to_right,#4f46e5_1px,transparent_1px),linear-gradient(to_bottom,#4f46e5_1px,transparent_1px)] bg-[size:40px_40px] opacity-10"}),V.jsxs("div",{className:"max-w-7xl mx-auto relative z-10",children:[V.jsxs(Rn.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6},className:"text-center mb-16",children:[V.jsx("h2",{className:"text-5xl font-['Orbitron'] font-bold mb-4 text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-purple-500",children:"Sobre CreartTech"}),V.jsx("div",{className:"w-24 h-1 bg-gradient-to-r from-cyan-400 to-purple-500 mx-auto"})]}),V.jsxs("div",{className:"grid md:grid-cols-2 gap-12 items-center",children:[V.jsxs(Rn.div,{initial:{opacity:0,x:-50},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{duration:.6,delay:.2},children:[V.jsx("h3",{className:"text-3xl font-bold mb-6 text-white",children:"Tecnologa Musical del Futuro"}),V.jsx("p",{className:"text-gray-300 mb-4 leading-relaxed",children:"En CreartTech, fusionamos la artesana boutique con la tecnologa de vanguardia para crear controladores MIDI nicos que transforman tu flujo creativo."}),V.jsx("p",{className:"text-gray-300 mb-6 leading-relaxed",children:"Cada controlador es diseado con precisin, personalizable hasta el ltimo detalle, y construido para msicos que exigen lo mejor en rendimiento y esttica."}),V.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-8",children:[V.jsxs("div",{className:"bg-black/40 border border-cyan-500/30 rounded-lg p-4 backdrop-blur-sm",children:[V.jsx("div",{className:"text-3xl font-bold text-cyan-400 mb-2",children:"500+"}),V.jsx("div",{className:"text-sm text-gray-400",children:"Controladores Creados"})]}),V.jsxs("div",{className:"bg-black/40 border border-purple-500/30 rounded-lg p-4 backdrop-blur-sm",children:[V.jsx("div",{className:"text-3xl font-bold text-purple-400 mb-2",children:"100%"}),V.jsx("div",{className:"text-sm text-gray-400",children:"Personalizables"})]})]})]}),V.jsx(Rn.div,{initial:{opacity:0,x:50},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{duration:.6,delay:.4},className:"space-y-6",children:[{icon:"",title:"Diseo Personalizado",desc:"Elige colores, materiales y configuraciones nicas"},{icon:"",title:"Tecnologa Avanzada",desc:"Componentes de alta calidad y respuesta ultra-rpida"},{icon:"",title:"Construccin Artesanal",desc:"Cada unidad es ensamblada y probada a mano"},{icon:"",title:"Soporte Global",desc:"Envos internacionales y soporte tcnico 24/7"}].map((n,e)=>V.jsxs(Rn.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.4,delay:.5+e*.1},className:"flex items-start gap-4 bg-white/5 border border-white/10 rounded-lg p-4 hover:border-cyan-500/50 hover:bg-white/10 transition-all backdrop-blur-sm",children:[V.jsx("div",{className:"text-4xl",children:n.icon}),V.jsxs("div",{children:[V.jsx("h4",{className:"text-lg font-bold text-white mb-1",children:n.title}),V.jsx("p",{className:"text-gray-400 text-sm",children:n.desc})]})]},e))})]})]})]})}const bz=({path:n,hover:e,scale:t=1,position:i=[0,0,0]})=>{const{scene:r}=ka(n),s=ie.useRef(null),o=_d.useMemo(()=>r.clone(),[r]);return cc((a,l)=>{s.current&&(e?s.current.rotation.y+=l*1.5:s.current.rotation.y+=l*.2)}),V.jsx("group",{ref:s,scale:t,position:i,children:V.jsx(PU,{top:!0,children:V.jsx("primitive",{object:o})})})};ka.preload("/crearttech-3.0/models/KNOBO.glb");ka.preload("/crearttech-3.0/models/LOOPO.glb");ka.preload("/crearttech-3.0/models/FADO.glb");ka.preload("/crearttech-3.0/models/BEATO.glb");ka.preload("/crearttech-3.0/models/MIXO.glb");ka.preload("/crearttech-3.0/models/BEATO16.glb");const lfe=()=>V.jsxs(V.Fragment,{children:[V.jsx(FU,{preset:"city"}),V.jsx("ambientLight",{intensity:1}),V.jsx("directionalLight",{position:[5,10,7],intensity:2,color:"#ffffff"}),V.jsx("pointLight",{position:[10,10,10],intensity:1,color:"#4c1d95"}),V.jsx("pointLight",{position:[-10,-10,-10],intensity:2,color:"#00f3ff"}),V.jsx(TQ,{count:50,scale:4,size:2,speed:.4,opacity:.5,color:"#ffffff"})]});function ufe(){return V.jsxs("section",{className:"relative py-24 px-6 overflow-hidden bg-gradient-to-b from-purple-950/20 to-black/40",children:[V.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(ellipse_at_center,_rgba(168,85,247,0.15)_0%,_transparent_70%)]"}),V.jsxs("div",{className:"max-w-7xl mx-auto relative z-10",children:[V.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 items-center",children:[V.jsxs(Rn.div,{initial:{opacity:0,x:-50},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{duration:.6},children:[V.jsx("span",{className:"inline-block px-4 py-2 bg-purple-500/20 border border-purple-500/50 rounded-full text-purple-400 text-sm font-semibold mb-6",children:" NUEVO LANZAMIENTO"}),V.jsxs("h2",{className:"text-6xl font-['Orbitron'] font-black mb-6",children:[V.jsx("span",{className:"text-white",children:"BEATO"}),V.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-fuchsia-500",children:" 16"})]}),V.jsx("p",{className:"text-xl text-gray-300 mb-8 leading-relaxed",children:"El controlador de pads ms avanzado del mercado. 16 pads ultra-sensibles con retroiluminacin RGB individual y respuesta tctil de ltima generacin."}),V.jsx("div",{className:"grid grid-cols-2 gap-4 mb-8",children:[{label:"Pads",value:"16"},{label:"Sensibilidad",value:"1024 niveles"},{label:"RGB Zones",value:"16 individuales"},{label:"Conectividad",value:"USB-C + MIDI"}].map((n,e)=>V.jsxs(Rn.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:e*.1},className:"bg-black/40 border border-purple-500/30 rounded-lg p-4",children:[V.jsx("div",{className:"text-2xl font-bold text-purple-400",children:n.value}),V.jsx("div",{className:"text-sm text-gray-400",children:n.label})]},e))}),V.jsxs("div",{className:"flex gap-4",children:[V.jsx("button",{className:"px-8 py-4 bg-gradient-to-r from-purple-600 to-fuchsia-600 text-white font-bold rounded-lg hover:shadow-lg hover:shadow-purple-500/50 transition-all hover:scale-105",children:"Pre-ordenar Ahora"}),V.jsx("button",{className:"px-8 py-4 bg-white/10 border border-white/20 text-white font-bold rounded-lg backdrop-blur-sm hover:bg-white/20 transition-all",children:"Ver Demo"})]})]}),V.jsx(Rn.div,{initial:{opacity:0,x:50},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{duration:.6},className:"relative",children:V.jsxs("div",{className:"relative bg-gradient-to-br from-purple-950 via-purple-900 to-purple-950 border-2 border-purple-500/30 rounded-3xl overflow-hidden shadow-2xl shadow-purple-500/20",children:[V.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(to_right,rgba(139,92,246,0.1)_1px,transparent_1px),linear-gradient(to_bottom,rgba(139,92,246,0.1)_1px,transparent_1px)] bg-[size:40px_40px]"}),V.jsx("div",{className:"absolute inset-0",children:[...Array(20)].map((n,e)=>V.jsx("div",{className:"absolute w-1 h-1 bg-white rounded-full opacity-60",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,animation:`twinkle ${2+Math.random()*3}s infinite ${Math.random()*2}s`}},e))}),V.jsx("div",{className:"relative h-96 p-8",children:V.jsxs(yS,{camera:{position:[3,3,5],fov:35},dpr:[1,2],children:[V.jsx("ambientLight",{intensity:1.2}),V.jsx("directionalLight",{position:[5,5,5],intensity:1.5}),V.jsx("directionalLight",{position:[-5,5,-5],intensity:.8}),V.jsx("spotLight",{position:[0,10,0],angle:.5,penumbra:1,intensity:2,castShadow:!0}),V.jsx("pointLight",{position:[10,10,10],intensity:1,color:"#ffffff"}),V.jsx("pointLight",{position:[-10,5,-10],intensity:.8,color:"#a855f7"}),V.jsx("pointLight",{position:[5,-5,5],intensity:.6,color:"#ec4899"}),V.jsxs(ie.Suspense,{fallback:null,children:[V.jsx(bz,{path:"/crearttech-3.0/models/BEATO16.glb",hover:!1,scale:22,position:[0,.2,0]}),V.jsx(RU,{enableZoom:!1,enablePan:!1,enableRotate:!1,autoRotate:!0,autoRotateSpeed:1})]})]})}),V.jsx("div",{className:"relative bg-black/60 backdrop-blur-sm border-t border-purple-500/30 p-6",children:V.jsxs("div",{className:"flex items-center justify-between",children:[V.jsxs("div",{children:[V.jsx("div",{className:"text-xs text-cyan-400 font-semibold tracking-wider uppercase mb-1",children:"CONTROLLERS"}),V.jsx("h3",{className:"text-2xl font-['Orbitron'] font-bold text-white",children:"Beato 16"})]}),V.jsx("div",{className:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-fuchsia-400 to-pink-500",children:"280"})]})}),V.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-purple-500/10 via-transparent to-transparent pointer-events-none"})]})})]}),V.jsx(Rn.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:.4},className:"mt-16 grid md:grid-cols-3 gap-6",children:[{icon:"",title:"Ultra Responsive",desc:"Latencia < 1ms"},{icon:"",title:"RGB Personalizable",desc:"Millones de colores"},{icon:"",title:"Plug & Play",desc:"Compatible con todos los DAWs"}].map((n,e)=>V.jsxs(Rn.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:.5+e*.1},className:"bg-black/30 border border-purple-500/30 rounded-lg p-6 text-center hover:border-purple-400/50 transition-all",children:[V.jsx("div",{className:"text-4xl mb-3",children:n.icon}),V.jsx("h4",{className:"text-lg font-bold text-white mb-2",children:n.title}),V.jsx("p",{className:"text-gray-400 text-sm",children:n.desc})]},e))})]}),V.jsx("style",{jsx:!0,children:`
                @keyframes twinkle {
                    0%, 100% { opacity: 0.3; }
                    50% { opacity: 1; }
                }
            `})]})}const cfe=[{date:"15 DIC",title:"Workshop: Produccin Musical con MIDI",location:"Online",time:"18:00 - 20:00",color:"cyan"},{date:"22 DIC",title:"Lanzamiento: BEATO Pro Series",location:"CreartTech Studio",time:"19:00 - 22:00",color:"purple"},{date:"05 ENE",title:"Masterclass: Control Avanzado",location:"Online",time:"17:00 - 19:00",color:"fuchsia"}],dfe={cyan:{badge:"bg-cyan-500/20",border:"border-cyan-500/50",text:"text-cyan-400",glow:"from-cyan-500/20",button:"from-cyan-600 to-cyan-500",shadow:"hover:shadow-cyan-500/50"},purple:{badge:"bg-purple-500/20",border:"border-purple-500/50",text:"text-purple-400",glow:"from-purple-500/20",button:"from-purple-600 to-purple-500",shadow:"hover:shadow-purple-500/50"},fuchsia:{badge:"bg-fuchsia-500/20",border:"border-fuchsia-500/50",text:"text-fuchsia-400",glow:"from-fuchsia-500/20",button:"from-fuchsia-600 to-fuchsia-500",shadow:"hover:shadow-fuchsia-500/50"}};function ffe(){return V.jsx("section",{id:"events",className:"relative py-24 px-6 bg-black/20",children:V.jsxs("div",{className:"max-w-7xl mx-auto",children:[V.jsxs(Rn.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"text-center mb-16",children:[V.jsx("h2",{className:"text-5xl font-['Orbitron'] font-bold mb-4 text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-purple-500",children:"Prximos Eventos"}),V.jsx("p",{className:"text-gray-400 max-w-2xl mx-auto",children:"nete a nuestros workshops, lanzamientos y masterclasses exclusivas"})]}),V.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:cfe.map((n,e)=>{const t=dfe[n.color];return V.jsxs(Rn.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.5,delay:e*.1},whileHover:{y:-5,scale:1.02},className:"relative bg-gradient-to-br from-gray-900 to-black border border-gray-700 rounded-xl p-6 overflow-hidden group cursor-pointer",children:[V.jsx("div",{className:`absolute top-0 right-0 w-20 h-20 bg-gradient-to-br ${t.glow} to-transparent blur-2xl`}),V.jsx("div",{className:`inline-block ${t.badge} border ${t.border} rounded-lg px-4 py-2 mb-4`,children:V.jsx("div",{className:`${t.text} font-bold text-sm`,children:n.date})}),V.jsx("h3",{className:"text-xl font-bold text-white mb-3 group-hover:text-cyan-400 transition-colors",children:n.title}),V.jsxs("div",{className:"space-y-2 text-sm text-gray-400",children:[V.jsxs("div",{className:"flex items-center gap-2",children:[V.jsx("span",{children:""}),V.jsx("span",{children:n.location})]}),V.jsxs("div",{className:"flex items-center gap-2",children:[V.jsx("span",{children:""}),V.jsx("span",{children:n.time})]})]}),V.jsx("button",{className:`mt-6 w-full py-2 bg-gradient-to-r ${t.button} text-white rounded-lg font-semibold hover:shadow-lg ${t.shadow} transition-all`,children:"Registrarse"}),V.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-cyan-500/0 to-cyan-500/0 group-hover:from-cyan-500/5 group-hover:to-transparent transition-all pointer-events-none"})]},e)})})]})})}const hfe=()=>{const n=ie.useRef(null);return cc((e,t)=>{n.current&&(n.current.rotation.x+=t,n.current.rotation.y+=t)}),V.jsxs("mesh",{ref:n,children:[V.jsx("boxGeometry",{args:[1,1,1]}),V.jsx("meshBasicMaterial",{color:"#00f3ff",wireframe:!0,opacity:.3,transparent:!0})]})},pfe=({product:n,onClick:e})=>{const[t,i]=ie.useState(!1);return V.jsxs(Rn.div,{className:"relative w-full h-[480px] rounded-2xl overflow-hidden group cursor-pointer",initial:{opacity:0,y:20,rotateY:-15},animate:{opacity:1,y:0,rotateY:0},transition:{duration:.6,type:"spring"},whileHover:{y:-15,rotateY:5,rotateX:-5,scale:1.05,transition:{duration:.3}},onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),onClick:()=>e(n),style:{transformStyle:"preserve-3d",perspective:"1000px"},children:[V.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-cyan-500/20 via-purple-500/20 to-pink-500/20 opacity-0 group-hover:opacity-100 transition-opacity duration-500 animate-pulse"}),V.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-slate-950 via-purple-950 to-slate-950",children:V.jsx("div",{className:"absolute inset-0",style:{backgroundImage:`radial-gradient(2px 2px at 20% 30%, white, transparent),
                           radial-gradient(2px 2px at 60% 70%, white, transparent),
                           radial-gradient(1px 1px at 50% 50%, white, transparent),
                           radial-gradient(1px 1px at 80% 10%, white, transparent),
                           radial-gradient(2px 2px at 90% 60%, white, transparent),
                           radial-gradient(1px 1px at 33% 80%, white, transparent)`,backgroundSize:"200% 200%",animation:"twinkle 8s ease-in-out infinite"}})}),V.jsx("div",{className:"absolute inset-0 rounded-2xl border-2 border-cyan-500/30 group-hover:border-cyan-400/60 group-hover:shadow-[0_0_30px_rgba(34,211,238,0.5)] transition-all duration-300"}),V.jsx("div",{className:"absolute top-4 left-4 z-20",children:V.jsx("div",{className:"px-4 py-1.5 bg-gradient-to-r from-cyan-600 to-cyan-800 rounded-md border border-cyan-400/50 shadow-lg shadow-cyan-500/50",children:V.jsx("span",{className:"text-white text-xs font-['Orbitron'] font-bold uppercase tracking-widest",children:n.category})})}),V.jsx("div",{className:"absolute top-4 right-4 z-20",children:V.jsx("div",{className:"px-4 py-2 bg-gradient-to-br from-pink-600 via-purple-600 to-pink-700 rounded-full border-2 border-pink-400/50 shadow-lg shadow-pink-500/50",children:V.jsxs("span",{className:"text-white text-lg font-bold font-['Orbitron']",children:["$",n.price]})})}),V.jsx("div",{className:"absolute inset-0 top-16 bottom-36 z-10",children:V.jsx(yS,{camera:{position:[0,3,3],fov:50},dpr:[1,2],children:V.jsxs(ie.Suspense,{fallback:V.jsx(hfe,{}),children:[V.jsx(lfe,{}),V.jsx(sQ,{speed:2,rotationIntensity:.5,floatIntensity:.5,children:V.jsx(bz,{path:n.modelPath,hover:t,scale:(n.scale||8)*1.5})}),V.jsx(AQ,{position:[0,-1.5,0],opacity:.4,scale:5,blur:2.5,far:4,color:n.color})]})})}),V.jsxs("div",{className:"absolute bottom-0 left-0 w-full p-5 z-20 bg-gradient-to-t from-black/95 via-black/90 to-transparent border-t border-cyan-500/20",children:[V.jsx("h3",{className:"text-2xl font-['Orbitron'] font-black text-white mb-2 drop-shadow-[0_0_10px_rgba(34,211,238,0.8)] group-hover:text-cyan-400 transition-colors",children:n.name}),V.jsx("p",{className:"text-gray-400 text-xs mb-3 line-clamp-2 font-mono",children:n.description}),V.jsx("div",{className:"flex flex-wrap gap-2",children:n.specs.slice(0,3).map((r,s)=>V.jsx(Rn.span,{className:"px-3 py-1 bg-gradient-to-r from-cyan-900/40 to-purple-900/40 border border-cyan-400/40 text-[10px] text-cyan-300 rounded-md font-['Orbitron'] font-bold uppercase tracking-wider backdrop-blur-sm",whileHover:{scale:1.1,borderColor:"rgba(34, 211, 238, 0.8)"},children:r},s))})]}),V.jsx("div",{className:"absolute top-0 left-0 w-20 h-20 border-t-4 border-l-4 border-cyan-400/60 rounded-tl-2xl shadow-[0_0_20px_rgba(34,211,238,0.6)]"}),V.jsx("div",{className:"absolute bottom-0 right-0 w-20 h-20 border-b-4 border-r-4 border-pink-400/60 rounded-br-2xl shadow-[0_0_20px_rgba(236,72,153,0.6)]"}),V.jsx("div",{className:"absolute top-0 right-0 w-32 h-1 bg-gradient-to-r from-transparent via-cyan-400 to-transparent opacity-60 rotate-45 origin-top-right"}),V.jsx("div",{className:"absolute bottom-0 left-0 w-32 h-1 bg-gradient-to-r from-transparent via-purple-400 to-transparent opacity-60 -rotate-45 origin-bottom-left"}),V.jsx("div",{className:"absolute bottom-4 left-4 z-20 flex gap-1",children:[...Array(3)].map((r,s)=>V.jsx("div",{className:"w-2 h-2 rounded-full bg-gradient-to-br from-cyan-400 to-purple-500 shadow-[0_0_8px_rgba(34,211,238,0.8)]"},s))}),V.jsx(Rn.div,{className:"absolute inset-0 bg-gradient-to-b from-transparent via-cyan-400/10 to-transparent pointer-events-none",animate:{y:["-100%","200%"]},transition:{duration:3,repeat:1/0,ease:"linear"}})]})},Rz=document.createElement("style");Rz.textContent=`
  @keyframes twinkle {
    0%, 100% { opacity: 0.3; }
    50% { opacity: 1; }
  }
`;document.head.appendChild(Rz);function mfe({products:n,onProductClick:e}){const[t,i]=ie.useState("All"),[r,s]=ie.useState(0),o=["All",...Array.from(new Set(n.map(h=>h.category)))],a=t==="All"?n:n.filter(h=>h.category===t),l=()=>{s(h=>h===0?a.length-1:h-1)},u=()=>{s(h=>h===a.length-1?0:h+1)};_d.useEffect(()=>{s(0)},[t]);const d=a[r];return V.jsxs("section",{id:"productos",className:"relative py-20 px-6",children:[V.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-slate-900 via-purple-900/20 to-slate-900"}),V.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(ellipse_at_center,_transparent_0%,_rgba(6,78,59,0.3)_50%,_transparent_100%)]"}),V.jsxs("div",{className:"relative z-10 max-w-7xl mx-auto",children:[V.jsxs(Rn.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"text-center mb-12",children:[V.jsx(Rn.div,{initial:{opacity:0,scale:.8},whileInView:{opacity:1,scale:1},viewport:{once:!0},className:"inline-block mb-4",children:V.jsx("span",{className:"px-4 py-2 bg-cyan-500/10 border border-cyan-500/30 rounded-full text-cyan-400 text-sm font-semibold backdrop-blur-sm",children:" Nuestra Coleccin"})}),V.jsx("h2",{className:"text-5xl md:text-6xl font-['Orbitron'] font-bold mb-6 text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 via-purple-400 to-pink-400",children:"Controladores MIDI"}),V.jsx("p",{className:"text-gray-400 text-lg max-w-2xl mx-auto",children:"Diseos nicos y personalizables con tecnologa de vanguardia"})]}),V.jsx(Rn.div,{className:"flex gap-3 mb-12 overflow-x-auto pb-2 justify-center scrollbar-hide",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:.2},children:o.map((h,p)=>V.jsx(Rn.button,{onClick:()=>i(h),className:`px-6 py-3 rounded-xl font-['Orbitron'] uppercase text-sm font-bold whitespace-nowrap transition-all ${t===h?"bg-gradient-to-r from-cyan-600 to-purple-600 text-white shadow-lg shadow-cyan-500/30 scale-105":"bg-white/5 backdrop-blur-sm border border-white/10 text-gray-400 hover:text-white hover:bg-white/10 hover:border-cyan-500/30"}`,whileHover:{scale:1.05},whileTap:{scale:.95},initial:{opacity:0,x:-20},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{delay:p*.1},children:h},h))}),a.length>0?V.jsxs("div",{className:"relative flex items-center justify-center min-h-[600px]",children:[V.jsx(Rn.button,{onClick:l,className:"absolute -left-24 md:-left-20 lg:-left-24 z-30 w-16 h-16 bg-gradient-to-r from-cyan-600 to-purple-600 rounded-full shadow-2xl shadow-cyan-500/50 flex items-center justify-center hover:scale-110 transition-transform border-2 border-cyan-400/50",whileHover:{scale:1.15,boxShadow:"0 0 40px rgba(34, 211, 238, 0.8)"},whileTap:{scale:.95},"aria-label":"Previous product",children:V.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:V.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M15 19l-7-7 7-7"})})}),V.jsx("div",{className:"w-full max-w-md mx-auto px-4",children:V.jsx(by,{mode:"wait",children:V.jsx(Rn.div,{initial:{opacity:0,x:100,rotateY:-30},animate:{opacity:1,x:0,rotateY:0},exit:{opacity:0,x:-100,rotateY:30},transition:{duration:.5,type:"spring",stiffness:100},children:V.jsx(pfe,{product:d,onClick:e})},d.id)})}),V.jsx(Rn.button,{onClick:u,className:"absolute -right-24 md:-right-20 lg:-right-24 z-30 w-16 h-16 bg-gradient-to-r from-purple-600 to-pink-600 rounded-full shadow-2xl shadow-purple-500/50 flex items-center justify-center hover:scale-110 transition-transform border-2 border-purple-400/50",whileHover:{scale:1.15,boxShadow:"0 0 40px rgba(168, 85, 247, 0.8)"},whileTap:{scale:.95},"aria-label":"Next product",children:V.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:V.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M9 5l7 7-7 7"})})})]}):V.jsxs(Rn.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-20",children:[V.jsx("div",{className:"text-6xl mb-4",children:""}),V.jsx("h3",{className:"text-2xl font-bold text-gray-400 mb-2",children:"No hay productos en esta categora"}),V.jsx("p",{className:"text-gray-500",children:"Prueba con otra categora"})]}),a.length>0&&V.jsx("div",{className:"flex justify-center gap-2 mt-8",children:a.map((h,p)=>V.jsx(Rn.button,{onClick:()=>s(p),className:`w-3 h-3 rounded-full transition-all ${p===r?"bg-gradient-to-r from-cyan-400 to-purple-500 w-8 shadow-lg shadow-cyan-500/50":"bg-white/20 hover:bg-white/40"}`,whileHover:{scale:1.2},whileTap:{scale:.9},"aria-label":`Go to product ${p+1}`},p))}),a.length>0&&V.jsx(Rn.div,{className:"text-center mt-6",initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},children:V.jsxs("span",{className:"text-gray-400 font-['Orbitron'] text-sm",children:[r+1," / ",a.length]})})]}),V.jsx("style",{jsx:!0,children:`
                .scrollbar-hide::-webkit-scrollbar {
                    display: none;
                }
                .scrollbar-hide {
                    -ms-overflow-style: none;
                    scrollbar-width: none;
                }
            `})]})}const gfe=()=>{const n=[{id:"beato16",name:"Beato16",subtitle:"Potencia y Versatilidad",description:"El nuevo Beato16 es un controlador MIDI diseado para ofrecer una experiencia tctil y dinmica. Equipado con 4 teclas tctiles tipo gaming (perfectas para octavar o grabar), 16 botones arcade, 1 fader y 4 perillas, ofrece una respuesta rpida y precisa. Su versatilidad no se limita a la msica: tambin funciona como macropad para optimizar flujos de trabajo en Ableton Live, Resolume, Unity o cualquier app MIDI. Con una construccin robusta, es ideal para finger drumming y creadores digitales que buscan flexibilidad y potencia.",targetAudience:["Productores de todos los gneros","Beatmakers y amantes del finger drumming","VJs y tcnicos de luces","Creadores digitales que usan Unity o Resolume","Msicos que buscan interaccin fsica y robustez"],image:"/crearttech-3.0/textures/fotos controladores/BEATO16.png"},{id:"mixo",name:"Mixo",subtitle:"Control Preciso para Mezcla y Produccin",description:"El Mixo es un controlador MIDI compacto con 4 potencimetros, 4 botones LED y 4 faders, ideal para quienes buscan versatilidad en sus proyectos creativos. Su diseo intuitivo no solo es perfecto para hacer msica, sino que tambin funciona como un macropad en cualquier programa como Illustrator, Unity o Resolume, ayudando a acelerar tareas repetitivas. Con total compatibilidad MIDI, te permite controlar tu DAW, ajustar efectos y gestionar mezclas. Su portabilidad lo hace ideal tanto para estudios como para presentaciones en vivo.",targetAudience:["Productores que desean controlar con precisin la automatizacin","Diseadores y creadores que usan Illustrator, Unity, etc.","DJs que buscan un controlador pequeo para mezclar en vivo","Ingenieros de sonido y artistas que trabajan con efectos","Personas que quieren un controlador verstil y porttil"],image:"/crearttech-3.0/textures/fotos controladores/MIXO.png"},{id:"beato8",name:"Beato8",subtitle:"Simplicidad y Fluidez Creativa",description:"El Beato8 es una versin ms ligera del Beato16, pero igual de poderosa. Con 8 botones arcade y 4 perillas, es perfecto para lanzar samples, disparar loops y controlar efectos sin distracciones. Ideal para finger drummers y presentaciones en vivo.",targetAudience:["Msicos que necesitan un controlador porttil para giras y conciertos","Productores que prefieren un diseo minimalista pero funcional","Personas que buscan una opcin ms sencilla que el Beato16"],image:"/crearttech-3.0/textures/fotos controladores/BEATO8.png"},{id:"fado",name:"Fado",subtitle:"El Control Definitivo para Mezcla",description:"Fado es un controlador MIDI diseado para ofrecer un control preciso y creativo de tus mezclas y automatizaciones en tiempo real. Equipado con 8 faders asignables, te permite controlar volmenes, efectos y parmetros con total libertad. Su diseo robusto con cuerpo metlico y totalmente personalizable lo hace perfecto para productores, DJs y creadores digitales. Compatible con Ableton Live, Resolume y cualquier software MIDI.",targetAudience:["Ingenieros de sonido que necesitan control especializado","DJs que desean ajustar volmenes y efectos en vivo","Productores que trabajan con automatizacin","Artistas que prefieren un enfoque centrado en los faders","Usuarios de Ableton Live, Resolume y otros DAWs"],image:"/crearttech-3.0/textures/fotos controladores/FADO.png"},{id:"loopo",name:"Loopo",subtitle:"La Opcin Ideal para la Performance en Vivo",description:"Loopo es un pedal MIDI diseado para ofrecer una fluidez total en tus presentaciones. Con 4 footswitches y 4 perillas asignables, te permite controlar efectos, loops y parmetros con precisin, ideal cuando necesitas mantener las manos libres. Perfecto para guitarristas, tecladistas y performers, se adapta a cualquier DAW, pedalera digital o software compatible con MIDI. Compacto, resistente y fcil de integrar.",targetAudience:["Guitarristas, tecladistas y performers","Msicos que necesitan manos libres","Usuarios de pedaleras digitales y live looping","Artistas que buscan libertad en el escenario"],image:"/crearttech-3.0/textures/fotos controladores/LOOPO.png"},{id:"knobo",name:"Knobo",subtitle:"Control Total con Perillas",description:"Knobo es un controlador MIDI diseado para ofrecer un control preciso y creativo de tus mezclas y automatizaciones en tiempo real. Equipado con 8 knobs asignables, te permite controlar volmenes, efectos y parmetros con total libertad. Su diseo robusto con cuerpo metlico y totalmente personalizable lo convierte en la herramienta perfecta para productores, DJs y creadores digitales. Compatible con Ableton Live, Resolume y cualquier software MIDI.",targetAudience:["Productores que trabajan con sntesis y modulacin","Artistas que prefieren control tctil directo","Msicos que buscan un controlador especializado en perillas","Usuarios de Ableton Live y Resolume"],image:"/crearttech-3.0/textures/fotos controladores/KNOBO.png"}];return V.jsxs("div",{className:"relative bg-gradient-to-b from-[#0a0a16] via-[#120f24] to-[#1a1530] text-white font-['Orbitron'] py-20",children:[V.jsxs("div",{className:"absolute inset-0 z-0 pointer-events-none",children:[V.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(to_right,#4f46e520_1px,transparent_1px),linear-gradient(to_bottom,#4f46e520_1px,transparent_1px)] bg-[size:50px_50px]"}),V.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(white_1px,transparent_1px)] bg-[size:100px_100px] opacity-10"}),V.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1/2 bg-gradient-to-t from-purple-900/20 via-cyan-900/10 to-transparent"})]}),V.jsx("div",{className:"relative z-10",children:V.jsxs("div",{className:"container mx-auto px-6 py-20",children:[V.jsxs("div",{className:"text-center mb-16",children:[V.jsx("h1",{className:"text-6xl font-black mb-6 bg-gradient-to-r from-cyan-400 via-purple-400 to-pink-400 bg-clip-text text-transparent drop-shadow-[0_0_30px_rgba(6,182,212,0.5)]",children:"Listo para tener tu propio controlador MIDI personalizado?"}),V.jsxs("div",{className:"max-w-4xl mx-auto space-y-4 text-lg text-gray-300 leading-relaxed",children:[V.jsx("p",{children:"Ahora puedes comprar y personalizar el instrumento perfecto desde cualquier lugar. Todos nuestros controladores estn fabricados en metal, con un diseo nico, robusto, de alta calidad y a la vez compacto."}),V.jsx("p",{children:"Adems, puedes elegir los colores del chasis, botones, perillas, faders y pedales, lo que hace que cada pieza sea verdaderamente nica."}),V.jsx("p",{className:"text-cyan-400 font-bold text-xl mt-8",children:"Entonces, cul deberas comprar? Te ayudamos a elegir entre nuestros modelos segn tus necesidades creativas, tu estilo musical y cmo piensas usarlo, incluso ms all de la msica."})]})]}),V.jsx("div",{className:"space-y-24 mt-20",children:n.map((e,t)=>V.jsxs("div",{className:`flex flex-col ${t%2===0?"lg:flex-row":"lg:flex-row-reverse"} gap-12 items-center`,children:[V.jsx("div",{className:"lg:w-1/2",children:V.jsxs("div",{className:"relative group",children:[V.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-cyan-500/20 to-purple-500/20 rounded-3xl blur-xl group-hover:blur-2xl transition-all duration-500"}),V.jsx("div",{className:"relative bg-black/40 backdrop-blur-sm rounded-3xl p-8 border border-white/10 group-hover:border-cyan-500/50 transition-all duration-500",children:V.jsx("img",{src:e.image,alt:e.name,className:"w-full h-auto object-contain drop-shadow-[0_0_30px_rgba(6,182,212,0.3)]"})})]})}),V.jsxs("div",{className:"lg:w-1/2 space-y-6",children:[V.jsxs("div",{children:[V.jsxs("div",{className:"inline-block px-4 py-1 bg-cyan-500/20 border border-cyan-500/50 rounded-full text-cyan-400 text-sm font-bold mb-4",children:[t+1,". ",e.name]}),V.jsx("h2",{className:"text-4xl font-black mb-4 text-white",children:e.subtitle}),V.jsx("p",{className:"text-gray-300 leading-relaxed text-lg",children:e.description})]}),V.jsxs("div",{className:"bg-gradient-to-br from-purple-900/20 to-cyan-900/20 rounded-2xl p-6 border border-white/10",children:[V.jsxs("h3",{className:"text-xl font-bold mb-4 text-cyan-400 flex items-center gap-2",children:[V.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",children:V.jsx("path",{d:"M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z"})}),"A QUIN VA DIRIGIDO EL ",e.name.toUpperCase(),"?"]}),V.jsx("ul",{className:"space-y-3",children:e.targetAudience.map((i,r)=>V.jsxs("li",{className:"flex items-start gap-3 text-gray-300",children:[V.jsx("svg",{className:"w-5 h-5 text-cyan-400 mt-1 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:V.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),V.jsx("span",{children:i})]},r))})]}),V.jsxs("button",{className:"group relative w-full px-8 py-4 bg-gradient-to-r from-cyan-500 to-purple-600 rounded-xl font-bold text-lg overflow-hidden transition-all duration-300 hover:scale-105 hover:shadow-[0_0_30px_rgba(6,182,212,0.5)]",children:[V.jsxs("span",{className:"relative z-10",children:["Personalizar ",e.name]}),V.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-600 to-cyan-500 opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]})]})]},e.id))}),V.jsx("div",{className:"mt-32 text-center",children:V.jsxs("div",{className:"bg-gradient-to-r from-cyan-900/20 via-purple-900/20 to-pink-900/20 rounded-3xl p-12 border border-white/10 backdrop-blur-sm",children:[V.jsx("h2",{className:"text-4xl font-black mb-6 bg-gradient-to-r from-cyan-400 to-purple-400 bg-clip-text text-transparent",children:"Listo para crear tu controlador perfecto?"}),V.jsx("p",{className:"text-xl text-gray-300 mb-8 max-w-2xl mx-auto",children:"Cada controlador es nico y personalizable. Elige los colores, configura tus controles y crea el instrumento de tus sueos."}),V.jsxs("button",{className:"group relative px-12 py-5 bg-gradient-to-r from-cyan-500 to-purple-600 rounded-full font-bold text-xl overflow-hidden transition-all duration-300 hover:scale-110 hover:shadow-[0_0_40px_rgba(6,182,212,0.6)]",children:[V.jsxs("span",{className:"relative z-10 flex items-center gap-3",children:["Comenzar a Personalizar",V.jsx("svg",{className:"w-6 h-6 group-hover:translate-x-2 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:V.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]}),V.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-600 to-cyan-500 opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]})]})})]})})]})};function vfe(){const[n,e]=ie.useState(!1),t=ie.useRef(null);return ie.useEffect(()=>{const i=()=>{if(t.current){const{scrollTop:s,scrollHeight:o,clientHeight:a}=t.current;s+a>=o-10&&n&&setTimeout(()=>{e(!1)},300)}},r=t.current;if(r)return r.addEventListener("scroll",i),()=>r.removeEventListener("scroll",i)},[n]),ie.useEffect(()=>{if(n){document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.width="100%";const i=document.querySelector(".lenis");i&&i.classList.add("lenis-stopped")}else{document.body.style.overflow="",document.body.style.position="",document.body.style.width="";const i=document.querySelector(".lenis");i&&i.classList.remove("lenis-stopped")}return()=>{document.body.style.overflow="",document.body.style.position="",document.body.style.width=""}},[n]),V.jsxs("section",{className:"relative min-h-screen flex items-center justify-center overflow-hidden bg-black py-20",children:[V.jsx("div",{className:"absolute inset-0 z-0 bg-gradient-to-br from-purple-900/40 via-black to-cyan-900/30"}),V.jsx("div",{className:"absolute inset-0 z-0 bg-[linear-gradient(to_right,rgba(6,182,212,0.15)_1px,transparent_1px),linear-gradient(to_bottom,rgba(168,85,247,0.15)_1px,transparent_1px)] bg-[size:60px_60px] opacity-50"}),V.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[800px] h-[800px] bg-purple-500/10 rounded-full blur-[120px] pointer-events-none"}),V.jsx(by,{mode:"wait",children:n?V.jsxs(Rn.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:50,scale:.95,transition:{duration:.8,ease:[.32,.72,0,1]}},transition:{duration:.5,ease:"easeOut"},className:"fixed inset-0 z-[9999] bg-black",children:[V.jsx("div",{className:"fixed top-24 right-8 z-[10000]",children:V.jsxs(Rn.button,{onClick:()=>e(!1),className:"px-6 py-3 bg-gradient-to-r from-cyan-600 to-purple-600 rounded-lg text-white font-bold flex items-center gap-2",whileHover:{scale:1.1,boxShadow:"0 0 20px rgba(6,182,212,0.8)"},whileTap:{scale:.95},children:[V.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:V.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"CERRAR"]})}),V.jsx("div",{ref:t,className:"w-full h-full overflow-y-scroll pt-16 pointer-events-auto",style:{overscrollBehavior:"contain",WebkitOverflowScrolling:"touch"},"data-lenis-prevent":"true",onWheel:i=>i.stopPropagation(),children:V.jsx(gfe,{})})]},"content"):V.jsxs(Rn.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.5},className:"relative z-10 flex flex-col items-center justify-center w-full max-w-5xl mx-auto px-4 cursor-pointer group",onClick:()=>e(!0),children:[V.jsx(Rn.h2,{className:"text-4xl md:text-6xl lg:text-7xl font-['Orbitron'] font-bold text-center mb-12 leading-tight tracking-wider",style:{background:"linear-gradient(to right, #22d3ee, #c084fc, #e879f9)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",textShadow:"0 0 30px rgba(192, 132, 252, 0.3)"},whileHover:{scale:1.02},transition:{type:"spring",stiffness:300},children:"QU CONTROLADOR MIDI COMPRAR?"}),V.jsxs(Rn.div,{className:"relative inline-flex items-center gap-4 px-10 py-5 bg-black border border-cyan-500/50 rounded-xl text-white font-bold text-xl overflow-hidden",whileHover:{scale:1.05,borderColor:"rgba(34, 211, 238, 1)"},whileTap:{scale:.95},children:[V.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-cyan-900/40 to-purple-900/40 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),V.jsx("span",{className:"relative z-10 text-cyan-400 group-hover:text-white transition-colors",children:"DESCUBRE AQU"}),V.jsx("svg",{className:"relative z-10 w-6 h-6 text-purple-400 group-hover:text-white transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:V.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]})]},"button")})]})}function yfe(){const{scrollY:n}=tfe(),e=av(n,[0,1e3],[0,-200]),t=av(n,[0,1e3],[0,-100]),i=av(n,[0,1e3],[0,-50]),r=av(n,[0,300,600],[.6,.3,.1]),s=av(n,[0,400,800],[.4,.2,.05]);return V.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden",children:[V.jsxs(Rn.div,{style:{y:e,opacity:r},className:"absolute inset-0",children:[V.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-cyan-500/20 rounded-full blur-3xl"}),V.jsx("div",{className:"absolute top-1/3 right-1/4 w-80 h-80 bg-purple-500/20 rounded-full blur-3xl"})]}),V.jsxs(Rn.div,{style:{y:t,opacity:s},className:"absolute inset-0",children:[V.jsx("div",{className:"absolute bottom-1/4 left-1/3 w-72 h-72 bg-fuchsia-500/15 rounded-full blur-3xl"}),V.jsx("div",{className:"absolute top-1/2 right-1/3 w-64 h-64 bg-cyan-500/15 rounded-full blur-3xl"})]}),V.jsx(Rn.div,{style:{y:i},className:"absolute inset-0 opacity-30",children:V.jsx("div",{className:"absolute top-2/3 left-1/2 w-56 h-56 bg-purple-500/10 rounded-full blur-3xl"})})]})}function Pz(n,e,t){return Math.max(n,Math.min(e,t))}class _fe{advance(e){var a;if(!this.isRunning)return;let t=!1;if(this.lerp)this.value=(i=this.value,r=this.to,s=60*this.lerp,o=e,(function(l,u,d){return(1-d)*l+d*u})(i,r,1-Math.exp(-s*o))),Math.round(this.value)===this.to&&(this.value=this.to,t=!0);else{this.currentTime+=e;const l=Pz(0,this.currentTime/this.duration,1);t=l>=1;const u=t?1:this.easing(l);this.value=this.from+(this.to-this.from)*u}var i,r,s,o;(a=this.onUpdate)==null||a.call(this,this.value,t),t&&this.stop()}stop(){this.isRunning=!1}fromTo(e,t,{lerp:i=.1,duration:r=1,easing:s=(l=>l),onStart:o,onUpdate:a}){this.from=this.value=e,this.to=t,this.lerp=i,this.duration=r,this.easing=s,this.currentTime=0,this.isRunning=!0,o==null||o(),this.onUpdate=a}}class xfe{constructor({wrapper:e,content:t,autoResize:i=!0,debounce:r=250}={}){si(this,"resize",()=>{this.onWrapperResize(),this.onContentResize()});si(this,"onWrapperResize",()=>{this.wrapper===window?(this.width=window.innerWidth,this.height=window.innerHeight):(this.width=this.wrapper.clientWidth,this.height=this.wrapper.clientHeight)});si(this,"onContentResize",()=>{this.wrapper===window?(this.scrollHeight=this.content.scrollHeight,this.scrollWidth=this.content.scrollWidth):(this.scrollHeight=this.wrapper.scrollHeight,this.scrollWidth=this.wrapper.scrollWidth)});this.wrapper=e,this.content=t,i&&(this.debouncedResize=(function(s,o){let a;return function(){let l=arguments,u=this;clearTimeout(a),a=setTimeout((function(){s.apply(u,l)}),o)}})(this.resize,r),this.wrapper===window?window.addEventListener("resize",this.debouncedResize,!1):(this.wrapperResizeObserver=new ResizeObserver(this.debouncedResize),this.wrapperResizeObserver.observe(this.wrapper)),this.contentResizeObserver=new ResizeObserver(this.debouncedResize),this.contentResizeObserver.observe(this.content)),this.resize()}destroy(){var e,t;(e=this.wrapperResizeObserver)==null||e.disconnect(),(t=this.contentResizeObserver)==null||t.disconnect(),window.removeEventListener("resize",this.debouncedResize,!1)}get limit(){return{x:this.scrollWidth-this.width,y:this.scrollHeight-this.height}}}class Iz{constructor(){this.events={}}emit(e,...t){let i=this.events[e]||[];for(let r=0,s=i.length;r<s;r++)i[r](...t)}on(e,t){var i;return(i=this.events[e])!=null&&i.push(t)||(this.events[e]=[t]),()=>{var r;this.events[e]=(r=this.events[e])==null?void 0:r.filter((s=>t!==s))}}off(e,t){var i;this.events[e]=(i=this.events[e])==null?void 0:i.filter((r=>t!==r))}destroy(){this.events={}}}const qN=100/6;class wfe{constructor(e,{wheelMultiplier:t=1,touchMultiplier:i=1}){si(this,"onTouchStart",e=>{const{clientX:t,clientY:i}=e.targetTouches?e.targetTouches[0]:e;this.touchStart.x=t,this.touchStart.y=i,this.lastDelta={x:0,y:0},this.emitter.emit("scroll",{deltaX:0,deltaY:0,event:e})});si(this,"onTouchMove",e=>{const{clientX:t,clientY:i}=e.targetTouches?e.targetTouches[0]:e,r=-(t-this.touchStart.x)*this.touchMultiplier,s=-(i-this.touchStart.y)*this.touchMultiplier;this.touchStart.x=t,this.touchStart.y=i,this.lastDelta={x:r,y:s},this.emitter.emit("scroll",{deltaX:r,deltaY:s,event:e})});si(this,"onTouchEnd",e=>{this.emitter.emit("scroll",{deltaX:this.lastDelta.x,deltaY:this.lastDelta.y,event:e})});si(this,"onWheel",e=>{let{deltaX:t,deltaY:i,deltaMode:r}=e;t*=r===1?qN:r===2?this.windowWidth:1,i*=r===1?qN:r===2?this.windowHeight:1,t*=this.wheelMultiplier,i*=this.wheelMultiplier,this.emitter.emit("scroll",{deltaX:t,deltaY:i,event:e})});si(this,"onWindowResize",()=>{this.windowWidth=window.innerWidth,this.windowHeight=window.innerHeight});this.element=e,this.wheelMultiplier=t,this.touchMultiplier=i,this.touchStart={x:null,y:null},this.emitter=new Iz,window.addEventListener("resize",this.onWindowResize,!1),this.onWindowResize(),this.element.addEventListener("wheel",this.onWheel,{passive:!1}),this.element.addEventListener("touchstart",this.onTouchStart,{passive:!1}),this.element.addEventListener("touchmove",this.onTouchMove,{passive:!1}),this.element.addEventListener("touchend",this.onTouchEnd,{passive:!1})}on(e,t){return this.emitter.on(e,t)}destroy(){this.emitter.destroy(),window.removeEventListener("resize",this.onWindowResize,!1),this.element.removeEventListener("wheel",this.onWheel,{passive:!1}),this.element.removeEventListener("touchstart",this.onTouchStart,{passive:!1}),this.element.removeEventListener("touchmove",this.onTouchMove,{passive:!1}),this.element.removeEventListener("touchend",this.onTouchEnd,{passive:!1})}}class Afe{constructor({wrapper:e=window,content:t=document.documentElement,wheelEventsTarget:i=e,eventsTarget:r=i,smoothWheel:s=!0,syncTouch:o=!1,syncTouchLerp:a=.075,touchInertiaMultiplier:l=35,duration:u,easing:d=(C=>Math.min(1,1.001-Math.pow(2,-10*C))),lerp:h=!u&&.1,infinite:p=!1,orientation:v="vertical",gestureOrientation:_="vertical",touchMultiplier:w=1,wheelMultiplier:S=1,autoResize:A=!0,__experimental__naiveDimensions:b=!1}={}){this.__isSmooth=!1,this.__isScrolling=!1,this.__isStopped=!1,this.__isLocked=!1,this.onVirtualScroll=({deltaX:C,deltaY:P,event:k})=>{if(k.ctrlKey)return;const L=k.type.includes("touch"),N=k.type.includes("wheel");if(this.options.syncTouch&&L&&k.type==="touchstart"&&!this.isStopped&&!this.isLocked)return void this.reset();const O=C===0&&P===0,D=this.options.gestureOrientation==="vertical"&&P===0||this.options.gestureOrientation==="horizontal"&&C===0;if(O||D)return;let U=k.composedPath();if(U=U.slice(0,U.indexOf(this.rootElement)),U.find((Q=>{var ue,re,ye,$,oe;return((ue=Q.hasAttribute)===null||ue===void 0?void 0:ue.call(Q,"data-lenis-prevent"))||L&&((re=Q.hasAttribute)===null||re===void 0?void 0:re.call(Q,"data-lenis-prevent-touch"))||N&&((ye=Q.hasAttribute)===null||ye===void 0?void 0:ye.call(Q,"data-lenis-prevent-wheel"))||(($=Q.classList)===null||$===void 0?void 0:$.contains("lenis"))&&!(!((oe=Q.classList)===null||oe===void 0)&&oe.contains("lenis-stopped"))})))return;if(this.isStopped||this.isLocked)return void k.preventDefault();if(this.isSmooth=this.options.syncTouch&&L||this.options.smoothWheel&&N,!this.isSmooth)return this.isScrolling=!1,void this.animate.stop();k.preventDefault();let X=P;this.options.gestureOrientation==="both"?X=Math.abs(P)>Math.abs(C)?P:C:this.options.gestureOrientation==="horizontal"&&(X=C);const Z=L&&this.options.syncTouch,he=L&&k.type==="touchend"&&Math.abs(X)>5;he&&(X=this.velocity*this.options.touchInertiaMultiplier),this.scrollTo(this.targetScroll+X,Object.assign({programmatic:!1},Z?{lerp:he?this.options.syncTouchLerp:1}:{lerp:this.options.lerp,duration:this.options.duration,easing:this.options.easing}))},this.onNativeScroll=()=>{if(!this.__preventNextScrollEvent&&!this.isScrolling){const C=this.animatedScroll;this.animatedScroll=this.targetScroll=this.actualScroll,this.velocity=0,this.direction=Math.sign(this.animatedScroll-C),this.emit()}},window.lenisVersion="1.0.42",e!==document.documentElement&&e!==document.body||(e=window),this.options={wrapper:e,content:t,wheelEventsTarget:i,eventsTarget:r,smoothWheel:s,syncTouch:o,syncTouchLerp:a,touchInertiaMultiplier:l,duration:u,easing:d,lerp:h,infinite:p,gestureOrientation:_,orientation:v,touchMultiplier:w,wheelMultiplier:S,autoResize:A,__experimental__naiveDimensions:b},this.animate=new _fe,this.emitter=new Iz,this.dimensions=new xfe({wrapper:e,content:t,autoResize:A}),this.toggleClassName("lenis",!0),this.velocity=0,this.isLocked=!1,this.isStopped=!1,this.isSmooth=o||s,this.isScrolling=!1,this.targetScroll=this.animatedScroll=this.actualScroll,this.options.wrapper.addEventListener("scroll",this.onNativeScroll,!1),this.virtualScroll=new wfe(r,{touchMultiplier:w,wheelMultiplier:S}),this.virtualScroll.on("scroll",this.onVirtualScroll)}destroy(){this.emitter.destroy(),this.options.wrapper.removeEventListener("scroll",this.onNativeScroll,!1),this.virtualScroll.destroy(),this.dimensions.destroy(),this.toggleClassName("lenis",!1),this.toggleClassName("lenis-smooth",!1),this.toggleClassName("lenis-scrolling",!1),this.toggleClassName("lenis-stopped",!1),this.toggleClassName("lenis-locked",!1)}on(e,t){return this.emitter.on(e,t)}off(e,t){return this.emitter.off(e,t)}setScroll(e){this.isHorizontal?this.rootElement.scrollLeft=e:this.rootElement.scrollTop=e}resize(){this.dimensions.resize()}emit(){this.emitter.emit("scroll",this)}reset(){this.isLocked=!1,this.isScrolling=!1,this.animatedScroll=this.targetScroll=this.actualScroll,this.velocity=0,this.animate.stop()}start(){this.isStopped&&(this.isStopped=!1,this.reset())}stop(){this.isStopped||(this.isStopped=!0,this.animate.stop(),this.reset())}raf(e){const t=e-(this.time||e);this.time=e,this.animate.advance(.001*t)}scrollTo(e,{offset:t=0,immediate:i=!1,lock:r=!1,duration:s=this.options.duration,easing:o=this.options.easing,lerp:a=!s&&this.options.lerp,onComplete:l,force:u=!1,programmatic:d=!0}={}){if(!this.isStopped&&!this.isLocked||u){if(["top","left","start"].includes(e))e=0;else if(["bottom","right","end"].includes(e))e=this.limit;else{let h;if(typeof e=="string"?h=document.querySelector(e):e!=null&&e.nodeType&&(h=e),h){if(this.options.wrapper!==window){const v=this.options.wrapper.getBoundingClientRect();t-=this.isHorizontal?v.left:v.top}const p=h.getBoundingClientRect();e=(this.isHorizontal?p.left:p.top)+this.animatedScroll}}if(typeof e=="number"){if(e+=t,e=Math.round(e),this.options.infinite?d&&(this.targetScroll=this.animatedScroll=this.scroll):e=Pz(0,e,this.limit),i)return this.animatedScroll=this.targetScroll=e,this.setScroll(this.scroll),this.reset(),void(l==null||l(this));if(!d){if(e===this.targetScroll)return;this.targetScroll=e}this.animate.fromTo(this.animatedScroll,e,{duration:s,easing:o,lerp:a,onStart:()=>{r&&(this.isLocked=!0),this.isScrolling=!0},onUpdate:(h,p)=>{this.isScrolling=!0,this.velocity=h-this.animatedScroll,this.direction=Math.sign(this.velocity),this.animatedScroll=h,this.setScroll(this.scroll),d&&(this.targetScroll=h),p||this.emit(),p&&(this.reset(),this.emit(),l==null||l(this),this.__preventNextScrollEvent=!0,requestAnimationFrame((()=>{delete this.__preventNextScrollEvent})))}})}}}get rootElement(){return this.options.wrapper===window?document.documentElement:this.options.wrapper}get limit(){return this.options.__experimental__naiveDimensions?this.isHorizontal?this.rootElement.scrollWidth-this.rootElement.clientWidth:this.rootElement.scrollHeight-this.rootElement.clientHeight:this.dimensions.limit[this.isHorizontal?"x":"y"]}get isHorizontal(){return this.options.orientation==="horizontal"}get actualScroll(){return this.isHorizontal?this.rootElement.scrollLeft:this.rootElement.scrollTop}get scroll(){return this.options.infinite?(e=this.animatedScroll,t=this.limit,(e%t+t)%t):this.animatedScroll;var e,t}get progress(){return this.limit===0?1:this.scroll/this.limit}get isSmooth(){return this.__isSmooth}set isSmooth(e){this.__isSmooth!==e&&(this.__isSmooth=e,this.toggleClassName("lenis-smooth",e))}get isScrolling(){return this.__isScrolling}set isScrolling(e){this.__isScrolling!==e&&(this.__isScrolling=e,this.toggleClassName("lenis-scrolling",e))}get isStopped(){return this.__isStopped}set isStopped(e){this.__isStopped!==e&&(this.__isStopped=e,this.toggleClassName("lenis-stopped",e))}get isLocked(){return this.__isLocked}set isLocked(e){this.__isLocked!==e&&(this.__isLocked=e,this.toggleClassName("lenis-locked",e))}get className(){let e="lenis";return this.isStopped&&(e+=" lenis-stopped"),this.isLocked&&(e+=" lenis-locked"),this.isScrolling&&(e+=" lenis-scrolling"),this.isSmooth&&(e+=" lenis-smooth"),e}toggleClassName(e,t){this.rootElement.classList.toggle(e,t),this.emitter.emit("className change",this)}}function Sfe(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function Efe(n,e,t){return e&&Sfe(n.prototype,e),n}/*!
 * Observer 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var us,zw,Yo,vd,yd,og,Dz,rh,Ov,Lz,$u,cl,Bz,Nz=function(){return us||typeof window<"u"&&(us=window.gsap)&&us.registerPlugin&&us},kz=1,Vm=[],kn=[],Ql=[],Hv=Date.now,dC=function(e,t){return t},Tfe=function(){var e=Ov.core,t=e.bridge||{},i=e._scrollers,r=e._proxies;i.push.apply(i,kn),r.push.apply(r,Ql),kn=i,Ql=r,dC=function(o,a){return t[o](a)}},Rd=function(e,t){return~Ql.indexOf(e)&&Ql[Ql.indexOf(e)+1][t]},Gv=function(e){return!!~Lz.indexOf(e)},Xs=function(e,t,i,r,s){return e.addEventListener(t,i,{passive:r!==!1,capture:!!s})},Js=function(e,t,i,r){return e.removeEventListener(t,i,!!r)},dw="scrollLeft",fw="scrollTop",fC=function(){return $u&&$u.isPressed||kn.cache++},kA=function(e,t){var i=function r(s){if(s||s===0){kz&&(Yo.history.scrollRestoration="manual");var o=$u&&$u.isPressed;s=r.v=Math.round(s)||($u&&$u.iOS?1:0),e(s),r.cacheID=kn.cache,o&&dC("ss",s)}else(t||kn.cache!==r.cacheID||dC("ref"))&&(r.cacheID=kn.cache,r.v=e());return r.v+r.offset};return i.offset=0,e&&i},eo={s:dw,p:"left",p2:"Left",os:"right",os2:"Right",d:"width",d2:"Width",a:"x",sc:kA(function(n){return arguments.length?Yo.scrollTo(n,kr.sc()):Yo.pageXOffset||vd[dw]||yd[dw]||og[dw]||0})},kr={s:fw,p:"top",p2:"Top",os:"bottom",os2:"Bottom",d:"height",d2:"Height",a:"y",op:eo,sc:kA(function(n){return arguments.length?Yo.scrollTo(eo.sc(),n):Yo.pageYOffset||vd[fw]||yd[fw]||og[fw]||0})},_o=function(e,t){return(t&&t._ctx&&t._ctx.selector||us.utils.toArray)(e)[0]||(typeof e=="string"&&us.config().nullTargetWarn!==!1?console.warn("Element not found:",e):null)},Mfe=function(e,t){for(var i=t.length;i--;)if(t[i]===e||t[i].contains(e))return!0;return!1},Hd=function(e,t){var i=t.s,r=t.sc;Gv(e)&&(e=vd.scrollingElement||yd);var s=kn.indexOf(e),o=r===kr.sc?1:2;!~s&&(s=kn.push(e)-1),kn[s+o]||Xs(e,"scroll",fC);var a=kn[s+o],l=a||(kn[s+o]=kA(Rd(e,i),!0)||(Gv(e)?r:kA(function(u){return arguments.length?e[i]=u:e[i]})));return l.target=e,a||(l.smooth=us.getProperty(e,"scrollBehavior")==="smooth"),l},hC=function(e,t,i){var r=e,s=e,o=Hv(),a=o,l=t||50,u=Math.max(500,l*3),d=function(_,w){var S=Hv();w||S-o>l?(s=r,r=_,a=o,o=S):i?r+=_:r=s+(_-s)/(S-a)*(o-a)},h=function(){s=r=i?0:r,a=o=0},p=function(_){var w=a,S=s,A=Hv();return(_||_===0)&&_!==r&&d(_),o===a||A-a>u?0:(r+(i?S:-S))/((i?A:o)-w)*1e3};return{update:d,reset:h,getVelocity:p}},uv=function(e,t){return t&&!e._gsapAllow&&e.preventDefault(),e.changedTouches?e.changedTouches[0]:e},JN=function(e){var t=Math.max.apply(Math,e),i=Math.min.apply(Math,e);return Math.abs(t)>=Math.abs(i)?t:i},Fz=function(){Ov=us.core.globals().ScrollTrigger,Ov&&Ov.core&&Tfe()},Uz=function(e){return us=e||Nz(),!zw&&us&&typeof document<"u"&&document.body&&(Yo=window,vd=document,yd=vd.documentElement,og=vd.body,Lz=[Yo,vd,yd,og],us.utils.clamp,Bz=us.core.context||function(){},rh="onpointerenter"in og?"pointer":"mouse",Dz=cr.isTouch=Yo.matchMedia&&Yo.matchMedia("(hover: none), (pointer: coarse)").matches?1:"ontouchstart"in Yo||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0?2:0,cl=cr.eventTypes=("ontouchstart"in yd?"touchstart,touchmove,touchcancel,touchend":"onpointerdown"in yd?"pointerdown,pointermove,pointercancel,pointerup":"mousedown,mousemove,mouseup,mouseup").split(","),setTimeout(function(){return kz=0},500),Fz(),zw=1),zw};eo.op=kr;kn.cache=0;var cr=(function(){function n(t){this.init(t)}var e=n.prototype;return e.init=function(i){zw||Uz(us)||console.warn("Please gsap.registerPlugin(Observer)"),Ov||Fz();var r=i.tolerance,s=i.dragMinimum,o=i.type,a=i.target,l=i.lineHeight,u=i.debounce,d=i.preventDefault,h=i.onStop,p=i.onStopDelay,v=i.ignore,_=i.wheelSpeed,w=i.event,S=i.onDragStart,A=i.onDragEnd,b=i.onDrag,C=i.onPress,P=i.onRelease,k=i.onRight,L=i.onLeft,N=i.onUp,O=i.onDown,D=i.onChangeX,U=i.onChangeY,X=i.onChange,Z=i.onToggleX,he=i.onToggleY,Q=i.onHover,ue=i.onHoverEnd,re=i.onMove,ye=i.ignoreCheck,$=i.isNormalizer,oe=i.onGestureStart,W=i.onGestureEnd,J=i.onWheel,se=i.onEnable,me=i.onDisable,Se=i.onClick,ke=i.scrollSpeed,Ie=i.capture,ze=i.allowClicks,je=i.lockAxis,at=i.onLockAxis;this.target=a=_o(a)||yd,this.vars=i,v&&(v=us.utils.toArray(v)),r=r||1e-9,s=s||0,_=_||1,ke=ke||1,o=o||"wheel,touch,pointer",u=u!==!1,l||(l=parseFloat(Yo.getComputedStyle(og).lineHeight)||22);var ut,gt,fe,Fe,Be,$e,Oe,xe=this,ct=0,j=0,Y=i.passive||!d&&i.passive!==!1,we=Hd(a,eo),Qe=Hd(a,kr),Ye=we(),qe=Qe(),yt=~o.indexOf("touch")&&!~o.indexOf("pointer")&&cl[0]==="pointerdown",ft=Gv(a),st=a.ownerDocument||vd,Rt=[0,0,0],Ot=[0,0,0],Xe=0,fn=function(){return Xe=Hv()},Ht=function(Mt,Dt){return(xe.event=Mt)&&v&&Mfe(Mt.target,v)||Dt&&yt&&Mt.pointerType!=="touch"||ye&&ye(Mt,Dt)},Kt=function(){xe._vx.reset(),xe._vy.reset(),gt.pause(),h&&h(xe)},xt=function(){var Mt=xe.deltaX=JN(Rt),Dt=xe.deltaY=JN(Ot),ot=Math.abs(Mt)>=r,qt=Math.abs(Dt)>=r;X&&(ot||qt)&&X(xe,Mt,Dt,Rt,Ot),ot&&(k&&xe.deltaX>0&&k(xe),L&&xe.deltaX<0&&L(xe),D&&D(xe),Z&&xe.deltaX<0!=ct<0&&Z(xe),ct=xe.deltaX,Rt[0]=Rt[1]=Rt[2]=0),qt&&(O&&xe.deltaY>0&&O(xe),N&&xe.deltaY<0&&N(xe),U&&U(xe),he&&xe.deltaY<0!=j<0&&he(xe),j=xe.deltaY,Ot[0]=Ot[1]=Ot[2]=0),(Fe||fe)&&(re&&re(xe),fe&&(S&&fe===1&&S(xe),b&&b(xe),fe=0),Fe=!1),$e&&!($e=!1)&&at&&at(xe),Be&&(J(xe),Be=!1),ut=0},Tt=function(Mt,Dt,ot){Rt[ot]+=Mt,Ot[ot]+=Dt,xe._vx.update(Mt),xe._vy.update(Dt),u?ut||(ut=requestAnimationFrame(xt)):xt()},ge=function(Mt,Dt){je&&!Oe&&(xe.axis=Oe=Math.abs(Mt)>Math.abs(Dt)?"x":"y",$e=!0),Oe!=="y"&&(Rt[2]+=Mt,xe._vx.update(Mt,!0)),Oe!=="x"&&(Ot[2]+=Dt,xe._vy.update(Dt,!0)),u?ut||(ut=requestAnimationFrame(xt)):xt()},He=function(Mt){if(!Ht(Mt,1)){Mt=uv(Mt,d);var Dt=Mt.clientX,ot=Mt.clientY,qt=Dt-xe.x,Vt=ot-xe.y,jt=xe.isDragging;xe.x=Dt,xe.y=ot,(jt||(qt||Vt)&&(Math.abs(xe.startX-Dt)>=s||Math.abs(xe.startY-ot)>=s))&&(fe=jt?2:1,jt||(xe.isDragging=!0),ge(qt,Vt))}},rt=xe.onPress=function(Ct){Ht(Ct,1)||Ct&&Ct.button||(xe.axis=Oe=null,gt.pause(),xe.isPressed=!0,Ct=uv(Ct),ct=j=0,xe.startX=xe.x=Ct.clientX,xe.startY=xe.y=Ct.clientY,xe._vx.reset(),xe._vy.reset(),Xs($?a:st,cl[1],He,Y,!0),xe.deltaX=xe.deltaY=0,C&&C(xe))},Ze=xe.onRelease=function(Ct){if(!Ht(Ct,1)){Js($?a:st,cl[1],He,!0);var Mt=!isNaN(xe.y-xe.startY),Dt=xe.isDragging,ot=Dt&&(Math.abs(xe.x-xe.startX)>3||Math.abs(xe.y-xe.startY)>3),qt=uv(Ct);!ot&&Mt&&(xe._vx.reset(),xe._vy.reset(),d&&ze&&us.delayedCall(.08,function(){if(Hv()-Xe>300&&!Ct.defaultPrevented){if(Ct.target.click)Ct.target.click();else if(st.createEvent){var Vt=st.createEvent("MouseEvents");Vt.initMouseEvent("click",!0,!0,Yo,1,qt.screenX,qt.screenY,qt.clientX,qt.clientY,!1,!1,!1,!1,0,null),Ct.target.dispatchEvent(Vt)}}})),xe.isDragging=xe.isGesturing=xe.isPressed=!1,h&&Dt&&!$&&gt.restart(!0),fe&&xt(),A&&Dt&&A(xe),P&&P(xe,ot)}},Me=function(Mt){return Mt.touches&&Mt.touches.length>1&&(xe.isGesturing=!0)&&oe(Mt,xe.isDragging)},pe=function(){return(xe.isGesturing=!1)||W(xe)},tt=function(Mt){if(!Ht(Mt)){var Dt=we(),ot=Qe();Tt((Dt-Ye)*ke,(ot-qe)*ke,1),Ye=Dt,qe=ot,h&&gt.restart(!0)}},dt=function(Mt){if(!Ht(Mt)){Mt=uv(Mt,d),J&&(Be=!0);var Dt=(Mt.deltaMode===1?l:Mt.deltaMode===2?Yo.innerHeight:1)*_;Tt(Mt.deltaX*Dt,Mt.deltaY*Dt,0),h&&!$&&gt.restart(!0)}},zt=function(Mt){if(!Ht(Mt)){var Dt=Mt.clientX,ot=Mt.clientY,qt=Dt-xe.x,Vt=ot-xe.y;xe.x=Dt,xe.y=ot,Fe=!0,h&&gt.restart(!0),(qt||Vt)&&ge(qt,Vt)}},Pt=function(Mt){xe.event=Mt,Q(xe)},rn=function(Mt){xe.event=Mt,ue(xe)},gn=function(Mt){return Ht(Mt)||uv(Mt,d)&&Se(xe)};gt=xe._dc=us.delayedCall(p||.25,Kt).pause(),xe.deltaX=xe.deltaY=0,xe._vx=hC(0,50,!0),xe._vy=hC(0,50,!0),xe.scrollX=we,xe.scrollY=Qe,xe.isDragging=xe.isGesturing=xe.isPressed=!1,Bz(this),xe.enable=function(Ct){return xe.isEnabled||(Xs(ft?st:a,"scroll",fC),o.indexOf("scroll")>=0&&Xs(ft?st:a,"scroll",tt,Y,Ie),o.indexOf("wheel")>=0&&Xs(a,"wheel",dt,Y,Ie),(o.indexOf("touch")>=0&&Dz||o.indexOf("pointer")>=0)&&(Xs(a,cl[0],rt,Y,Ie),Xs(st,cl[2],Ze),Xs(st,cl[3],Ze),ze&&Xs(a,"click",fn,!0,!0),Se&&Xs(a,"click",gn),oe&&Xs(st,"gesturestart",Me),W&&Xs(st,"gestureend",pe),Q&&Xs(a,rh+"enter",Pt),ue&&Xs(a,rh+"leave",rn),re&&Xs(a,rh+"move",zt)),xe.isEnabled=!0,xe.isDragging=xe.isGesturing=xe.isPressed=Fe=fe=!1,xe._vx.reset(),xe._vy.reset(),Ye=we(),qe=Qe(),Ct&&Ct.type&&rt(Ct),se&&se(xe)),xe},xe.disable=function(){xe.isEnabled&&(Vm.filter(function(Ct){return Ct!==xe&&Gv(Ct.target)}).length||Js(ft?st:a,"scroll",fC),xe.isPressed&&(xe._vx.reset(),xe._vy.reset(),Js($?a:st,cl[1],He,!0)),Js(ft?st:a,"scroll",tt,Ie),Js(a,"wheel",dt,Ie),Js(a,cl[0],rt,Ie),Js(st,cl[2],Ze),Js(st,cl[3],Ze),Js(a,"click",fn,!0),Js(a,"click",gn),Js(st,"gesturestart",Me),Js(st,"gestureend",pe),Js(a,rh+"enter",Pt),Js(a,rh+"leave",rn),Js(a,rh+"move",zt),xe.isEnabled=xe.isPressed=xe.isDragging=!1,me&&me(xe))},xe.kill=xe.revert=function(){xe.disable();var Ct=Vm.indexOf(xe);Ct>=0&&Vm.splice(Ct,1),$u===xe&&($u=0)},Vm.push(xe),$&&Gv(a)&&($u=xe),xe.enable(w)},Efe(n,[{key:"velocityX",get:function(){return this._vx.getVelocity()}},{key:"velocityY",get:function(){return this._vy.getVelocity()}}]),n})();cr.version="3.13.0";cr.create=function(n){return new cr(n)};cr.register=Uz;cr.getAll=function(){return Vm.slice()};cr.getById=function(n){return Vm.filter(function(e){return e.vars.id===n})[0]};Nz()&&us.registerPlugin(cr);/*!
 * ScrollTrigger 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var Wt,Rm,Nn,Mi,qo,oi,iP,FA,Ry,zv,gv,hw,Ts,KS,pC,Zs,XN,YN,Pm,Oz,c1,Hz,Qs,mC,Gz,zz,rd,gC,rP,ag,sP,UA,vC,d1,pw=1,Ms=Date.now,f1=Ms(),Ba=0,vv=0,KN=function(e,t,i){var r=Vo(e)&&(e.substr(0,6)==="clamp("||e.indexOf("max")>-1);return i["_"+t+"Clamp"]=r,r?e.substr(6,e.length-7):e},QN=function(e,t){return t&&(!Vo(e)||e.substr(0,6)!=="clamp(")?"clamp("+e+")":e},Cfe=function n(){return vv&&requestAnimationFrame(n)},ZN=function(){return KS=1},$N=function(){return KS=0},Ol=function(e){return e},yv=function(e){return Math.round(e*1e5)/1e5||0},Vz=function(){return typeof window<"u"},Wz=function(){return Wt||Vz()&&(Wt=window.gsap)&&Wt.registerPlugin&&Wt},zh=function(e){return!!~iP.indexOf(e)},qz=function(e){return(e==="Height"?sP:Nn["inner"+e])||qo["client"+e]||oi["client"+e]},Jz=function(e){return Rd(e,"getBoundingClientRect")||(zh(e)?function(){return Xw.width=Nn.innerWidth,Xw.height=sP,Xw}:function(){return Yu(e)})},bfe=function(e,t,i){var r=i.d,s=i.d2,o=i.a;return(o=Rd(e,"getBoundingClientRect"))?function(){return o()[r]}:function(){return(t?qz(s):e["client"+s])||0}},Rfe=function(e,t){return!t||~Ql.indexOf(e)?Jz(e):function(){return Xw}},Wl=function(e,t){var i=t.s,r=t.d2,s=t.d,o=t.a;return Math.max(0,(i="scroll"+r)&&(o=Rd(e,i))?o()-Jz(e)()[s]:zh(e)?(qo[i]||oi[i])-qz(r):e[i]-e["offset"+r])},mw=function(e,t){for(var i=0;i<Pm.length;i+=3)(!t||~t.indexOf(Pm[i+1]))&&e(Pm[i],Pm[i+1],Pm[i+2])},Vo=function(e){return typeof e=="string"},bs=function(e){return typeof e=="function"},_v=function(e){return typeof e=="number"},sh=function(e){return typeof e=="object"},cv=function(e,t,i){return e&&e.progress(t?0:1)&&i&&e.pause()},h1=function(e,t){if(e.enabled){var i=e._ctx?e._ctx.add(function(){return t(e)}):t(e);i&&i.totalTime&&(e.callbackAnimation=i)}},Tm=Math.abs,Xz="left",Yz="top",oP="right",aP="bottom",Rh="width",Ph="height",Vv="Right",Wv="Left",qv="Top",Jv="Bottom",xr="padding",Ea="margin",bg="Width",lP="Height",Nr="px",Ta=function(e){return Nn.getComputedStyle(e)},Pfe=function(e){var t=Ta(e).position;e.style.position=t==="absolute"||t==="fixed"?t:"relative"},jN=function(e,t){for(var i in t)i in e||(e[i]=t[i]);return e},Yu=function(e,t){var i=t&&Ta(e)[pC]!=="matrix(1, 0, 0, 1, 0, 0)"&&Wt.to(e,{x:0,y:0,xPercent:0,yPercent:0,rotation:0,rotationX:0,rotationY:0,scale:1,skewX:0,skewY:0}).progress(1),r=e.getBoundingClientRect();return i&&i.progress(0).kill(),r},OA=function(e,t){var i=t.d2;return e["offset"+i]||e["client"+i]||0},Kz=function(e){var t=[],i=e.labels,r=e.duration(),s;for(s in i)t.push(i[s]/r);return t},Ife=function(e){return function(t){return Wt.utils.snap(Kz(e),t)}},uP=function(e){var t=Wt.utils.snap(e),i=Array.isArray(e)&&e.slice(0).sort(function(r,s){return r-s});return i?function(r,s,o){o===void 0&&(o=.001);var a;if(!s)return t(r);if(s>0){for(r-=o,a=0;a<i.length;a++)if(i[a]>=r)return i[a];return i[a-1]}else for(a=i.length,r+=o;a--;)if(i[a]<=r)return i[a];return i[0]}:function(r,s,o){o===void 0&&(o=.001);var a=t(r);return!s||Math.abs(a-r)<o||a-r<0==s<0?a:t(s<0?r-e:r+e)}},Dfe=function(e){return function(t,i){return uP(Kz(e))(t,i.direction)}},gw=function(e,t,i,r){return i.split(",").forEach(function(s){return e(t,s,r)})},Xr=function(e,t,i,r,s){return e.addEventListener(t,i,{passive:!r,capture:!!s})},Jr=function(e,t,i,r){return e.removeEventListener(t,i,!!r)},vw=function(e,t,i){i=i&&i.wheelHandler,i&&(e(t,"wheel",i),e(t,"touchmove",i))},ek={startColor:"green",endColor:"red",indent:0,fontSize:"16px",fontWeight:"normal"},yw={toggleActions:"play",anticipatePin:0},HA={top:0,left:0,center:.5,bottom:1,right:1},Vw=function(e,t){if(Vo(e)){var i=e.indexOf("="),r=~i?+(e.charAt(i-1)+1)*parseFloat(e.substr(i+1)):0;~i&&(e.indexOf("%")>i&&(r*=t/100),e=e.substr(0,i-1)),e=r+(e in HA?HA[e]*t:~e.indexOf("%")?parseFloat(e)*t/100:parseFloat(e)||0)}return e},_w=function(e,t,i,r,s,o,a,l){var u=s.startColor,d=s.endColor,h=s.fontSize,p=s.indent,v=s.fontWeight,_=Mi.createElement("div"),w=zh(i)||Rd(i,"pinType")==="fixed",S=e.indexOf("scroller")!==-1,A=w?oi:i,b=e.indexOf("start")!==-1,C=b?u:d,P="border-color:"+C+";font-size:"+h+";color:"+C+";font-weight:"+v+";pointer-events:none;white-space:nowrap;font-family:sans-serif,Arial;z-index:1000;padding:4px 8px;border-width:0;border-style:solid;";return P+="position:"+((S||l)&&w?"fixed;":"absolute;"),(S||l||!w)&&(P+=(r===kr?oP:aP)+":"+(o+parseFloat(p))+"px;"),a&&(P+="box-sizing:border-box;text-align:left;width:"+a.offsetWidth+"px;"),_._isStart=b,_.setAttribute("class","gsap-marker-"+e+(t?" marker-"+t:"")),_.style.cssText=P,_.innerText=t||t===0?e+"-"+t:e,A.children[0]?A.insertBefore(_,A.children[0]):A.appendChild(_),_._offset=_["offset"+r.op.d2],Ww(_,0,r,b),_},Ww=function(e,t,i,r){var s={display:"block"},o=i[r?"os2":"p2"],a=i[r?"p2":"os2"];e._isFlipped=r,s[i.a+"Percent"]=r?-100:0,s[i.a]=r?"1px":0,s["border"+o+bg]=1,s["border"+a+bg]=0,s[i.p]=t+"px",Wt.set(e,s)},Ln=[],yC={},Py,tk=function(){return Ms()-Ba>34&&(Py||(Py=requestAnimationFrame(ic)))},Mm=function(){(!Qs||!Qs.isPressed||Qs.startX>oi.clientWidth)&&(kn.cache++,Qs?Py||(Py=requestAnimationFrame(ic)):ic(),Ba||Wh("scrollStart"),Ba=Ms())},p1=function(){zz=Nn.innerWidth,Gz=Nn.innerHeight},xv=function(e){kn.cache++,(e===!0||!Ts&&!Hz&&!Mi.fullscreenElement&&!Mi.webkitFullscreenElement&&(!mC||zz!==Nn.innerWidth||Math.abs(Nn.innerHeight-Gz)>Nn.innerHeight*.25))&&FA.restart(!0)},Vh={},Lfe=[],Qz=function n(){return Jr(Fn,"scrollEnd",n)||vh(!0)},Wh=function(e){return Vh[e]&&Vh[e].map(function(t){return t()})||Lfe},zo=[],Zz=function(e){for(var t=0;t<zo.length;t+=5)(!e||zo[t+4]&&zo[t+4].query===e)&&(zo[t].style.cssText=zo[t+1],zo[t].getBBox&&zo[t].setAttribute("transform",zo[t+2]||""),zo[t+3].uncache=1)},cP=function(e,t){var i;for(Zs=0;Zs<Ln.length;Zs++)i=Ln[Zs],i&&(!t||i._ctx===t)&&(e?i.kill(1):i.revert(!0,!0));UA=!0,t&&Zz(t),t||Wh("revert")},$z=function(e,t){kn.cache++,(t||!$s)&&kn.forEach(function(i){return bs(i)&&i.cacheID++&&(i.rec=0)}),Vo(e)&&(Nn.history.scrollRestoration=rP=e)},$s,Ih=0,nk,Bfe=function(){if(nk!==Ih){var e=nk=Ih;requestAnimationFrame(function(){return e===Ih&&vh(!0)})}},jz=function(){oi.appendChild(ag),sP=!Qs&&ag.offsetHeight||Nn.innerHeight,oi.removeChild(ag)},ik=function(e){return Ry(".gsap-marker-start, .gsap-marker-end, .gsap-marker-scroller-start, .gsap-marker-scroller-end").forEach(function(t){return t.style.display=e?"none":"block"})},vh=function(e,t){if(qo=Mi.documentElement,oi=Mi.body,iP=[Nn,Mi,qo,oi],Ba&&!e&&!UA){Xr(Fn,"scrollEnd",Qz);return}jz(),$s=Fn.isRefreshing=!0,kn.forEach(function(r){return bs(r)&&++r.cacheID&&(r.rec=r())});var i=Wh("refreshInit");Oz&&Fn.sort(),t||cP(),kn.forEach(function(r){bs(r)&&(r.smooth&&(r.target.style.scrollBehavior="auto"),r(0))}),Ln.slice(0).forEach(function(r){return r.refresh()}),UA=!1,Ln.forEach(function(r){if(r._subPinOffset&&r.pin){var s=r.vars.horizontal?"offsetWidth":"offsetHeight",o=r.pin[s];r.revert(!0,1),r.adjustPinSpacing(r.pin[s]-o),r.refresh()}}),vC=1,ik(!0),Ln.forEach(function(r){var s=Wl(r.scroller,r._dir),o=r.vars.end==="max"||r._endClamp&&r.end>s,a=r._startClamp&&r.start>=s;(o||a)&&r.setPositions(a?s-1:r.start,o?Math.max(a?s:r.start+1,s):r.end,!0)}),ik(!1),vC=0,i.forEach(function(r){return r&&r.render&&r.render(-1)}),kn.forEach(function(r){bs(r)&&(r.smooth&&requestAnimationFrame(function(){return r.target.style.scrollBehavior="smooth"}),r.rec&&r(r.rec))}),$z(rP,1),FA.pause(),Ih++,$s=2,ic(2),Ln.forEach(function(r){return bs(r.vars.onRefresh)&&r.vars.onRefresh(r)}),$s=Fn.isRefreshing=!1,Wh("refresh")},_C=0,qw=1,Xv,ic=function(e){if(e===2||!$s&&!UA){Fn.isUpdating=!0,Xv&&Xv.update(0);var t=Ln.length,i=Ms(),r=i-f1>=50,s=t&&Ln[0].scroll();if(qw=_C>s?-1:1,$s||(_C=s),r&&(Ba&&!KS&&i-Ba>200&&(Ba=0,Wh("scrollEnd")),gv=f1,f1=i),qw<0){for(Zs=t;Zs-- >0;)Ln[Zs]&&Ln[Zs].update(0,r);qw=1}else for(Zs=0;Zs<t;Zs++)Ln[Zs]&&Ln[Zs].update(0,r);Fn.isUpdating=!1}Py=0},xC=[Xz,Yz,aP,oP,Ea+Jv,Ea+Vv,Ea+qv,Ea+Wv,"display","flexShrink","float","zIndex","gridColumnStart","gridColumnEnd","gridRowStart","gridRowEnd","gridArea","justifySelf","alignSelf","placeSelf","order"],Jw=xC.concat([Rh,Ph,"boxSizing","max"+bg,"max"+lP,"position",Ea,xr,xr+qv,xr+Vv,xr+Jv,xr+Wv]),Nfe=function(e,t,i){lg(i);var r=e._gsap;if(r.spacerIsNative)lg(r.spacerState);else if(e._gsap.swappedIn){var s=t.parentNode;s&&(s.insertBefore(e,t),s.removeChild(t))}e._gsap.swappedIn=!1},m1=function(e,t,i,r){if(!e._gsap.swappedIn){for(var s=xC.length,o=t.style,a=e.style,l;s--;)l=xC[s],o[l]=i[l];o.position=i.position==="absolute"?"absolute":"relative",i.display==="inline"&&(o.display="inline-block"),a[aP]=a[oP]="auto",o.flexBasis=i.flexBasis||"auto",o.overflow="visible",o.boxSizing="border-box",o[Rh]=OA(e,eo)+Nr,o[Ph]=OA(e,kr)+Nr,o[xr]=a[Ea]=a[Yz]=a[Xz]="0",lg(r),a[Rh]=a["max"+bg]=i[Rh],a[Ph]=a["max"+lP]=i[Ph],a[xr]=i[xr],e.parentNode!==t&&(e.parentNode.insertBefore(t,e),t.appendChild(e)),e._gsap.swappedIn=!0}},kfe=/([A-Z])/g,lg=function(e){if(e){var t=e.t.style,i=e.length,r=0,s,o;for((e.t._gsap||Wt.core.getCache(e.t)).uncache=1;r<i;r+=2)o=e[r+1],s=e[r],o?t[s]=o:t[s]&&t.removeProperty(s.replace(kfe,"-$1").toLowerCase())}},xw=function(e){for(var t=Jw.length,i=e.style,r=[],s=0;s<t;s++)r.push(Jw[s],i[Jw[s]]);return r.t=e,r},Ffe=function(e,t,i){for(var r=[],s=e.length,o=i?8:0,a;o<s;o+=2)a=e[o],r.push(a,a in t?t[a]:e[o+1]);return r.t=e.t,r},Xw={left:0,top:0},rk=function(e,t,i,r,s,o,a,l,u,d,h,p,v,_){bs(e)&&(e=e(l)),Vo(e)&&e.substr(0,3)==="max"&&(e=p+(e.charAt(4)==="="?Vw("0"+e.substr(3),i):0));var w=v?v.time():0,S,A,b;if(v&&v.seek(0),isNaN(e)||(e=+e),_v(e))v&&(e=Wt.utils.mapRange(v.scrollTrigger.start,v.scrollTrigger.end,0,p,e)),a&&Ww(a,i,r,!0);else{bs(t)&&(t=t(l));var C=(e||"0").split(" "),P,k,L,N;b=_o(t,l)||oi,P=Yu(b)||{},(!P||!P.left&&!P.top)&&Ta(b).display==="none"&&(N=b.style.display,b.style.display="block",P=Yu(b),N?b.style.display=N:b.style.removeProperty("display")),k=Vw(C[0],P[r.d]),L=Vw(C[1]||"0",i),e=P[r.p]-u[r.p]-d+k+s-L,a&&Ww(a,L,r,i-L<20||a._isStart&&L>20),i-=i-L}if(_&&(l[_]=e||-.001,e<0&&(e=0)),o){var O=e+i,D=o._isStart;S="scroll"+r.d2,Ww(o,O,r,D&&O>20||!D&&(h?Math.max(oi[S],qo[S]):o.parentNode[S])<=O+1),h&&(u=Yu(a),h&&(o.style[r.op.p]=u[r.op.p]-r.op.m-o._offset+Nr))}return v&&b&&(S=Yu(b),v.seek(p),A=Yu(b),v._caScrollDist=S[r.p]-A[r.p],e=e/v._caScrollDist*p),v&&v.seek(w),v?e:Math.round(e)},Ufe=/(webkit|moz|length|cssText|inset)/i,sk=function(e,t,i,r){if(e.parentNode!==t){var s=e.style,o,a;if(t===oi){e._stOrig=s.cssText,a=Ta(e);for(o in a)!+o&&!Ufe.test(o)&&a[o]&&typeof s[o]=="string"&&o!=="0"&&(s[o]=a[o]);s.top=i,s.left=r}else s.cssText=e._stOrig;Wt.core.getCache(e).uncache=1,t.appendChild(e)}},e4=function(e,t,i){var r=t,s=r;return function(o){var a=Math.round(e());return a!==r&&a!==s&&Math.abs(a-r)>3&&Math.abs(a-s)>3&&(o=a,i&&i()),s=r,r=Math.round(o),r}},ww=function(e,t,i){var r={};r[t.p]="+="+i,Wt.set(e,r)},ok=function(e,t){var i=Hd(e,t),r="_scroll"+t.p2,s=function o(a,l,u,d,h){var p=o.tween,v=l.onComplete,_={};u=u||i();var w=e4(i,u,function(){p.kill(),o.tween=0});return h=d&&h||0,d=d||a-u,p&&p.kill(),l[r]=a,l.inherit=!1,l.modifiers=_,_[r]=function(){return w(u+d*p.ratio+h*p.ratio*p.ratio)},l.onUpdate=function(){kn.cache++,o.tween&&ic()},l.onComplete=function(){o.tween=0,v&&v.call(p)},p=o.tween=Wt.to(e,l),p};return e[r]=i,i.wheelHandler=function(){return s.tween&&s.tween.kill()&&(s.tween=0)},Xr(e,"wheel",i.wheelHandler),Fn.isTouch&&Xr(e,"touchmove",i.wheelHandler),s},Fn=(function(){function n(t,i){Rm||n.register(Wt)||console.warn("Please gsap.registerPlugin(ScrollTrigger)"),gC(this),this.init(t,i)}var e=n.prototype;return e.init=function(i,r){if(this.progress=this.start=0,this.vars&&this.kill(!0,!0),!vv){this.update=this.refresh=this.kill=Ol;return}i=jN(Vo(i)||_v(i)||i.nodeType?{trigger:i}:i,yw);var s=i,o=s.onUpdate,a=s.toggleClass,l=s.id,u=s.onToggle,d=s.onRefresh,h=s.scrub,p=s.trigger,v=s.pin,_=s.pinSpacing,w=s.invalidateOnRefresh,S=s.anticipatePin,A=s.onScrubComplete,b=s.onSnapComplete,C=s.once,P=s.snap,k=s.pinReparent,L=s.pinSpacer,N=s.containerAnimation,O=s.fastScrollEnd,D=s.preventOverlaps,U=i.horizontal||i.containerAnimation&&i.horizontal!==!1?eo:kr,X=!h&&h!==0,Z=_o(i.scroller||Nn),he=Wt.core.getCache(Z),Q=zh(Z),ue=("pinType"in i?i.pinType:Rd(Z,"pinType")||Q&&"fixed")==="fixed",re=[i.onEnter,i.onLeave,i.onEnterBack,i.onLeaveBack],ye=X&&i.toggleActions.split(" "),$="markers"in i?i.markers:yw.markers,oe=Q?0:parseFloat(Ta(Z)["border"+U.p2+bg])||0,W=this,J=i.onRefreshInit&&function(){return i.onRefreshInit(W)},se=bfe(Z,Q,U),me=Rfe(Z,Q),Se=0,ke=0,Ie=0,ze=Hd(Z,U),je,at,ut,gt,fe,Fe,Be,$e,Oe,xe,ct,j,Y,we,Qe,Ye,qe,yt,ft,st,Rt,Ot,Xe,fn,Ht,Kt,xt,Tt,ge,He,rt,Ze,Me,pe,tt,dt,zt,Pt,rn;if(W._startClamp=W._endClamp=!1,W._dir=U,S*=45,W.scroller=Z,W.scroll=N?N.time.bind(N):ze,gt=ze(),W.vars=i,r=r||i.animation,"refreshPriority"in i&&(Oz=1,i.refreshPriority===-9999&&(Xv=W)),he.tweenScroll=he.tweenScroll||{top:ok(Z,kr),left:ok(Z,eo)},W.tweenTo=je=he.tweenScroll[U.p],W.scrubDuration=function(ot){Me=_v(ot)&&ot,Me?Ze?Ze.duration(ot):Ze=Wt.to(r,{ease:"expo",totalProgress:"+=0",inherit:!1,duration:Me,paused:!0,onComplete:function(){return A&&A(W)}}):(Ze&&Ze.progress(1).kill(),Ze=0)},r&&(r.vars.lazy=!1,r._initted&&!W.isReverted||r.vars.immediateRender!==!1&&i.immediateRender!==!1&&r.duration()&&r.render(0,!0,!0),W.animation=r.pause(),r.scrollTrigger=W,W.scrubDuration(h),He=0,l||(l=r.vars.id)),P&&((!sh(P)||P.push)&&(P={snapTo:P}),"scrollBehavior"in oi.style&&Wt.set(Q?[oi,qo]:Z,{scrollBehavior:"auto"}),kn.forEach(function(ot){return bs(ot)&&ot.target===(Q?Mi.scrollingElement||qo:Z)&&(ot.smooth=!1)}),ut=bs(P.snapTo)?P.snapTo:P.snapTo==="labels"?Ife(r):P.snapTo==="labelsDirectional"?Dfe(r):P.directional!==!1?function(ot,qt){return uP(P.snapTo)(ot,Ms()-ke<500?0:qt.direction)}:Wt.utils.snap(P.snapTo),pe=P.duration||{min:.1,max:2},pe=sh(pe)?zv(pe.min,pe.max):zv(pe,pe),tt=Wt.delayedCall(P.delay||Me/2||.1,function(){var ot=ze(),qt=Ms()-ke<500,Vt=je.tween;if((qt||Math.abs(W.getVelocity())<10)&&!Vt&&!KS&&Se!==ot){var jt=(ot-Fe)/we,On=r&&!X?r.totalProgress():jt,tn=qt?0:(On-rt)/(Ms()-gv)*1e3||0,kt=Wt.utils.clamp(-jt,1-jt,Tm(tn/2)*tn/.185),Ai=jt+(P.inertia===!1?0:kt),jn,z,K=P,ve=K.onStart,G=K.onInterrupt,ee=K.onComplete;if(jn=ut(Ai,W),_v(jn)||(jn=Ai),z=Math.max(0,Math.round(Fe+jn*we)),ot<=Be&&ot>=Fe&&z!==ot){if(Vt&&!Vt._initted&&Vt.data<=Tm(z-ot))return;P.inertia===!1&&(kt=jn-jt),je(z,{duration:pe(Tm(Math.max(Tm(Ai-On),Tm(jn-On))*.185/tn/.05||0)),ease:P.ease||"power3",data:Tm(z-ot),onInterrupt:function(){return tt.restart(!0)&&G&&G(W)},onComplete:function(){W.update(),Se=ze(),r&&!X&&(Ze?Ze.resetTo("totalProgress",jn,r._tTime/r._tDur):r.progress(jn)),He=rt=r&&!X?r.totalProgress():W.progress,b&&b(W),ee&&ee(W)}},ot,kt*we,z-ot-kt*we),ve&&ve(W,je.tween)}}else W.isActive&&Se!==ot&&tt.restart(!0)}).pause()),l&&(yC[l]=W),p=W.trigger=_o(p||v!==!0&&v),rn=p&&p._gsap&&p._gsap.stRevert,rn&&(rn=rn(W)),v=v===!0?p:_o(v),Vo(a)&&(a={targets:p,className:a}),v&&(_===!1||_===Ea||(_=!_&&v.parentNode&&v.parentNode.style&&Ta(v.parentNode).display==="flex"?!1:xr),W.pin=v,at=Wt.core.getCache(v),at.spacer?Qe=at.pinState:(L&&(L=_o(L),L&&!L.nodeType&&(L=L.current||L.nativeElement),at.spacerIsNative=!!L,L&&(at.spacerState=xw(L))),at.spacer=yt=L||Mi.createElement("div"),yt.classList.add("pin-spacer"),l&&yt.classList.add("pin-spacer-"+l),at.pinState=Qe=xw(v)),i.force3D!==!1&&Wt.set(v,{force3D:!0}),W.spacer=yt=at.spacer,ge=Ta(v),fn=ge[_+U.os2],st=Wt.getProperty(v),Rt=Wt.quickSetter(v,U.a,Nr),m1(v,yt,ge),qe=xw(v)),$){j=sh($)?jN($,ek):ek,xe=_w("scroller-start",l,Z,U,j,0),ct=_w("scroller-end",l,Z,U,j,0,xe),ft=xe["offset"+U.op.d2];var gn=_o(Rd(Z,"content")||Z);$e=this.markerStart=_w("start",l,gn,U,j,ft,0,N),Oe=this.markerEnd=_w("end",l,gn,U,j,ft,0,N),N&&(Pt=Wt.quickSetter([$e,Oe],U.a,Nr)),!ue&&!(Ql.length&&Rd(Z,"fixedMarkers")===!0)&&(Pfe(Q?oi:Z),Wt.set([xe,ct],{force3D:!0}),Kt=Wt.quickSetter(xe,U.a,Nr),Tt=Wt.quickSetter(ct,U.a,Nr))}if(N){var Ct=N.vars.onUpdate,Mt=N.vars.onUpdateParams;N.eventCallback("onUpdate",function(){W.update(0,0,1),Ct&&Ct.apply(N,Mt||[])})}if(W.previous=function(){return Ln[Ln.indexOf(W)-1]},W.next=function(){return Ln[Ln.indexOf(W)+1]},W.revert=function(ot,qt){if(!qt)return W.kill(!0);var Vt=ot!==!1||!W.enabled,jt=Ts;Vt!==W.isReverted&&(Vt&&(dt=Math.max(ze(),W.scroll.rec||0),Ie=W.progress,zt=r&&r.progress()),$e&&[$e,Oe,xe,ct].forEach(function(On){return On.style.display=Vt?"none":"block"}),Vt&&(Ts=W,W.update(Vt)),v&&(!k||!W.isActive)&&(Vt?Nfe(v,yt,Qe):m1(v,yt,Ta(v),Ht)),Vt||W.update(Vt),Ts=jt,W.isReverted=Vt)},W.refresh=function(ot,qt,Vt,jt){if(!((Ts||!W.enabled)&&!qt)){if(v&&ot&&Ba){Xr(n,"scrollEnd",Qz);return}!$s&&J&&J(W),Ts=W,je.tween&&!Vt&&(je.tween.kill(),je.tween=0),Ze&&Ze.pause(),w&&r&&(r.revert({kill:!1}).invalidate(),r.getChildren&&r.getChildren(!0,!0,!1).forEach(function(ht){return ht.vars.immediateRender&&ht.render(0,!0,!0)})),W.isReverted||W.revert(!0,!0),W._subPinOffset=!1;var On=se(),tn=me(),kt=N?N.duration():Wl(Z,U),Ai=we<=.01||!we,jn=0,z=jt||0,K=sh(Vt)?Vt.end:i.end,ve=i.endTrigger||p,G=sh(Vt)?Vt.start:i.start||(i.start===0||!p?0:v?"0 0":"0 100%"),ee=W.pinnedContainer=i.pinnedContainer&&_o(i.pinnedContainer,W),ne=p&&Math.max(0,Ln.indexOf(W))||0,de=ne,le,be,Le,Ge,Ce,pt,Ke,et,It,Jt,Ut,en,_t;for($&&sh(Vt)&&(en=Wt.getProperty(xe,U.p),_t=Wt.getProperty(ct,U.p));de-- >0;)pt=Ln[de],pt.end||pt.refresh(0,1)||(Ts=W),Ke=pt.pin,Ke&&(Ke===p||Ke===v||Ke===ee)&&!pt.isReverted&&(Jt||(Jt=[]),Jt.unshift(pt),pt.revert(!0,!0)),pt!==Ln[de]&&(ne--,de--);for(bs(G)&&(G=G(W)),G=KN(G,"start",W),Fe=rk(G,p,On,U,ze(),$e,xe,W,tn,oe,ue,kt,N,W._startClamp&&"_startClamp")||(v?-.001:0),bs(K)&&(K=K(W)),Vo(K)&&!K.indexOf("+=")&&(~K.indexOf(" ")?K=(Vo(G)?G.split(" ")[0]:"")+K:(jn=Vw(K.substr(2),On),K=Vo(G)?G:(N?Wt.utils.mapRange(0,N.duration(),N.scrollTrigger.start,N.scrollTrigger.end,Fe):Fe)+jn,ve=p)),K=KN(K,"end",W),Be=Math.max(Fe,rk(K||(ve?"100% 0":kt),ve,On,U,ze()+jn,Oe,ct,W,tn,oe,ue,kt,N,W._endClamp&&"_endClamp"))||-.001,jn=0,de=ne;de--;)pt=Ln[de],Ke=pt.pin,Ke&&pt.start-pt._pinPush<=Fe&&!N&&pt.end>0&&(le=pt.end-(W._startClamp?Math.max(0,pt.start):pt.start),(Ke===p&&pt.start-pt._pinPush<Fe||Ke===ee)&&isNaN(G)&&(jn+=le*(1-pt.progress)),Ke===v&&(z+=le));if(Fe+=jn,Be+=jn,W._startClamp&&(W._startClamp+=jn),W._endClamp&&!$s&&(W._endClamp=Be||-.001,Be=Math.min(Be,Wl(Z,U))),we=Be-Fe||(Fe-=.01)&&.001,Ai&&(Ie=Wt.utils.clamp(0,1,Wt.utils.normalize(Fe,Be,dt))),W._pinPush=z,$e&&jn&&(le={},le[U.a]="+="+jn,ee&&(le[U.p]="-="+ze()),Wt.set([$e,Oe],le)),v&&!(vC&&W.end>=Wl(Z,U)))le=Ta(v),Ge=U===kr,Le=ze(),Ot=parseFloat(st(U.a))+z,!kt&&Be>1&&(Ut=(Q?Mi.scrollingElement||qo:Z).style,Ut={style:Ut,value:Ut["overflow"+U.a.toUpperCase()]},Q&&Ta(oi)["overflow"+U.a.toUpperCase()]!=="scroll"&&(Ut.style["overflow"+U.a.toUpperCase()]="scroll")),m1(v,yt,le),qe=xw(v),be=Yu(v,!0),et=ue&&Hd(Z,Ge?eo:kr)(),_?(Ht=[_+U.os2,we+z+Nr],Ht.t=yt,de=_===xr?OA(v,U)+we+z:0,de&&(Ht.push(U.d,de+Nr),yt.style.flexBasis!=="auto"&&(yt.style.flexBasis=de+Nr)),lg(Ht),ee&&Ln.forEach(function(ht){ht.pin===ee&&ht.vars.pinSpacing!==!1&&(ht._subPinOffset=!0)}),ue&&ze(dt)):(de=OA(v,U),de&&yt.style.flexBasis!=="auto"&&(yt.style.flexBasis=de+Nr)),ue&&(Ce={top:be.top+(Ge?Le-Fe:et)+Nr,left:be.left+(Ge?et:Le-Fe)+Nr,boxSizing:"border-box",position:"fixed"},Ce[Rh]=Ce["max"+bg]=Math.ceil(be.width)+Nr,Ce[Ph]=Ce["max"+lP]=Math.ceil(be.height)+Nr,Ce[Ea]=Ce[Ea+qv]=Ce[Ea+Vv]=Ce[Ea+Jv]=Ce[Ea+Wv]="0",Ce[xr]=le[xr],Ce[xr+qv]=le[xr+qv],Ce[xr+Vv]=le[xr+Vv],Ce[xr+Jv]=le[xr+Jv],Ce[xr+Wv]=le[xr+Wv],Ye=Ffe(Qe,Ce,k),$s&&ze(0)),r?(It=r._initted,c1(1),r.render(r.duration(),!0,!0),Xe=st(U.a)-Ot+we+z,xt=Math.abs(we-Xe)>1,ue&&xt&&Ye.splice(Ye.length-2,2),r.render(0,!0,!0),It||r.invalidate(!0),r.parent||r.totalTime(r.totalTime()),c1(0)):Xe=we,Ut&&(Ut.value?Ut.style["overflow"+U.a.toUpperCase()]=Ut.value:Ut.style.removeProperty("overflow-"+U.a));else if(p&&ze()&&!N)for(be=p.parentNode;be&&be!==oi;)be._pinOffset&&(Fe-=be._pinOffset,Be-=be._pinOffset),be=be.parentNode;Jt&&Jt.forEach(function(ht){return ht.revert(!1,!0)}),W.start=Fe,W.end=Be,gt=fe=$s?dt:ze(),!N&&!$s&&(gt<dt&&ze(dt),W.scroll.rec=0),W.revert(!1,!0),ke=Ms(),tt&&(Se=-1,tt.restart(!0)),Ts=0,r&&X&&(r._initted||zt)&&r.progress()!==zt&&r.progress(zt||0,!0).render(r.time(),!0,!0),(Ai||Ie!==W.progress||N||w||r&&!r._initted)&&(r&&!X&&(r._initted||Ie||r.vars.immediateRender!==!1)&&r.totalProgress(N&&Fe<-.001&&!Ie?Wt.utils.normalize(Fe,Be,0):Ie,!0),W.progress=Ai||(gt-Fe)/we===Ie?0:Ie),v&&_&&(yt._pinOffset=Math.round(W.progress*Xe)),Ze&&Ze.invalidate(),isNaN(en)||(en-=Wt.getProperty(xe,U.p),_t-=Wt.getProperty(ct,U.p),ww(xe,U,en),ww($e,U,en-(jt||0)),ww(ct,U,_t),ww(Oe,U,_t-(jt||0))),Ai&&!$s&&W.update(),d&&!$s&&!Y&&(Y=!0,d(W),Y=!1)}},W.getVelocity=function(){return(ze()-fe)/(Ms()-gv)*1e3||0},W.endAnimation=function(){cv(W.callbackAnimation),r&&(Ze?Ze.progress(1):r.paused()?X||cv(r,W.direction<0,1):cv(r,r.reversed()))},W.labelToScroll=function(ot){return r&&r.labels&&(Fe||W.refresh()||Fe)+r.labels[ot]/r.duration()*we||0},W.getTrailing=function(ot){var qt=Ln.indexOf(W),Vt=W.direction>0?Ln.slice(0,qt).reverse():Ln.slice(qt+1);return(Vo(ot)?Vt.filter(function(jt){return jt.vars.preventOverlaps===ot}):Vt).filter(function(jt){return W.direction>0?jt.end<=Fe:jt.start>=Be})},W.update=function(ot,qt,Vt){if(!(N&&!Vt&&!ot)){var jt=$s===!0?dt:W.scroll(),On=ot?0:(jt-Fe)/we,tn=On<0?0:On>1?1:On||0,kt=W.progress,Ai,jn,z,K,ve,G,ee,ne;if(qt&&(fe=gt,gt=N?ze():jt,P&&(rt=He,He=r&&!X?r.totalProgress():tn)),S&&v&&!Ts&&!pw&&Ba&&(!tn&&Fe<jt+(jt-fe)/(Ms()-gv)*S?tn=1e-4:tn===1&&Be>jt+(jt-fe)/(Ms()-gv)*S&&(tn=.9999)),tn!==kt&&W.enabled){if(Ai=W.isActive=!!tn&&tn<1,jn=!!kt&&kt<1,G=Ai!==jn,ve=G||!!tn!=!!kt,W.direction=tn>kt?1:-1,W.progress=tn,ve&&!Ts&&(z=tn&&!kt?0:tn===1?1:kt===1?2:3,X&&(K=!G&&ye[z+1]!=="none"&&ye[z+1]||ye[z],ne=r&&(K==="complete"||K==="reset"||K in r))),D&&(G||ne)&&(ne||h||!r)&&(bs(D)?D(W):W.getTrailing(D).forEach(function(Le){return Le.endAnimation()})),X||(Ze&&!Ts&&!pw?(Ze._dp._time-Ze._start!==Ze._time&&Ze.render(Ze._dp._time-Ze._start),Ze.resetTo?Ze.resetTo("totalProgress",tn,r._tTime/r._tDur):(Ze.vars.totalProgress=tn,Ze.invalidate().restart())):r&&r.totalProgress(tn,!!(Ts&&(ke||ot)))),v){if(ot&&_&&(yt.style[_+U.os2]=fn),!ue)Rt(yv(Ot+Xe*tn));else if(ve){if(ee=!ot&&tn>kt&&Be+1>jt&&jt+1>=Wl(Z,U),k)if(!ot&&(Ai||ee)){var de=Yu(v,!0),le=jt-Fe;sk(v,oi,de.top+(U===kr?le:0)+Nr,de.left+(U===kr?0:le)+Nr)}else sk(v,yt);lg(Ai||ee?Ye:qe),xt&&tn<1&&Ai||Rt(Ot+(tn===1&&!ee?Xe:0))}}P&&!je.tween&&!Ts&&!pw&&tt.restart(!0),a&&(G||C&&tn&&(tn<1||!d1))&&Ry(a.targets).forEach(function(Le){return Le.classList[Ai||C?"add":"remove"](a.className)}),o&&!X&&!ot&&o(W),ve&&!Ts?(X&&(ne&&(K==="complete"?r.pause().totalProgress(1):K==="reset"?r.restart(!0).pause():K==="restart"?r.restart(!0):r[K]()),o&&o(W)),(G||!d1)&&(u&&G&&h1(W,u),re[z]&&h1(W,re[z]),C&&(tn===1?W.kill(!1,1):re[z]=0),G||(z=tn===1?1:3,re[z]&&h1(W,re[z]))),O&&!Ai&&Math.abs(W.getVelocity())>(_v(O)?O:2500)&&(cv(W.callbackAnimation),Ze?Ze.progress(1):cv(r,K==="reverse"?1:!tn,1))):X&&o&&!Ts&&o(W)}if(Tt){var be=N?jt/N.duration()*(N._caScrollDist||0):jt;Kt(be+(xe._isFlipped?1:0)),Tt(be)}Pt&&Pt(-jt/N.duration()*(N._caScrollDist||0))}},W.enable=function(ot,qt){W.enabled||(W.enabled=!0,Xr(Z,"resize",xv),Q||Xr(Z,"scroll",Mm),J&&Xr(n,"refreshInit",J),ot!==!1&&(W.progress=Ie=0,gt=fe=Se=ze()),qt!==!1&&W.refresh())},W.getTween=function(ot){return ot&&je?je.tween:Ze},W.setPositions=function(ot,qt,Vt,jt){if(N){var On=N.scrollTrigger,tn=N.duration(),kt=On.end-On.start;ot=On.start+kt*ot/tn,qt=On.start+kt*qt/tn}W.refresh(!1,!1,{start:QN(ot,Vt&&!!W._startClamp),end:QN(qt,Vt&&!!W._endClamp)},jt),W.update()},W.adjustPinSpacing=function(ot){if(Ht&&ot){var qt=Ht.indexOf(U.d)+1;Ht[qt]=parseFloat(Ht[qt])+ot+Nr,Ht[1]=parseFloat(Ht[1])+ot+Nr,lg(Ht)}},W.disable=function(ot,qt){if(W.enabled&&(ot!==!1&&W.revert(!0,!0),W.enabled=W.isActive=!1,qt||Ze&&Ze.pause(),dt=0,at&&(at.uncache=1),J&&Jr(n,"refreshInit",J),tt&&(tt.pause(),je.tween&&je.tween.kill()&&(je.tween=0)),!Q)){for(var Vt=Ln.length;Vt--;)if(Ln[Vt].scroller===Z&&Ln[Vt]!==W)return;Jr(Z,"resize",xv),Q||Jr(Z,"scroll",Mm)}},W.kill=function(ot,qt){W.disable(ot,qt),Ze&&!qt&&Ze.kill(),l&&delete yC[l];var Vt=Ln.indexOf(W);Vt>=0&&Ln.splice(Vt,1),Vt===Zs&&qw>0&&Zs--,Vt=0,Ln.forEach(function(jt){return jt.scroller===W.scroller&&(Vt=1)}),Vt||$s||(W.scroll.rec=0),r&&(r.scrollTrigger=null,ot&&r.revert({kill:!1}),qt||r.kill()),$e&&[$e,Oe,xe,ct].forEach(function(jt){return jt.parentNode&&jt.parentNode.removeChild(jt)}),Xv===W&&(Xv=0),v&&(at&&(at.uncache=1),Vt=0,Ln.forEach(function(jt){return jt.pin===v&&Vt++}),Vt||(at.spacer=0)),i.onKill&&i.onKill(W)},Ln.push(W),W.enable(!1,!1),rn&&rn(W),r&&r.add&&!we){var Dt=W.update;W.update=function(){W.update=Dt,kn.cache++,Fe||Be||W.refresh()},Wt.delayedCall(.01,W.update),we=.01,Fe=Be=0}else W.refresh();v&&Bfe()},n.register=function(i){return Rm||(Wt=i||Wz(),Vz()&&window.document&&n.enable(),Rm=vv),Rm},n.defaults=function(i){if(i)for(var r in i)yw[r]=i[r];return yw},n.disable=function(i,r){vv=0,Ln.forEach(function(o){return o[r?"kill":"disable"](i)}),Jr(Nn,"wheel",Mm),Jr(Mi,"scroll",Mm),clearInterval(hw),Jr(Mi,"touchcancel",Ol),Jr(oi,"touchstart",Ol),gw(Jr,Mi,"pointerdown,touchstart,mousedown",ZN),gw(Jr,Mi,"pointerup,touchend,mouseup",$N),FA.kill(),mw(Jr);for(var s=0;s<kn.length;s+=3)vw(Jr,kn[s],kn[s+1]),vw(Jr,kn[s],kn[s+2])},n.enable=function(){if(Nn=window,Mi=document,qo=Mi.documentElement,oi=Mi.body,Wt&&(Ry=Wt.utils.toArray,zv=Wt.utils.clamp,gC=Wt.core.context||Ol,c1=Wt.core.suppressOverwrites||Ol,rP=Nn.history.scrollRestoration||"auto",_C=Nn.pageYOffset||0,Wt.core.globals("ScrollTrigger",n),oi)){vv=1,ag=document.createElement("div"),ag.style.height="100vh",ag.style.position="absolute",jz(),Cfe(),cr.register(Wt),n.isTouch=cr.isTouch,rd=cr.isTouch&&/(iPad|iPhone|iPod|Mac)/g.test(navigator.userAgent),mC=cr.isTouch===1,Xr(Nn,"wheel",Mm),iP=[Nn,Mi,qo,oi],Wt.matchMedia?(n.matchMedia=function(u){var d=Wt.matchMedia(),h;for(h in u)d.add(h,u[h]);return d},Wt.addEventListener("matchMediaInit",function(){return cP()}),Wt.addEventListener("matchMediaRevert",function(){return Zz()}),Wt.addEventListener("matchMedia",function(){vh(0,1),Wh("matchMedia")}),Wt.matchMedia().add("(orientation: portrait)",function(){return p1(),p1})):console.warn("Requires GSAP 3.11.0 or later"),p1(),Xr(Mi,"scroll",Mm);var i=oi.hasAttribute("style"),r=oi.style,s=r.borderTopStyle,o=Wt.core.Animation.prototype,a,l;for(o.revert||Object.defineProperty(o,"revert",{value:function(){return this.time(-.01,!0)}}),r.borderTopStyle="solid",a=Yu(oi),kr.m=Math.round(a.top+kr.sc())||0,eo.m=Math.round(a.left+eo.sc())||0,s?r.borderTopStyle=s:r.removeProperty("border-top-style"),i||(oi.setAttribute("style",""),oi.removeAttribute("style")),hw=setInterval(tk,250),Wt.delayedCall(.5,function(){return pw=0}),Xr(Mi,"touchcancel",Ol),Xr(oi,"touchstart",Ol),gw(Xr,Mi,"pointerdown,touchstart,mousedown",ZN),gw(Xr,Mi,"pointerup,touchend,mouseup",$N),pC=Wt.utils.checkPrefix("transform"),Jw.push(pC),Rm=Ms(),FA=Wt.delayedCall(.2,vh).pause(),Pm=[Mi,"visibilitychange",function(){var u=Nn.innerWidth,d=Nn.innerHeight;Mi.hidden?(XN=u,YN=d):(XN!==u||YN!==d)&&xv()},Mi,"DOMContentLoaded",vh,Nn,"load",vh,Nn,"resize",xv],mw(Xr),Ln.forEach(function(u){return u.enable(0,1)}),l=0;l<kn.length;l+=3)vw(Jr,kn[l],kn[l+1]),vw(Jr,kn[l],kn[l+2])}},n.config=function(i){"limitCallbacks"in i&&(d1=!!i.limitCallbacks);var r=i.syncInterval;r&&clearInterval(hw)||(hw=r)&&setInterval(tk,r),"ignoreMobileResize"in i&&(mC=n.isTouch===1&&i.ignoreMobileResize),"autoRefreshEvents"in i&&(mw(Jr)||mw(Xr,i.autoRefreshEvents||"none"),Hz=(i.autoRefreshEvents+"").indexOf("resize")===-1)},n.scrollerProxy=function(i,r){var s=_o(i),o=kn.indexOf(s),a=zh(s);~o&&kn.splice(o,a?6:2),r&&(a?Ql.unshift(Nn,r,oi,r,qo,r):Ql.unshift(s,r))},n.clearMatchMedia=function(i){Ln.forEach(function(r){return r._ctx&&r._ctx.query===i&&r._ctx.kill(!0,!0)})},n.isInViewport=function(i,r,s){var o=(Vo(i)?_o(i):i).getBoundingClientRect(),a=o[s?Rh:Ph]*r||0;return s?o.right-a>0&&o.left+a<Nn.innerWidth:o.bottom-a>0&&o.top+a<Nn.innerHeight},n.positionInViewport=function(i,r,s){Vo(i)&&(i=_o(i));var o=i.getBoundingClientRect(),a=o[s?Rh:Ph],l=r==null?a/2:r in HA?HA[r]*a:~r.indexOf("%")?parseFloat(r)*a/100:parseFloat(r)||0;return s?(o.left+l)/Nn.innerWidth:(o.top+l)/Nn.innerHeight},n.killAll=function(i){if(Ln.slice(0).forEach(function(s){return s.vars.id!=="ScrollSmoother"&&s.kill()}),i!==!0){var r=Vh.killAll||[];Vh={},r.forEach(function(s){return s()})}},n})();Fn.version="3.13.0";Fn.saveStyles=function(n){return n?Ry(n).forEach(function(e){if(e&&e.style){var t=zo.indexOf(e);t>=0&&zo.splice(t,5),zo.push(e,e.style.cssText,e.getBBox&&e.getAttribute("transform"),Wt.core.getCache(e),gC())}}):zo};Fn.revert=function(n,e){return cP(!n,e)};Fn.create=function(n,e){return new Fn(n,e)};Fn.refresh=function(n){return n?xv(!0):(Rm||Fn.register())&&vh(!0)};Fn.update=function(n){return++kn.cache&&ic(n===!0?2:0)};Fn.clearScrollMemory=$z;Fn.maxScroll=function(n,e){return Wl(n,e?eo:kr)};Fn.getScrollFunc=function(n,e){return Hd(_o(n),e?eo:kr)};Fn.getById=function(n){return yC[n]};Fn.getAll=function(){return Ln.filter(function(n){return n.vars.id!=="ScrollSmoother"})};Fn.isScrolling=function(){return!!Ba};Fn.snapDirectional=uP;Fn.addEventListener=function(n,e){var t=Vh[n]||(Vh[n]=[]);~t.indexOf(e)||t.push(e)};Fn.removeEventListener=function(n,e){var t=Vh[n],i=t&&t.indexOf(e);i>=0&&t.splice(i,1)};Fn.batch=function(n,e){var t=[],i={},r=e.interval||.016,s=e.batchMax||1e9,o=function(u,d){var h=[],p=[],v=Wt.delayedCall(r,function(){d(h,p),h=[],p=[]}).pause();return function(_){h.length||v.restart(!0),h.push(_.trigger),p.push(_),s<=h.length&&v.progress(1)}},a;for(a in e)i[a]=a.substr(0,2)==="on"&&bs(e[a])&&a!=="onRefreshInit"?o(a,e[a]):e[a];return bs(s)&&(s=s(),Xr(Fn,"refresh",function(){return s=e.batchMax()})),Ry(n).forEach(function(l){var u={};for(a in i)u[a]=i[a];u.trigger=l,t.push(Fn.create(u))}),t};var ak=function(e,t,i,r){return t>r?e(r):t<0&&e(0),i>r?(r-t)/(i-t):i<0?t/(t-i):1},g1=function n(e,t){t===!0?e.style.removeProperty("touch-action"):e.style.touchAction=t===!0?"auto":t?"pan-"+t+(cr.isTouch?" pinch-zoom":""):"none",e===qo&&n(oi,t)},Aw={auto:1,scroll:1},Ofe=function(e){var t=e.event,i=e.target,r=e.axis,s=(t.changedTouches?t.changedTouches[0]:t).target,o=s._gsap||Wt.core.getCache(s),a=Ms(),l;if(!o._isScrollT||a-o._isScrollT>2e3){for(;s&&s!==oi&&(s.scrollHeight<=s.clientHeight&&s.scrollWidth<=s.clientWidth||!(Aw[(l=Ta(s)).overflowY]||Aw[l.overflowX]));)s=s.parentNode;o._isScroll=s&&s!==i&&!zh(s)&&(Aw[(l=Ta(s)).overflowY]||Aw[l.overflowX]),o._isScrollT=a}(o._isScroll||r==="x")&&(t.stopPropagation(),t._gsapAllow=!0)},t4=function(e,t,i,r){return cr.create({target:e,capture:!0,debounce:!1,lockAxis:!0,type:t,onWheel:r=r&&Ofe,onPress:r,onDrag:r,onScroll:r,onEnable:function(){return i&&Xr(Mi,cr.eventTypes[0],uk,!1,!0)},onDisable:function(){return Jr(Mi,cr.eventTypes[0],uk,!0)}})},Hfe=/(input|label|select|textarea)/i,lk,uk=function(e){var t=Hfe.test(e.target.tagName);(t||lk)&&(e._gsapAllow=!0,lk=t)},Gfe=function(e){sh(e)||(e={}),e.preventDefault=e.isNormalizer=e.allowClicks=!0,e.type||(e.type="wheel,touch"),e.debounce=!!e.debounce,e.id=e.id||"normalizer";var t=e,i=t.normalizeScrollX,r=t.momentum,s=t.allowNestedScroll,o=t.onRelease,a,l,u=_o(e.target)||qo,d=Wt.core.globals().ScrollSmoother,h=d&&d.get(),p=rd&&(e.content&&_o(e.content)||h&&e.content!==!1&&!h.smooth()&&h.content()),v=Hd(u,kr),_=Hd(u,eo),w=1,S=(cr.isTouch&&Nn.visualViewport?Nn.visualViewport.scale*Nn.visualViewport.width:Nn.outerWidth)/Nn.innerWidth,A=0,b=bs(r)?function(){return r(a)}:function(){return r||2.8},C,P,k=t4(u,e.type,!0,s),L=function(){return P=!1},N=Ol,O=Ol,D=function(){l=Wl(u,kr),O=zv(rd?1:0,l),i&&(N=zv(0,Wl(u,eo))),C=Ih},U=function(){p._gsap.y=yv(parseFloat(p._gsap.y)+v.offset)+"px",p.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+parseFloat(p._gsap.y)+", 0, 1)",v.offset=v.cacheID=0},X=function(){if(P){requestAnimationFrame(L);var $=yv(a.deltaY/2),oe=O(v.v-$);if(p&&oe!==v.v+v.offset){v.offset=oe-v.v;var W=yv((parseFloat(p&&p._gsap.y)||0)-v.offset);p.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+W+", 0, 1)",p._gsap.y=W+"px",v.cacheID=kn.cache,ic()}return!0}v.offset&&U(),P=!0},Z,he,Q,ue,re=function(){D(),Z.isActive()&&Z.vars.scrollY>l&&(v()>l?Z.progress(1)&&v(l):Z.resetTo("scrollY",l))};return p&&Wt.set(p,{y:"+=0"}),e.ignoreCheck=function(ye){return rd&&ye.type==="touchmove"&&X()||w>1.05&&ye.type!=="touchstart"||a.isGesturing||ye.touches&&ye.touches.length>1},e.onPress=function(){P=!1;var ye=w;w=yv((Nn.visualViewport&&Nn.visualViewport.scale||1)/S),Z.pause(),ye!==w&&g1(u,w>1.01?!0:i?!1:"x"),he=_(),Q=v(),D(),C=Ih},e.onRelease=e.onGestureStart=function(ye,$){if(v.offset&&U(),!$)ue.restart(!0);else{kn.cache++;var oe=b(),W,J;i&&(W=_(),J=W+oe*.05*-ye.velocityX/.227,oe*=ak(_,W,J,Wl(u,eo)),Z.vars.scrollX=N(J)),W=v(),J=W+oe*.05*-ye.velocityY/.227,oe*=ak(v,W,J,Wl(u,kr)),Z.vars.scrollY=O(J),Z.invalidate().duration(oe).play(.01),(rd&&Z.vars.scrollY>=l||W>=l-1)&&Wt.to({},{onUpdate:re,duration:oe})}o&&o(ye)},e.onWheel=function(){Z._ts&&Z.pause(),Ms()-A>1e3&&(C=0,A=Ms())},e.onChange=function(ye,$,oe,W,J){if(Ih!==C&&D(),$&&i&&_(N(W[2]===$?he+(ye.startX-ye.x):_()+$-W[1])),oe){v.offset&&U();var se=J[2]===oe,me=se?Q+ye.startY-ye.y:v()+oe-J[1],Se=O(me);se&&me!==Se&&(Q+=Se-me),v(Se)}(oe||$)&&ic()},e.onEnable=function(){g1(u,i?!1:"x"),Fn.addEventListener("refresh",re),Xr(Nn,"resize",re),v.smooth&&(v.target.style.scrollBehavior="auto",v.smooth=_.smooth=!1),k.enable()},e.onDisable=function(){g1(u,!0),Jr(Nn,"resize",re),Fn.removeEventListener("refresh",re),k.kill()},e.lockAxis=e.lockAxis!==!1,a=new cr(e),a.iOS=rd,rd&&!v()&&v(1),rd&&Wt.ticker.add(Ol),ue=a._dc,Z=Wt.to(a,{ease:"power4",paused:!0,inherit:!1,scrollX:i?"+=0.1":"+=0",scrollY:"+=0.1",modifiers:{scrollY:e4(v,v(),function(){return Z.pause()})},onUpdate:ic,onComplete:ue.vars.onComplete}),a};Fn.sort=function(n){if(bs(n))return Ln.sort(n);var e=Nn.pageYOffset||0;return Fn.getAll().forEach(function(t){return t._sortY=t.trigger?e+t.trigger.getBoundingClientRect().top:t.start+Nn.innerHeight}),Ln.sort(n||function(t,i){return(t.vars.refreshPriority||0)*-1e6+(t.vars.containerAnimation?1e6:t._sortY)-((i.vars.containerAnimation?1e6:i._sortY)+(i.vars.refreshPriority||0)*-1e6)})};Fn.observe=function(n){return new cr(n)};Fn.normalizeScroll=function(n){if(typeof n>"u")return Qs;if(n===!0&&Qs)return Qs.enable();if(n===!1){Qs&&Qs.kill(),Qs=n;return}var e=n instanceof cr?n:Gfe(n);return Qs&&Qs.target===e.target&&Qs.kill(),zh(e.target)&&(Qs=e),e};Fn.core={_getVelocityProp:hC,_inputObserver:t4,_scrollers:kn,_proxies:Ql,bridge:{ss:function(){Ba||Wh("scrollStart"),Ba=Ms()},ref:function(){return Ts}}};Wz()&&Wt.registerPlugin(Fn);Mh.registerPlugin(Fn);const zfe=()=>{const[n,e]=ie.useState(null),[t,i]=ie.useState([]),[r,s]=ie.useState("All"),o=a=>{i(l=>l.find(d=>d.id===a.id)?l.map(d=>d.id===a.id?{...d,quantity:d.quantity+1}:d):[...l,{...a,quantity:1}])};return ie.useEffect(()=>{const a=new Afe({duration:1.2,easing:u=>Math.min(1,1.001-Math.pow(2,-10*u)),orientation:"vertical",gestureOrientation:"vertical",smoothWheel:!0,wheelMultiplier:1,touchMultiplier:2,infinite:!1});function l(u){a.raf(u),requestAnimationFrame(l)}return requestAnimationFrame(l),a.on("scroll",Fn.update),Mh.ticker.add(u=>{a.raf(u*1e3)}),Mh.ticker.lagSmoothing(0),()=>{a.destroy(),Mh.ticker.remove(u=>{a.raf(u*1e3)})}},[]),[...Array.from(new Set(rx.map(a=>a.category)))],r==="All"||rx.filter(a=>a.category===r),V.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-teal-900 via-slate-900 to-purple-950 text-white selection:bg-cyan-500 selection:text-black overflow-x-hidden relative",children:[V.jsx(yfe,{}),V.jsxs("div",{className:"fixed inset-0 pointer-events-none z-0",children:[V.jsx("div",{className:"absolute inset-0 bg-grid opacity-20"}),V.jsx("div",{className:"absolute inset-0 plasma-bg"})]}),V.jsxs("div",{className:"relative z-10",children:[V.jsxs("nav",{className:"fixed top-0 left-0 w-full z-40 bg-black/80 backdrop-blur-md border-b border-cyan-900/50 h-16 flex items-center px-6 justify-between",children:[V.jsxs("div",{className:"flex items-center gap-3",children:[V.jsx("img",{src:"/crearttech-3.0/textures/logo.png",alt:"Creart Tech",className:"h-10 w-auto animate-pulse-glow",style:{filter:"drop-shadow(0 0 10px rgba(6,182,212,0.8)) drop-shadow(0 0 20px rgba(168,85,247,0.6))",animation:"breathe-glow 3s ease-in-out infinite"}}),V.jsx("span",{className:"text-2xl font-['Orbitron'] font-bold text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-purple-500",children:"CREART.TECH"})]}),V.jsxs("div",{className:"hidden md:flex items-center gap-8",children:[V.jsx("a",{href:"#home",className:"text-gray-300 hover:text-cyan-400 transition-colors font-medium",children:"Home"}),V.jsx("a",{href:"#build",className:"text-gray-300 hover:text-cyan-400 transition-colors font-medium",children:"Build your own midi controller"}),V.jsx("a",{href:"#guide",className:"text-gray-300 hover:text-cyan-400 transition-colors font-medium",children:"What MIDI controller should I go for?"}),V.jsx("a",{href:"#shop",className:"text-gray-300 hover:text-cyan-400 transition-colors font-medium",children:"Shop"})]}),V.jsxs("div",{className:"flex items-center gap-6",children:[V.jsx("div",{className:"relative group cursor-pointer",children:V.jsxs("span",{className:"text-cyan-400 font-mono group-hover:text-white transition-colors",children:["CART [",t.reduce((a,l)=>a+l.quantity,0),"]"]})}),V.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-800 border border-gray-600"})]})]}),V.jsx(by,{mode:"wait",children:!n&&V.jsxs(Rn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[V.jsx(ofe,{}),V.jsx(afe,{}),V.jsx(vfe,{}),V.jsx(ufe,{}),V.jsx(mfe,{products:rx,onProductClick:e}),V.jsx(ffe,{})]},"all-sections")}),V.jsx(by,{mode:"wait",children:n&&V.jsx(Iee,{product:n,onBack:()=>e(null),onAddToCart:o},"configurator")}),V.jsx(nfe,{})]})]})},n4=document.getElementById("root");if(!n4)throw new Error("Could not find root element to mount to");const Vfe=U4.createRoot(n4);Vfe.render(V.jsx(_d.StrictMode,{children:V.jsx(zfe,{})}));
